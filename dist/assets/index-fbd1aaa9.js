var $s=Object.defineProperty;var Bs=(s,e,i)=>e in s?$s(s,e,{enumerable:!0,configurable:!0,writable:!0,value:i}):s[e]=i;var Br=(s,e,i)=>(Bs(s,typeof e!="symbol"?e+"":e,i),i),xn=(s,e,i)=>{if(!e.has(s))throw TypeError("Cannot "+i)};var _e=(s,e,i)=>(xn(s,e,"read from private field"),i?i.call(s):e.get(s)),Pt=(s,e,i)=>{if(e.has(s))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(s):e.set(s,i)},Ht=(s,e,i,a)=>(xn(s,e,"write to private field"),a?a.call(s,i):e.set(s,i),i);var tn=(s,e,i,a)=>({set _(o){Ht(s,e,o,i)},get _(){return _e(s,e,a)}}),jt=(s,e,i)=>(xn(s,e,"access private method"),i);function _mergeNamespaces(s,e){for(var i=0;i<e.length;i++){const a=e[i];if(typeof a!="string"&&!Array.isArray(a)){for(const o in a)if(o!=="default"&&!(o in s)){const c=Object.getOwnPropertyDescriptor(a,o);c&&Object.defineProperty(s,o,c.get?c:{enumerable:!0,get:()=>a[o]})}}}return Object.freeze(Object.defineProperty(s,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))a(o);new MutationObserver(o=>{for(const c of o)if(c.type==="childList")for(const d of c.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&a(d)}).observe(document,{childList:!0,subtree:!0});function i(o){const c={};return o.integrity&&(c.integrity=o.integrity),o.referrerPolicy&&(c.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?c.credentials="include":o.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function a(o){if(o.ep)return;o.ep=!0;const c=i(o);fetch(o.href,c)}})();function getDefaultExportFromCjs(s){return s&&s.__esModule&&Object.prototype.hasOwnProperty.call(s,"default")?s.default:s}function getAugmentedNamespace(s){if(s.__esModule)return s;var e=s.default;if(typeof e=="function"){var i=function a(){return this instanceof a?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};i.prototype=e.prototype}else i={};return Object.defineProperty(i,"__esModule",{value:!0}),Object.keys(s).forEach(function(a){var o=Object.getOwnPropertyDescriptor(s,a);Object.defineProperty(i,a,o.get?o:{enumerable:!0,get:function(){return s[a]}})}),i}var jsxRuntime={exports:{}},reactJsxRuntime_production_min={},react={exports:{}},react_production_min={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var l$1=Symbol.for("react.element"),n$1=Symbol.for("react.portal"),p$2=Symbol.for("react.fragment"),q$1=Symbol.for("react.strict_mode"),r=Symbol.for("react.profiler"),t=Symbol.for("react.provider"),u=Symbol.for("react.context"),v$1=Symbol.for("react.forward_ref"),w=Symbol.for("react.suspense"),x=Symbol.for("react.memo"),y=Symbol.for("react.lazy"),z$1=Symbol.iterator;function A$1(s){return s===null||typeof s!="object"?null:(s=z$1&&s[z$1]||s["@@iterator"],typeof s=="function"?s:null)}var B$1={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},C$1=Object.assign,D$1={};function E$1(s,e,i){this.props=s,this.context=e,this.refs=D$1,this.updater=i||B$1}E$1.prototype.isReactComponent={};E$1.prototype.setState=function(s,e){if(typeof s!="object"&&typeof s!="function"&&s!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,s,e,"setState")};E$1.prototype.forceUpdate=function(s){this.updater.enqueueForceUpdate(this,s,"forceUpdate")};function F(){}F.prototype=E$1.prototype;function G$1(s,e,i){this.props=s,this.context=e,this.refs=D$1,this.updater=i||B$1}var H$1=G$1.prototype=new F;H$1.constructor=G$1;C$1(H$1,E$1.prototype);H$1.isPureReactComponent=!0;var I$1=Array.isArray,J=Object.prototype.hasOwnProperty,K$1={current:null},L$1={key:!0,ref:!0,__self:!0,__source:!0};function M$1(s,e,i){var a,o={},c=null,d=null;if(e!=null)for(a in e.ref!==void 0&&(d=e.ref),e.key!==void 0&&(c=""+e.key),e)J.call(e,a)&&!L$1.hasOwnProperty(a)&&(o[a]=e[a]);var g=arguments.length-2;if(g===1)o.children=i;else if(1<g){for(var h=Array(g),_=0;_<g;_++)h[_]=arguments[_+2];o.children=h}if(s&&s.defaultProps)for(a in g=s.defaultProps,g)o[a]===void 0&&(o[a]=g[a]);return{$$typeof:l$1,type:s,key:c,ref:d,props:o,_owner:K$1.current}}function N$1(s,e){return{$$typeof:l$1,type:s.type,key:e,ref:s.ref,props:s.props,_owner:s._owner}}function O$1(s){return typeof s=="object"&&s!==null&&s.$$typeof===l$1}function escape$1(s){var e={"=":"=0",":":"=2"};return"$"+s.replace(/[=:]/g,function(i){return e[i]})}var P$1=/\/+/g;function Q$1(s,e){return typeof s=="object"&&s!==null&&s.key!=null?escape$1(""+s.key):e.toString(36)}function R$1(s,e,i,a,o){var c=typeof s;(c==="undefined"||c==="boolean")&&(s=null);var d=!1;if(s===null)d=!0;else switch(c){case"string":case"number":d=!0;break;case"object":switch(s.$$typeof){case l$1:case n$1:d=!0}}if(d)return d=s,o=o(d),s=a===""?"."+Q$1(d,0):a,I$1(o)?(i="",s!=null&&(i=s.replace(P$1,"$&/")+"/"),R$1(o,e,i,"",function(_){return _})):o!=null&&(O$1(o)&&(o=N$1(o,i+(!o.key||d&&d.key===o.key?"":(""+o.key).replace(P$1,"$&/")+"/")+s)),e.push(o)),1;if(d=0,a=a===""?".":a+":",I$1(s))for(var g=0;g<s.length;g++){c=s[g];var h=a+Q$1(c,g);d+=R$1(c,e,i,h,o)}else if(h=A$1(s),typeof h=="function")for(s=h.call(s),g=0;!(c=s.next()).done;)c=c.value,h=a+Q$1(c,g++),d+=R$1(c,e,i,h,o);else if(c==="object")throw e=String(s),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return d}function S$1(s,e,i){if(s==null)return s;var a=[],o=0;return R$1(s,a,"","",function(c){return e.call(i,c,o++)}),a}function T$1(s){if(s._status===-1){var e=s._result;e=e(),e.then(function(i){(s._status===0||s._status===-1)&&(s._status=1,s._result=i)},function(i){(s._status===0||s._status===-1)&&(s._status=2,s._result=i)}),s._status===-1&&(s._status=0,s._result=e)}if(s._status===1)return s._result.default;throw s._result}var U$1={current:null},V$1={transition:null},W$1={ReactCurrentDispatcher:U$1,ReactCurrentBatchConfig:V$1,ReactCurrentOwner:K$1};function X$1(){throw Error("act(...) is not supported in production builds of React.")}react_production_min.Children={map:S$1,forEach:function(s,e,i){S$1(s,function(){e.apply(this,arguments)},i)},count:function(s){var e=0;return S$1(s,function(){e++}),e},toArray:function(s){return S$1(s,function(e){return e})||[]},only:function(s){if(!O$1(s))throw Error("React.Children.only expected to receive a single React element child.");return s}};react_production_min.Component=E$1;react_production_min.Fragment=p$2;react_production_min.Profiler=r;react_production_min.PureComponent=G$1;react_production_min.StrictMode=q$1;react_production_min.Suspense=w;react_production_min.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=W$1;react_production_min.act=X$1;react_production_min.cloneElement=function(s,e,i){if(s==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+s+".");var a=C$1({},s.props),o=s.key,c=s.ref,d=s._owner;if(e!=null){if(e.ref!==void 0&&(c=e.ref,d=K$1.current),e.key!==void 0&&(o=""+e.key),s.type&&s.type.defaultProps)var g=s.type.defaultProps;for(h in e)J.call(e,h)&&!L$1.hasOwnProperty(h)&&(a[h]=e[h]===void 0&&g!==void 0?g[h]:e[h])}var h=arguments.length-2;if(h===1)a.children=i;else if(1<h){g=Array(h);for(var _=0;_<h;_++)g[_]=arguments[_+2];a.children=g}return{$$typeof:l$1,type:s.type,key:o,ref:c,props:a,_owner:d}};react_production_min.createContext=function(s){return s={$$typeof:u,_currentValue:s,_currentValue2:s,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},s.Provider={$$typeof:t,_context:s},s.Consumer=s};react_production_min.createElement=M$1;react_production_min.createFactory=function(s){var e=M$1.bind(null,s);return e.type=s,e};react_production_min.createRef=function(){return{current:null}};react_production_min.forwardRef=function(s){return{$$typeof:v$1,render:s}};react_production_min.isValidElement=O$1;react_production_min.lazy=function(s){return{$$typeof:y,_payload:{_status:-1,_result:s},_init:T$1}};react_production_min.memo=function(s,e){return{$$typeof:x,type:s,compare:e===void 0?null:e}};react_production_min.startTransition=function(s){var e=V$1.transition;V$1.transition={};try{s()}finally{V$1.transition=e}};react_production_min.unstable_act=X$1;react_production_min.useCallback=function(s,e){return U$1.current.useCallback(s,e)};react_production_min.useContext=function(s){return U$1.current.useContext(s)};react_production_min.useDebugValue=function(){};react_production_min.useDeferredValue=function(s){return U$1.current.useDeferredValue(s)};react_production_min.useEffect=function(s,e){return U$1.current.useEffect(s,e)};react_production_min.useId=function(){return U$1.current.useId()};react_production_min.useImperativeHandle=function(s,e,i){return U$1.current.useImperativeHandle(s,e,i)};react_production_min.useInsertionEffect=function(s,e){return U$1.current.useInsertionEffect(s,e)};react_production_min.useLayoutEffect=function(s,e){return U$1.current.useLayoutEffect(s,e)};react_production_min.useMemo=function(s,e){return U$1.current.useMemo(s,e)};react_production_min.useReducer=function(s,e,i){return U$1.current.useReducer(s,e,i)};react_production_min.useRef=function(s){return U$1.current.useRef(s)};react_production_min.useState=function(s){return U$1.current.useState(s)};react_production_min.useSyncExternalStore=function(s,e,i){return U$1.current.useSyncExternalStore(s,e,i)};react_production_min.useTransition=function(){return U$1.current.useTransition()};react_production_min.version="18.3.1";react.exports=react_production_min;var reactExports=react.exports;const React=getDefaultExportFromCjs(reactExports),React$1=_mergeNamespaces({__proto__:null,default:React},[reactExports]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var f=reactExports,k=Symbol.for("react.element"),l=Symbol.for("react.fragment"),m$1=Object.prototype.hasOwnProperty,n=f.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,p$1={key:!0,ref:!0,__self:!0,__source:!0};function q(s,e,i){var a,o={},c=null,d=null;i!==void 0&&(c=""+i),e.key!==void 0&&(c=""+e.key),e.ref!==void 0&&(d=e.ref);for(a in e)m$1.call(e,a)&&!p$1.hasOwnProperty(a)&&(o[a]=e[a]);if(s&&s.defaultProps)for(a in e=s.defaultProps,e)o[a]===void 0&&(o[a]=e[a]);return{$$typeof:k,type:s,key:c,ref:d,props:o,_owner:n.current}}reactJsxRuntime_production_min.Fragment=l;reactJsxRuntime_production_min.jsx=q;reactJsxRuntime_production_min.jsxs=q;jsxRuntime.exports=reactJsxRuntime_production_min;var jsxRuntimeExports=jsxRuntime.exports;const Fragment=jsxRuntimeExports.Fragment,jsx=jsxRuntimeExports.jsx,jsxs=jsxRuntimeExports.jsxs;var client={},reactDom={exports:{}},reactDom_production_min={},scheduler={exports:{}},scheduler_production_min={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(s){function e(At,$t){var Kt=At.length;At.push($t);e:for(;0<Kt;){var nr=Kt-1>>>1,or=At[nr];if(0<o(or,$t))At[nr]=$t,At[Kt]=or,Kt=nr;else break e}}function i(At){return At.length===0?null:At[0]}function a(At){if(At.length===0)return null;var $t=At[0],Kt=At.pop();if(Kt!==$t){At[0]=Kt;e:for(var nr=0,or=At.length,Et=or>>>1;nr<Et;){var lt=2*(nr+1)-1,ht=At[lt],dt=lt+1,gt=At[dt];if(0>o(ht,Kt))dt<or&&0>o(gt,ht)?(At[nr]=gt,At[dt]=Kt,nr=dt):(At[nr]=ht,At[lt]=Kt,nr=lt);else if(dt<or&&0>o(gt,Kt))At[nr]=gt,At[dt]=Kt,nr=dt;else break e}}return $t}function o(At,$t){var Kt=At.sortIndex-$t.sortIndex;return Kt!==0?Kt:At.id-$t.id}if(typeof performance=="object"&&typeof performance.now=="function"){var c=performance;s.unstable_now=function(){return c.now()}}else{var d=Date,g=d.now();s.unstable_now=function(){return d.now()-g}}var h=[],_=[],b=1,rt=null,nt=3,it=!1,ot=!1,ct=!1,tt=typeof setTimeout=="function"?setTimeout:null,$=typeof clearTimeout=="function"?clearTimeout:null,j=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function et(At){for(var $t=i(_);$t!==null;){if($t.callback===null)a(_);else if($t.startTime<=At)a(_),$t.sortIndex=$t.expirationTime,e(h,$t);else break;$t=i(_)}}function ft(At){if(ct=!1,et(At),!ot)if(i(h)!==null)ot=!0,qt(at);else{var $t=i(_);$t!==null&&Yt(ft,$t.startTime-At)}}function at(At,$t){ot=!1,ct&&(ct=!1,$(mt),mt=-1),it=!0;var Kt=nt;try{for(et($t),rt=i(h);rt!==null&&(!(rt.expirationTime>$t)||At&&!_t());){var nr=rt.callback;if(typeof nr=="function"){rt.callback=null,nt=rt.priorityLevel;var or=nr(rt.expirationTime<=$t);$t=s.unstable_now(),typeof or=="function"?rt.callback=or:rt===i(h)&&a(h),et($t)}else a(h);rt=i(h)}if(rt!==null)var Et=!0;else{var lt=i(_);lt!==null&&Yt(ft,lt.startTime-$t),Et=!1}return Et}finally{rt=null,nt=Kt,it=!1}}var ut=!1,yt=null,mt=-1,pt=5,bt=-1;function _t(){return!(s.unstable_now()-bt<pt)}function Nt(){if(yt!==null){var At=s.unstable_now();bt=At;var $t=!0;try{$t=yt(!0,At)}finally{$t?It():(ut=!1,yt=null)}}else ut=!1}var It;if(typeof j=="function")It=function(){j(Nt)};else if(typeof MessageChannel<"u"){var xt=new MessageChannel,Mt=xt.port2;xt.port1.onmessage=Nt,It=function(){Mt.postMessage(null)}}else It=function(){tt(Nt,0)};function qt(At){yt=At,ut||(ut=!0,It())}function Yt(At,$t){mt=tt(function(){At(s.unstable_now())},$t)}s.unstable_IdlePriority=5,s.unstable_ImmediatePriority=1,s.unstable_LowPriority=4,s.unstable_NormalPriority=3,s.unstable_Profiling=null,s.unstable_UserBlockingPriority=2,s.unstable_cancelCallback=function(At){At.callback=null},s.unstable_continueExecution=function(){ot||it||(ot=!0,qt(at))},s.unstable_forceFrameRate=function(At){0>At||125<At?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):pt=0<At?Math.floor(1e3/At):5},s.unstable_getCurrentPriorityLevel=function(){return nt},s.unstable_getFirstCallbackNode=function(){return i(h)},s.unstable_next=function(At){switch(nt){case 1:case 2:case 3:var $t=3;break;default:$t=nt}var Kt=nt;nt=$t;try{return At()}finally{nt=Kt}},s.unstable_pauseExecution=function(){},s.unstable_requestPaint=function(){},s.unstable_runWithPriority=function(At,$t){switch(At){case 1:case 2:case 3:case 4:case 5:break;default:At=3}var Kt=nt;nt=At;try{return $t()}finally{nt=Kt}},s.unstable_scheduleCallback=function(At,$t,Kt){var nr=s.unstable_now();switch(typeof Kt=="object"&&Kt!==null?(Kt=Kt.delay,Kt=typeof Kt=="number"&&0<Kt?nr+Kt:nr):Kt=nr,At){case 1:var or=-1;break;case 2:or=250;break;case 5:or=1073741823;break;case 4:or=1e4;break;default:or=5e3}return or=Kt+or,At={id:b++,callback:$t,priorityLevel:At,startTime:Kt,expirationTime:or,sortIndex:-1},Kt>nr?(At.sortIndex=Kt,e(_,At),i(h)===null&&At===i(_)&&(ct?($(mt),mt=-1):ct=!0,Yt(ft,Kt-nr))):(At.sortIndex=or,e(h,At),ot||it||(ot=!0,qt(at))),At},s.unstable_shouldYield=_t,s.unstable_wrapCallback=function(At){var $t=nt;return function(){var Kt=nt;nt=$t;try{return At.apply(this,arguments)}finally{nt=Kt}}}})(scheduler_production_min);scheduler.exports=scheduler_production_min;var schedulerExports=scheduler.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var aa=reactExports,ca=schedulerExports;function p(s){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+s,i=1;i<arguments.length;i++)e+="&args[]="+encodeURIComponent(arguments[i]);return"Minified React error #"+s+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var da=new Set,ea={};function fa(s,e){ha(s,e),ha(s+"Capture",e)}function ha(s,e){for(ea[s]=e,s=0;s<e.length;s++)da.add(e[s])}var ia=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ja=Object.prototype.hasOwnProperty,ka=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,la={},ma={};function oa(s){return ja.call(ma,s)?!0:ja.call(la,s)?!1:ka.test(s)?ma[s]=!0:(la[s]=!0,!1)}function pa(s,e,i,a){if(i!==null&&i.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return a?!1:i!==null?!i.acceptsBooleans:(s=s.toLowerCase().slice(0,5),s!=="data-"&&s!=="aria-");default:return!1}}function qa(s,e,i,a){if(e===null||typeof e>"u"||pa(s,e,i,a))return!0;if(a)return!1;if(i!==null)switch(i.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function v(s,e,i,a,o,c,d){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=a,this.attributeNamespace=o,this.mustUseProperty=i,this.propertyName=s,this.type=e,this.sanitizeURL=c,this.removeEmptyString=d}var z={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(s){z[s]=new v(s,0,!1,s,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(s){var e=s[0];z[e]=new v(e,1,!1,s[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(s){z[s]=new v(s,2,!1,s.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(s){z[s]=new v(s,2,!1,s,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(s){z[s]=new v(s,3,!1,s.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(s){z[s]=new v(s,3,!0,s,null,!1,!1)});["capture","download"].forEach(function(s){z[s]=new v(s,4,!1,s,null,!1,!1)});["cols","rows","size","span"].forEach(function(s){z[s]=new v(s,6,!1,s,null,!1,!1)});["rowSpan","start"].forEach(function(s){z[s]=new v(s,5,!1,s.toLowerCase(),null,!1,!1)});var ra=/[\-:]([a-z])/g;function sa(s){return s[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(s){var e=s.replace(ra,sa);z[e]=new v(e,1,!1,s,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(s){var e=s.replace(ra,sa);z[e]=new v(e,1,!1,s,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(s){var e=s.replace(ra,sa);z[e]=new v(e,1,!1,s,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(s){z[s]=new v(s,1,!1,s.toLowerCase(),null,!1,!1)});z.xlinkHref=new v("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(s){z[s]=new v(s,1,!1,s.toLowerCase(),null,!0,!0)});function ta(s,e,i,a){var o=z.hasOwnProperty(e)?z[e]:null;(o!==null?o.type!==0:a||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(qa(e,i,o,a)&&(i=null),a||o===null?oa(e)&&(i===null?s.removeAttribute(e):s.setAttribute(e,""+i)):o.mustUseProperty?s[o.propertyName]=i===null?o.type===3?!1:"":i:(e=o.attributeName,a=o.attributeNamespace,i===null?s.removeAttribute(e):(o=o.type,i=o===3||o===4&&i===!0?"":""+i,a?s.setAttributeNS(a,e,i):s.setAttribute(e,i))))}var ua=aa.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,va=Symbol.for("react.element"),wa=Symbol.for("react.portal"),ya=Symbol.for("react.fragment"),za=Symbol.for("react.strict_mode"),Aa=Symbol.for("react.profiler"),Ba=Symbol.for("react.provider"),Ca=Symbol.for("react.context"),Da=Symbol.for("react.forward_ref"),Ea=Symbol.for("react.suspense"),Fa=Symbol.for("react.suspense_list"),Ga=Symbol.for("react.memo"),Ha=Symbol.for("react.lazy"),Ia=Symbol.for("react.offscreen"),Ja=Symbol.iterator;function Ka(s){return s===null||typeof s!="object"?null:(s=Ja&&s[Ja]||s["@@iterator"],typeof s=="function"?s:null)}var A=Object.assign,La;function Ma(s){if(La===void 0)try{throw Error()}catch(i){var e=i.stack.trim().match(/\n( *(at )?)/);La=e&&e[1]||""}return`
`+La+s}var Na=!1;function Oa(s,e){if(!s||Na)return"";Na=!0;var i=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(_){var a=_}Reflect.construct(s,[],e)}else{try{e.call()}catch(_){a=_}s.call(e.prototype)}else{try{throw Error()}catch(_){a=_}s()}}catch(_){if(_&&a&&typeof _.stack=="string"){for(var o=_.stack.split(`
`),c=a.stack.split(`
`),d=o.length-1,g=c.length-1;1<=d&&0<=g&&o[d]!==c[g];)g--;for(;1<=d&&0<=g;d--,g--)if(o[d]!==c[g]){if(d!==1||g!==1)do if(d--,g--,0>g||o[d]!==c[g]){var h=`
`+o[d].replace(" at new "," at ");return s.displayName&&h.includes("<anonymous>")&&(h=h.replace("<anonymous>",s.displayName)),h}while(1<=d&&0<=g);break}}}finally{Na=!1,Error.prepareStackTrace=i}return(s=s?s.displayName||s.name:"")?Ma(s):""}function Pa(s){switch(s.tag){case 5:return Ma(s.type);case 16:return Ma("Lazy");case 13:return Ma("Suspense");case 19:return Ma("SuspenseList");case 0:case 2:case 15:return s=Oa(s.type,!1),s;case 11:return s=Oa(s.type.render,!1),s;case 1:return s=Oa(s.type,!0),s;default:return""}}function Qa(s){if(s==null)return null;if(typeof s=="function")return s.displayName||s.name||null;if(typeof s=="string")return s;switch(s){case ya:return"Fragment";case wa:return"Portal";case Aa:return"Profiler";case za:return"StrictMode";case Ea:return"Suspense";case Fa:return"SuspenseList"}if(typeof s=="object")switch(s.$$typeof){case Ca:return(s.displayName||"Context")+".Consumer";case Ba:return(s._context.displayName||"Context")+".Provider";case Da:var e=s.render;return s=s.displayName,s||(s=e.displayName||e.name||"",s=s!==""?"ForwardRef("+s+")":"ForwardRef"),s;case Ga:return e=s.displayName||null,e!==null?e:Qa(s.type)||"Memo";case Ha:e=s._payload,s=s._init;try{return Qa(s(e))}catch{}}return null}function Ra(s){var e=s.type;switch(s.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return s=e.render,s=s.displayName||s.name||"",e.displayName||(s!==""?"ForwardRef("+s+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Qa(e);case 8:return e===za?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Sa(s){switch(typeof s){case"boolean":case"number":case"string":case"undefined":return s;case"object":return s;default:return""}}function Ta(s){var e=s.type;return(s=s.nodeName)&&s.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function Ua(s){var e=Ta(s)?"checked":"value",i=Object.getOwnPropertyDescriptor(s.constructor.prototype,e),a=""+s[e];if(!s.hasOwnProperty(e)&&typeof i<"u"&&typeof i.get=="function"&&typeof i.set=="function"){var o=i.get,c=i.set;return Object.defineProperty(s,e,{configurable:!0,get:function(){return o.call(this)},set:function(d){a=""+d,c.call(this,d)}}),Object.defineProperty(s,e,{enumerable:i.enumerable}),{getValue:function(){return a},setValue:function(d){a=""+d},stopTracking:function(){s._valueTracker=null,delete s[e]}}}}function Va(s){s._valueTracker||(s._valueTracker=Ua(s))}function Wa(s){if(!s)return!1;var e=s._valueTracker;if(!e)return!0;var i=e.getValue(),a="";return s&&(a=Ta(s)?s.checked?"true":"false":s.value),s=a,s!==i?(e.setValue(s),!0):!1}function Xa(s){if(s=s||(typeof document<"u"?document:void 0),typeof s>"u")return null;try{return s.activeElement||s.body}catch{return s.body}}function Ya(s,e){var i=e.checked;return A({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:i??s._wrapperState.initialChecked})}function Za(s,e){var i=e.defaultValue==null?"":e.defaultValue,a=e.checked!=null?e.checked:e.defaultChecked;i=Sa(e.value!=null?e.value:i),s._wrapperState={initialChecked:a,initialValue:i,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function ab(s,e){e=e.checked,e!=null&&ta(s,"checked",e,!1)}function bb(s,e){ab(s,e);var i=Sa(e.value),a=e.type;if(i!=null)a==="number"?(i===0&&s.value===""||s.value!=i)&&(s.value=""+i):s.value!==""+i&&(s.value=""+i);else if(a==="submit"||a==="reset"){s.removeAttribute("value");return}e.hasOwnProperty("value")?cb(s,e.type,i):e.hasOwnProperty("defaultValue")&&cb(s,e.type,Sa(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(s.defaultChecked=!!e.defaultChecked)}function db(s,e,i){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var a=e.type;if(!(a!=="submit"&&a!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+s._wrapperState.initialValue,i||e===s.value||(s.value=e),s.defaultValue=e}i=s.name,i!==""&&(s.name=""),s.defaultChecked=!!s._wrapperState.initialChecked,i!==""&&(s.name=i)}function cb(s,e,i){(e!=="number"||Xa(s.ownerDocument)!==s)&&(i==null?s.defaultValue=""+s._wrapperState.initialValue:s.defaultValue!==""+i&&(s.defaultValue=""+i))}var eb=Array.isArray;function fb(s,e,i,a){if(s=s.options,e){e={};for(var o=0;o<i.length;o++)e["$"+i[o]]=!0;for(i=0;i<s.length;i++)o=e.hasOwnProperty("$"+s[i].value),s[i].selected!==o&&(s[i].selected=o),o&&a&&(s[i].defaultSelected=!0)}else{for(i=""+Sa(i),e=null,o=0;o<s.length;o++){if(s[o].value===i){s[o].selected=!0,a&&(s[o].defaultSelected=!0);return}e!==null||s[o].disabled||(e=s[o])}e!==null&&(e.selected=!0)}}function gb(s,e){if(e.dangerouslySetInnerHTML!=null)throw Error(p(91));return A({},e,{value:void 0,defaultValue:void 0,children:""+s._wrapperState.initialValue})}function hb(s,e){var i=e.value;if(i==null){if(i=e.children,e=e.defaultValue,i!=null){if(e!=null)throw Error(p(92));if(eb(i)){if(1<i.length)throw Error(p(93));i=i[0]}e=i}e==null&&(e=""),i=e}s._wrapperState={initialValue:Sa(i)}}function ib(s,e){var i=Sa(e.value),a=Sa(e.defaultValue);i!=null&&(i=""+i,i!==s.value&&(s.value=i),e.defaultValue==null&&s.defaultValue!==i&&(s.defaultValue=i)),a!=null&&(s.defaultValue=""+a)}function jb(s){var e=s.textContent;e===s._wrapperState.initialValue&&e!==""&&e!==null&&(s.value=e)}function kb(s){switch(s){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function lb(s,e){return s==null||s==="http://www.w3.org/1999/xhtml"?kb(e):s==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":s}var mb,nb=function(s){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,i,a,o){MSApp.execUnsafeLocalFunction(function(){return s(e,i,a,o)})}:s}(function(s,e){if(s.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in s)s.innerHTML=e;else{for(mb=mb||document.createElement("div"),mb.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=mb.firstChild;s.firstChild;)s.removeChild(s.firstChild);for(;e.firstChild;)s.appendChild(e.firstChild)}});function ob(s,e){if(e){var i=s.firstChild;if(i&&i===s.lastChild&&i.nodeType===3){i.nodeValue=e;return}}s.textContent=e}var pb={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},qb=["Webkit","ms","Moz","O"];Object.keys(pb).forEach(function(s){qb.forEach(function(e){e=e+s.charAt(0).toUpperCase()+s.substring(1),pb[e]=pb[s]})});function rb(s,e,i){return e==null||typeof e=="boolean"||e===""?"":i||typeof e!="number"||e===0||pb.hasOwnProperty(s)&&pb[s]?(""+e).trim():e+"px"}function sb(s,e){s=s.style;for(var i in e)if(e.hasOwnProperty(i)){var a=i.indexOf("--")===0,o=rb(i,e[i],a);i==="float"&&(i="cssFloat"),a?s.setProperty(i,o):s[i]=o}}var tb=A({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ub(s,e){if(e){if(tb[s]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(p(137,s));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(p(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(p(61))}if(e.style!=null&&typeof e.style!="object")throw Error(p(62))}}function vb(s,e){if(s.indexOf("-")===-1)return typeof e.is=="string";switch(s){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var wb=null;function xb(s){return s=s.target||s.srcElement||window,s.correspondingUseElement&&(s=s.correspondingUseElement),s.nodeType===3?s.parentNode:s}var yb=null,zb=null,Ab=null;function Bb(s){if(s=Cb(s)){if(typeof yb!="function")throw Error(p(280));var e=s.stateNode;e&&(e=Db(e),yb(s.stateNode,s.type,e))}}function Eb(s){zb?Ab?Ab.push(s):Ab=[s]:zb=s}function Fb(){if(zb){var s=zb,e=Ab;if(Ab=zb=null,Bb(s),e)for(s=0;s<e.length;s++)Bb(e[s])}}function Gb(s,e){return s(e)}function Hb(){}var Ib=!1;function Jb(s,e,i){if(Ib)return s(e,i);Ib=!0;try{return Gb(s,e,i)}finally{Ib=!1,(zb!==null||Ab!==null)&&(Hb(),Fb())}}function Kb(s,e){var i=s.stateNode;if(i===null)return null;var a=Db(i);if(a===null)return null;i=a[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(a=!a.disabled)||(s=s.type,a=!(s==="button"||s==="input"||s==="select"||s==="textarea")),s=!a;break e;default:s=!1}if(s)return null;if(i&&typeof i!="function")throw Error(p(231,e,typeof i));return i}var Lb=!1;if(ia)try{var Mb={};Object.defineProperty(Mb,"passive",{get:function(){Lb=!0}}),window.addEventListener("test",Mb,Mb),window.removeEventListener("test",Mb,Mb)}catch{Lb=!1}function Nb(s,e,i,a,o,c,d,g,h){var _=Array.prototype.slice.call(arguments,3);try{e.apply(i,_)}catch(b){this.onError(b)}}var Ob=!1,Pb=null,Qb=!1,Rb=null,Sb={onError:function(s){Ob=!0,Pb=s}};function Tb(s,e,i,a,o,c,d,g,h){Ob=!1,Pb=null,Nb.apply(Sb,arguments)}function Ub(s,e,i,a,o,c,d,g,h){if(Tb.apply(this,arguments),Ob){if(Ob){var _=Pb;Ob=!1,Pb=null}else throw Error(p(198));Qb||(Qb=!0,Rb=_)}}function Vb(s){var e=s,i=s;if(s.alternate)for(;e.return;)e=e.return;else{s=e;do e=s,e.flags&4098&&(i=e.return),s=e.return;while(s)}return e.tag===3?i:null}function Wb(s){if(s.tag===13){var e=s.memoizedState;if(e===null&&(s=s.alternate,s!==null&&(e=s.memoizedState)),e!==null)return e.dehydrated}return null}function Xb(s){if(Vb(s)!==s)throw Error(p(188))}function Yb(s){var e=s.alternate;if(!e){if(e=Vb(s),e===null)throw Error(p(188));return e!==s?null:s}for(var i=s,a=e;;){var o=i.return;if(o===null)break;var c=o.alternate;if(c===null){if(a=o.return,a!==null){i=a;continue}break}if(o.child===c.child){for(c=o.child;c;){if(c===i)return Xb(o),s;if(c===a)return Xb(o),e;c=c.sibling}throw Error(p(188))}if(i.return!==a.return)i=o,a=c;else{for(var d=!1,g=o.child;g;){if(g===i){d=!0,i=o,a=c;break}if(g===a){d=!0,a=o,i=c;break}g=g.sibling}if(!d){for(g=c.child;g;){if(g===i){d=!0,i=c,a=o;break}if(g===a){d=!0,a=c,i=o;break}g=g.sibling}if(!d)throw Error(p(189))}}if(i.alternate!==a)throw Error(p(190))}if(i.tag!==3)throw Error(p(188));return i.stateNode.current===i?s:e}function Zb(s){return s=Yb(s),s!==null?$b(s):null}function $b(s){if(s.tag===5||s.tag===6)return s;for(s=s.child;s!==null;){var e=$b(s);if(e!==null)return e;s=s.sibling}return null}var ac=ca.unstable_scheduleCallback,bc=ca.unstable_cancelCallback,cc=ca.unstable_shouldYield,dc=ca.unstable_requestPaint,B=ca.unstable_now,ec=ca.unstable_getCurrentPriorityLevel,fc=ca.unstable_ImmediatePriority,gc=ca.unstable_UserBlockingPriority,hc=ca.unstable_NormalPriority,ic=ca.unstable_LowPriority,jc=ca.unstable_IdlePriority,kc=null,lc=null;function mc(s){if(lc&&typeof lc.onCommitFiberRoot=="function")try{lc.onCommitFiberRoot(kc,s,void 0,(s.current.flags&128)===128)}catch{}}var oc=Math.clz32?Math.clz32:nc,pc=Math.log,qc=Math.LN2;function nc(s){return s>>>=0,s===0?32:31-(pc(s)/qc|0)|0}var rc=64,sc=4194304;function tc(s){switch(s&-s){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return s&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return s}}function uc(s,e){var i=s.pendingLanes;if(i===0)return 0;var a=0,o=s.suspendedLanes,c=s.pingedLanes,d=i&268435455;if(d!==0){var g=d&~o;g!==0?a=tc(g):(c&=d,c!==0&&(a=tc(c)))}else d=i&~o,d!==0?a=tc(d):c!==0&&(a=tc(c));if(a===0)return 0;if(e!==0&&e!==a&&!(e&o)&&(o=a&-a,c=e&-e,o>=c||o===16&&(c&4194240)!==0))return e;if(a&4&&(a|=i&16),e=s.entangledLanes,e!==0)for(s=s.entanglements,e&=a;0<e;)i=31-oc(e),o=1<<i,a|=s[i],e&=~o;return a}function vc(s,e){switch(s){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function wc(s,e){for(var i=s.suspendedLanes,a=s.pingedLanes,o=s.expirationTimes,c=s.pendingLanes;0<c;){var d=31-oc(c),g=1<<d,h=o[d];h===-1?(!(g&i)||g&a)&&(o[d]=vc(g,e)):h<=e&&(s.expiredLanes|=g),c&=~g}}function xc(s){return s=s.pendingLanes&-1073741825,s!==0?s:s&1073741824?1073741824:0}function yc(){var s=rc;return rc<<=1,!(rc&4194240)&&(rc=64),s}function zc(s){for(var e=[],i=0;31>i;i++)e.push(s);return e}function Ac(s,e,i){s.pendingLanes|=e,e!==536870912&&(s.suspendedLanes=0,s.pingedLanes=0),s=s.eventTimes,e=31-oc(e),s[e]=i}function Bc(s,e){var i=s.pendingLanes&~e;s.pendingLanes=e,s.suspendedLanes=0,s.pingedLanes=0,s.expiredLanes&=e,s.mutableReadLanes&=e,s.entangledLanes&=e,e=s.entanglements;var a=s.eventTimes;for(s=s.expirationTimes;0<i;){var o=31-oc(i),c=1<<o;e[o]=0,a[o]=-1,s[o]=-1,i&=~c}}function Cc(s,e){var i=s.entangledLanes|=e;for(s=s.entanglements;i;){var a=31-oc(i),o=1<<a;o&e|s[a]&e&&(s[a]|=e),i&=~o}}var C=0;function Dc(s){return s&=-s,1<s?4<s?s&268435455?16:536870912:4:1}var Ec,Fc,Gc,Hc,Ic,Jc=!1,Kc=[],Lc=null,Mc=null,Nc=null,Oc=new Map,Pc=new Map,Qc=[],Rc="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Sc(s,e){switch(s){case"focusin":case"focusout":Lc=null;break;case"dragenter":case"dragleave":Mc=null;break;case"mouseover":case"mouseout":Nc=null;break;case"pointerover":case"pointerout":Oc.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Pc.delete(e.pointerId)}}function Tc(s,e,i,a,o,c){return s===null||s.nativeEvent!==c?(s={blockedOn:e,domEventName:i,eventSystemFlags:a,nativeEvent:c,targetContainers:[o]},e!==null&&(e=Cb(e),e!==null&&Fc(e)),s):(s.eventSystemFlags|=a,e=s.targetContainers,o!==null&&e.indexOf(o)===-1&&e.push(o),s)}function Uc(s,e,i,a,o){switch(e){case"focusin":return Lc=Tc(Lc,s,e,i,a,o),!0;case"dragenter":return Mc=Tc(Mc,s,e,i,a,o),!0;case"mouseover":return Nc=Tc(Nc,s,e,i,a,o),!0;case"pointerover":var c=o.pointerId;return Oc.set(c,Tc(Oc.get(c)||null,s,e,i,a,o)),!0;case"gotpointercapture":return c=o.pointerId,Pc.set(c,Tc(Pc.get(c)||null,s,e,i,a,o)),!0}return!1}function Vc(s){var e=Wc(s.target);if(e!==null){var i=Vb(e);if(i!==null){if(e=i.tag,e===13){if(e=Wb(i),e!==null){s.blockedOn=e,Ic(s.priority,function(){Gc(i)});return}}else if(e===3&&i.stateNode.current.memoizedState.isDehydrated){s.blockedOn=i.tag===3?i.stateNode.containerInfo:null;return}}}s.blockedOn=null}function Xc(s){if(s.blockedOn!==null)return!1;for(var e=s.targetContainers;0<e.length;){var i=Yc(s.domEventName,s.eventSystemFlags,e[0],s.nativeEvent);if(i===null){i=s.nativeEvent;var a=new i.constructor(i.type,i);wb=a,i.target.dispatchEvent(a),wb=null}else return e=Cb(i),e!==null&&Fc(e),s.blockedOn=i,!1;e.shift()}return!0}function Zc(s,e,i){Xc(s)&&i.delete(e)}function $c(){Jc=!1,Lc!==null&&Xc(Lc)&&(Lc=null),Mc!==null&&Xc(Mc)&&(Mc=null),Nc!==null&&Xc(Nc)&&(Nc=null),Oc.forEach(Zc),Pc.forEach(Zc)}function ad(s,e){s.blockedOn===e&&(s.blockedOn=null,Jc||(Jc=!0,ca.unstable_scheduleCallback(ca.unstable_NormalPriority,$c)))}function bd(s){function e(o){return ad(o,s)}if(0<Kc.length){ad(Kc[0],s);for(var i=1;i<Kc.length;i++){var a=Kc[i];a.blockedOn===s&&(a.blockedOn=null)}}for(Lc!==null&&ad(Lc,s),Mc!==null&&ad(Mc,s),Nc!==null&&ad(Nc,s),Oc.forEach(e),Pc.forEach(e),i=0;i<Qc.length;i++)a=Qc[i],a.blockedOn===s&&(a.blockedOn=null);for(;0<Qc.length&&(i=Qc[0],i.blockedOn===null);)Vc(i),i.blockedOn===null&&Qc.shift()}var cd=ua.ReactCurrentBatchConfig,dd=!0;function ed(s,e,i,a){var o=C,c=cd.transition;cd.transition=null;try{C=1,fd(s,e,i,a)}finally{C=o,cd.transition=c}}function gd(s,e,i,a){var o=C,c=cd.transition;cd.transition=null;try{C=4,fd(s,e,i,a)}finally{C=o,cd.transition=c}}function fd(s,e,i,a){if(dd){var o=Yc(s,e,i,a);if(o===null)hd(s,e,a,id,i),Sc(s,a);else if(Uc(o,s,e,i,a))a.stopPropagation();else if(Sc(s,a),e&4&&-1<Rc.indexOf(s)){for(;o!==null;){var c=Cb(o);if(c!==null&&Ec(c),c=Yc(s,e,i,a),c===null&&hd(s,e,a,id,i),c===o)break;o=c}o!==null&&a.stopPropagation()}else hd(s,e,a,null,i)}}var id=null;function Yc(s,e,i,a){if(id=null,s=xb(a),s=Wc(s),s!==null)if(e=Vb(s),e===null)s=null;else if(i=e.tag,i===13){if(s=Wb(e),s!==null)return s;s=null}else if(i===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;s=null}else e!==s&&(s=null);return id=s,null}function jd(s){switch(s){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(ec()){case fc:return 1;case gc:return 4;case hc:case ic:return 16;case jc:return 536870912;default:return 16}default:return 16}}var kd=null,ld=null,md=null;function nd(){if(md)return md;var s,e=ld,i=e.length,a,o="value"in kd?kd.value:kd.textContent,c=o.length;for(s=0;s<i&&e[s]===o[s];s++);var d=i-s;for(a=1;a<=d&&e[i-a]===o[c-a];a++);return md=o.slice(s,1<a?1-a:void 0)}function od(s){var e=s.keyCode;return"charCode"in s?(s=s.charCode,s===0&&e===13&&(s=13)):s=e,s===10&&(s=13),32<=s||s===13?s:0}function pd(){return!0}function qd(){return!1}function rd(s){function e(i,a,o,c,d){this._reactName=i,this._targetInst=o,this.type=a,this.nativeEvent=c,this.target=d,this.currentTarget=null;for(var g in s)s.hasOwnProperty(g)&&(i=s[g],this[g]=i?i(c):c[g]);return this.isDefaultPrevented=(c.defaultPrevented!=null?c.defaultPrevented:c.returnValue===!1)?pd:qd,this.isPropagationStopped=qd,this}return A(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var i=this.nativeEvent;i&&(i.preventDefault?i.preventDefault():typeof i.returnValue!="unknown"&&(i.returnValue=!1),this.isDefaultPrevented=pd)},stopPropagation:function(){var i=this.nativeEvent;i&&(i.stopPropagation?i.stopPropagation():typeof i.cancelBubble!="unknown"&&(i.cancelBubble=!0),this.isPropagationStopped=pd)},persist:function(){},isPersistent:pd}),e}var sd={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(s){return s.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},td=rd(sd),ud=A({},sd,{view:0,detail:0}),vd=rd(ud),wd,xd,yd,Ad=A({},ud,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:zd,button:0,buttons:0,relatedTarget:function(s){return s.relatedTarget===void 0?s.fromElement===s.srcElement?s.toElement:s.fromElement:s.relatedTarget},movementX:function(s){return"movementX"in s?s.movementX:(s!==yd&&(yd&&s.type==="mousemove"?(wd=s.screenX-yd.screenX,xd=s.screenY-yd.screenY):xd=wd=0,yd=s),wd)},movementY:function(s){return"movementY"in s?s.movementY:xd}}),Bd=rd(Ad),Cd=A({},Ad,{dataTransfer:0}),Dd=rd(Cd),Ed=A({},ud,{relatedTarget:0}),Fd=rd(Ed),Gd=A({},sd,{animationName:0,elapsedTime:0,pseudoElement:0}),Hd=rd(Gd),Id=A({},sd,{clipboardData:function(s){return"clipboardData"in s?s.clipboardData:window.clipboardData}}),Jd=rd(Id),Kd=A({},sd,{data:0}),Ld=rd(Kd),Md={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Nd={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Od={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Pd(s){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(s):(s=Od[s])?!!e[s]:!1}function zd(){return Pd}var Qd=A({},ud,{key:function(s){if(s.key){var e=Md[s.key]||s.key;if(e!=="Unidentified")return e}return s.type==="keypress"?(s=od(s),s===13?"Enter":String.fromCharCode(s)):s.type==="keydown"||s.type==="keyup"?Nd[s.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:zd,charCode:function(s){return s.type==="keypress"?od(s):0},keyCode:function(s){return s.type==="keydown"||s.type==="keyup"?s.keyCode:0},which:function(s){return s.type==="keypress"?od(s):s.type==="keydown"||s.type==="keyup"?s.keyCode:0}}),Rd=rd(Qd),Sd=A({},Ad,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Td=rd(Sd),Ud=A({},ud,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:zd}),Vd=rd(Ud),Wd=A({},sd,{propertyName:0,elapsedTime:0,pseudoElement:0}),Xd=rd(Wd),Yd=A({},Ad,{deltaX:function(s){return"deltaX"in s?s.deltaX:"wheelDeltaX"in s?-s.wheelDeltaX:0},deltaY:function(s){return"deltaY"in s?s.deltaY:"wheelDeltaY"in s?-s.wheelDeltaY:"wheelDelta"in s?-s.wheelDelta:0},deltaZ:0,deltaMode:0}),Zd=rd(Yd),$d=[9,13,27,32],ae=ia&&"CompositionEvent"in window,be=null;ia&&"documentMode"in document&&(be=document.documentMode);var ce=ia&&"TextEvent"in window&&!be,de=ia&&(!ae||be&&8<be&&11>=be),ee=String.fromCharCode(32),fe=!1;function ge(s,e){switch(s){case"keyup":return $d.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function he(s){return s=s.detail,typeof s=="object"&&"data"in s?s.data:null}var ie=!1;function je(s,e){switch(s){case"compositionend":return he(e);case"keypress":return e.which!==32?null:(fe=!0,ee);case"textInput":return s=e.data,s===ee&&fe?null:s;default:return null}}function ke(s,e){if(ie)return s==="compositionend"||!ae&&ge(s,e)?(s=nd(),md=ld=kd=null,ie=!1,s):null;switch(s){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return de&&e.locale!=="ko"?null:e.data;default:return null}}var le={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function me(s){var e=s&&s.nodeName&&s.nodeName.toLowerCase();return e==="input"?!!le[s.type]:e==="textarea"}function ne(s,e,i,a){Eb(a),e=oe(e,"onChange"),0<e.length&&(i=new td("onChange","change",null,i,a),s.push({event:i,listeners:e}))}var pe=null,qe=null;function re(s){se(s,0)}function te(s){var e=ue(s);if(Wa(e))return s}function ve(s,e){if(s==="change")return e}var we=!1;if(ia){var xe;if(ia){var ye="oninput"in document;if(!ye){var ze=document.createElement("div");ze.setAttribute("oninput","return;"),ye=typeof ze.oninput=="function"}xe=ye}else xe=!1;we=xe&&(!document.documentMode||9<document.documentMode)}function Ae(){pe&&(pe.detachEvent("onpropertychange",Be),qe=pe=null)}function Be(s){if(s.propertyName==="value"&&te(qe)){var e=[];ne(e,qe,s,xb(s)),Jb(re,e)}}function Ce(s,e,i){s==="focusin"?(Ae(),pe=e,qe=i,pe.attachEvent("onpropertychange",Be)):s==="focusout"&&Ae()}function De(s){if(s==="selectionchange"||s==="keyup"||s==="keydown")return te(qe)}function Ee(s,e){if(s==="click")return te(e)}function Fe(s,e){if(s==="input"||s==="change")return te(e)}function Ge(s,e){return s===e&&(s!==0||1/s===1/e)||s!==s&&e!==e}var He=typeof Object.is=="function"?Object.is:Ge;function Ie(s,e){if(He(s,e))return!0;if(typeof s!="object"||s===null||typeof e!="object"||e===null)return!1;var i=Object.keys(s),a=Object.keys(e);if(i.length!==a.length)return!1;for(a=0;a<i.length;a++){var o=i[a];if(!ja.call(e,o)||!He(s[o],e[o]))return!1}return!0}function Je(s){for(;s&&s.firstChild;)s=s.firstChild;return s}function Ke(s,e){var i=Je(s);s=0;for(var a;i;){if(i.nodeType===3){if(a=s+i.textContent.length,s<=e&&a>=e)return{node:i,offset:e-s};s=a}e:{for(;i;){if(i.nextSibling){i=i.nextSibling;break e}i=i.parentNode}i=void 0}i=Je(i)}}function Le(s,e){return s&&e?s===e?!0:s&&s.nodeType===3?!1:e&&e.nodeType===3?Le(s,e.parentNode):"contains"in s?s.contains(e):s.compareDocumentPosition?!!(s.compareDocumentPosition(e)&16):!1:!1}function Me(){for(var s=window,e=Xa();e instanceof s.HTMLIFrameElement;){try{var i=typeof e.contentWindow.location.href=="string"}catch{i=!1}if(i)s=e.contentWindow;else break;e=Xa(s.document)}return e}function Ne(s){var e=s&&s.nodeName&&s.nodeName.toLowerCase();return e&&(e==="input"&&(s.type==="text"||s.type==="search"||s.type==="tel"||s.type==="url"||s.type==="password")||e==="textarea"||s.contentEditable==="true")}function Oe(s){var e=Me(),i=s.focusedElem,a=s.selectionRange;if(e!==i&&i&&i.ownerDocument&&Le(i.ownerDocument.documentElement,i)){if(a!==null&&Ne(i)){if(e=a.start,s=a.end,s===void 0&&(s=e),"selectionStart"in i)i.selectionStart=e,i.selectionEnd=Math.min(s,i.value.length);else if(s=(e=i.ownerDocument||document)&&e.defaultView||window,s.getSelection){s=s.getSelection();var o=i.textContent.length,c=Math.min(a.start,o);a=a.end===void 0?c:Math.min(a.end,o),!s.extend&&c>a&&(o=a,a=c,c=o),o=Ke(i,c);var d=Ke(i,a);o&&d&&(s.rangeCount!==1||s.anchorNode!==o.node||s.anchorOffset!==o.offset||s.focusNode!==d.node||s.focusOffset!==d.offset)&&(e=e.createRange(),e.setStart(o.node,o.offset),s.removeAllRanges(),c>a?(s.addRange(e),s.extend(d.node,d.offset)):(e.setEnd(d.node,d.offset),s.addRange(e)))}}for(e=[],s=i;s=s.parentNode;)s.nodeType===1&&e.push({element:s,left:s.scrollLeft,top:s.scrollTop});for(typeof i.focus=="function"&&i.focus(),i=0;i<e.length;i++)s=e[i],s.element.scrollLeft=s.left,s.element.scrollTop=s.top}}var Pe=ia&&"documentMode"in document&&11>=document.documentMode,Qe=null,Re=null,Se=null,Te=!1;function Ue(s,e,i){var a=i.window===i?i.document:i.nodeType===9?i:i.ownerDocument;Te||Qe==null||Qe!==Xa(a)||(a=Qe,"selectionStart"in a&&Ne(a)?a={start:a.selectionStart,end:a.selectionEnd}:(a=(a.ownerDocument&&a.ownerDocument.defaultView||window).getSelection(),a={anchorNode:a.anchorNode,anchorOffset:a.anchorOffset,focusNode:a.focusNode,focusOffset:a.focusOffset}),Se&&Ie(Se,a)||(Se=a,a=oe(Re,"onSelect"),0<a.length&&(e=new td("onSelect","select",null,e,i),s.push({event:e,listeners:a}),e.target=Qe)))}function Ve(s,e){var i={};return i[s.toLowerCase()]=e.toLowerCase(),i["Webkit"+s]="webkit"+e,i["Moz"+s]="moz"+e,i}var We={animationend:Ve("Animation","AnimationEnd"),animationiteration:Ve("Animation","AnimationIteration"),animationstart:Ve("Animation","AnimationStart"),transitionend:Ve("Transition","TransitionEnd")},Xe={},Ye={};ia&&(Ye=document.createElement("div").style,"AnimationEvent"in window||(delete We.animationend.animation,delete We.animationiteration.animation,delete We.animationstart.animation),"TransitionEvent"in window||delete We.transitionend.transition);function Ze(s){if(Xe[s])return Xe[s];if(!We[s])return s;var e=We[s],i;for(i in e)if(e.hasOwnProperty(i)&&i in Ye)return Xe[s]=e[i];return s}var $e=Ze("animationend"),af=Ze("animationiteration"),bf=Ze("animationstart"),cf=Ze("transitionend"),df=new Map,ef="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ff(s,e){df.set(s,e),fa(e,[s])}for(var gf=0;gf<ef.length;gf++){var hf=ef[gf],jf=hf.toLowerCase(),kf=hf[0].toUpperCase()+hf.slice(1);ff(jf,"on"+kf)}ff($e,"onAnimationEnd");ff(af,"onAnimationIteration");ff(bf,"onAnimationStart");ff("dblclick","onDoubleClick");ff("focusin","onFocus");ff("focusout","onBlur");ff(cf,"onTransitionEnd");ha("onMouseEnter",["mouseout","mouseover"]);ha("onMouseLeave",["mouseout","mouseover"]);ha("onPointerEnter",["pointerout","pointerover"]);ha("onPointerLeave",["pointerout","pointerover"]);fa("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));fa("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));fa("onBeforeInput",["compositionend","keypress","textInput","paste"]);fa("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));fa("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));fa("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var lf="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),mf=new Set("cancel close invalid load scroll toggle".split(" ").concat(lf));function nf(s,e,i){var a=s.type||"unknown-event";s.currentTarget=i,Ub(a,e,void 0,s),s.currentTarget=null}function se(s,e){e=(e&4)!==0;for(var i=0;i<s.length;i++){var a=s[i],o=a.event;a=a.listeners;e:{var c=void 0;if(e)for(var d=a.length-1;0<=d;d--){var g=a[d],h=g.instance,_=g.currentTarget;if(g=g.listener,h!==c&&o.isPropagationStopped())break e;nf(o,g,_),c=h}else for(d=0;d<a.length;d++){if(g=a[d],h=g.instance,_=g.currentTarget,g=g.listener,h!==c&&o.isPropagationStopped())break e;nf(o,g,_),c=h}}}if(Qb)throw s=Rb,Qb=!1,Rb=null,s}function D(s,e){var i=e[of];i===void 0&&(i=e[of]=new Set);var a=s+"__bubble";i.has(a)||(pf(e,s,2,!1),i.add(a))}function qf(s,e,i){var a=0;e&&(a|=4),pf(i,s,a,e)}var rf="_reactListening"+Math.random().toString(36).slice(2);function sf(s){if(!s[rf]){s[rf]=!0,da.forEach(function(i){i!=="selectionchange"&&(mf.has(i)||qf(i,!1,s),qf(i,!0,s))});var e=s.nodeType===9?s:s.ownerDocument;e===null||e[rf]||(e[rf]=!0,qf("selectionchange",!1,e))}}function pf(s,e,i,a){switch(jd(e)){case 1:var o=ed;break;case 4:o=gd;break;default:o=fd}i=o.bind(null,e,i,s),o=void 0,!Lb||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(o=!0),a?o!==void 0?s.addEventListener(e,i,{capture:!0,passive:o}):s.addEventListener(e,i,!0):o!==void 0?s.addEventListener(e,i,{passive:o}):s.addEventListener(e,i,!1)}function hd(s,e,i,a,o){var c=a;if(!(e&1)&&!(e&2)&&a!==null)e:for(;;){if(a===null)return;var d=a.tag;if(d===3||d===4){var g=a.stateNode.containerInfo;if(g===o||g.nodeType===8&&g.parentNode===o)break;if(d===4)for(d=a.return;d!==null;){var h=d.tag;if((h===3||h===4)&&(h=d.stateNode.containerInfo,h===o||h.nodeType===8&&h.parentNode===o))return;d=d.return}for(;g!==null;){if(d=Wc(g),d===null)return;if(h=d.tag,h===5||h===6){a=c=d;continue e}g=g.parentNode}}a=a.return}Jb(function(){var _=c,b=xb(i),rt=[];e:{var nt=df.get(s);if(nt!==void 0){var it=td,ot=s;switch(s){case"keypress":if(od(i)===0)break e;case"keydown":case"keyup":it=Rd;break;case"focusin":ot="focus",it=Fd;break;case"focusout":ot="blur",it=Fd;break;case"beforeblur":case"afterblur":it=Fd;break;case"click":if(i.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":it=Bd;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":it=Dd;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":it=Vd;break;case $e:case af:case bf:it=Hd;break;case cf:it=Xd;break;case"scroll":it=vd;break;case"wheel":it=Zd;break;case"copy":case"cut":case"paste":it=Jd;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":it=Td}var ct=(e&4)!==0,tt=!ct&&s==="scroll",$=ct?nt!==null?nt+"Capture":null:nt;ct=[];for(var j=_,et;j!==null;){et=j;var ft=et.stateNode;if(et.tag===5&&ft!==null&&(et=ft,$!==null&&(ft=Kb(j,$),ft!=null&&ct.push(tf(j,ft,et)))),tt)break;j=j.return}0<ct.length&&(nt=new it(nt,ot,null,i,b),rt.push({event:nt,listeners:ct}))}}if(!(e&7)){e:{if(nt=s==="mouseover"||s==="pointerover",it=s==="mouseout"||s==="pointerout",nt&&i!==wb&&(ot=i.relatedTarget||i.fromElement)&&(Wc(ot)||ot[uf]))break e;if((it||nt)&&(nt=b.window===b?b:(nt=b.ownerDocument)?nt.defaultView||nt.parentWindow:window,it?(ot=i.relatedTarget||i.toElement,it=_,ot=ot?Wc(ot):null,ot!==null&&(tt=Vb(ot),ot!==tt||ot.tag!==5&&ot.tag!==6)&&(ot=null)):(it=null,ot=_),it!==ot)){if(ct=Bd,ft="onMouseLeave",$="onMouseEnter",j="mouse",(s==="pointerout"||s==="pointerover")&&(ct=Td,ft="onPointerLeave",$="onPointerEnter",j="pointer"),tt=it==null?nt:ue(it),et=ot==null?nt:ue(ot),nt=new ct(ft,j+"leave",it,i,b),nt.target=tt,nt.relatedTarget=et,ft=null,Wc(b)===_&&(ct=new ct($,j+"enter",ot,i,b),ct.target=et,ct.relatedTarget=tt,ft=ct),tt=ft,it&&ot)t:{for(ct=it,$=ot,j=0,et=ct;et;et=vf(et))j++;for(et=0,ft=$;ft;ft=vf(ft))et++;for(;0<j-et;)ct=vf(ct),j--;for(;0<et-j;)$=vf($),et--;for(;j--;){if(ct===$||$!==null&&ct===$.alternate)break t;ct=vf(ct),$=vf($)}ct=null}else ct=null;it!==null&&wf(rt,nt,it,ct,!1),ot!==null&&tt!==null&&wf(rt,tt,ot,ct,!0)}}e:{if(nt=_?ue(_):window,it=nt.nodeName&&nt.nodeName.toLowerCase(),it==="select"||it==="input"&&nt.type==="file")var at=ve;else if(me(nt))if(we)at=Fe;else{at=De;var ut=Ce}else(it=nt.nodeName)&&it.toLowerCase()==="input"&&(nt.type==="checkbox"||nt.type==="radio")&&(at=Ee);if(at&&(at=at(s,_))){ne(rt,at,i,b);break e}ut&&ut(s,nt,_),s==="focusout"&&(ut=nt._wrapperState)&&ut.controlled&&nt.type==="number"&&cb(nt,"number",nt.value)}switch(ut=_?ue(_):window,s){case"focusin":(me(ut)||ut.contentEditable==="true")&&(Qe=ut,Re=_,Se=null);break;case"focusout":Se=Re=Qe=null;break;case"mousedown":Te=!0;break;case"contextmenu":case"mouseup":case"dragend":Te=!1,Ue(rt,i,b);break;case"selectionchange":if(Pe)break;case"keydown":case"keyup":Ue(rt,i,b)}var yt;if(ae)e:{switch(s){case"compositionstart":var mt="onCompositionStart";break e;case"compositionend":mt="onCompositionEnd";break e;case"compositionupdate":mt="onCompositionUpdate";break e}mt=void 0}else ie?ge(s,i)&&(mt="onCompositionEnd"):s==="keydown"&&i.keyCode===229&&(mt="onCompositionStart");mt&&(de&&i.locale!=="ko"&&(ie||mt!=="onCompositionStart"?mt==="onCompositionEnd"&&ie&&(yt=nd()):(kd=b,ld="value"in kd?kd.value:kd.textContent,ie=!0)),ut=oe(_,mt),0<ut.length&&(mt=new Ld(mt,s,null,i,b),rt.push({event:mt,listeners:ut}),yt?mt.data=yt:(yt=he(i),yt!==null&&(mt.data=yt)))),(yt=ce?je(s,i):ke(s,i))&&(_=oe(_,"onBeforeInput"),0<_.length&&(b=new Ld("onBeforeInput","beforeinput",null,i,b),rt.push({event:b,listeners:_}),b.data=yt))}se(rt,e)})}function tf(s,e,i){return{instance:s,listener:e,currentTarget:i}}function oe(s,e){for(var i=e+"Capture",a=[];s!==null;){var o=s,c=o.stateNode;o.tag===5&&c!==null&&(o=c,c=Kb(s,i),c!=null&&a.unshift(tf(s,c,o)),c=Kb(s,e),c!=null&&a.push(tf(s,c,o))),s=s.return}return a}function vf(s){if(s===null)return null;do s=s.return;while(s&&s.tag!==5);return s||null}function wf(s,e,i,a,o){for(var c=e._reactName,d=[];i!==null&&i!==a;){var g=i,h=g.alternate,_=g.stateNode;if(h!==null&&h===a)break;g.tag===5&&_!==null&&(g=_,o?(h=Kb(i,c),h!=null&&d.unshift(tf(i,h,g))):o||(h=Kb(i,c),h!=null&&d.push(tf(i,h,g)))),i=i.return}d.length!==0&&s.push({event:e,listeners:d})}var xf=/\r\n?/g,yf=/\u0000|\uFFFD/g;function zf(s){return(typeof s=="string"?s:""+s).replace(xf,`
`).replace(yf,"")}function Af(s,e,i){if(e=zf(e),zf(s)!==e&&i)throw Error(p(425))}function Bf(){}var Cf=null,Df=null;function Ef(s,e){return s==="textarea"||s==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Ff=typeof setTimeout=="function"?setTimeout:void 0,Gf=typeof clearTimeout=="function"?clearTimeout:void 0,Hf=typeof Promise=="function"?Promise:void 0,Jf=typeof queueMicrotask=="function"?queueMicrotask:typeof Hf<"u"?function(s){return Hf.resolve(null).then(s).catch(If)}:Ff;function If(s){setTimeout(function(){throw s})}function Kf(s,e){var i=e,a=0;do{var o=i.nextSibling;if(s.removeChild(i),o&&o.nodeType===8)if(i=o.data,i==="/$"){if(a===0){s.removeChild(o),bd(e);return}a--}else i!=="$"&&i!=="$?"&&i!=="$!"||a++;i=o}while(i);bd(e)}function Lf(s){for(;s!=null;s=s.nextSibling){var e=s.nodeType;if(e===1||e===3)break;if(e===8){if(e=s.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return s}function Mf(s){s=s.previousSibling;for(var e=0;s;){if(s.nodeType===8){var i=s.data;if(i==="$"||i==="$!"||i==="$?"){if(e===0)return s;e--}else i==="/$"&&e++}s=s.previousSibling}return null}var Nf=Math.random().toString(36).slice(2),Of="__reactFiber$"+Nf,Pf="__reactProps$"+Nf,uf="__reactContainer$"+Nf,of="__reactEvents$"+Nf,Qf="__reactListeners$"+Nf,Rf="__reactHandles$"+Nf;function Wc(s){var e=s[Of];if(e)return e;for(var i=s.parentNode;i;){if(e=i[uf]||i[Of]){if(i=e.alternate,e.child!==null||i!==null&&i.child!==null)for(s=Mf(s);s!==null;){if(i=s[Of])return i;s=Mf(s)}return e}s=i,i=s.parentNode}return null}function Cb(s){return s=s[Of]||s[uf],!s||s.tag!==5&&s.tag!==6&&s.tag!==13&&s.tag!==3?null:s}function ue(s){if(s.tag===5||s.tag===6)return s.stateNode;throw Error(p(33))}function Db(s){return s[Pf]||null}var Sf=[],Tf=-1;function Uf(s){return{current:s}}function E(s){0>Tf||(s.current=Sf[Tf],Sf[Tf]=null,Tf--)}function G(s,e){Tf++,Sf[Tf]=s.current,s.current=e}var Vf={},H=Uf(Vf),Wf=Uf(!1),Xf=Vf;function Yf(s,e){var i=s.type.contextTypes;if(!i)return Vf;var a=s.stateNode;if(a&&a.__reactInternalMemoizedUnmaskedChildContext===e)return a.__reactInternalMemoizedMaskedChildContext;var o={},c;for(c in i)o[c]=e[c];return a&&(s=s.stateNode,s.__reactInternalMemoizedUnmaskedChildContext=e,s.__reactInternalMemoizedMaskedChildContext=o),o}function Zf(s){return s=s.childContextTypes,s!=null}function $f(){E(Wf),E(H)}function ag(s,e,i){if(H.current!==Vf)throw Error(p(168));G(H,e),G(Wf,i)}function bg(s,e,i){var a=s.stateNode;if(e=e.childContextTypes,typeof a.getChildContext!="function")return i;a=a.getChildContext();for(var o in a)if(!(o in e))throw Error(p(108,Ra(s)||"Unknown",o));return A({},i,a)}function cg(s){return s=(s=s.stateNode)&&s.__reactInternalMemoizedMergedChildContext||Vf,Xf=H.current,G(H,s),G(Wf,Wf.current),!0}function dg(s,e,i){var a=s.stateNode;if(!a)throw Error(p(169));i?(s=bg(s,e,Xf),a.__reactInternalMemoizedMergedChildContext=s,E(Wf),E(H),G(H,s)):E(Wf),G(Wf,i)}var eg=null,fg=!1,gg=!1;function hg(s){eg===null?eg=[s]:eg.push(s)}function ig(s){fg=!0,hg(s)}function jg(){if(!gg&&eg!==null){gg=!0;var s=0,e=C;try{var i=eg;for(C=1;s<i.length;s++){var a=i[s];do a=a(!0);while(a!==null)}eg=null,fg=!1}catch(o){throw eg!==null&&(eg=eg.slice(s+1)),ac(fc,jg),o}finally{C=e,gg=!1}}return null}var kg=[],lg=0,mg=null,ng=0,og=[],pg=0,qg=null,rg=1,sg="";function tg(s,e){kg[lg++]=ng,kg[lg++]=mg,mg=s,ng=e}function ug(s,e,i){og[pg++]=rg,og[pg++]=sg,og[pg++]=qg,qg=s;var a=rg;s=sg;var o=32-oc(a)-1;a&=~(1<<o),i+=1;var c=32-oc(e)+o;if(30<c){var d=o-o%5;c=(a&(1<<d)-1).toString(32),a>>=d,o-=d,rg=1<<32-oc(e)+o|i<<o|a,sg=c+s}else rg=1<<c|i<<o|a,sg=s}function vg(s){s.return!==null&&(tg(s,1),ug(s,1,0))}function wg(s){for(;s===mg;)mg=kg[--lg],kg[lg]=null,ng=kg[--lg],kg[lg]=null;for(;s===qg;)qg=og[--pg],og[pg]=null,sg=og[--pg],og[pg]=null,rg=og[--pg],og[pg]=null}var xg=null,yg=null,I=!1,zg=null;function Ag(s,e){var i=Bg(5,null,null,0);i.elementType="DELETED",i.stateNode=e,i.return=s,e=s.deletions,e===null?(s.deletions=[i],s.flags|=16):e.push(i)}function Cg(s,e){switch(s.tag){case 5:var i=s.type;return e=e.nodeType!==1||i.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(s.stateNode=e,xg=s,yg=Lf(e.firstChild),!0):!1;case 6:return e=s.pendingProps===""||e.nodeType!==3?null:e,e!==null?(s.stateNode=e,xg=s,yg=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(i=qg!==null?{id:rg,overflow:sg}:null,s.memoizedState={dehydrated:e,treeContext:i,retryLane:1073741824},i=Bg(18,null,null,0),i.stateNode=e,i.return=s,s.child=i,xg=s,yg=null,!0):!1;default:return!1}}function Dg(s){return(s.mode&1)!==0&&(s.flags&128)===0}function Eg(s){if(I){var e=yg;if(e){var i=e;if(!Cg(s,e)){if(Dg(s))throw Error(p(418));e=Lf(i.nextSibling);var a=xg;e&&Cg(s,e)?Ag(a,i):(s.flags=s.flags&-4097|2,I=!1,xg=s)}}else{if(Dg(s))throw Error(p(418));s.flags=s.flags&-4097|2,I=!1,xg=s}}}function Fg(s){for(s=s.return;s!==null&&s.tag!==5&&s.tag!==3&&s.tag!==13;)s=s.return;xg=s}function Gg(s){if(s!==xg)return!1;if(!I)return Fg(s),I=!0,!1;var e;if((e=s.tag!==3)&&!(e=s.tag!==5)&&(e=s.type,e=e!=="head"&&e!=="body"&&!Ef(s.type,s.memoizedProps)),e&&(e=yg)){if(Dg(s))throw Hg(),Error(p(418));for(;e;)Ag(s,e),e=Lf(e.nextSibling)}if(Fg(s),s.tag===13){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(p(317));e:{for(s=s.nextSibling,e=0;s;){if(s.nodeType===8){var i=s.data;if(i==="/$"){if(e===0){yg=Lf(s.nextSibling);break e}e--}else i!=="$"&&i!=="$!"&&i!=="$?"||e++}s=s.nextSibling}yg=null}}else yg=xg?Lf(s.stateNode.nextSibling):null;return!0}function Hg(){for(var s=yg;s;)s=Lf(s.nextSibling)}function Ig(){yg=xg=null,I=!1}function Jg(s){zg===null?zg=[s]:zg.push(s)}var Kg=ua.ReactCurrentBatchConfig;function Lg(s,e,i){if(s=i.ref,s!==null&&typeof s!="function"&&typeof s!="object"){if(i._owner){if(i=i._owner,i){if(i.tag!==1)throw Error(p(309));var a=i.stateNode}if(!a)throw Error(p(147,s));var o=a,c=""+s;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===c?e.ref:(e=function(d){var g=o.refs;d===null?delete g[c]:g[c]=d},e._stringRef=c,e)}if(typeof s!="string")throw Error(p(284));if(!i._owner)throw Error(p(290,s))}return s}function Mg(s,e){throw s=Object.prototype.toString.call(e),Error(p(31,s==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":s))}function Ng(s){var e=s._init;return e(s._payload)}function Og(s){function e($,j){if(s){var et=$.deletions;et===null?($.deletions=[j],$.flags|=16):et.push(j)}}function i($,j){if(!s)return null;for(;j!==null;)e($,j),j=j.sibling;return null}function a($,j){for($=new Map;j!==null;)j.key!==null?$.set(j.key,j):$.set(j.index,j),j=j.sibling;return $}function o($,j){return $=Pg($,j),$.index=0,$.sibling=null,$}function c($,j,et){return $.index=et,s?(et=$.alternate,et!==null?(et=et.index,et<j?($.flags|=2,j):et):($.flags|=2,j)):($.flags|=1048576,j)}function d($){return s&&$.alternate===null&&($.flags|=2),$}function g($,j,et,ft){return j===null||j.tag!==6?(j=Qg(et,$.mode,ft),j.return=$,j):(j=o(j,et),j.return=$,j)}function h($,j,et,ft){var at=et.type;return at===ya?b($,j,et.props.children,ft,et.key):j!==null&&(j.elementType===at||typeof at=="object"&&at!==null&&at.$$typeof===Ha&&Ng(at)===j.type)?(ft=o(j,et.props),ft.ref=Lg($,j,et),ft.return=$,ft):(ft=Rg(et.type,et.key,et.props,null,$.mode,ft),ft.ref=Lg($,j,et),ft.return=$,ft)}function _($,j,et,ft){return j===null||j.tag!==4||j.stateNode.containerInfo!==et.containerInfo||j.stateNode.implementation!==et.implementation?(j=Sg(et,$.mode,ft),j.return=$,j):(j=o(j,et.children||[]),j.return=$,j)}function b($,j,et,ft,at){return j===null||j.tag!==7?(j=Tg(et,$.mode,ft,at),j.return=$,j):(j=o(j,et),j.return=$,j)}function rt($,j,et){if(typeof j=="string"&&j!==""||typeof j=="number")return j=Qg(""+j,$.mode,et),j.return=$,j;if(typeof j=="object"&&j!==null){switch(j.$$typeof){case va:return et=Rg(j.type,j.key,j.props,null,$.mode,et),et.ref=Lg($,null,j),et.return=$,et;case wa:return j=Sg(j,$.mode,et),j.return=$,j;case Ha:var ft=j._init;return rt($,ft(j._payload),et)}if(eb(j)||Ka(j))return j=Tg(j,$.mode,et,null),j.return=$,j;Mg($,j)}return null}function nt($,j,et,ft){var at=j!==null?j.key:null;if(typeof et=="string"&&et!==""||typeof et=="number")return at!==null?null:g($,j,""+et,ft);if(typeof et=="object"&&et!==null){switch(et.$$typeof){case va:return et.key===at?h($,j,et,ft):null;case wa:return et.key===at?_($,j,et,ft):null;case Ha:return at=et._init,nt($,j,at(et._payload),ft)}if(eb(et)||Ka(et))return at!==null?null:b($,j,et,ft,null);Mg($,et)}return null}function it($,j,et,ft,at){if(typeof ft=="string"&&ft!==""||typeof ft=="number")return $=$.get(et)||null,g(j,$,""+ft,at);if(typeof ft=="object"&&ft!==null){switch(ft.$$typeof){case va:return $=$.get(ft.key===null?et:ft.key)||null,h(j,$,ft,at);case wa:return $=$.get(ft.key===null?et:ft.key)||null,_(j,$,ft,at);case Ha:var ut=ft._init;return it($,j,et,ut(ft._payload),at)}if(eb(ft)||Ka(ft))return $=$.get(et)||null,b(j,$,ft,at,null);Mg(j,ft)}return null}function ot($,j,et,ft){for(var at=null,ut=null,yt=j,mt=j=0,pt=null;yt!==null&&mt<et.length;mt++){yt.index>mt?(pt=yt,yt=null):pt=yt.sibling;var bt=nt($,yt,et[mt],ft);if(bt===null){yt===null&&(yt=pt);break}s&&yt&&bt.alternate===null&&e($,yt),j=c(bt,j,mt),ut===null?at=bt:ut.sibling=bt,ut=bt,yt=pt}if(mt===et.length)return i($,yt),I&&tg($,mt),at;if(yt===null){for(;mt<et.length;mt++)yt=rt($,et[mt],ft),yt!==null&&(j=c(yt,j,mt),ut===null?at=yt:ut.sibling=yt,ut=yt);return I&&tg($,mt),at}for(yt=a($,yt);mt<et.length;mt++)pt=it(yt,$,mt,et[mt],ft),pt!==null&&(s&&pt.alternate!==null&&yt.delete(pt.key===null?mt:pt.key),j=c(pt,j,mt),ut===null?at=pt:ut.sibling=pt,ut=pt);return s&&yt.forEach(function(_t){return e($,_t)}),I&&tg($,mt),at}function ct($,j,et,ft){var at=Ka(et);if(typeof at!="function")throw Error(p(150));if(et=at.call(et),et==null)throw Error(p(151));for(var ut=at=null,yt=j,mt=j=0,pt=null,bt=et.next();yt!==null&&!bt.done;mt++,bt=et.next()){yt.index>mt?(pt=yt,yt=null):pt=yt.sibling;var _t=nt($,yt,bt.value,ft);if(_t===null){yt===null&&(yt=pt);break}s&&yt&&_t.alternate===null&&e($,yt),j=c(_t,j,mt),ut===null?at=_t:ut.sibling=_t,ut=_t,yt=pt}if(bt.done)return i($,yt),I&&tg($,mt),at;if(yt===null){for(;!bt.done;mt++,bt=et.next())bt=rt($,bt.value,ft),bt!==null&&(j=c(bt,j,mt),ut===null?at=bt:ut.sibling=bt,ut=bt);return I&&tg($,mt),at}for(yt=a($,yt);!bt.done;mt++,bt=et.next())bt=it(yt,$,mt,bt.value,ft),bt!==null&&(s&&bt.alternate!==null&&yt.delete(bt.key===null?mt:bt.key),j=c(bt,j,mt),ut===null?at=bt:ut.sibling=bt,ut=bt);return s&&yt.forEach(function(Nt){return e($,Nt)}),I&&tg($,mt),at}function tt($,j,et,ft){if(typeof et=="object"&&et!==null&&et.type===ya&&et.key===null&&(et=et.props.children),typeof et=="object"&&et!==null){switch(et.$$typeof){case va:e:{for(var at=et.key,ut=j;ut!==null;){if(ut.key===at){if(at=et.type,at===ya){if(ut.tag===7){i($,ut.sibling),j=o(ut,et.props.children),j.return=$,$=j;break e}}else if(ut.elementType===at||typeof at=="object"&&at!==null&&at.$$typeof===Ha&&Ng(at)===ut.type){i($,ut.sibling),j=o(ut,et.props),j.ref=Lg($,ut,et),j.return=$,$=j;break e}i($,ut);break}else e($,ut);ut=ut.sibling}et.type===ya?(j=Tg(et.props.children,$.mode,ft,et.key),j.return=$,$=j):(ft=Rg(et.type,et.key,et.props,null,$.mode,ft),ft.ref=Lg($,j,et),ft.return=$,$=ft)}return d($);case wa:e:{for(ut=et.key;j!==null;){if(j.key===ut)if(j.tag===4&&j.stateNode.containerInfo===et.containerInfo&&j.stateNode.implementation===et.implementation){i($,j.sibling),j=o(j,et.children||[]),j.return=$,$=j;break e}else{i($,j);break}else e($,j);j=j.sibling}j=Sg(et,$.mode,ft),j.return=$,$=j}return d($);case Ha:return ut=et._init,tt($,j,ut(et._payload),ft)}if(eb(et))return ot($,j,et,ft);if(Ka(et))return ct($,j,et,ft);Mg($,et)}return typeof et=="string"&&et!==""||typeof et=="number"?(et=""+et,j!==null&&j.tag===6?(i($,j.sibling),j=o(j,et),j.return=$,$=j):(i($,j),j=Qg(et,$.mode,ft),j.return=$,$=j),d($)):i($,j)}return tt}var Ug=Og(!0),Vg=Og(!1),Wg=Uf(null),Xg=null,Yg=null,Zg=null;function $g(){Zg=Yg=Xg=null}function ah(s){var e=Wg.current;E(Wg),s._currentValue=e}function bh(s,e,i){for(;s!==null;){var a=s.alternate;if((s.childLanes&e)!==e?(s.childLanes|=e,a!==null&&(a.childLanes|=e)):a!==null&&(a.childLanes&e)!==e&&(a.childLanes|=e),s===i)break;s=s.return}}function ch(s,e){Xg=s,Zg=Yg=null,s=s.dependencies,s!==null&&s.firstContext!==null&&(s.lanes&e&&(dh=!0),s.firstContext=null)}function eh(s){var e=s._currentValue;if(Zg!==s)if(s={context:s,memoizedValue:e,next:null},Yg===null){if(Xg===null)throw Error(p(308));Yg=s,Xg.dependencies={lanes:0,firstContext:s}}else Yg=Yg.next=s;return e}var fh=null;function gh(s){fh===null?fh=[s]:fh.push(s)}function hh(s,e,i,a){var o=e.interleaved;return o===null?(i.next=i,gh(e)):(i.next=o.next,o.next=i),e.interleaved=i,ih(s,a)}function ih(s,e){s.lanes|=e;var i=s.alternate;for(i!==null&&(i.lanes|=e),i=s,s=s.return;s!==null;)s.childLanes|=e,i=s.alternate,i!==null&&(i.childLanes|=e),i=s,s=s.return;return i.tag===3?i.stateNode:null}var jh=!1;function kh(s){s.updateQueue={baseState:s.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function lh(s,e){s=s.updateQueue,e.updateQueue===s&&(e.updateQueue={baseState:s.baseState,firstBaseUpdate:s.firstBaseUpdate,lastBaseUpdate:s.lastBaseUpdate,shared:s.shared,effects:s.effects})}function mh(s,e){return{eventTime:s,lane:e,tag:0,payload:null,callback:null,next:null}}function nh(s,e,i){var a=s.updateQueue;if(a===null)return null;if(a=a.shared,K&2){var o=a.pending;return o===null?e.next=e:(e.next=o.next,o.next=e),a.pending=e,ih(s,i)}return o=a.interleaved,o===null?(e.next=e,gh(a)):(e.next=o.next,o.next=e),a.interleaved=e,ih(s,i)}function oh(s,e,i){if(e=e.updateQueue,e!==null&&(e=e.shared,(i&4194240)!==0)){var a=e.lanes;a&=s.pendingLanes,i|=a,e.lanes=i,Cc(s,i)}}function ph(s,e){var i=s.updateQueue,a=s.alternate;if(a!==null&&(a=a.updateQueue,i===a)){var o=null,c=null;if(i=i.firstBaseUpdate,i!==null){do{var d={eventTime:i.eventTime,lane:i.lane,tag:i.tag,payload:i.payload,callback:i.callback,next:null};c===null?o=c=d:c=c.next=d,i=i.next}while(i!==null);c===null?o=c=e:c=c.next=e}else o=c=e;i={baseState:a.baseState,firstBaseUpdate:o,lastBaseUpdate:c,shared:a.shared,effects:a.effects},s.updateQueue=i;return}s=i.lastBaseUpdate,s===null?i.firstBaseUpdate=e:s.next=e,i.lastBaseUpdate=e}function qh(s,e,i,a){var o=s.updateQueue;jh=!1;var c=o.firstBaseUpdate,d=o.lastBaseUpdate,g=o.shared.pending;if(g!==null){o.shared.pending=null;var h=g,_=h.next;h.next=null,d===null?c=_:d.next=_,d=h;var b=s.alternate;b!==null&&(b=b.updateQueue,g=b.lastBaseUpdate,g!==d&&(g===null?b.firstBaseUpdate=_:g.next=_,b.lastBaseUpdate=h))}if(c!==null){var rt=o.baseState;d=0,b=_=h=null,g=c;do{var nt=g.lane,it=g.eventTime;if((a&nt)===nt){b!==null&&(b=b.next={eventTime:it,lane:0,tag:g.tag,payload:g.payload,callback:g.callback,next:null});e:{var ot=s,ct=g;switch(nt=e,it=i,ct.tag){case 1:if(ot=ct.payload,typeof ot=="function"){rt=ot.call(it,rt,nt);break e}rt=ot;break e;case 3:ot.flags=ot.flags&-65537|128;case 0:if(ot=ct.payload,nt=typeof ot=="function"?ot.call(it,rt,nt):ot,nt==null)break e;rt=A({},rt,nt);break e;case 2:jh=!0}}g.callback!==null&&g.lane!==0&&(s.flags|=64,nt=o.effects,nt===null?o.effects=[g]:nt.push(g))}else it={eventTime:it,lane:nt,tag:g.tag,payload:g.payload,callback:g.callback,next:null},b===null?(_=b=it,h=rt):b=b.next=it,d|=nt;if(g=g.next,g===null){if(g=o.shared.pending,g===null)break;nt=g,g=nt.next,nt.next=null,o.lastBaseUpdate=nt,o.shared.pending=null}}while(1);if(b===null&&(h=rt),o.baseState=h,o.firstBaseUpdate=_,o.lastBaseUpdate=b,e=o.shared.interleaved,e!==null){o=e;do d|=o.lane,o=o.next;while(o!==e)}else c===null&&(o.shared.lanes=0);rh|=d,s.lanes=d,s.memoizedState=rt}}function sh(s,e,i){if(s=e.effects,e.effects=null,s!==null)for(e=0;e<s.length;e++){var a=s[e],o=a.callback;if(o!==null){if(a.callback=null,a=i,typeof o!="function")throw Error(p(191,o));o.call(a)}}}var th={},uh=Uf(th),vh=Uf(th),wh=Uf(th);function xh(s){if(s===th)throw Error(p(174));return s}function yh(s,e){switch(G(wh,e),G(vh,s),G(uh,th),s=e.nodeType,s){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:lb(null,"");break;default:s=s===8?e.parentNode:e,e=s.namespaceURI||null,s=s.tagName,e=lb(e,s)}E(uh),G(uh,e)}function zh(){E(uh),E(vh),E(wh)}function Ah(s){xh(wh.current);var e=xh(uh.current),i=lb(e,s.type);e!==i&&(G(vh,s),G(uh,i))}function Bh(s){vh.current===s&&(E(uh),E(vh))}var L=Uf(0);function Ch(s){for(var e=s;e!==null;){if(e.tag===13){var i=e.memoizedState;if(i!==null&&(i=i.dehydrated,i===null||i.data==="$?"||i.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===s)break;for(;e.sibling===null;){if(e.return===null||e.return===s)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Dh=[];function Eh(){for(var s=0;s<Dh.length;s++)Dh[s]._workInProgressVersionPrimary=null;Dh.length=0}var Fh=ua.ReactCurrentDispatcher,Gh=ua.ReactCurrentBatchConfig,Hh=0,M=null,N=null,O=null,Ih=!1,Jh=!1,Kh=0,Lh=0;function P(){throw Error(p(321))}function Mh(s,e){if(e===null)return!1;for(var i=0;i<e.length&&i<s.length;i++)if(!He(s[i],e[i]))return!1;return!0}function Nh(s,e,i,a,o,c){if(Hh=c,M=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Fh.current=s===null||s.memoizedState===null?Oh:Ph,s=i(a,o),Jh){c=0;do{if(Jh=!1,Kh=0,25<=c)throw Error(p(301));c+=1,O=N=null,e.updateQueue=null,Fh.current=Qh,s=i(a,o)}while(Jh)}if(Fh.current=Rh,e=N!==null&&N.next!==null,Hh=0,O=N=M=null,Ih=!1,e)throw Error(p(300));return s}function Sh(){var s=Kh!==0;return Kh=0,s}function Th(){var s={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return O===null?M.memoizedState=O=s:O=O.next=s,O}function Uh(){if(N===null){var s=M.alternate;s=s!==null?s.memoizedState:null}else s=N.next;var e=O===null?M.memoizedState:O.next;if(e!==null)O=e,N=s;else{if(s===null)throw Error(p(310));N=s,s={memoizedState:N.memoizedState,baseState:N.baseState,baseQueue:N.baseQueue,queue:N.queue,next:null},O===null?M.memoizedState=O=s:O=O.next=s}return O}function Vh(s,e){return typeof e=="function"?e(s):e}function Wh(s){var e=Uh(),i=e.queue;if(i===null)throw Error(p(311));i.lastRenderedReducer=s;var a=N,o=a.baseQueue,c=i.pending;if(c!==null){if(o!==null){var d=o.next;o.next=c.next,c.next=d}a.baseQueue=o=c,i.pending=null}if(o!==null){c=o.next,a=a.baseState;var g=d=null,h=null,_=c;do{var b=_.lane;if((Hh&b)===b)h!==null&&(h=h.next={lane:0,action:_.action,hasEagerState:_.hasEagerState,eagerState:_.eagerState,next:null}),a=_.hasEagerState?_.eagerState:s(a,_.action);else{var rt={lane:b,action:_.action,hasEagerState:_.hasEagerState,eagerState:_.eagerState,next:null};h===null?(g=h=rt,d=a):h=h.next=rt,M.lanes|=b,rh|=b}_=_.next}while(_!==null&&_!==c);h===null?d=a:h.next=g,He(a,e.memoizedState)||(dh=!0),e.memoizedState=a,e.baseState=d,e.baseQueue=h,i.lastRenderedState=a}if(s=i.interleaved,s!==null){o=s;do c=o.lane,M.lanes|=c,rh|=c,o=o.next;while(o!==s)}else o===null&&(i.lanes=0);return[e.memoizedState,i.dispatch]}function Xh(s){var e=Uh(),i=e.queue;if(i===null)throw Error(p(311));i.lastRenderedReducer=s;var a=i.dispatch,o=i.pending,c=e.memoizedState;if(o!==null){i.pending=null;var d=o=o.next;do c=s(c,d.action),d=d.next;while(d!==o);He(c,e.memoizedState)||(dh=!0),e.memoizedState=c,e.baseQueue===null&&(e.baseState=c),i.lastRenderedState=c}return[c,a]}function Yh(){}function Zh(s,e){var i=M,a=Uh(),o=e(),c=!He(a.memoizedState,o);if(c&&(a.memoizedState=o,dh=!0),a=a.queue,$h(ai.bind(null,i,a,s),[s]),a.getSnapshot!==e||c||O!==null&&O.memoizedState.tag&1){if(i.flags|=2048,bi(9,ci.bind(null,i,a,o,e),void 0,null),Q===null)throw Error(p(349));Hh&30||di(i,e,o)}return o}function di(s,e,i){s.flags|=16384,s={getSnapshot:e,value:i},e=M.updateQueue,e===null?(e={lastEffect:null,stores:null},M.updateQueue=e,e.stores=[s]):(i=e.stores,i===null?e.stores=[s]:i.push(s))}function ci(s,e,i,a){e.value=i,e.getSnapshot=a,ei(e)&&fi(s)}function ai(s,e,i){return i(function(){ei(e)&&fi(s)})}function ei(s){var e=s.getSnapshot;s=s.value;try{var i=e();return!He(s,i)}catch{return!0}}function fi(s){var e=ih(s,1);e!==null&&gi(e,s,1,-1)}function hi(s){var e=Th();return typeof s=="function"&&(s=s()),e.memoizedState=e.baseState=s,s={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Vh,lastRenderedState:s},e.queue=s,s=s.dispatch=ii.bind(null,M,s),[e.memoizedState,s]}function bi(s,e,i,a){return s={tag:s,create:e,destroy:i,deps:a,next:null},e=M.updateQueue,e===null?(e={lastEffect:null,stores:null},M.updateQueue=e,e.lastEffect=s.next=s):(i=e.lastEffect,i===null?e.lastEffect=s.next=s:(a=i.next,i.next=s,s.next=a,e.lastEffect=s)),s}function ji(){return Uh().memoizedState}function ki(s,e,i,a){var o=Th();M.flags|=s,o.memoizedState=bi(1|e,i,void 0,a===void 0?null:a)}function li(s,e,i,a){var o=Uh();a=a===void 0?null:a;var c=void 0;if(N!==null){var d=N.memoizedState;if(c=d.destroy,a!==null&&Mh(a,d.deps)){o.memoizedState=bi(e,i,c,a);return}}M.flags|=s,o.memoizedState=bi(1|e,i,c,a)}function mi(s,e){return ki(8390656,8,s,e)}function $h(s,e){return li(2048,8,s,e)}function ni(s,e){return li(4,2,s,e)}function oi(s,e){return li(4,4,s,e)}function pi(s,e){if(typeof e=="function")return s=s(),e(s),function(){e(null)};if(e!=null)return s=s(),e.current=s,function(){e.current=null}}function qi(s,e,i){return i=i!=null?i.concat([s]):null,li(4,4,pi.bind(null,e,s),i)}function ri(){}function si(s,e){var i=Uh();e=e===void 0?null:e;var a=i.memoizedState;return a!==null&&e!==null&&Mh(e,a[1])?a[0]:(i.memoizedState=[s,e],s)}function ti(s,e){var i=Uh();e=e===void 0?null:e;var a=i.memoizedState;return a!==null&&e!==null&&Mh(e,a[1])?a[0]:(s=s(),i.memoizedState=[s,e],s)}function ui(s,e,i){return Hh&21?(He(i,e)||(i=yc(),M.lanes|=i,rh|=i,s.baseState=!0),e):(s.baseState&&(s.baseState=!1,dh=!0),s.memoizedState=i)}function vi(s,e){var i=C;C=i!==0&&4>i?i:4,s(!0);var a=Gh.transition;Gh.transition={};try{s(!1),e()}finally{C=i,Gh.transition=a}}function wi(){return Uh().memoizedState}function xi(s,e,i){var a=yi(s);if(i={lane:a,action:i,hasEagerState:!1,eagerState:null,next:null},zi(s))Ai(e,i);else if(i=hh(s,e,i,a),i!==null){var o=R();gi(i,s,a,o),Bi(i,e,a)}}function ii(s,e,i){var a=yi(s),o={lane:a,action:i,hasEagerState:!1,eagerState:null,next:null};if(zi(s))Ai(e,o);else{var c=s.alternate;if(s.lanes===0&&(c===null||c.lanes===0)&&(c=e.lastRenderedReducer,c!==null))try{var d=e.lastRenderedState,g=c(d,i);if(o.hasEagerState=!0,o.eagerState=g,He(g,d)){var h=e.interleaved;h===null?(o.next=o,gh(e)):(o.next=h.next,h.next=o),e.interleaved=o;return}}catch{}finally{}i=hh(s,e,o,a),i!==null&&(o=R(),gi(i,s,a,o),Bi(i,e,a))}}function zi(s){var e=s.alternate;return s===M||e!==null&&e===M}function Ai(s,e){Jh=Ih=!0;var i=s.pending;i===null?e.next=e:(e.next=i.next,i.next=e),s.pending=e}function Bi(s,e,i){if(i&4194240){var a=e.lanes;a&=s.pendingLanes,i|=a,e.lanes=i,Cc(s,i)}}var Rh={readContext:eh,useCallback:P,useContext:P,useEffect:P,useImperativeHandle:P,useInsertionEffect:P,useLayoutEffect:P,useMemo:P,useReducer:P,useRef:P,useState:P,useDebugValue:P,useDeferredValue:P,useTransition:P,useMutableSource:P,useSyncExternalStore:P,useId:P,unstable_isNewReconciler:!1},Oh={readContext:eh,useCallback:function(s,e){return Th().memoizedState=[s,e===void 0?null:e],s},useContext:eh,useEffect:mi,useImperativeHandle:function(s,e,i){return i=i!=null?i.concat([s]):null,ki(4194308,4,pi.bind(null,e,s),i)},useLayoutEffect:function(s,e){return ki(4194308,4,s,e)},useInsertionEffect:function(s,e){return ki(4,2,s,e)},useMemo:function(s,e){var i=Th();return e=e===void 0?null:e,s=s(),i.memoizedState=[s,e],s},useReducer:function(s,e,i){var a=Th();return e=i!==void 0?i(e):e,a.memoizedState=a.baseState=e,s={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:s,lastRenderedState:e},a.queue=s,s=s.dispatch=xi.bind(null,M,s),[a.memoizedState,s]},useRef:function(s){var e=Th();return s={current:s},e.memoizedState=s},useState:hi,useDebugValue:ri,useDeferredValue:function(s){return Th().memoizedState=s},useTransition:function(){var s=hi(!1),e=s[0];return s=vi.bind(null,s[1]),Th().memoizedState=s,[e,s]},useMutableSource:function(){},useSyncExternalStore:function(s,e,i){var a=M,o=Th();if(I){if(i===void 0)throw Error(p(407));i=i()}else{if(i=e(),Q===null)throw Error(p(349));Hh&30||di(a,e,i)}o.memoizedState=i;var c={value:i,getSnapshot:e};return o.queue=c,mi(ai.bind(null,a,c,s),[s]),a.flags|=2048,bi(9,ci.bind(null,a,c,i,e),void 0,null),i},useId:function(){var s=Th(),e=Q.identifierPrefix;if(I){var i=sg,a=rg;i=(a&~(1<<32-oc(a)-1)).toString(32)+i,e=":"+e+"R"+i,i=Kh++,0<i&&(e+="H"+i.toString(32)),e+=":"}else i=Lh++,e=":"+e+"r"+i.toString(32)+":";return s.memoizedState=e},unstable_isNewReconciler:!1},Ph={readContext:eh,useCallback:si,useContext:eh,useEffect:$h,useImperativeHandle:qi,useInsertionEffect:ni,useLayoutEffect:oi,useMemo:ti,useReducer:Wh,useRef:ji,useState:function(){return Wh(Vh)},useDebugValue:ri,useDeferredValue:function(s){var e=Uh();return ui(e,N.memoizedState,s)},useTransition:function(){var s=Wh(Vh)[0],e=Uh().memoizedState;return[s,e]},useMutableSource:Yh,useSyncExternalStore:Zh,useId:wi,unstable_isNewReconciler:!1},Qh={readContext:eh,useCallback:si,useContext:eh,useEffect:$h,useImperativeHandle:qi,useInsertionEffect:ni,useLayoutEffect:oi,useMemo:ti,useReducer:Xh,useRef:ji,useState:function(){return Xh(Vh)},useDebugValue:ri,useDeferredValue:function(s){var e=Uh();return N===null?e.memoizedState=s:ui(e,N.memoizedState,s)},useTransition:function(){var s=Xh(Vh)[0],e=Uh().memoizedState;return[s,e]},useMutableSource:Yh,useSyncExternalStore:Zh,useId:wi,unstable_isNewReconciler:!1};function Ci(s,e){if(s&&s.defaultProps){e=A({},e),s=s.defaultProps;for(var i in s)e[i]===void 0&&(e[i]=s[i]);return e}return e}function Di(s,e,i,a){e=s.memoizedState,i=i(a,e),i=i==null?e:A({},e,i),s.memoizedState=i,s.lanes===0&&(s.updateQueue.baseState=i)}var Ei={isMounted:function(s){return(s=s._reactInternals)?Vb(s)===s:!1},enqueueSetState:function(s,e,i){s=s._reactInternals;var a=R(),o=yi(s),c=mh(a,o);c.payload=e,i!=null&&(c.callback=i),e=nh(s,c,o),e!==null&&(gi(e,s,o,a),oh(e,s,o))},enqueueReplaceState:function(s,e,i){s=s._reactInternals;var a=R(),o=yi(s),c=mh(a,o);c.tag=1,c.payload=e,i!=null&&(c.callback=i),e=nh(s,c,o),e!==null&&(gi(e,s,o,a),oh(e,s,o))},enqueueForceUpdate:function(s,e){s=s._reactInternals;var i=R(),a=yi(s),o=mh(i,a);o.tag=2,e!=null&&(o.callback=e),e=nh(s,o,a),e!==null&&(gi(e,s,a,i),oh(e,s,a))}};function Fi(s,e,i,a,o,c,d){return s=s.stateNode,typeof s.shouldComponentUpdate=="function"?s.shouldComponentUpdate(a,c,d):e.prototype&&e.prototype.isPureReactComponent?!Ie(i,a)||!Ie(o,c):!0}function Gi(s,e,i){var a=!1,o=Vf,c=e.contextType;return typeof c=="object"&&c!==null?c=eh(c):(o=Zf(e)?Xf:H.current,a=e.contextTypes,c=(a=a!=null)?Yf(s,o):Vf),e=new e(i,c),s.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Ei,s.stateNode=e,e._reactInternals=s,a&&(s=s.stateNode,s.__reactInternalMemoizedUnmaskedChildContext=o,s.__reactInternalMemoizedMaskedChildContext=c),e}function Hi(s,e,i,a){s=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(i,a),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(i,a),e.state!==s&&Ei.enqueueReplaceState(e,e.state,null)}function Ii(s,e,i,a){var o=s.stateNode;o.props=i,o.state=s.memoizedState,o.refs={},kh(s);var c=e.contextType;typeof c=="object"&&c!==null?o.context=eh(c):(c=Zf(e)?Xf:H.current,o.context=Yf(s,c)),o.state=s.memoizedState,c=e.getDerivedStateFromProps,typeof c=="function"&&(Di(s,e,c,i),o.state=s.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof o.getSnapshotBeforeUpdate=="function"||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(e=o.state,typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount(),e!==o.state&&Ei.enqueueReplaceState(o,o.state,null),qh(s,i,o,a),o.state=s.memoizedState),typeof o.componentDidMount=="function"&&(s.flags|=4194308)}function Ji(s,e){try{var i="",a=e;do i+=Pa(a),a=a.return;while(a);var o=i}catch(c){o=`
Error generating stack: `+c.message+`
`+c.stack}return{value:s,source:e,stack:o,digest:null}}function Ki(s,e,i){return{value:s,source:null,stack:i??null,digest:e??null}}function Li(s,e){try{console.error(e.value)}catch(i){setTimeout(function(){throw i})}}var Mi=typeof WeakMap=="function"?WeakMap:Map;function Ni(s,e,i){i=mh(-1,i),i.tag=3,i.payload={element:null};var a=e.value;return i.callback=function(){Oi||(Oi=!0,Pi=a),Li(s,e)},i}function Qi(s,e,i){i=mh(-1,i),i.tag=3;var a=s.type.getDerivedStateFromError;if(typeof a=="function"){var o=e.value;i.payload=function(){return a(o)},i.callback=function(){Li(s,e)}}var c=s.stateNode;return c!==null&&typeof c.componentDidCatch=="function"&&(i.callback=function(){Li(s,e),typeof a!="function"&&(Ri===null?Ri=new Set([this]):Ri.add(this));var d=e.stack;this.componentDidCatch(e.value,{componentStack:d!==null?d:""})}),i}function Si(s,e,i){var a=s.pingCache;if(a===null){a=s.pingCache=new Mi;var o=new Set;a.set(e,o)}else o=a.get(e),o===void 0&&(o=new Set,a.set(e,o));o.has(i)||(o.add(i),s=Ti.bind(null,s,e,i),e.then(s,s))}function Ui(s){do{var e;if((e=s.tag===13)&&(e=s.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return s;s=s.return}while(s!==null);return null}function Vi(s,e,i,a,o){return s.mode&1?(s.flags|=65536,s.lanes=o,s):(s===e?s.flags|=65536:(s.flags|=128,i.flags|=131072,i.flags&=-52805,i.tag===1&&(i.alternate===null?i.tag=17:(e=mh(-1,1),e.tag=2,nh(i,e,1))),i.lanes|=1),s)}var Wi=ua.ReactCurrentOwner,dh=!1;function Xi(s,e,i,a){e.child=s===null?Vg(e,null,i,a):Ug(e,s.child,i,a)}function Yi(s,e,i,a,o){i=i.render;var c=e.ref;return ch(e,o),a=Nh(s,e,i,a,c,o),i=Sh(),s!==null&&!dh?(e.updateQueue=s.updateQueue,e.flags&=-2053,s.lanes&=~o,Zi(s,e,o)):(I&&i&&vg(e),e.flags|=1,Xi(s,e,a,o),e.child)}function $i(s,e,i,a,o){if(s===null){var c=i.type;return typeof c=="function"&&!aj(c)&&c.defaultProps===void 0&&i.compare===null&&i.defaultProps===void 0?(e.tag=15,e.type=c,bj(s,e,c,a,o)):(s=Rg(i.type,null,a,e,e.mode,o),s.ref=e.ref,s.return=e,e.child=s)}if(c=s.child,!(s.lanes&o)){var d=c.memoizedProps;if(i=i.compare,i=i!==null?i:Ie,i(d,a)&&s.ref===e.ref)return Zi(s,e,o)}return e.flags|=1,s=Pg(c,a),s.ref=e.ref,s.return=e,e.child=s}function bj(s,e,i,a,o){if(s!==null){var c=s.memoizedProps;if(Ie(c,a)&&s.ref===e.ref)if(dh=!1,e.pendingProps=a=c,(s.lanes&o)!==0)s.flags&131072&&(dh=!0);else return e.lanes=s.lanes,Zi(s,e,o)}return cj(s,e,i,a,o)}function dj(s,e,i){var a=e.pendingProps,o=a.children,c=s!==null?s.memoizedState:null;if(a.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},G(ej,fj),fj|=i;else{if(!(i&1073741824))return s=c!==null?c.baseLanes|i:i,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:s,cachePool:null,transitions:null},e.updateQueue=null,G(ej,fj),fj|=s,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},a=c!==null?c.baseLanes:i,G(ej,fj),fj|=a}else c!==null?(a=c.baseLanes|i,e.memoizedState=null):a=i,G(ej,fj),fj|=a;return Xi(s,e,o,i),e.child}function gj(s,e){var i=e.ref;(s===null&&i!==null||s!==null&&s.ref!==i)&&(e.flags|=512,e.flags|=2097152)}function cj(s,e,i,a,o){var c=Zf(i)?Xf:H.current;return c=Yf(e,c),ch(e,o),i=Nh(s,e,i,a,c,o),a=Sh(),s!==null&&!dh?(e.updateQueue=s.updateQueue,e.flags&=-2053,s.lanes&=~o,Zi(s,e,o)):(I&&a&&vg(e),e.flags|=1,Xi(s,e,i,o),e.child)}function hj(s,e,i,a,o){if(Zf(i)){var c=!0;cg(e)}else c=!1;if(ch(e,o),e.stateNode===null)ij(s,e),Gi(e,i,a),Ii(e,i,a,o),a=!0;else if(s===null){var d=e.stateNode,g=e.memoizedProps;d.props=g;var h=d.context,_=i.contextType;typeof _=="object"&&_!==null?_=eh(_):(_=Zf(i)?Xf:H.current,_=Yf(e,_));var b=i.getDerivedStateFromProps,rt=typeof b=="function"||typeof d.getSnapshotBeforeUpdate=="function";rt||typeof d.UNSAFE_componentWillReceiveProps!="function"&&typeof d.componentWillReceiveProps!="function"||(g!==a||h!==_)&&Hi(e,d,a,_),jh=!1;var nt=e.memoizedState;d.state=nt,qh(e,a,d,o),h=e.memoizedState,g!==a||nt!==h||Wf.current||jh?(typeof b=="function"&&(Di(e,i,b,a),h=e.memoizedState),(g=jh||Fi(e,i,g,a,nt,h,_))?(rt||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount()),typeof d.componentDidMount=="function"&&(e.flags|=4194308)):(typeof d.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=a,e.memoizedState=h),d.props=a,d.state=h,d.context=_,a=g):(typeof d.componentDidMount=="function"&&(e.flags|=4194308),a=!1)}else{d=e.stateNode,lh(s,e),g=e.memoizedProps,_=e.type===e.elementType?g:Ci(e.type,g),d.props=_,rt=e.pendingProps,nt=d.context,h=i.contextType,typeof h=="object"&&h!==null?h=eh(h):(h=Zf(i)?Xf:H.current,h=Yf(e,h));var it=i.getDerivedStateFromProps;(b=typeof it=="function"||typeof d.getSnapshotBeforeUpdate=="function")||typeof d.UNSAFE_componentWillReceiveProps!="function"&&typeof d.componentWillReceiveProps!="function"||(g!==rt||nt!==h)&&Hi(e,d,a,h),jh=!1,nt=e.memoizedState,d.state=nt,qh(e,a,d,o);var ot=e.memoizedState;g!==rt||nt!==ot||Wf.current||jh?(typeof it=="function"&&(Di(e,i,it,a),ot=e.memoizedState),(_=jh||Fi(e,i,_,a,nt,ot,h)||!1)?(b||typeof d.UNSAFE_componentWillUpdate!="function"&&typeof d.componentWillUpdate!="function"||(typeof d.componentWillUpdate=="function"&&d.componentWillUpdate(a,ot,h),typeof d.UNSAFE_componentWillUpdate=="function"&&d.UNSAFE_componentWillUpdate(a,ot,h)),typeof d.componentDidUpdate=="function"&&(e.flags|=4),typeof d.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof d.componentDidUpdate!="function"||g===s.memoizedProps&&nt===s.memoizedState||(e.flags|=4),typeof d.getSnapshotBeforeUpdate!="function"||g===s.memoizedProps&&nt===s.memoizedState||(e.flags|=1024),e.memoizedProps=a,e.memoizedState=ot),d.props=a,d.state=ot,d.context=h,a=_):(typeof d.componentDidUpdate!="function"||g===s.memoizedProps&&nt===s.memoizedState||(e.flags|=4),typeof d.getSnapshotBeforeUpdate!="function"||g===s.memoizedProps&&nt===s.memoizedState||(e.flags|=1024),a=!1)}return jj(s,e,i,a,c,o)}function jj(s,e,i,a,o,c){gj(s,e);var d=(e.flags&128)!==0;if(!a&&!d)return o&&dg(e,i,!1),Zi(s,e,c);a=e.stateNode,Wi.current=e;var g=d&&typeof i.getDerivedStateFromError!="function"?null:a.render();return e.flags|=1,s!==null&&d?(e.child=Ug(e,s.child,null,c),e.child=Ug(e,null,g,c)):Xi(s,e,g,c),e.memoizedState=a.state,o&&dg(e,i,!0),e.child}function kj(s){var e=s.stateNode;e.pendingContext?ag(s,e.pendingContext,e.pendingContext!==e.context):e.context&&ag(s,e.context,!1),yh(s,e.containerInfo)}function lj(s,e,i,a,o){return Ig(),Jg(o),e.flags|=256,Xi(s,e,i,a),e.child}var mj={dehydrated:null,treeContext:null,retryLane:0};function nj(s){return{baseLanes:s,cachePool:null,transitions:null}}function oj(s,e,i){var a=e.pendingProps,o=L.current,c=!1,d=(e.flags&128)!==0,g;if((g=d)||(g=s!==null&&s.memoizedState===null?!1:(o&2)!==0),g?(c=!0,e.flags&=-129):(s===null||s.memoizedState!==null)&&(o|=1),G(L,o&1),s===null)return Eg(e),s=e.memoizedState,s!==null&&(s=s.dehydrated,s!==null)?(e.mode&1?s.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(d=a.children,s=a.fallback,c?(a=e.mode,c=e.child,d={mode:"hidden",children:d},!(a&1)&&c!==null?(c.childLanes=0,c.pendingProps=d):c=pj(d,a,0,null),s=Tg(s,a,i,null),c.return=e,s.return=e,c.sibling=s,e.child=c,e.child.memoizedState=nj(i),e.memoizedState=mj,s):qj(e,d));if(o=s.memoizedState,o!==null&&(g=o.dehydrated,g!==null))return rj(s,e,d,a,g,o,i);if(c){c=a.fallback,d=e.mode,o=s.child,g=o.sibling;var h={mode:"hidden",children:a.children};return!(d&1)&&e.child!==o?(a=e.child,a.childLanes=0,a.pendingProps=h,e.deletions=null):(a=Pg(o,h),a.subtreeFlags=o.subtreeFlags&14680064),g!==null?c=Pg(g,c):(c=Tg(c,d,i,null),c.flags|=2),c.return=e,a.return=e,a.sibling=c,e.child=a,a=c,c=e.child,d=s.child.memoizedState,d=d===null?nj(i):{baseLanes:d.baseLanes|i,cachePool:null,transitions:d.transitions},c.memoizedState=d,c.childLanes=s.childLanes&~i,e.memoizedState=mj,a}return c=s.child,s=c.sibling,a=Pg(c,{mode:"visible",children:a.children}),!(e.mode&1)&&(a.lanes=i),a.return=e,a.sibling=null,s!==null&&(i=e.deletions,i===null?(e.deletions=[s],e.flags|=16):i.push(s)),e.child=a,e.memoizedState=null,a}function qj(s,e){return e=pj({mode:"visible",children:e},s.mode,0,null),e.return=s,s.child=e}function sj(s,e,i,a){return a!==null&&Jg(a),Ug(e,s.child,null,i),s=qj(e,e.pendingProps.children),s.flags|=2,e.memoizedState=null,s}function rj(s,e,i,a,o,c,d){if(i)return e.flags&256?(e.flags&=-257,a=Ki(Error(p(422))),sj(s,e,d,a)):e.memoizedState!==null?(e.child=s.child,e.flags|=128,null):(c=a.fallback,o=e.mode,a=pj({mode:"visible",children:a.children},o,0,null),c=Tg(c,o,d,null),c.flags|=2,a.return=e,c.return=e,a.sibling=c,e.child=a,e.mode&1&&Ug(e,s.child,null,d),e.child.memoizedState=nj(d),e.memoizedState=mj,c);if(!(e.mode&1))return sj(s,e,d,null);if(o.data==="$!"){if(a=o.nextSibling&&o.nextSibling.dataset,a)var g=a.dgst;return a=g,c=Error(p(419)),a=Ki(c,a,void 0),sj(s,e,d,a)}if(g=(d&s.childLanes)!==0,dh||g){if(a=Q,a!==null){switch(d&-d){case 4:o=2;break;case 16:o=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:o=32;break;case 536870912:o=268435456;break;default:o=0}o=o&(a.suspendedLanes|d)?0:o,o!==0&&o!==c.retryLane&&(c.retryLane=o,ih(s,o),gi(a,s,o,-1))}return tj(),a=Ki(Error(p(421))),sj(s,e,d,a)}return o.data==="$?"?(e.flags|=128,e.child=s.child,e=uj.bind(null,s),o._reactRetry=e,null):(s=c.treeContext,yg=Lf(o.nextSibling),xg=e,I=!0,zg=null,s!==null&&(og[pg++]=rg,og[pg++]=sg,og[pg++]=qg,rg=s.id,sg=s.overflow,qg=e),e=qj(e,a.children),e.flags|=4096,e)}function vj(s,e,i){s.lanes|=e;var a=s.alternate;a!==null&&(a.lanes|=e),bh(s.return,e,i)}function wj(s,e,i,a,o){var c=s.memoizedState;c===null?s.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:a,tail:i,tailMode:o}:(c.isBackwards=e,c.rendering=null,c.renderingStartTime=0,c.last=a,c.tail=i,c.tailMode=o)}function xj(s,e,i){var a=e.pendingProps,o=a.revealOrder,c=a.tail;if(Xi(s,e,a.children,i),a=L.current,a&2)a=a&1|2,e.flags|=128;else{if(s!==null&&s.flags&128)e:for(s=e.child;s!==null;){if(s.tag===13)s.memoizedState!==null&&vj(s,i,e);else if(s.tag===19)vj(s,i,e);else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===e)break e;for(;s.sibling===null;){if(s.return===null||s.return===e)break e;s=s.return}s.sibling.return=s.return,s=s.sibling}a&=1}if(G(L,a),!(e.mode&1))e.memoizedState=null;else switch(o){case"forwards":for(i=e.child,o=null;i!==null;)s=i.alternate,s!==null&&Ch(s)===null&&(o=i),i=i.sibling;i=o,i===null?(o=e.child,e.child=null):(o=i.sibling,i.sibling=null),wj(e,!1,o,i,c);break;case"backwards":for(i=null,o=e.child,e.child=null;o!==null;){if(s=o.alternate,s!==null&&Ch(s)===null){e.child=o;break}s=o.sibling,o.sibling=i,i=o,o=s}wj(e,!0,i,null,c);break;case"together":wj(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function ij(s,e){!(e.mode&1)&&s!==null&&(s.alternate=null,e.alternate=null,e.flags|=2)}function Zi(s,e,i){if(s!==null&&(e.dependencies=s.dependencies),rh|=e.lanes,!(i&e.childLanes))return null;if(s!==null&&e.child!==s.child)throw Error(p(153));if(e.child!==null){for(s=e.child,i=Pg(s,s.pendingProps),e.child=i,i.return=e;s.sibling!==null;)s=s.sibling,i=i.sibling=Pg(s,s.pendingProps),i.return=e;i.sibling=null}return e.child}function yj(s,e,i){switch(e.tag){case 3:kj(e),Ig();break;case 5:Ah(e);break;case 1:Zf(e.type)&&cg(e);break;case 4:yh(e,e.stateNode.containerInfo);break;case 10:var a=e.type._context,o=e.memoizedProps.value;G(Wg,a._currentValue),a._currentValue=o;break;case 13:if(a=e.memoizedState,a!==null)return a.dehydrated!==null?(G(L,L.current&1),e.flags|=128,null):i&e.child.childLanes?oj(s,e,i):(G(L,L.current&1),s=Zi(s,e,i),s!==null?s.sibling:null);G(L,L.current&1);break;case 19:if(a=(i&e.childLanes)!==0,s.flags&128){if(a)return xj(s,e,i);e.flags|=128}if(o=e.memoizedState,o!==null&&(o.rendering=null,o.tail=null,o.lastEffect=null),G(L,L.current),a)break;return null;case 22:case 23:return e.lanes=0,dj(s,e,i)}return Zi(s,e,i)}var zj,Aj,Bj,Cj;zj=function(s,e){for(var i=e.child;i!==null;){if(i.tag===5||i.tag===6)s.appendChild(i.stateNode);else if(i.tag!==4&&i.child!==null){i.child.return=i,i=i.child;continue}if(i===e)break;for(;i.sibling===null;){if(i.return===null||i.return===e)return;i=i.return}i.sibling.return=i.return,i=i.sibling}};Aj=function(){};Bj=function(s,e,i,a){var o=s.memoizedProps;if(o!==a){s=e.stateNode,xh(uh.current);var c=null;switch(i){case"input":o=Ya(s,o),a=Ya(s,a),c=[];break;case"select":o=A({},o,{value:void 0}),a=A({},a,{value:void 0}),c=[];break;case"textarea":o=gb(s,o),a=gb(s,a),c=[];break;default:typeof o.onClick!="function"&&typeof a.onClick=="function"&&(s.onclick=Bf)}ub(i,a);var d;i=null;for(_ in o)if(!a.hasOwnProperty(_)&&o.hasOwnProperty(_)&&o[_]!=null)if(_==="style"){var g=o[_];for(d in g)g.hasOwnProperty(d)&&(i||(i={}),i[d]="")}else _!=="dangerouslySetInnerHTML"&&_!=="children"&&_!=="suppressContentEditableWarning"&&_!=="suppressHydrationWarning"&&_!=="autoFocus"&&(ea.hasOwnProperty(_)?c||(c=[]):(c=c||[]).push(_,null));for(_ in a){var h=a[_];if(g=o!=null?o[_]:void 0,a.hasOwnProperty(_)&&h!==g&&(h!=null||g!=null))if(_==="style")if(g){for(d in g)!g.hasOwnProperty(d)||h&&h.hasOwnProperty(d)||(i||(i={}),i[d]="");for(d in h)h.hasOwnProperty(d)&&g[d]!==h[d]&&(i||(i={}),i[d]=h[d])}else i||(c||(c=[]),c.push(_,i)),i=h;else _==="dangerouslySetInnerHTML"?(h=h?h.__html:void 0,g=g?g.__html:void 0,h!=null&&g!==h&&(c=c||[]).push(_,h)):_==="children"?typeof h!="string"&&typeof h!="number"||(c=c||[]).push(_,""+h):_!=="suppressContentEditableWarning"&&_!=="suppressHydrationWarning"&&(ea.hasOwnProperty(_)?(h!=null&&_==="onScroll"&&D("scroll",s),c||g===h||(c=[])):(c=c||[]).push(_,h))}i&&(c=c||[]).push("style",i);var _=c;(e.updateQueue=_)&&(e.flags|=4)}};Cj=function(s,e,i,a){i!==a&&(e.flags|=4)};function Dj(s,e){if(!I)switch(s.tailMode){case"hidden":e=s.tail;for(var i=null;e!==null;)e.alternate!==null&&(i=e),e=e.sibling;i===null?s.tail=null:i.sibling=null;break;case"collapsed":i=s.tail;for(var a=null;i!==null;)i.alternate!==null&&(a=i),i=i.sibling;a===null?e||s.tail===null?s.tail=null:s.tail.sibling=null:a.sibling=null}}function S(s){var e=s.alternate!==null&&s.alternate.child===s.child,i=0,a=0;if(e)for(var o=s.child;o!==null;)i|=o.lanes|o.childLanes,a|=o.subtreeFlags&14680064,a|=o.flags&14680064,o.return=s,o=o.sibling;else for(o=s.child;o!==null;)i|=o.lanes|o.childLanes,a|=o.subtreeFlags,a|=o.flags,o.return=s,o=o.sibling;return s.subtreeFlags|=a,s.childLanes=i,e}function Ej(s,e,i){var a=e.pendingProps;switch(wg(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return S(e),null;case 1:return Zf(e.type)&&$f(),S(e),null;case 3:return a=e.stateNode,zh(),E(Wf),E(H),Eh(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(s===null||s.child===null)&&(Gg(e)?e.flags|=4:s===null||s.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,zg!==null&&(Fj(zg),zg=null))),Aj(s,e),S(e),null;case 5:Bh(e);var o=xh(wh.current);if(i=e.type,s!==null&&e.stateNode!=null)Bj(s,e,i,a,o),s.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!a){if(e.stateNode===null)throw Error(p(166));return S(e),null}if(s=xh(uh.current),Gg(e)){a=e.stateNode,i=e.type;var c=e.memoizedProps;switch(a[Of]=e,a[Pf]=c,s=(e.mode&1)!==0,i){case"dialog":D("cancel",a),D("close",a);break;case"iframe":case"object":case"embed":D("load",a);break;case"video":case"audio":for(o=0;o<lf.length;o++)D(lf[o],a);break;case"source":D("error",a);break;case"img":case"image":case"link":D("error",a),D("load",a);break;case"details":D("toggle",a);break;case"input":Za(a,c),D("invalid",a);break;case"select":a._wrapperState={wasMultiple:!!c.multiple},D("invalid",a);break;case"textarea":hb(a,c),D("invalid",a)}ub(i,c),o=null;for(var d in c)if(c.hasOwnProperty(d)){var g=c[d];d==="children"?typeof g=="string"?a.textContent!==g&&(c.suppressHydrationWarning!==!0&&Af(a.textContent,g,s),o=["children",g]):typeof g=="number"&&a.textContent!==""+g&&(c.suppressHydrationWarning!==!0&&Af(a.textContent,g,s),o=["children",""+g]):ea.hasOwnProperty(d)&&g!=null&&d==="onScroll"&&D("scroll",a)}switch(i){case"input":Va(a),db(a,c,!0);break;case"textarea":Va(a),jb(a);break;case"select":case"option":break;default:typeof c.onClick=="function"&&(a.onclick=Bf)}a=o,e.updateQueue=a,a!==null&&(e.flags|=4)}else{d=o.nodeType===9?o:o.ownerDocument,s==="http://www.w3.org/1999/xhtml"&&(s=kb(i)),s==="http://www.w3.org/1999/xhtml"?i==="script"?(s=d.createElement("div"),s.innerHTML="<script><\/script>",s=s.removeChild(s.firstChild)):typeof a.is=="string"?s=d.createElement(i,{is:a.is}):(s=d.createElement(i),i==="select"&&(d=s,a.multiple?d.multiple=!0:a.size&&(d.size=a.size))):s=d.createElementNS(s,i),s[Of]=e,s[Pf]=a,zj(s,e,!1,!1),e.stateNode=s;e:{switch(d=vb(i,a),i){case"dialog":D("cancel",s),D("close",s),o=a;break;case"iframe":case"object":case"embed":D("load",s),o=a;break;case"video":case"audio":for(o=0;o<lf.length;o++)D(lf[o],s);o=a;break;case"source":D("error",s),o=a;break;case"img":case"image":case"link":D("error",s),D("load",s),o=a;break;case"details":D("toggle",s),o=a;break;case"input":Za(s,a),o=Ya(s,a),D("invalid",s);break;case"option":o=a;break;case"select":s._wrapperState={wasMultiple:!!a.multiple},o=A({},a,{value:void 0}),D("invalid",s);break;case"textarea":hb(s,a),o=gb(s,a),D("invalid",s);break;default:o=a}ub(i,o),g=o;for(c in g)if(g.hasOwnProperty(c)){var h=g[c];c==="style"?sb(s,h):c==="dangerouslySetInnerHTML"?(h=h?h.__html:void 0,h!=null&&nb(s,h)):c==="children"?typeof h=="string"?(i!=="textarea"||h!=="")&&ob(s,h):typeof h=="number"&&ob(s,""+h):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(ea.hasOwnProperty(c)?h!=null&&c==="onScroll"&&D("scroll",s):h!=null&&ta(s,c,h,d))}switch(i){case"input":Va(s),db(s,a,!1);break;case"textarea":Va(s),jb(s);break;case"option":a.value!=null&&s.setAttribute("value",""+Sa(a.value));break;case"select":s.multiple=!!a.multiple,c=a.value,c!=null?fb(s,!!a.multiple,c,!1):a.defaultValue!=null&&fb(s,!!a.multiple,a.defaultValue,!0);break;default:typeof o.onClick=="function"&&(s.onclick=Bf)}switch(i){case"button":case"input":case"select":case"textarea":a=!!a.autoFocus;break e;case"img":a=!0;break e;default:a=!1}}a&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return S(e),null;case 6:if(s&&e.stateNode!=null)Cj(s,e,s.memoizedProps,a);else{if(typeof a!="string"&&e.stateNode===null)throw Error(p(166));if(i=xh(wh.current),xh(uh.current),Gg(e)){if(a=e.stateNode,i=e.memoizedProps,a[Of]=e,(c=a.nodeValue!==i)&&(s=xg,s!==null))switch(s.tag){case 3:Af(a.nodeValue,i,(s.mode&1)!==0);break;case 5:s.memoizedProps.suppressHydrationWarning!==!0&&Af(a.nodeValue,i,(s.mode&1)!==0)}c&&(e.flags|=4)}else a=(i.nodeType===9?i:i.ownerDocument).createTextNode(a),a[Of]=e,e.stateNode=a}return S(e),null;case 13:if(E(L),a=e.memoizedState,s===null||s.memoizedState!==null&&s.memoizedState.dehydrated!==null){if(I&&yg!==null&&e.mode&1&&!(e.flags&128))Hg(),Ig(),e.flags|=98560,c=!1;else if(c=Gg(e),a!==null&&a.dehydrated!==null){if(s===null){if(!c)throw Error(p(318));if(c=e.memoizedState,c=c!==null?c.dehydrated:null,!c)throw Error(p(317));c[Of]=e}else Ig(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;S(e),c=!1}else zg!==null&&(Fj(zg),zg=null),c=!0;if(!c)return e.flags&65536?e:null}return e.flags&128?(e.lanes=i,e):(a=a!==null,a!==(s!==null&&s.memoizedState!==null)&&a&&(e.child.flags|=8192,e.mode&1&&(s===null||L.current&1?T===0&&(T=3):tj())),e.updateQueue!==null&&(e.flags|=4),S(e),null);case 4:return zh(),Aj(s,e),s===null&&sf(e.stateNode.containerInfo),S(e),null;case 10:return ah(e.type._context),S(e),null;case 17:return Zf(e.type)&&$f(),S(e),null;case 19:if(E(L),c=e.memoizedState,c===null)return S(e),null;if(a=(e.flags&128)!==0,d=c.rendering,d===null)if(a)Dj(c,!1);else{if(T!==0||s!==null&&s.flags&128)for(s=e.child;s!==null;){if(d=Ch(s),d!==null){for(e.flags|=128,Dj(c,!1),a=d.updateQueue,a!==null&&(e.updateQueue=a,e.flags|=4),e.subtreeFlags=0,a=i,i=e.child;i!==null;)c=i,s=a,c.flags&=14680066,d=c.alternate,d===null?(c.childLanes=0,c.lanes=s,c.child=null,c.subtreeFlags=0,c.memoizedProps=null,c.memoizedState=null,c.updateQueue=null,c.dependencies=null,c.stateNode=null):(c.childLanes=d.childLanes,c.lanes=d.lanes,c.child=d.child,c.subtreeFlags=0,c.deletions=null,c.memoizedProps=d.memoizedProps,c.memoizedState=d.memoizedState,c.updateQueue=d.updateQueue,c.type=d.type,s=d.dependencies,c.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext}),i=i.sibling;return G(L,L.current&1|2),e.child}s=s.sibling}c.tail!==null&&B()>Gj&&(e.flags|=128,a=!0,Dj(c,!1),e.lanes=4194304)}else{if(!a)if(s=Ch(d),s!==null){if(e.flags|=128,a=!0,i=s.updateQueue,i!==null&&(e.updateQueue=i,e.flags|=4),Dj(c,!0),c.tail===null&&c.tailMode==="hidden"&&!d.alternate&&!I)return S(e),null}else 2*B()-c.renderingStartTime>Gj&&i!==1073741824&&(e.flags|=128,a=!0,Dj(c,!1),e.lanes=4194304);c.isBackwards?(d.sibling=e.child,e.child=d):(i=c.last,i!==null?i.sibling=d:e.child=d,c.last=d)}return c.tail!==null?(e=c.tail,c.rendering=e,c.tail=e.sibling,c.renderingStartTime=B(),e.sibling=null,i=L.current,G(L,a?i&1|2:i&1),e):(S(e),null);case 22:case 23:return Hj(),a=e.memoizedState!==null,s!==null&&s.memoizedState!==null!==a&&(e.flags|=8192),a&&e.mode&1?fj&1073741824&&(S(e),e.subtreeFlags&6&&(e.flags|=8192)):S(e),null;case 24:return null;case 25:return null}throw Error(p(156,e.tag))}function Ij(s,e){switch(wg(e),e.tag){case 1:return Zf(e.type)&&$f(),s=e.flags,s&65536?(e.flags=s&-65537|128,e):null;case 3:return zh(),E(Wf),E(H),Eh(),s=e.flags,s&65536&&!(s&128)?(e.flags=s&-65537|128,e):null;case 5:return Bh(e),null;case 13:if(E(L),s=e.memoizedState,s!==null&&s.dehydrated!==null){if(e.alternate===null)throw Error(p(340));Ig()}return s=e.flags,s&65536?(e.flags=s&-65537|128,e):null;case 19:return E(L),null;case 4:return zh(),null;case 10:return ah(e.type._context),null;case 22:case 23:return Hj(),null;case 24:return null;default:return null}}var Jj=!1,U=!1,Kj=typeof WeakSet=="function"?WeakSet:Set,V=null;function Lj(s,e){var i=s.ref;if(i!==null)if(typeof i=="function")try{i(null)}catch(a){W(s,e,a)}else i.current=null}function Mj(s,e,i){try{i()}catch(a){W(s,e,a)}}var Nj=!1;function Oj(s,e){if(Cf=dd,s=Me(),Ne(s)){if("selectionStart"in s)var i={start:s.selectionStart,end:s.selectionEnd};else e:{i=(i=s.ownerDocument)&&i.defaultView||window;var a=i.getSelection&&i.getSelection();if(a&&a.rangeCount!==0){i=a.anchorNode;var o=a.anchorOffset,c=a.focusNode;a=a.focusOffset;try{i.nodeType,c.nodeType}catch{i=null;break e}var d=0,g=-1,h=-1,_=0,b=0,rt=s,nt=null;t:for(;;){for(var it;rt!==i||o!==0&&rt.nodeType!==3||(g=d+o),rt!==c||a!==0&&rt.nodeType!==3||(h=d+a),rt.nodeType===3&&(d+=rt.nodeValue.length),(it=rt.firstChild)!==null;)nt=rt,rt=it;for(;;){if(rt===s)break t;if(nt===i&&++_===o&&(g=d),nt===c&&++b===a&&(h=d),(it=rt.nextSibling)!==null)break;rt=nt,nt=rt.parentNode}rt=it}i=g===-1||h===-1?null:{start:g,end:h}}else i=null}i=i||{start:0,end:0}}else i=null;for(Df={focusedElem:s,selectionRange:i},dd=!1,V=e;V!==null;)if(e=V,s=e.child,(e.subtreeFlags&1028)!==0&&s!==null)s.return=e,V=s;else for(;V!==null;){e=V;try{var ot=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(ot!==null){var ct=ot.memoizedProps,tt=ot.memoizedState,$=e.stateNode,j=$.getSnapshotBeforeUpdate(e.elementType===e.type?ct:Ci(e.type,ct),tt);$.__reactInternalSnapshotBeforeUpdate=j}break;case 3:var et=e.stateNode.containerInfo;et.nodeType===1?et.textContent="":et.nodeType===9&&et.documentElement&&et.removeChild(et.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(p(163))}}catch(ft){W(e,e.return,ft)}if(s=e.sibling,s!==null){s.return=e.return,V=s;break}V=e.return}return ot=Nj,Nj=!1,ot}function Pj(s,e,i){var a=e.updateQueue;if(a=a!==null?a.lastEffect:null,a!==null){var o=a=a.next;do{if((o.tag&s)===s){var c=o.destroy;o.destroy=void 0,c!==void 0&&Mj(e,i,c)}o=o.next}while(o!==a)}}function Qj(s,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var i=e=e.next;do{if((i.tag&s)===s){var a=i.create;i.destroy=a()}i=i.next}while(i!==e)}}function Rj(s){var e=s.ref;if(e!==null){var i=s.stateNode;switch(s.tag){case 5:s=i;break;default:s=i}typeof e=="function"?e(s):e.current=s}}function Sj(s){var e=s.alternate;e!==null&&(s.alternate=null,Sj(e)),s.child=null,s.deletions=null,s.sibling=null,s.tag===5&&(e=s.stateNode,e!==null&&(delete e[Of],delete e[Pf],delete e[of],delete e[Qf],delete e[Rf])),s.stateNode=null,s.return=null,s.dependencies=null,s.memoizedProps=null,s.memoizedState=null,s.pendingProps=null,s.stateNode=null,s.updateQueue=null}function Tj(s){return s.tag===5||s.tag===3||s.tag===4}function Uj(s){e:for(;;){for(;s.sibling===null;){if(s.return===null||Tj(s.return))return null;s=s.return}for(s.sibling.return=s.return,s=s.sibling;s.tag!==5&&s.tag!==6&&s.tag!==18;){if(s.flags&2||s.child===null||s.tag===4)continue e;s.child.return=s,s=s.child}if(!(s.flags&2))return s.stateNode}}function Vj(s,e,i){var a=s.tag;if(a===5||a===6)s=s.stateNode,e?i.nodeType===8?i.parentNode.insertBefore(s,e):i.insertBefore(s,e):(i.nodeType===8?(e=i.parentNode,e.insertBefore(s,i)):(e=i,e.appendChild(s)),i=i._reactRootContainer,i!=null||e.onclick!==null||(e.onclick=Bf));else if(a!==4&&(s=s.child,s!==null))for(Vj(s,e,i),s=s.sibling;s!==null;)Vj(s,e,i),s=s.sibling}function Wj(s,e,i){var a=s.tag;if(a===5||a===6)s=s.stateNode,e?i.insertBefore(s,e):i.appendChild(s);else if(a!==4&&(s=s.child,s!==null))for(Wj(s,e,i),s=s.sibling;s!==null;)Wj(s,e,i),s=s.sibling}var X=null,Xj=!1;function Yj(s,e,i){for(i=i.child;i!==null;)Zj(s,e,i),i=i.sibling}function Zj(s,e,i){if(lc&&typeof lc.onCommitFiberUnmount=="function")try{lc.onCommitFiberUnmount(kc,i)}catch{}switch(i.tag){case 5:U||Lj(i,e);case 6:var a=X,o=Xj;X=null,Yj(s,e,i),X=a,Xj=o,X!==null&&(Xj?(s=X,i=i.stateNode,s.nodeType===8?s.parentNode.removeChild(i):s.removeChild(i)):X.removeChild(i.stateNode));break;case 18:X!==null&&(Xj?(s=X,i=i.stateNode,s.nodeType===8?Kf(s.parentNode,i):s.nodeType===1&&Kf(s,i),bd(s)):Kf(X,i.stateNode));break;case 4:a=X,o=Xj,X=i.stateNode.containerInfo,Xj=!0,Yj(s,e,i),X=a,Xj=o;break;case 0:case 11:case 14:case 15:if(!U&&(a=i.updateQueue,a!==null&&(a=a.lastEffect,a!==null))){o=a=a.next;do{var c=o,d=c.destroy;c=c.tag,d!==void 0&&(c&2||c&4)&&Mj(i,e,d),o=o.next}while(o!==a)}Yj(s,e,i);break;case 1:if(!U&&(Lj(i,e),a=i.stateNode,typeof a.componentWillUnmount=="function"))try{a.props=i.memoizedProps,a.state=i.memoizedState,a.componentWillUnmount()}catch(g){W(i,e,g)}Yj(s,e,i);break;case 21:Yj(s,e,i);break;case 22:i.mode&1?(U=(a=U)||i.memoizedState!==null,Yj(s,e,i),U=a):Yj(s,e,i);break;default:Yj(s,e,i)}}function ak(s){var e=s.updateQueue;if(e!==null){s.updateQueue=null;var i=s.stateNode;i===null&&(i=s.stateNode=new Kj),e.forEach(function(a){var o=bk.bind(null,s,a);i.has(a)||(i.add(a),a.then(o,o))})}}function ck(s,e){var i=e.deletions;if(i!==null)for(var a=0;a<i.length;a++){var o=i[a];try{var c=s,d=e,g=d;e:for(;g!==null;){switch(g.tag){case 5:X=g.stateNode,Xj=!1;break e;case 3:X=g.stateNode.containerInfo,Xj=!0;break e;case 4:X=g.stateNode.containerInfo,Xj=!0;break e}g=g.return}if(X===null)throw Error(p(160));Zj(c,d,o),X=null,Xj=!1;var h=o.alternate;h!==null&&(h.return=null),o.return=null}catch(_){W(o,e,_)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)dk(e,s),e=e.sibling}function dk(s,e){var i=s.alternate,a=s.flags;switch(s.tag){case 0:case 11:case 14:case 15:if(ck(e,s),ek(s),a&4){try{Pj(3,s,s.return),Qj(3,s)}catch(ct){W(s,s.return,ct)}try{Pj(5,s,s.return)}catch(ct){W(s,s.return,ct)}}break;case 1:ck(e,s),ek(s),a&512&&i!==null&&Lj(i,i.return);break;case 5:if(ck(e,s),ek(s),a&512&&i!==null&&Lj(i,i.return),s.flags&32){var o=s.stateNode;try{ob(o,"")}catch(ct){W(s,s.return,ct)}}if(a&4&&(o=s.stateNode,o!=null)){var c=s.memoizedProps,d=i!==null?i.memoizedProps:c,g=s.type,h=s.updateQueue;if(s.updateQueue=null,h!==null)try{g==="input"&&c.type==="radio"&&c.name!=null&&ab(o,c),vb(g,d);var _=vb(g,c);for(d=0;d<h.length;d+=2){var b=h[d],rt=h[d+1];b==="style"?sb(o,rt):b==="dangerouslySetInnerHTML"?nb(o,rt):b==="children"?ob(o,rt):ta(o,b,rt,_)}switch(g){case"input":bb(o,c);break;case"textarea":ib(o,c);break;case"select":var nt=o._wrapperState.wasMultiple;o._wrapperState.wasMultiple=!!c.multiple;var it=c.value;it!=null?fb(o,!!c.multiple,it,!1):nt!==!!c.multiple&&(c.defaultValue!=null?fb(o,!!c.multiple,c.defaultValue,!0):fb(o,!!c.multiple,c.multiple?[]:"",!1))}o[Pf]=c}catch(ct){W(s,s.return,ct)}}break;case 6:if(ck(e,s),ek(s),a&4){if(s.stateNode===null)throw Error(p(162));o=s.stateNode,c=s.memoizedProps;try{o.nodeValue=c}catch(ct){W(s,s.return,ct)}}break;case 3:if(ck(e,s),ek(s),a&4&&i!==null&&i.memoizedState.isDehydrated)try{bd(e.containerInfo)}catch(ct){W(s,s.return,ct)}break;case 4:ck(e,s),ek(s);break;case 13:ck(e,s),ek(s),o=s.child,o.flags&8192&&(c=o.memoizedState!==null,o.stateNode.isHidden=c,!c||o.alternate!==null&&o.alternate.memoizedState!==null||(fk=B())),a&4&&ak(s);break;case 22:if(b=i!==null&&i.memoizedState!==null,s.mode&1?(U=(_=U)||b,ck(e,s),U=_):ck(e,s),ek(s),a&8192){if(_=s.memoizedState!==null,(s.stateNode.isHidden=_)&&!b&&s.mode&1)for(V=s,b=s.child;b!==null;){for(rt=V=b;V!==null;){switch(nt=V,it=nt.child,nt.tag){case 0:case 11:case 14:case 15:Pj(4,nt,nt.return);break;case 1:Lj(nt,nt.return);var ot=nt.stateNode;if(typeof ot.componentWillUnmount=="function"){a=nt,i=nt.return;try{e=a,ot.props=e.memoizedProps,ot.state=e.memoizedState,ot.componentWillUnmount()}catch(ct){W(a,i,ct)}}break;case 5:Lj(nt,nt.return);break;case 22:if(nt.memoizedState!==null){gk(rt);continue}}it!==null?(it.return=nt,V=it):gk(rt)}b=b.sibling}e:for(b=null,rt=s;;){if(rt.tag===5){if(b===null){b=rt;try{o=rt.stateNode,_?(c=o.style,typeof c.setProperty=="function"?c.setProperty("display","none","important"):c.display="none"):(g=rt.stateNode,h=rt.memoizedProps.style,d=h!=null&&h.hasOwnProperty("display")?h.display:null,g.style.display=rb("display",d))}catch(ct){W(s,s.return,ct)}}}else if(rt.tag===6){if(b===null)try{rt.stateNode.nodeValue=_?"":rt.memoizedProps}catch(ct){W(s,s.return,ct)}}else if((rt.tag!==22&&rt.tag!==23||rt.memoizedState===null||rt===s)&&rt.child!==null){rt.child.return=rt,rt=rt.child;continue}if(rt===s)break e;for(;rt.sibling===null;){if(rt.return===null||rt.return===s)break e;b===rt&&(b=null),rt=rt.return}b===rt&&(b=null),rt.sibling.return=rt.return,rt=rt.sibling}}break;case 19:ck(e,s),ek(s),a&4&&ak(s);break;case 21:break;default:ck(e,s),ek(s)}}function ek(s){var e=s.flags;if(e&2){try{e:{for(var i=s.return;i!==null;){if(Tj(i)){var a=i;break e}i=i.return}throw Error(p(160))}switch(a.tag){case 5:var o=a.stateNode;a.flags&32&&(ob(o,""),a.flags&=-33);var c=Uj(s);Wj(s,c,o);break;case 3:case 4:var d=a.stateNode.containerInfo,g=Uj(s);Vj(s,g,d);break;default:throw Error(p(161))}}catch(h){W(s,s.return,h)}s.flags&=-3}e&4096&&(s.flags&=-4097)}function hk(s,e,i){V=s,ik(s)}function ik(s,e,i){for(var a=(s.mode&1)!==0;V!==null;){var o=V,c=o.child;if(o.tag===22&&a){var d=o.memoizedState!==null||Jj;if(!d){var g=o.alternate,h=g!==null&&g.memoizedState!==null||U;g=Jj;var _=U;if(Jj=d,(U=h)&&!_)for(V=o;V!==null;)d=V,h=d.child,d.tag===22&&d.memoizedState!==null?jk(o):h!==null?(h.return=d,V=h):jk(o);for(;c!==null;)V=c,ik(c),c=c.sibling;V=o,Jj=g,U=_}kk(s)}else o.subtreeFlags&8772&&c!==null?(c.return=o,V=c):kk(s)}}function kk(s){for(;V!==null;){var e=V;if(e.flags&8772){var i=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:U||Qj(5,e);break;case 1:var a=e.stateNode;if(e.flags&4&&!U)if(i===null)a.componentDidMount();else{var o=e.elementType===e.type?i.memoizedProps:Ci(e.type,i.memoizedProps);a.componentDidUpdate(o,i.memoizedState,a.__reactInternalSnapshotBeforeUpdate)}var c=e.updateQueue;c!==null&&sh(e,c,a);break;case 3:var d=e.updateQueue;if(d!==null){if(i=null,e.child!==null)switch(e.child.tag){case 5:i=e.child.stateNode;break;case 1:i=e.child.stateNode}sh(e,d,i)}break;case 5:var g=e.stateNode;if(i===null&&e.flags&4){i=g;var h=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":h.autoFocus&&i.focus();break;case"img":h.src&&(i.src=h.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var _=e.alternate;if(_!==null){var b=_.memoizedState;if(b!==null){var rt=b.dehydrated;rt!==null&&bd(rt)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(p(163))}U||e.flags&512&&Rj(e)}catch(nt){W(e,e.return,nt)}}if(e===s){V=null;break}if(i=e.sibling,i!==null){i.return=e.return,V=i;break}V=e.return}}function gk(s){for(;V!==null;){var e=V;if(e===s){V=null;break}var i=e.sibling;if(i!==null){i.return=e.return,V=i;break}V=e.return}}function jk(s){for(;V!==null;){var e=V;try{switch(e.tag){case 0:case 11:case 15:var i=e.return;try{Qj(4,e)}catch(h){W(e,i,h)}break;case 1:var a=e.stateNode;if(typeof a.componentDidMount=="function"){var o=e.return;try{a.componentDidMount()}catch(h){W(e,o,h)}}var c=e.return;try{Rj(e)}catch(h){W(e,c,h)}break;case 5:var d=e.return;try{Rj(e)}catch(h){W(e,d,h)}}}catch(h){W(e,e.return,h)}if(e===s){V=null;break}var g=e.sibling;if(g!==null){g.return=e.return,V=g;break}V=e.return}}var lk=Math.ceil,mk=ua.ReactCurrentDispatcher,nk=ua.ReactCurrentOwner,ok=ua.ReactCurrentBatchConfig,K=0,Q=null,Y=null,Z=0,fj=0,ej=Uf(0),T=0,pk=null,rh=0,qk=0,rk=0,sk=null,tk=null,fk=0,Gj=1/0,uk=null,Oi=!1,Pi=null,Ri=null,vk=!1,wk=null,xk=0,yk=0,zk=null,Ak=-1,Bk=0;function R(){return K&6?B():Ak!==-1?Ak:Ak=B()}function yi(s){return s.mode&1?K&2&&Z!==0?Z&-Z:Kg.transition!==null?(Bk===0&&(Bk=yc()),Bk):(s=C,s!==0||(s=window.event,s=s===void 0?16:jd(s.type)),s):1}function gi(s,e,i,a){if(50<yk)throw yk=0,zk=null,Error(p(185));Ac(s,i,a),(!(K&2)||s!==Q)&&(s===Q&&(!(K&2)&&(qk|=i),T===4&&Ck(s,Z)),Dk(s,a),i===1&&K===0&&!(e.mode&1)&&(Gj=B()+500,fg&&jg()))}function Dk(s,e){var i=s.callbackNode;wc(s,e);var a=uc(s,s===Q?Z:0);if(a===0)i!==null&&bc(i),s.callbackNode=null,s.callbackPriority=0;else if(e=a&-a,s.callbackPriority!==e){if(i!=null&&bc(i),e===1)s.tag===0?ig(Ek.bind(null,s)):hg(Ek.bind(null,s)),Jf(function(){!(K&6)&&jg()}),i=null;else{switch(Dc(a)){case 1:i=fc;break;case 4:i=gc;break;case 16:i=hc;break;case 536870912:i=jc;break;default:i=hc}i=Fk(i,Gk.bind(null,s))}s.callbackPriority=e,s.callbackNode=i}}function Gk(s,e){if(Ak=-1,Bk=0,K&6)throw Error(p(327));var i=s.callbackNode;if(Hk()&&s.callbackNode!==i)return null;var a=uc(s,s===Q?Z:0);if(a===0)return null;if(a&30||a&s.expiredLanes||e)e=Ik(s,a);else{e=a;var o=K;K|=2;var c=Jk();(Q!==s||Z!==e)&&(uk=null,Gj=B()+500,Kk(s,e));do try{Lk();break}catch(g){Mk(s,g)}while(1);$g(),mk.current=c,K=o,Y!==null?e=0:(Q=null,Z=0,e=T)}if(e!==0){if(e===2&&(o=xc(s),o!==0&&(a=o,e=Nk(s,o))),e===1)throw i=pk,Kk(s,0),Ck(s,a),Dk(s,B()),i;if(e===6)Ck(s,a);else{if(o=s.current.alternate,!(a&30)&&!Ok(o)&&(e=Ik(s,a),e===2&&(c=xc(s),c!==0&&(a=c,e=Nk(s,c))),e===1))throw i=pk,Kk(s,0),Ck(s,a),Dk(s,B()),i;switch(s.finishedWork=o,s.finishedLanes=a,e){case 0:case 1:throw Error(p(345));case 2:Pk(s,tk,uk);break;case 3:if(Ck(s,a),(a&130023424)===a&&(e=fk+500-B(),10<e)){if(uc(s,0)!==0)break;if(o=s.suspendedLanes,(o&a)!==a){R(),s.pingedLanes|=s.suspendedLanes&o;break}s.timeoutHandle=Ff(Pk.bind(null,s,tk,uk),e);break}Pk(s,tk,uk);break;case 4:if(Ck(s,a),(a&4194240)===a)break;for(e=s.eventTimes,o=-1;0<a;){var d=31-oc(a);c=1<<d,d=e[d],d>o&&(o=d),a&=~c}if(a=o,a=B()-a,a=(120>a?120:480>a?480:1080>a?1080:1920>a?1920:3e3>a?3e3:4320>a?4320:1960*lk(a/1960))-a,10<a){s.timeoutHandle=Ff(Pk.bind(null,s,tk,uk),a);break}Pk(s,tk,uk);break;case 5:Pk(s,tk,uk);break;default:throw Error(p(329))}}}return Dk(s,B()),s.callbackNode===i?Gk.bind(null,s):null}function Nk(s,e){var i=sk;return s.current.memoizedState.isDehydrated&&(Kk(s,e).flags|=256),s=Ik(s,e),s!==2&&(e=tk,tk=i,e!==null&&Fj(e)),s}function Fj(s){tk===null?tk=s:tk.push.apply(tk,s)}function Ok(s){for(var e=s;;){if(e.flags&16384){var i=e.updateQueue;if(i!==null&&(i=i.stores,i!==null))for(var a=0;a<i.length;a++){var o=i[a],c=o.getSnapshot;o=o.value;try{if(!He(c(),o))return!1}catch{return!1}}}if(i=e.child,e.subtreeFlags&16384&&i!==null)i.return=e,e=i;else{if(e===s)break;for(;e.sibling===null;){if(e.return===null||e.return===s)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Ck(s,e){for(e&=~rk,e&=~qk,s.suspendedLanes|=e,s.pingedLanes&=~e,s=s.expirationTimes;0<e;){var i=31-oc(e),a=1<<i;s[i]=-1,e&=~a}}function Ek(s){if(K&6)throw Error(p(327));Hk();var e=uc(s,0);if(!(e&1))return Dk(s,B()),null;var i=Ik(s,e);if(s.tag!==0&&i===2){var a=xc(s);a!==0&&(e=a,i=Nk(s,a))}if(i===1)throw i=pk,Kk(s,0),Ck(s,e),Dk(s,B()),i;if(i===6)throw Error(p(345));return s.finishedWork=s.current.alternate,s.finishedLanes=e,Pk(s,tk,uk),Dk(s,B()),null}function Qk(s,e){var i=K;K|=1;try{return s(e)}finally{K=i,K===0&&(Gj=B()+500,fg&&jg())}}function Rk(s){wk!==null&&wk.tag===0&&!(K&6)&&Hk();var e=K;K|=1;var i=ok.transition,a=C;try{if(ok.transition=null,C=1,s)return s()}finally{C=a,ok.transition=i,K=e,!(K&6)&&jg()}}function Hj(){fj=ej.current,E(ej)}function Kk(s,e){s.finishedWork=null,s.finishedLanes=0;var i=s.timeoutHandle;if(i!==-1&&(s.timeoutHandle=-1,Gf(i)),Y!==null)for(i=Y.return;i!==null;){var a=i;switch(wg(a),a.tag){case 1:a=a.type.childContextTypes,a!=null&&$f();break;case 3:zh(),E(Wf),E(H),Eh();break;case 5:Bh(a);break;case 4:zh();break;case 13:E(L);break;case 19:E(L);break;case 10:ah(a.type._context);break;case 22:case 23:Hj()}i=i.return}if(Q=s,Y=s=Pg(s.current,null),Z=fj=e,T=0,pk=null,rk=qk=rh=0,tk=sk=null,fh!==null){for(e=0;e<fh.length;e++)if(i=fh[e],a=i.interleaved,a!==null){i.interleaved=null;var o=a.next,c=i.pending;if(c!==null){var d=c.next;c.next=o,a.next=d}i.pending=a}fh=null}return s}function Mk(s,e){do{var i=Y;try{if($g(),Fh.current=Rh,Ih){for(var a=M.memoizedState;a!==null;){var o=a.queue;o!==null&&(o.pending=null),a=a.next}Ih=!1}if(Hh=0,O=N=M=null,Jh=!1,Kh=0,nk.current=null,i===null||i.return===null){T=1,pk=e,Y=null;break}e:{var c=s,d=i.return,g=i,h=e;if(e=Z,g.flags|=32768,h!==null&&typeof h=="object"&&typeof h.then=="function"){var _=h,b=g,rt=b.tag;if(!(b.mode&1)&&(rt===0||rt===11||rt===15)){var nt=b.alternate;nt?(b.updateQueue=nt.updateQueue,b.memoizedState=nt.memoizedState,b.lanes=nt.lanes):(b.updateQueue=null,b.memoizedState=null)}var it=Ui(d);if(it!==null){it.flags&=-257,Vi(it,d,g,c,e),it.mode&1&&Si(c,_,e),e=it,h=_;var ot=e.updateQueue;if(ot===null){var ct=new Set;ct.add(h),e.updateQueue=ct}else ot.add(h);break e}else{if(!(e&1)){Si(c,_,e),tj();break e}h=Error(p(426))}}else if(I&&g.mode&1){var tt=Ui(d);if(tt!==null){!(tt.flags&65536)&&(tt.flags|=256),Vi(tt,d,g,c,e),Jg(Ji(h,g));break e}}c=h=Ji(h,g),T!==4&&(T=2),sk===null?sk=[c]:sk.push(c),c=d;do{switch(c.tag){case 3:c.flags|=65536,e&=-e,c.lanes|=e;var $=Ni(c,h,e);ph(c,$);break e;case 1:g=h;var j=c.type,et=c.stateNode;if(!(c.flags&128)&&(typeof j.getDerivedStateFromError=="function"||et!==null&&typeof et.componentDidCatch=="function"&&(Ri===null||!Ri.has(et)))){c.flags|=65536,e&=-e,c.lanes|=e;var ft=Qi(c,g,e);ph(c,ft);break e}}c=c.return}while(c!==null)}Sk(i)}catch(at){e=at,Y===i&&i!==null&&(Y=i=i.return);continue}break}while(1)}function Jk(){var s=mk.current;return mk.current=Rh,s===null?Rh:s}function tj(){(T===0||T===3||T===2)&&(T=4),Q===null||!(rh&268435455)&&!(qk&268435455)||Ck(Q,Z)}function Ik(s,e){var i=K;K|=2;var a=Jk();(Q!==s||Z!==e)&&(uk=null,Kk(s,e));do try{Tk();break}catch(o){Mk(s,o)}while(1);if($g(),K=i,mk.current=a,Y!==null)throw Error(p(261));return Q=null,Z=0,T}function Tk(){for(;Y!==null;)Uk(Y)}function Lk(){for(;Y!==null&&!cc();)Uk(Y)}function Uk(s){var e=Vk(s.alternate,s,fj);s.memoizedProps=s.pendingProps,e===null?Sk(s):Y=e,nk.current=null}function Sk(s){var e=s;do{var i=e.alternate;if(s=e.return,e.flags&32768){if(i=Ij(i,e),i!==null){i.flags&=32767,Y=i;return}if(s!==null)s.flags|=32768,s.subtreeFlags=0,s.deletions=null;else{T=6,Y=null;return}}else if(i=Ej(i,e,fj),i!==null){Y=i;return}if(e=e.sibling,e!==null){Y=e;return}Y=e=s}while(e!==null);T===0&&(T=5)}function Pk(s,e,i){var a=C,o=ok.transition;try{ok.transition=null,C=1,Wk(s,e,i,a)}finally{ok.transition=o,C=a}return null}function Wk(s,e,i,a){do Hk();while(wk!==null);if(K&6)throw Error(p(327));i=s.finishedWork;var o=s.finishedLanes;if(i===null)return null;if(s.finishedWork=null,s.finishedLanes=0,i===s.current)throw Error(p(177));s.callbackNode=null,s.callbackPriority=0;var c=i.lanes|i.childLanes;if(Bc(s,c),s===Q&&(Y=Q=null,Z=0),!(i.subtreeFlags&2064)&&!(i.flags&2064)||vk||(vk=!0,Fk(hc,function(){return Hk(),null})),c=(i.flags&15990)!==0,i.subtreeFlags&15990||c){c=ok.transition,ok.transition=null;var d=C;C=1;var g=K;K|=4,nk.current=null,Oj(s,i),dk(i,s),Oe(Df),dd=!!Cf,Df=Cf=null,s.current=i,hk(i),dc(),K=g,C=d,ok.transition=c}else s.current=i;if(vk&&(vk=!1,wk=s,xk=o),c=s.pendingLanes,c===0&&(Ri=null),mc(i.stateNode),Dk(s,B()),e!==null)for(a=s.onRecoverableError,i=0;i<e.length;i++)o=e[i],a(o.value,{componentStack:o.stack,digest:o.digest});if(Oi)throw Oi=!1,s=Pi,Pi=null,s;return xk&1&&s.tag!==0&&Hk(),c=s.pendingLanes,c&1?s===zk?yk++:(yk=0,zk=s):yk=0,jg(),null}function Hk(){if(wk!==null){var s=Dc(xk),e=ok.transition,i=C;try{if(ok.transition=null,C=16>s?16:s,wk===null)var a=!1;else{if(s=wk,wk=null,xk=0,K&6)throw Error(p(331));var o=K;for(K|=4,V=s.current;V!==null;){var c=V,d=c.child;if(V.flags&16){var g=c.deletions;if(g!==null){for(var h=0;h<g.length;h++){var _=g[h];for(V=_;V!==null;){var b=V;switch(b.tag){case 0:case 11:case 15:Pj(8,b,c)}var rt=b.child;if(rt!==null)rt.return=b,V=rt;else for(;V!==null;){b=V;var nt=b.sibling,it=b.return;if(Sj(b),b===_){V=null;break}if(nt!==null){nt.return=it,V=nt;break}V=it}}}var ot=c.alternate;if(ot!==null){var ct=ot.child;if(ct!==null){ot.child=null;do{var tt=ct.sibling;ct.sibling=null,ct=tt}while(ct!==null)}}V=c}}if(c.subtreeFlags&2064&&d!==null)d.return=c,V=d;else e:for(;V!==null;){if(c=V,c.flags&2048)switch(c.tag){case 0:case 11:case 15:Pj(9,c,c.return)}var $=c.sibling;if($!==null){$.return=c.return,V=$;break e}V=c.return}}var j=s.current;for(V=j;V!==null;){d=V;var et=d.child;if(d.subtreeFlags&2064&&et!==null)et.return=d,V=et;else e:for(d=j;V!==null;){if(g=V,g.flags&2048)try{switch(g.tag){case 0:case 11:case 15:Qj(9,g)}}catch(at){W(g,g.return,at)}if(g===d){V=null;break e}var ft=g.sibling;if(ft!==null){ft.return=g.return,V=ft;break e}V=g.return}}if(K=o,jg(),lc&&typeof lc.onPostCommitFiberRoot=="function")try{lc.onPostCommitFiberRoot(kc,s)}catch{}a=!0}return a}finally{C=i,ok.transition=e}}return!1}function Xk(s,e,i){e=Ji(i,e),e=Ni(s,e,1),s=nh(s,e,1),e=R(),s!==null&&(Ac(s,1,e),Dk(s,e))}function W(s,e,i){if(s.tag===3)Xk(s,s,i);else for(;e!==null;){if(e.tag===3){Xk(e,s,i);break}else if(e.tag===1){var a=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof a.componentDidCatch=="function"&&(Ri===null||!Ri.has(a))){s=Ji(i,s),s=Qi(e,s,1),e=nh(e,s,1),s=R(),e!==null&&(Ac(e,1,s),Dk(e,s));break}}e=e.return}}function Ti(s,e,i){var a=s.pingCache;a!==null&&a.delete(e),e=R(),s.pingedLanes|=s.suspendedLanes&i,Q===s&&(Z&i)===i&&(T===4||T===3&&(Z&130023424)===Z&&500>B()-fk?Kk(s,0):rk|=i),Dk(s,e)}function Yk(s,e){e===0&&(s.mode&1?(e=sc,sc<<=1,!(sc&130023424)&&(sc=4194304)):e=1);var i=R();s=ih(s,e),s!==null&&(Ac(s,e,i),Dk(s,i))}function uj(s){var e=s.memoizedState,i=0;e!==null&&(i=e.retryLane),Yk(s,i)}function bk(s,e){var i=0;switch(s.tag){case 13:var a=s.stateNode,o=s.memoizedState;o!==null&&(i=o.retryLane);break;case 19:a=s.stateNode;break;default:throw Error(p(314))}a!==null&&a.delete(e),Yk(s,i)}var Vk;Vk=function(s,e,i){if(s!==null)if(s.memoizedProps!==e.pendingProps||Wf.current)dh=!0;else{if(!(s.lanes&i)&&!(e.flags&128))return dh=!1,yj(s,e,i);dh=!!(s.flags&131072)}else dh=!1,I&&e.flags&1048576&&ug(e,ng,e.index);switch(e.lanes=0,e.tag){case 2:var a=e.type;ij(s,e),s=e.pendingProps;var o=Yf(e,H.current);ch(e,i),o=Nh(null,e,a,s,o,i);var c=Sh();return e.flags|=1,typeof o=="object"&&o!==null&&typeof o.render=="function"&&o.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Zf(a)?(c=!0,cg(e)):c=!1,e.memoizedState=o.state!==null&&o.state!==void 0?o.state:null,kh(e),o.updater=Ei,e.stateNode=o,o._reactInternals=e,Ii(e,a,s,i),e=jj(null,e,a,!0,c,i)):(e.tag=0,I&&c&&vg(e),Xi(null,e,o,i),e=e.child),e;case 16:a=e.elementType;e:{switch(ij(s,e),s=e.pendingProps,o=a._init,a=o(a._payload),e.type=a,o=e.tag=Zk(a),s=Ci(a,s),o){case 0:e=cj(null,e,a,s,i);break e;case 1:e=hj(null,e,a,s,i);break e;case 11:e=Yi(null,e,a,s,i);break e;case 14:e=$i(null,e,a,Ci(a.type,s),i);break e}throw Error(p(306,a,""))}return e;case 0:return a=e.type,o=e.pendingProps,o=e.elementType===a?o:Ci(a,o),cj(s,e,a,o,i);case 1:return a=e.type,o=e.pendingProps,o=e.elementType===a?o:Ci(a,o),hj(s,e,a,o,i);case 3:e:{if(kj(e),s===null)throw Error(p(387));a=e.pendingProps,c=e.memoizedState,o=c.element,lh(s,e),qh(e,a,null,i);var d=e.memoizedState;if(a=d.element,c.isDehydrated)if(c={element:a,isDehydrated:!1,cache:d.cache,pendingSuspenseBoundaries:d.pendingSuspenseBoundaries,transitions:d.transitions},e.updateQueue.baseState=c,e.memoizedState=c,e.flags&256){o=Ji(Error(p(423)),e),e=lj(s,e,a,i,o);break e}else if(a!==o){o=Ji(Error(p(424)),e),e=lj(s,e,a,i,o);break e}else for(yg=Lf(e.stateNode.containerInfo.firstChild),xg=e,I=!0,zg=null,i=Vg(e,null,a,i),e.child=i;i;)i.flags=i.flags&-3|4096,i=i.sibling;else{if(Ig(),a===o){e=Zi(s,e,i);break e}Xi(s,e,a,i)}e=e.child}return e;case 5:return Ah(e),s===null&&Eg(e),a=e.type,o=e.pendingProps,c=s!==null?s.memoizedProps:null,d=o.children,Ef(a,o)?d=null:c!==null&&Ef(a,c)&&(e.flags|=32),gj(s,e),Xi(s,e,d,i),e.child;case 6:return s===null&&Eg(e),null;case 13:return oj(s,e,i);case 4:return yh(e,e.stateNode.containerInfo),a=e.pendingProps,s===null?e.child=Ug(e,null,a,i):Xi(s,e,a,i),e.child;case 11:return a=e.type,o=e.pendingProps,o=e.elementType===a?o:Ci(a,o),Yi(s,e,a,o,i);case 7:return Xi(s,e,e.pendingProps,i),e.child;case 8:return Xi(s,e,e.pendingProps.children,i),e.child;case 12:return Xi(s,e,e.pendingProps.children,i),e.child;case 10:e:{if(a=e.type._context,o=e.pendingProps,c=e.memoizedProps,d=o.value,G(Wg,a._currentValue),a._currentValue=d,c!==null)if(He(c.value,d)){if(c.children===o.children&&!Wf.current){e=Zi(s,e,i);break e}}else for(c=e.child,c!==null&&(c.return=e);c!==null;){var g=c.dependencies;if(g!==null){d=c.child;for(var h=g.firstContext;h!==null;){if(h.context===a){if(c.tag===1){h=mh(-1,i&-i),h.tag=2;var _=c.updateQueue;if(_!==null){_=_.shared;var b=_.pending;b===null?h.next=h:(h.next=b.next,b.next=h),_.pending=h}}c.lanes|=i,h=c.alternate,h!==null&&(h.lanes|=i),bh(c.return,i,e),g.lanes|=i;break}h=h.next}}else if(c.tag===10)d=c.type===e.type?null:c.child;else if(c.tag===18){if(d=c.return,d===null)throw Error(p(341));d.lanes|=i,g=d.alternate,g!==null&&(g.lanes|=i),bh(d,i,e),d=c.sibling}else d=c.child;if(d!==null)d.return=c;else for(d=c;d!==null;){if(d===e){d=null;break}if(c=d.sibling,c!==null){c.return=d.return,d=c;break}d=d.return}c=d}Xi(s,e,o.children,i),e=e.child}return e;case 9:return o=e.type,a=e.pendingProps.children,ch(e,i),o=eh(o),a=a(o),e.flags|=1,Xi(s,e,a,i),e.child;case 14:return a=e.type,o=Ci(a,e.pendingProps),o=Ci(a.type,o),$i(s,e,a,o,i);case 15:return bj(s,e,e.type,e.pendingProps,i);case 17:return a=e.type,o=e.pendingProps,o=e.elementType===a?o:Ci(a,o),ij(s,e),e.tag=1,Zf(a)?(s=!0,cg(e)):s=!1,ch(e,i),Gi(e,a,o),Ii(e,a,o,i),jj(null,e,a,!0,s,i);case 19:return xj(s,e,i);case 22:return dj(s,e,i)}throw Error(p(156,e.tag))};function Fk(s,e){return ac(s,e)}function $k(s,e,i,a){this.tag=s,this.key=i,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=a,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Bg(s,e,i,a){return new $k(s,e,i,a)}function aj(s){return s=s.prototype,!(!s||!s.isReactComponent)}function Zk(s){if(typeof s=="function")return aj(s)?1:0;if(s!=null){if(s=s.$$typeof,s===Da)return 11;if(s===Ga)return 14}return 2}function Pg(s,e){var i=s.alternate;return i===null?(i=Bg(s.tag,e,s.key,s.mode),i.elementType=s.elementType,i.type=s.type,i.stateNode=s.stateNode,i.alternate=s,s.alternate=i):(i.pendingProps=e,i.type=s.type,i.flags=0,i.subtreeFlags=0,i.deletions=null),i.flags=s.flags&14680064,i.childLanes=s.childLanes,i.lanes=s.lanes,i.child=s.child,i.memoizedProps=s.memoizedProps,i.memoizedState=s.memoizedState,i.updateQueue=s.updateQueue,e=s.dependencies,i.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},i.sibling=s.sibling,i.index=s.index,i.ref=s.ref,i}function Rg(s,e,i,a,o,c){var d=2;if(a=s,typeof s=="function")aj(s)&&(d=1);else if(typeof s=="string")d=5;else e:switch(s){case ya:return Tg(i.children,o,c,e);case za:d=8,o|=8;break;case Aa:return s=Bg(12,i,e,o|2),s.elementType=Aa,s.lanes=c,s;case Ea:return s=Bg(13,i,e,o),s.elementType=Ea,s.lanes=c,s;case Fa:return s=Bg(19,i,e,o),s.elementType=Fa,s.lanes=c,s;case Ia:return pj(i,o,c,e);default:if(typeof s=="object"&&s!==null)switch(s.$$typeof){case Ba:d=10;break e;case Ca:d=9;break e;case Da:d=11;break e;case Ga:d=14;break e;case Ha:d=16,a=null;break e}throw Error(p(130,s==null?s:typeof s,""))}return e=Bg(d,i,e,o),e.elementType=s,e.type=a,e.lanes=c,e}function Tg(s,e,i,a){return s=Bg(7,s,a,e),s.lanes=i,s}function pj(s,e,i,a){return s=Bg(22,s,a,e),s.elementType=Ia,s.lanes=i,s.stateNode={isHidden:!1},s}function Qg(s,e,i){return s=Bg(6,s,null,e),s.lanes=i,s}function Sg(s,e,i){return e=Bg(4,s.children!==null?s.children:[],s.key,e),e.lanes=i,e.stateNode={containerInfo:s.containerInfo,pendingChildren:null,implementation:s.implementation},e}function al(s,e,i,a,o){this.tag=e,this.containerInfo=s,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=zc(0),this.expirationTimes=zc(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=zc(0),this.identifierPrefix=a,this.onRecoverableError=o,this.mutableSourceEagerHydrationData=null}function bl(s,e,i,a,o,c,d,g,h){return s=new al(s,e,i,g,h),e===1?(e=1,c===!0&&(e|=8)):e=0,c=Bg(3,null,null,e),s.current=c,c.stateNode=s,c.memoizedState={element:a,isDehydrated:i,cache:null,transitions:null,pendingSuspenseBoundaries:null},kh(c),s}function cl(s,e,i){var a=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:wa,key:a==null?null:""+a,children:s,containerInfo:e,implementation:i}}function dl(s){if(!s)return Vf;s=s._reactInternals;e:{if(Vb(s)!==s||s.tag!==1)throw Error(p(170));var e=s;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Zf(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(p(171))}if(s.tag===1){var i=s.type;if(Zf(i))return bg(s,i,e)}return e}function el(s,e,i,a,o,c,d,g,h){return s=bl(i,a,!0,s,o,c,d,g,h),s.context=dl(null),i=s.current,a=R(),o=yi(i),c=mh(a,o),c.callback=e??null,nh(i,c,o),s.current.lanes=o,Ac(s,o,a),Dk(s,a),s}function fl(s,e,i,a){var o=e.current,c=R(),d=yi(o);return i=dl(i),e.context===null?e.context=i:e.pendingContext=i,e=mh(c,d),e.payload={element:s},a=a===void 0?null:a,a!==null&&(e.callback=a),s=nh(o,e,d),s!==null&&(gi(s,o,d,c),oh(s,o,d)),d}function gl(s){if(s=s.current,!s.child)return null;switch(s.child.tag){case 5:return s.child.stateNode;default:return s.child.stateNode}}function hl(s,e){if(s=s.memoizedState,s!==null&&s.dehydrated!==null){var i=s.retryLane;s.retryLane=i!==0&&i<e?i:e}}function il(s,e){hl(s,e),(s=s.alternate)&&hl(s,e)}function jl(){return null}var kl=typeof reportError=="function"?reportError:function(s){console.error(s)};function ll(s){this._internalRoot=s}ml.prototype.render=ll.prototype.render=function(s){var e=this._internalRoot;if(e===null)throw Error(p(409));fl(s,e,null,null)};ml.prototype.unmount=ll.prototype.unmount=function(){var s=this._internalRoot;if(s!==null){this._internalRoot=null;var e=s.containerInfo;Rk(function(){fl(null,s,null,null)}),e[uf]=null}};function ml(s){this._internalRoot=s}ml.prototype.unstable_scheduleHydration=function(s){if(s){var e=Hc();s={blockedOn:null,target:s,priority:e};for(var i=0;i<Qc.length&&e!==0&&e<Qc[i].priority;i++);Qc.splice(i,0,s),i===0&&Vc(s)}};function nl(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11)}function ol(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11&&(s.nodeType!==8||s.nodeValue!==" react-mount-point-unstable "))}function pl(){}function ql(s,e,i,a,o){if(o){if(typeof a=="function"){var c=a;a=function(){var _=gl(d);c.call(_)}}var d=el(e,a,s,0,null,!1,!1,"",pl);return s._reactRootContainer=d,s[uf]=d.current,sf(s.nodeType===8?s.parentNode:s),Rk(),d}for(;o=s.lastChild;)s.removeChild(o);if(typeof a=="function"){var g=a;a=function(){var _=gl(h);g.call(_)}}var h=bl(s,0,!1,null,null,!1,!1,"",pl);return s._reactRootContainer=h,s[uf]=h.current,sf(s.nodeType===8?s.parentNode:s),Rk(function(){fl(e,h,i,a)}),h}function rl(s,e,i,a,o){var c=i._reactRootContainer;if(c){var d=c;if(typeof o=="function"){var g=o;o=function(){var h=gl(d);g.call(h)}}fl(e,d,s,o)}else d=ql(i,e,s,o,a);return gl(d)}Ec=function(s){switch(s.tag){case 3:var e=s.stateNode;if(e.current.memoizedState.isDehydrated){var i=tc(e.pendingLanes);i!==0&&(Cc(e,i|1),Dk(e,B()),!(K&6)&&(Gj=B()+500,jg()))}break;case 13:Rk(function(){var a=ih(s,1);if(a!==null){var o=R();gi(a,s,1,o)}}),il(s,1)}};Fc=function(s){if(s.tag===13){var e=ih(s,134217728);if(e!==null){var i=R();gi(e,s,134217728,i)}il(s,134217728)}};Gc=function(s){if(s.tag===13){var e=yi(s),i=ih(s,e);if(i!==null){var a=R();gi(i,s,e,a)}il(s,e)}};Hc=function(){return C};Ic=function(s,e){var i=C;try{return C=s,e()}finally{C=i}};yb=function(s,e,i){switch(e){case"input":if(bb(s,i),e=i.name,i.type==="radio"&&e!=null){for(i=s;i.parentNode;)i=i.parentNode;for(i=i.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<i.length;e++){var a=i[e];if(a!==s&&a.form===s.form){var o=Db(a);if(!o)throw Error(p(90));Wa(a),bb(a,o)}}}break;case"textarea":ib(s,i);break;case"select":e=i.value,e!=null&&fb(s,!!i.multiple,e,!1)}};Gb=Qk;Hb=Rk;var sl={usingClientEntryPoint:!1,Events:[Cb,ue,Db,Eb,Fb,Qk]},tl={findFiberByHostInstance:Wc,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},ul={bundleType:tl.bundleType,version:tl.version,rendererPackageName:tl.rendererPackageName,rendererConfig:tl.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ua.ReactCurrentDispatcher,findHostInstanceByFiber:function(s){return s=Zb(s),s===null?null:s.stateNode},findFiberByHostInstance:tl.findFiberByHostInstance||jl,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var vl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!vl.isDisabled&&vl.supportsFiber)try{kc=vl.inject(ul),lc=vl}catch{}}reactDom_production_min.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=sl;reactDom_production_min.createPortal=function(s,e){var i=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!nl(e))throw Error(p(200));return cl(s,e,null,i)};reactDom_production_min.createRoot=function(s,e){if(!nl(s))throw Error(p(299));var i=!1,a="",o=kl;return e!=null&&(e.unstable_strictMode===!0&&(i=!0),e.identifierPrefix!==void 0&&(a=e.identifierPrefix),e.onRecoverableError!==void 0&&(o=e.onRecoverableError)),e=bl(s,1,!1,null,null,i,!1,a,o),s[uf]=e.current,sf(s.nodeType===8?s.parentNode:s),new ll(e)};reactDom_production_min.findDOMNode=function(s){if(s==null)return null;if(s.nodeType===1)return s;var e=s._reactInternals;if(e===void 0)throw typeof s.render=="function"?Error(p(188)):(s=Object.keys(s).join(","),Error(p(268,s)));return s=Zb(e),s=s===null?null:s.stateNode,s};reactDom_production_min.flushSync=function(s){return Rk(s)};reactDom_production_min.hydrate=function(s,e,i){if(!ol(e))throw Error(p(200));return rl(null,s,e,!0,i)};reactDom_production_min.hydrateRoot=function(s,e,i){if(!nl(s))throw Error(p(405));var a=i!=null&&i.hydratedSources||null,o=!1,c="",d=kl;if(i!=null&&(i.unstable_strictMode===!0&&(o=!0),i.identifierPrefix!==void 0&&(c=i.identifierPrefix),i.onRecoverableError!==void 0&&(d=i.onRecoverableError)),e=el(e,null,s,1,i??null,o,!1,c,d),s[uf]=e.current,sf(s),a)for(s=0;s<a.length;s++)i=a[s],o=i._getVersion,o=o(i._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[i,o]:e.mutableSourceEagerHydrationData.push(i,o);return new ml(e)};reactDom_production_min.render=function(s,e,i){if(!ol(e))throw Error(p(200));return rl(null,s,e,!1,i)};reactDom_production_min.unmountComponentAtNode=function(s){if(!ol(s))throw Error(p(40));return s._reactRootContainer?(Rk(function(){rl(null,null,s,!1,function(){s._reactRootContainer=null,s[uf]=null})}),!0):!1};reactDom_production_min.unstable_batchedUpdates=Qk;reactDom_production_min.unstable_renderSubtreeIntoContainer=function(s,e,i,a){if(!ol(i))throw Error(p(200));if(s==null||s._reactInternals===void 0)throw Error(p(38));return rl(s,e,i,!1,a)};reactDom_production_min.version="18.3.1-next-f1338f8080-20240426";function checkDCE(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(checkDCE)}catch(s){console.error(s)}}checkDCE(),reactDom.exports=reactDom_production_min;var reactDomExports=reactDom.exports,m=reactDomExports;client.createRoot=m.createRoot,client.hydrateRoot=m.hydrateRoot;/**
 * @remix-run/router v1.23.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function _extends$2(){return _extends$2=Object.assign?Object.assign.bind():function(s){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(s[a]=i[a])}return s},_extends$2.apply(this,arguments)}var Action;(function(s){s.Pop="POP",s.Push="PUSH",s.Replace="REPLACE"})(Action||(Action={}));const PopStateEventType="popstate";function createBrowserHistory(s){s===void 0&&(s={});function e(a,o){let{pathname:c,search:d,hash:g}=a.location;return createLocation("",{pathname:c,search:d,hash:g},o.state&&o.state.usr||null,o.state&&o.state.key||"default")}function i(a,o){return typeof o=="string"?o:createPath(o)}return getUrlBasedHistory(e,i,null,s)}function invariant(s,e){if(s===!1||s===null||typeof s>"u")throw new Error(e)}function warning(s,e){if(!s){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function createKey(){return Math.random().toString(36).substr(2,8)}function getHistoryState(s,e){return{usr:s.state,key:s.key,idx:e}}function createLocation(s,e,i,a){return i===void 0&&(i=null),_extends$2({pathname:typeof s=="string"?s:s.pathname,search:"",hash:""},typeof e=="string"?parsePath(e):e,{state:i,key:e&&e.key||a||createKey()})}function createPath(s){let{pathname:e="/",search:i="",hash:a=""}=s;return i&&i!=="?"&&(e+=i.charAt(0)==="?"?i:"?"+i),a&&a!=="#"&&(e+=a.charAt(0)==="#"?a:"#"+a),e}function parsePath(s){let e={};if(s){let i=s.indexOf("#");i>=0&&(e.hash=s.substr(i),s=s.substr(0,i));let a=s.indexOf("?");a>=0&&(e.search=s.substr(a),s=s.substr(0,a)),s&&(e.pathname=s)}return e}function getUrlBasedHistory(s,e,i,a){a===void 0&&(a={});let{window:o=document.defaultView,v5Compat:c=!1}=a,d=o.history,g=Action.Pop,h=null,_=b();_==null&&(_=0,d.replaceState(_extends$2({},d.state,{idx:_}),""));function b(){return(d.state||{idx:null}).idx}function rt(){g=Action.Pop;let tt=b(),$=tt==null?null:tt-_;_=tt,h&&h({action:g,location:ct.location,delta:$})}function nt(tt,$){g=Action.Push;let j=createLocation(ct.location,tt,$);i&&i(j,tt),_=b()+1;let et=getHistoryState(j,_),ft=ct.createHref(j);try{d.pushState(et,"",ft)}catch(at){if(at instanceof DOMException&&at.name==="DataCloneError")throw at;o.location.assign(ft)}c&&h&&h({action:g,location:ct.location,delta:1})}function it(tt,$){g=Action.Replace;let j=createLocation(ct.location,tt,$);i&&i(j,tt),_=b();let et=getHistoryState(j,_),ft=ct.createHref(j);d.replaceState(et,"",ft),c&&h&&h({action:g,location:ct.location,delta:0})}function ot(tt){let $=o.location.origin!=="null"?o.location.origin:o.location.href,j=typeof tt=="string"?tt:createPath(tt);return j=j.replace(/ $/,"%20"),invariant($,"No window.location.(origin|href) available to create URL for href: "+j),new URL(j,$)}let ct={get action(){return g},get location(){return s(o,d)},listen(tt){if(h)throw new Error("A history only accepts one active listener");return o.addEventListener(PopStateEventType,rt),h=tt,()=>{o.removeEventListener(PopStateEventType,rt),h=null}},createHref(tt){return e(o,tt)},createURL:ot,encodeLocation(tt){let $=ot(tt);return{pathname:$.pathname,search:$.search,hash:$.hash}},push:nt,replace:it,go(tt){return d.go(tt)}};return ct}var ResultType;(function(s){s.data="data",s.deferred="deferred",s.redirect="redirect",s.error="error"})(ResultType||(ResultType={}));function matchRoutes(s,e,i){return i===void 0&&(i="/"),matchRoutesImpl(s,e,i,!1)}function matchRoutesImpl(s,e,i,a){let o=typeof e=="string"?parsePath(e):e,c=stripBasename(o.pathname||"/",i);if(c==null)return null;let d=flattenRoutes(s);rankRouteBranches(d);let g=null;for(let h=0;g==null&&h<d.length;++h){let _=decodePath(c);g=matchRouteBranch(d[h],_,a)}return g}function flattenRoutes(s,e,i,a){e===void 0&&(e=[]),i===void 0&&(i=[]),a===void 0&&(a="");let o=(c,d,g)=>{let h={relativePath:g===void 0?c.path||"":g,caseSensitive:c.caseSensitive===!0,childrenIndex:d,route:c};h.relativePath.startsWith("/")&&(invariant(h.relativePath.startsWith(a),'Absolute route path "'+h.relativePath+'" nested under path '+('"'+a+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),h.relativePath=h.relativePath.slice(a.length));let _=joinPaths([a,h.relativePath]),b=i.concat(h);c.children&&c.children.length>0&&(invariant(c.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+_+'".')),flattenRoutes(c.children,e,b,_)),!(c.path==null&&!c.index)&&e.push({path:_,score:computeScore(_,c.index),routesMeta:b})};return s.forEach((c,d)=>{var g;if(c.path===""||!((g=c.path)!=null&&g.includes("?")))o(c,d);else for(let h of explodeOptionalSegments(c.path))o(c,d,h)}),e}function explodeOptionalSegments(s){let e=s.split("/");if(e.length===0)return[];let[i,...a]=e,o=i.endsWith("?"),c=i.replace(/\?$/,"");if(a.length===0)return o?[c,""]:[c];let d=explodeOptionalSegments(a.join("/")),g=[];return g.push(...d.map(h=>h===""?c:[c,h].join("/"))),o&&g.push(...d),g.map(h=>s.startsWith("/")&&h===""?"/":h)}function rankRouteBranches(s){s.sort((e,i)=>e.score!==i.score?i.score-e.score:compareIndexes(e.routesMeta.map(a=>a.childrenIndex),i.routesMeta.map(a=>a.childrenIndex)))}const paramRe=/^:[\w-]+$/,dynamicSegmentValue=3,indexRouteValue=2,emptySegmentValue=1,staticSegmentValue=10,splatPenalty=-2,isSplat=s=>s==="*";function computeScore(s,e){let i=s.split("/"),a=i.length;return i.some(isSplat)&&(a+=splatPenalty),e&&(a+=indexRouteValue),i.filter(o=>!isSplat(o)).reduce((o,c)=>o+(paramRe.test(c)?dynamicSegmentValue:c===""?emptySegmentValue:staticSegmentValue),a)}function compareIndexes(s,e){return s.length===e.length&&s.slice(0,-1).every((a,o)=>a===e[o])?s[s.length-1]-e[e.length-1]:0}function matchRouteBranch(s,e,i){i===void 0&&(i=!1);let{routesMeta:a}=s,o={},c="/",d=[];for(let g=0;g<a.length;++g){let h=a[g],_=g===a.length-1,b=c==="/"?e:e.slice(c.length)||"/",rt=matchPath({path:h.relativePath,caseSensitive:h.caseSensitive,end:_},b),nt=h.route;if(!rt&&_&&i&&!a[a.length-1].route.index&&(rt=matchPath({path:h.relativePath,caseSensitive:h.caseSensitive,end:!1},b)),!rt)return null;Object.assign(o,rt.params),d.push({params:o,pathname:joinPaths([c,rt.pathname]),pathnameBase:normalizePathname(joinPaths([c,rt.pathnameBase])),route:nt}),rt.pathnameBase!=="/"&&(c=joinPaths([c,rt.pathnameBase]))}return d}function matchPath(s,e){typeof s=="string"&&(s={path:s,caseSensitive:!1,end:!0});let[i,a]=compilePath(s.path,s.caseSensitive,s.end),o=e.match(i);if(!o)return null;let c=o[0],d=c.replace(/(.)\/+$/,"$1"),g=o.slice(1);return{params:a.reduce((_,b,rt)=>{let{paramName:nt,isOptional:it}=b;if(nt==="*"){let ct=g[rt]||"";d=c.slice(0,c.length-ct.length).replace(/(.)\/+$/,"$1")}const ot=g[rt];return it&&!ot?_[nt]=void 0:_[nt]=(ot||"").replace(/%2F/g,"/"),_},{}),pathname:c,pathnameBase:d,pattern:s}}function compilePath(s,e,i){e===void 0&&(e=!1),i===void 0&&(i=!0),warning(s==="*"||!s.endsWith("*")||s.endsWith("/*"),'Route path "'+s+'" will be treated as if it were '+('"'+s.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+s.replace(/\*$/,"/*")+'".'));let a=[],o="^"+s.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(d,g,h)=>(a.push({paramName:g,isOptional:h!=null}),h?"/?([^\\/]+)?":"/([^\\/]+)"));return s.endsWith("*")?(a.push({paramName:"*"}),o+=s==="*"||s==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):i?o+="\\/*$":s!==""&&s!=="/"&&(o+="(?:(?=\\/|$))"),[new RegExp(o,e?void 0:"i"),a]}function decodePath(s){try{return s.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return warning(!1,'The URL path "'+s+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),s}}function stripBasename(s,e){if(e==="/")return s;if(!s.toLowerCase().startsWith(e.toLowerCase()))return null;let i=e.endsWith("/")?e.length-1:e.length,a=s.charAt(i);return a&&a!=="/"?null:s.slice(i)||"/"}const ABSOLUTE_URL_REGEX$1=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,isAbsoluteUrl=s=>ABSOLUTE_URL_REGEX$1.test(s);function resolvePath(s,e){e===void 0&&(e="/");let{pathname:i,search:a="",hash:o=""}=typeof s=="string"?parsePath(s):s,c;if(i)if(isAbsoluteUrl(i))c=i;else{if(i.includes("//")){let d=i;i=i.replace(/\/\/+/g,"/"),warning(!1,"Pathnames cannot have embedded double slashes - normalizing "+(d+" -> "+i))}i.startsWith("/")?c=resolvePathname(i.substring(1),"/"):c=resolvePathname(i,e)}else c=e;return{pathname:c,search:normalizeSearch(a),hash:normalizeHash(o)}}function resolvePathname(s,e){let i=e.replace(/\/+$/,"").split("/");return s.split("/").forEach(o=>{o===".."?i.length>1&&i.pop():o!=="."&&i.push(o)}),i.length>1?i.join("/"):"/"}function getInvalidPathError(s,e,i,a){return"Cannot include a '"+s+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(a)+"].  Please separate it out to the ")+("`to."+i+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function getPathContributingMatches(s){return s.filter((e,i)=>i===0||e.route.path&&e.route.path.length>0)}function getResolveToMatches(s,e){let i=getPathContributingMatches(s);return e?i.map((a,o)=>o===i.length-1?a.pathname:a.pathnameBase):i.map(a=>a.pathnameBase)}function resolveTo(s,e,i,a){a===void 0&&(a=!1);let o;typeof s=="string"?o=parsePath(s):(o=_extends$2({},s),invariant(!o.pathname||!o.pathname.includes("?"),getInvalidPathError("?","pathname","search",o)),invariant(!o.pathname||!o.pathname.includes("#"),getInvalidPathError("#","pathname","hash",o)),invariant(!o.search||!o.search.includes("#"),getInvalidPathError("#","search","hash",o)));let c=s===""||o.pathname==="",d=c?"/":o.pathname,g;if(d==null)g=i;else{let rt=e.length-1;if(!a&&d.startsWith("..")){let nt=d.split("/");for(;nt[0]==="..";)nt.shift(),rt-=1;o.pathname=nt.join("/")}g=rt>=0?e[rt]:"/"}let h=resolvePath(o,g),_=d&&d!=="/"&&d.endsWith("/"),b=(c||d===".")&&i.endsWith("/");return!h.pathname.endsWith("/")&&(_||b)&&(h.pathname+="/"),h}const joinPaths=s=>s.join("/").replace(/\/\/+/g,"/"),normalizePathname=s=>s.replace(/\/+$/,"").replace(/^\/*/,"/"),normalizeSearch=s=>!s||s==="?"?"":s.startsWith("?")?s:"?"+s,normalizeHash=s=>!s||s==="#"?"":s.startsWith("#")?s:"#"+s;function isRouteErrorResponse(s){return s!=null&&typeof s.status=="number"&&typeof s.statusText=="string"&&typeof s.internal=="boolean"&&"data"in s}const validMutationMethodsArr=["post","put","patch","delete"];new Set(validMutationMethodsArr);const validRequestMethodsArr=["get",...validMutationMethodsArr];new Set(validRequestMethodsArr);/**
 * React Router v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function _extends$1(){return _extends$1=Object.assign?Object.assign.bind():function(s){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(s[a]=i[a])}return s},_extends$1.apply(this,arguments)}const DataRouterContext=reactExports.createContext(null),DataRouterStateContext=reactExports.createContext(null),NavigationContext=reactExports.createContext(null),LocationContext=reactExports.createContext(null),RouteContext=reactExports.createContext({outlet:null,matches:[],isDataRoute:!1}),RouteErrorContext=reactExports.createContext(null);function useHref(s,e){let{relative:i}=e===void 0?{}:e;useInRouterContext()||invariant(!1);let{basename:a,navigator:o}=reactExports.useContext(NavigationContext),{hash:c,pathname:d,search:g}=useResolvedPath(s,{relative:i}),h=d;return a!=="/"&&(h=d==="/"?a:joinPaths([a,d])),o.createHref({pathname:h,search:g,hash:c})}function useInRouterContext(){return reactExports.useContext(LocationContext)!=null}function useLocation(){return useInRouterContext()||invariant(!1),reactExports.useContext(LocationContext).location}function useIsomorphicLayoutEffect(s){reactExports.useContext(NavigationContext).static||reactExports.useLayoutEffect(s)}function useNavigate(){let{isDataRoute:s}=reactExports.useContext(RouteContext);return s?useNavigateStable():useNavigateUnstable()}function useNavigateUnstable(){useInRouterContext()||invariant(!1);let s=reactExports.useContext(DataRouterContext),{basename:e,future:i,navigator:a}=reactExports.useContext(NavigationContext),{matches:o}=reactExports.useContext(RouteContext),{pathname:c}=useLocation(),d=JSON.stringify(getResolveToMatches(o,i.v7_relativeSplatPath)),g=reactExports.useRef(!1);return useIsomorphicLayoutEffect(()=>{g.current=!0}),reactExports.useCallback(function(_,b){if(b===void 0&&(b={}),!g.current)return;if(typeof _=="number"){a.go(_);return}let rt=resolveTo(_,JSON.parse(d),c,b.relative==="path");s==null&&e!=="/"&&(rt.pathname=rt.pathname==="/"?e:joinPaths([e,rt.pathname])),(b.replace?a.replace:a.push)(rt,b.state,b)},[e,a,d,c,s])}function useParams(){let{matches:s}=reactExports.useContext(RouteContext),e=s[s.length-1];return e?e.params:{}}function useResolvedPath(s,e){let{relative:i}=e===void 0?{}:e,{future:a}=reactExports.useContext(NavigationContext),{matches:o}=reactExports.useContext(RouteContext),{pathname:c}=useLocation(),d=JSON.stringify(getResolveToMatches(o,a.v7_relativeSplatPath));return reactExports.useMemo(()=>resolveTo(s,JSON.parse(d),c,i==="path"),[s,d,c,i])}function useRoutes(s,e){return useRoutesImpl(s,e)}function useRoutesImpl(s,e,i,a){useInRouterContext()||invariant(!1);let{navigator:o}=reactExports.useContext(NavigationContext),{matches:c}=reactExports.useContext(RouteContext),d=c[c.length-1],g=d?d.params:{};d&&d.pathname;let h=d?d.pathnameBase:"/";d&&d.route;let _=useLocation(),b;if(e){var rt;let tt=typeof e=="string"?parsePath(e):e;h==="/"||(rt=tt.pathname)!=null&&rt.startsWith(h)||invariant(!1),b=tt}else b=_;let nt=b.pathname||"/",it=nt;if(h!=="/"){let tt=h.replace(/^\//,"").split("/");it="/"+nt.replace(/^\//,"").split("/").slice(tt.length).join("/")}let ot=matchRoutes(s,{pathname:it}),ct=_renderMatches(ot&&ot.map(tt=>Object.assign({},tt,{params:Object.assign({},g,tt.params),pathname:joinPaths([h,o.encodeLocation?o.encodeLocation(tt.pathname).pathname:tt.pathname]),pathnameBase:tt.pathnameBase==="/"?h:joinPaths([h,o.encodeLocation?o.encodeLocation(tt.pathnameBase).pathname:tt.pathnameBase])})),c,i,a);return e&&ct?reactExports.createElement(LocationContext.Provider,{value:{location:_extends$1({pathname:"/",search:"",hash:"",state:null,key:"default"},b),navigationType:Action.Pop}},ct):ct}function DefaultErrorComponent(){let s=useRouteError(),e=isRouteErrorResponse(s)?s.status+" "+s.statusText:s instanceof Error?s.message:JSON.stringify(s),i=s instanceof Error?s.stack:null,o={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"},c=null;return reactExports.createElement(reactExports.Fragment,null,reactExports.createElement("h2",null,"Unexpected Application Error!"),reactExports.createElement("h3",{style:{fontStyle:"italic"}},e),i?reactExports.createElement("pre",{style:o},i):null,c)}const defaultErrorElement=reactExports.createElement(DefaultErrorComponent,null);class RenderErrorBoundary extends reactExports.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,i){return i.location!==e.location||i.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:i.error,location:i.location,revalidation:e.revalidation||i.revalidation}}componentDidCatch(e,i){console.error("React Router caught the following error during render",e,i)}render(){return this.state.error!==void 0?reactExports.createElement(RouteContext.Provider,{value:this.props.routeContext},reactExports.createElement(RouteErrorContext.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function RenderedRoute(s){let{routeContext:e,match:i,children:a}=s,o=reactExports.useContext(DataRouterContext);return o&&o.static&&o.staticContext&&(i.route.errorElement||i.route.ErrorBoundary)&&(o.staticContext._deepestRenderedBoundaryId=i.route.id),reactExports.createElement(RouteContext.Provider,{value:e},a)}function _renderMatches(s,e,i,a){var o;if(e===void 0&&(e=[]),i===void 0&&(i=null),a===void 0&&(a=null),s==null){var c;if(!i)return null;if(i.errors)s=i.matches;else if((c=a)!=null&&c.v7_partialHydration&&e.length===0&&!i.initialized&&i.matches.length>0)s=i.matches;else return null}let d=s,g=(o=i)==null?void 0:o.errors;if(g!=null){let b=d.findIndex(rt=>rt.route.id&&(g==null?void 0:g[rt.route.id])!==void 0);b>=0||invariant(!1),d=d.slice(0,Math.min(d.length,b+1))}let h=!1,_=-1;if(i&&a&&a.v7_partialHydration)for(let b=0;b<d.length;b++){let rt=d[b];if((rt.route.HydrateFallback||rt.route.hydrateFallbackElement)&&(_=b),rt.route.id){let{loaderData:nt,errors:it}=i,ot=rt.route.loader&&nt[rt.route.id]===void 0&&(!it||it[rt.route.id]===void 0);if(rt.route.lazy||ot){h=!0,_>=0?d=d.slice(0,_+1):d=[d[0]];break}}}return d.reduceRight((b,rt,nt)=>{let it,ot=!1,ct=null,tt=null;i&&(it=g&&rt.route.id?g[rt.route.id]:void 0,ct=rt.route.errorElement||defaultErrorElement,h&&(_<0&&nt===0?(warningOnce("route-fallback",!1),ot=!0,tt=null):_===nt&&(ot=!0,tt=rt.route.hydrateFallbackElement||null)));let $=e.concat(d.slice(0,nt+1)),j=()=>{let et;return it?et=ct:ot?et=tt:rt.route.Component?et=reactExports.createElement(rt.route.Component,null):rt.route.element?et=rt.route.element:et=b,reactExports.createElement(RenderedRoute,{match:rt,routeContext:{outlet:b,matches:$,isDataRoute:i!=null},children:et})};return i&&(rt.route.ErrorBoundary||rt.route.errorElement||nt===0)?reactExports.createElement(RenderErrorBoundary,{location:i.location,revalidation:i.revalidation,component:ct,error:it,children:j(),routeContext:{outlet:null,matches:$,isDataRoute:!0}}):j()},null)}var DataRouterHook$1=function(s){return s.UseBlocker="useBlocker",s.UseRevalidator="useRevalidator",s.UseNavigateStable="useNavigate",s}(DataRouterHook$1||{}),DataRouterStateHook$1=function(s){return s.UseBlocker="useBlocker",s.UseLoaderData="useLoaderData",s.UseActionData="useActionData",s.UseRouteError="useRouteError",s.UseNavigation="useNavigation",s.UseRouteLoaderData="useRouteLoaderData",s.UseMatches="useMatches",s.UseRevalidator="useRevalidator",s.UseNavigateStable="useNavigate",s.UseRouteId="useRouteId",s}(DataRouterStateHook$1||{});function useDataRouterContext(s){let e=reactExports.useContext(DataRouterContext);return e||invariant(!1),e}function useDataRouterState(s){let e=reactExports.useContext(DataRouterStateContext);return e||invariant(!1),e}function useRouteContext(s){let e=reactExports.useContext(RouteContext);return e||invariant(!1),e}function useCurrentRouteId(s){let e=useRouteContext(),i=e.matches[e.matches.length-1];return i.route.id||invariant(!1),i.route.id}function useRouteError(){var s;let e=reactExports.useContext(RouteErrorContext),i=useDataRouterState(DataRouterStateHook$1.UseRouteError),a=useCurrentRouteId(DataRouterStateHook$1.UseRouteError);return e!==void 0?e:(s=i.errors)==null?void 0:s[a]}function useNavigateStable(){let{router:s}=useDataRouterContext(DataRouterHook$1.UseNavigateStable),e=useCurrentRouteId(DataRouterStateHook$1.UseNavigateStable),i=reactExports.useRef(!1);return useIsomorphicLayoutEffect(()=>{i.current=!0}),reactExports.useCallback(function(o,c){c===void 0&&(c={}),i.current&&(typeof o=="number"?s.navigate(o):s.navigate(o,_extends$1({fromRouteId:e},c)))},[s,e])}const alreadyWarned$1={};function warningOnce(s,e,i){!e&&!alreadyWarned$1[s]&&(alreadyWarned$1[s]=!0)}function logV6DeprecationWarnings(s,e){s==null||s.v7_startTransition,(s==null?void 0:s.v7_relativeSplatPath)===void 0&&(!e||e.v7_relativeSplatPath),e&&(e.v7_fetcherPersist,e.v7_normalizeFormMethod,e.v7_partialHydration,e.v7_skipActionErrorRevalidation)}function Route(s){invariant(!1)}function Router(s){let{basename:e="/",children:i=null,location:a,navigationType:o=Action.Pop,navigator:c,static:d=!1,future:g}=s;useInRouterContext()&&invariant(!1);let h=e.replace(/^\/*/,"/"),_=reactExports.useMemo(()=>({basename:h,navigator:c,static:d,future:_extends$1({v7_relativeSplatPath:!1},g)}),[h,g,c,d]);typeof a=="string"&&(a=parsePath(a));let{pathname:b="/",search:rt="",hash:nt="",state:it=null,key:ot="default"}=a,ct=reactExports.useMemo(()=>{let tt=stripBasename(b,h);return tt==null?null:{location:{pathname:tt,search:rt,hash:nt,state:it,key:ot},navigationType:o}},[h,b,rt,nt,it,ot,o]);return ct==null?null:reactExports.createElement(NavigationContext.Provider,{value:_},reactExports.createElement(LocationContext.Provider,{children:i,value:ct}))}function Routes(s){let{children:e,location:i}=s;return useRoutes(createRoutesFromChildren(e),i)}new Promise(()=>{});function createRoutesFromChildren(s,e){e===void 0&&(e=[]);let i=[];return reactExports.Children.forEach(s,(a,o)=>{if(!reactExports.isValidElement(a))return;let c=[...e,o];if(a.type===reactExports.Fragment){i.push.apply(i,createRoutesFromChildren(a.props.children,c));return}a.type!==Route&&invariant(!1),!a.props.index||!a.props.children||invariant(!1);let d={id:a.props.id||c.join("-"),caseSensitive:a.props.caseSensitive,element:a.props.element,Component:a.props.Component,index:a.props.index,path:a.props.path,loader:a.props.loader,action:a.props.action,errorElement:a.props.errorElement,ErrorBoundary:a.props.ErrorBoundary,hasErrorBoundary:a.props.ErrorBoundary!=null||a.props.errorElement!=null,shouldRevalidate:a.props.shouldRevalidate,handle:a.props.handle,lazy:a.props.lazy};a.props.children&&(d.children=createRoutesFromChildren(a.props.children,c)),i.push(d)}),i}/**
 * React Router DOM v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function _extends(){return _extends=Object.assign?Object.assign.bind():function(s){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(s[a]=i[a])}return s},_extends.apply(this,arguments)}function _objectWithoutPropertiesLoose(s,e){if(s==null)return{};var i={},a=Object.keys(s),o,c;for(c=0;c<a.length;c++)o=a[c],!(e.indexOf(o)>=0)&&(i[o]=s[o]);return i}function isModifiedEvent(s){return!!(s.metaKey||s.altKey||s.ctrlKey||s.shiftKey)}function shouldProcessLinkClick(s,e){return s.button===0&&(!e||e==="_self")&&!isModifiedEvent(s)}const _excluded=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],REACT_ROUTER_VERSION="6";try{window.__reactRouterVersion=REACT_ROUTER_VERSION}catch{}const START_TRANSITION="startTransition",startTransitionImpl=React$1[START_TRANSITION];function BrowserRouter(s){let{basename:e,children:i,future:a,window:o}=s,c=reactExports.useRef();c.current==null&&(c.current=createBrowserHistory({window:o,v5Compat:!0}));let d=c.current,[g,h]=reactExports.useState({action:d.action,location:d.location}),{v7_startTransition:_}=a||{},b=reactExports.useCallback(rt=>{_&&startTransitionImpl?startTransitionImpl(()=>h(rt)):h(rt)},[h,_]);return reactExports.useLayoutEffect(()=>d.listen(b),[d,b]),reactExports.useEffect(()=>logV6DeprecationWarnings(a),[a]),reactExports.createElement(Router,{basename:e,children:i,location:g.location,navigationType:g.action,navigator:d,future:a})}const isBrowser$1=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",ABSOLUTE_URL_REGEX=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Link=reactExports.forwardRef(function(e,i){let{onClick:a,relative:o,reloadDocument:c,replace:d,state:g,target:h,to:_,preventScrollReset:b,viewTransition:rt}=e,nt=_objectWithoutPropertiesLoose(e,_excluded),{basename:it}=reactExports.useContext(NavigationContext),ot,ct=!1;if(typeof _=="string"&&ABSOLUTE_URL_REGEX.test(_)&&(ot=_,isBrowser$1))try{let et=new URL(window.location.href),ft=_.startsWith("//")?new URL(et.protocol+_):new URL(_),at=stripBasename(ft.pathname,it);ft.origin===et.origin&&at!=null?_=at+ft.search+ft.hash:ct=!0}catch{}let tt=useHref(_,{relative:o}),$=useLinkClickHandler(_,{replace:d,state:g,target:h,preventScrollReset:b,relative:o,viewTransition:rt});function j(et){a&&a(et),et.defaultPrevented||$(et)}return reactExports.createElement("a",_extends({},nt,{href:ot||tt,onClick:ct||c?a:j,ref:i,target:h}))});var DataRouterHook;(function(s){s.UseScrollRestoration="useScrollRestoration",s.UseSubmit="useSubmit",s.UseSubmitFetcher="useSubmitFetcher",s.UseFetcher="useFetcher",s.useViewTransitionState="useViewTransitionState"})(DataRouterHook||(DataRouterHook={}));var DataRouterStateHook;(function(s){s.UseFetcher="useFetcher",s.UseFetchers="useFetchers",s.UseScrollRestoration="useScrollRestoration"})(DataRouterStateHook||(DataRouterStateHook={}));function useLinkClickHandler(s,e){let{target:i,replace:a,state:o,preventScrollReset:c,relative:d,viewTransition:g}=e===void 0?{}:e,h=useNavigate(),_=useLocation(),b=useResolvedPath(s,{relative:d});return reactExports.useCallback(rt=>{if(shouldProcessLinkClick(rt,i)){rt.preventDefault();let nt=a!==void 0?a:createPath(_)===createPath(b);h(s,{replace:nt,state:o,preventScrollReset:c,relative:d,viewTransition:g})}},[_,h,b,a,o,i,s,c,d,g])}const Navbar=()=>{const s=useLocation(),[e,i]=reactExports.useState(!1),a=o=>s.pathname===o;return jsx("nav",{className:"bg-white shadow-lg border-b-4 border-newspaper-blue",children:jsxs("div",{className:"max-w-7xl mx-auto px-4",children:[jsxs("div",{className:"flex justify-between items-center py-4",children:[jsxs(Link,{to:"/",className:"flex items-center space-x-2",children:[jsx("img",{src:"/logo.jpg",alt:"  Logo",className:"w-8 h-8 sm:w-10 sm:h-10 rounded-full object-cover"}),jsxs("div",{children:[jsx("h1",{className:"text-lg sm:text-2xl font-bold text-newspaper-blue",children:" "}),jsx("p",{className:"text-xs sm:text-sm text-gray-600",children:"Raichuru Belku"})]})]}),jsx("button",{onClick:()=>i(!e),className:"md:hidden p-2 rounded-lg text-newspaper-blue hover:bg-blue-50 focus:outline-none focus:ring-2 focus:ring-newspaper-blue","aria-label":"Toggle menu",children:jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e?jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"}):jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M4 6h16M4 12h16M4 18h16"})})}),jsxs("div",{className:"hidden md:flex space-x-2 lg:space-x-6",children:[jsx(Link,{to:"/",className:`px-2 lg:px-4 py-2 rounded-lg transition-colors text-sm lg:text-base ${a("/")?"bg-newspaper-blue text-white":"text-newspaper-blue hover:bg-blue-50"}`,children:" "}),jsx(Link,{to:"/today",className:`px-2 lg:px-4 py-2 rounded-lg transition-colors text-sm lg:text-base ${a("/today")?"bg-newspaper-blue text-white":"text-newspaper-blue hover:bg-blue-50"}`,children:" "}),jsx(Link,{to:"/archive",className:`px-2 lg:px-4 py-2 rounded-lg transition-colors text-sm lg:text-base ${a("/archive")?"bg-newspaper-blue text-white":"text-newspaper-blue hover:bg-blue-50"}`,children:" "}),jsx(Link,{to:"/admin",className:`px-2 lg:px-4 py-2 rounded-lg transition-colors text-sm lg:text-base ${a("/admin")?"bg-newspaper-red text-white":"text-newspaper-red hover:bg-red-50"}`,children:""})]})]}),jsx("div",{className:`md:hidden transition-all duration-300 ease-in-out overflow-hidden ${e?"max-h-64 opacity-100":"max-h-0 opacity-0"}`,children:jsxs("div",{className:"pb-4 pt-2 space-y-1 border-t border-gray-200 mt-4",children:[jsx(Link,{to:"/",onClick:()=>i(!1),className:`block px-4 py-3 rounded-lg transition-colors text-base font-medium ${a("/")?"bg-newspaper-blue text-white":"text-newspaper-blue hover:bg-blue-50 active:bg-blue-100"}`,children:" "}),jsx(Link,{to:"/today",onClick:()=>i(!1),className:`block px-4 py-3 rounded-lg transition-colors text-base font-medium ${a("/today")?"bg-newspaper-blue text-white":"text-newspaper-blue hover:bg-blue-50 active:bg-blue-100"}`,children:" "}),jsx(Link,{to:"/archive",onClick:()=>i(!1),className:`block px-4 py-3 rounded-lg transition-colors text-base font-medium ${a("/archive")?"bg-newspaper-blue text-white":"text-newspaper-blue hover:bg-blue-50 active:bg-blue-100"}`,children:" "}),jsx(Link,{to:"/admin",onClick:()=>i(!1),className:`block px-4 py-3 rounded-lg transition-colors text-base font-medium ${a("/admin")?"bg-newspaper-red text-white":"text-newspaper-red hover:bg-red-50 active:bg-red-100"}`,children:""})]})})]})})},Footer=()=>jsx("footer",{className:"bg-newspaper-blue text-white py-6 sm:py-8",children:jsx("div",{className:"max-w-7xl mx-auto px-4",children:jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-center gap-4",children:[jsxs("div",{className:"flex items-center gap-3",children:[jsx("img",{src:"/logo.jpg",alt:"  Logo",className:"w-8 h-8 sm:w-10 sm:h-10 rounded-full object-cover"}),jsxs("div",{className:"text-center sm:text-left",children:[jsx("h3",{className:"text-lg sm:text-xl font-bold mb-1",children:" "}),jsx("p",{className:"text-sm sm:text-base text-blue-200",children:"   "})]})]}),jsx("div",{className:"text-center sm:text-right",children:jsx("p",{className:"text-xs sm:text-sm text-blue-200",children:" 2024  .   ."})})]})})}),STORAGE_KEYS={NEWSPAPERS:"newspapers_v2",TODAY:"todaysNewspaper_v2",ADMIN:"adminCredentials_v2"},saveToLocalStorage=(s,e)=>{try{return localStorage.setItem(s,JSON.stringify(e)),console.log(` Saved ${s}`),!0}catch(i){return console.error(`Error saving ${s}:`,i),!1}},getFromLocalStorage=s=>{try{const e=localStorage.getItem(s);return e?JSON.parse(e):null}catch(e){return console.error("Error reading from localStorage:",e),null}},removeFromLocalStorage=s=>{try{return localStorage.removeItem(s),!0}catch(e){return console.error("Error removing from localStorage:",e),!1}},getStorageInfo=()=>{try{if(typeof Storage>"u"||!window.localStorage)return{used:0,usedMB:"0.00",available:!1};let s=0,e=0;for(let g in localStorage)if(localStorage.hasOwnProperty(g)){const h=localStorage[g].length;s+=h,(g.includes("newspapers")||g.includes("areas_")||g.includes("todaysNewspaper")||g.includes("adminCredentials"))&&(e+=h)}const i=10*1024*1024,a=(s/(1024*1024)).toFixed(2),o=(e/(1024*1024)).toFixed(2),c=((i-s)/(1024*1024)).toFixed(2),d=(s/i*100).toFixed(1);return{used:s,usedMB:a,appUsedMB:o,availableMB:c,usagePercent:d,available:!0,needsCleanup:s>i*.8}}catch(s){return console.error("Error getting storage info:",s),{used:0,usedMB:"0.00",available:!1}}},getNewspapers$1=()=>{let s=getFromLocalStorage(STORAGE_KEYS.NEWSPAPERS);return s||(s=getFromLocalStorage("newspapers")||[],s.length>0&&migrateOldData(s)),s||[]},migrateOldData=s=>{try{const e=s.map(i=>{const a=getFromLocalStorage(`areas_${i.id}`)||[];return{...i,areas:a}});saveToLocalStorage(STORAGE_KEYS.NEWSPAPERS,e),s.forEach(i=>{removeFromLocalStorage(`areas_${i.id}`)}),removeFromLocalStorage("newspapers"),console.log("Data migration completed")}catch(e){console.error("Migration error:",e)}},getTodaysNewspaper$1=()=>getFromLocalStorage(STORAGE_KEYS.TODAY)||getFromLocalStorage("todaysNewspaper")||null,getClickableAreas$1=s=>{try{const i=getNewspapers$1().find(a=>a.id===s);return(i==null?void 0:i.areas)||getFromLocalStorage(`areas_${s}`)||[]}catch(e){return console.error("Error getting areas:",e),[]}},Home=()=>{const[s,e]=reactExports.useState(null);return reactExports.useEffect(()=>{const i=()=>{const o=getTodaysNewspaper$1();console.log("Loading today's newspaper:",o),e(o)};i();const a=setInterval(i,1e4);return()=>clearInterval(a)},[]),jsxs("div",{className:"min-h-screen bg-gray-50",children:[jsx("div",{className:"bg-gradient-to-r from-newspaper-blue to-blue-600 text-white",children:jsx("div",{className:"max-w-7xl mx-auto px-4 py-16",children:jsxs("div",{className:"text-center",children:[jsx("img",{src:"/logo.jpg",alt:"  Logo",className:"w-20 h-20 md:w-24 md:h-24 rounded-full object-cover mx-auto mb-6"}),jsx("h1",{className:"text-4xl md:text-6xl font-bold mb-4",children:" "}),jsx("p",{className:"text-xl md:text-2xl mb-2",children:"Raichuru Belku"}),jsx("p",{className:"text-lg opacity-90 mb-8",children:"   "}),jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:[jsx(Link,{to:"/today",className:"bg-white text-newspaper-blue px-8 py-3 rounded-lg font-semibold hover:bg-gray-100 transition-colors",children:"  "}),jsx(Link,{to:"/archive",className:"border-2 border-white text-white px-8 py-3 rounded-lg font-semibold hover:bg-white hover:text-newspaper-blue transition-colors",children:"  "})]})]})})}),jsxs("div",{className:"max-w-7xl mx-auto px-4 py-12",children:[jsxs("div",{className:"text-center mb-8",children:[jsx("h2",{className:"text-3xl font-bold text-gray-900 mb-4",children:"  "}),jsx("div",{className:"w-24 h-1 bg-newspaper-red mx-auto mb-4"}),jsx("button",{onClick:()=>{const i=getTodaysNewspaper$1();console.log("Manual refresh - today's newspaper:",i),e(i)},className:"text-sm text-blue-600 hover:text-blue-800 underline",children:" "})]}),s?jsxs("div",{className:"space-y-8",children:[jsx("div",{className:"bg-white rounded-lg shadow-lg overflow-hidden",children:jsxs("div",{className:"md:flex",children:[jsx("div",{className:"md:w-1/2",children:jsx("img",{src:s.previewImage,alt:"Today's newspaper",className:"w-full h-64 md:h-full object-cover"})}),jsxs("div",{className:"md:w-1/2 p-8",children:[jsxs("div",{className:"flex items-center mb-4",children:[jsx("div",{className:"w-3 h-3 bg-newspaper-red rounded-full mr-3"}),jsx("span",{className:"text-sm text-gray-600",children:new Date(s.date).toLocaleDateString("kn-IN")})]}),jsx("h3",{className:"text-2xl font-bold text-gray-900 mb-4",children:" "}),jsx("p",{className:"text-gray-600 mb-6",children:"   ,      .        ."}),jsxs(Link,{to:"/today",className:"inline-flex items-center bg-newspaper-blue text-white px-6 py-3 rounded-lg hover:bg-blue-700 transition-colors",children:[" ",jsx("svg",{className:"w-5 h-5 ml-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 5l7 7-7 7"})})]})]})]})}),jsx(TodaysHeadlines,{newspaper:s})]}):jsxs("div",{className:"bg-white rounded-lg shadow-lg p-8 text-center",children:[jsx("div",{className:"text-gray-400 mb-4",children:jsx("svg",{className:"mx-auto h-16 w-16",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19 20H5a2 2 0 01-2-2V6a2 2 0 012-2h10a2 2 0 012 2v1m2 13a2 2 0 01-2-2V7m2 13a2 2 0 002-2V9a2 2 0 00-2-2h-2m-4-3H9M7 16h6M7 8h6v4H7V8z"})})}),jsx("h3",{className:"text-xl font-semibold text-gray-700 mb-2",children:"   "}),jsx("p",{className:"text-gray-600",children:"       "})]})]}),jsx("div",{className:"bg-white py-12 sm:py-16",children:jsxs("div",{className:"max-w-7xl mx-auto px-4",children:[jsxs("div",{className:"text-center mb-8 sm:mb-12",children:[jsx("h2",{className:"text-2xl sm:text-3xl font-bold text-gray-900 mb-3 sm:mb-4",children:" "}),jsx("div",{className:"w-16 sm:w-24 h-1 bg-newspaper-red mx-auto"})]}),jsxs("div",{className:"grid sm:grid-cols-2 md:grid-cols-3 gap-6 sm:gap-8",children:[jsxs("div",{className:"text-center",children:[jsx("div",{className:"w-12 h-12 sm:w-16 sm:h-16 bg-newspaper-blue rounded-full flex items-center justify-center mx-auto mb-3 sm:mb-4",children:jsx("svg",{className:"w-6 h-6 sm:w-8 sm:h-8 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.746 0 3.332.477 4.5 1.253v13C20.832 18.477 19.246 18 17.5 18c-1.746 0-3.332.477-4.5 1.253"})})}),jsx("h3",{className:"text-lg sm:text-xl font-semibold text-gray-900 mb-2",children:" "}),jsx("p",{className:"text-sm sm:text-base text-gray-600 px-2",children:"    "})]}),jsxs("div",{className:"text-center",children:[jsx("div",{className:"w-12 h-12 sm:w-16 sm:h-16 bg-newspaper-red rounded-full flex items-center justify-center mx-auto mb-3 sm:mb-4",children:jsx("svg",{className:"w-6 h-6 sm:w-8 sm:h-8 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M15 15l-2 5L9 9l11 4-5 2zm0 0l5 5M7.188 2.239l.777 2.897M5.136 7.965l-2.898-.777M13.95 4.05l-2.122 2.122m-5.657 5.656l-2.12 2.122"})})}),jsx("h3",{className:"text-lg sm:text-xl font-semibold text-gray-900 mb-2",children:" "}),jsx("p",{className:"text-sm sm:text-base text-gray-600 px-2",children:"     "})]}),jsxs("div",{className:"text-center sm:col-span-2 md:col-span-1",children:[jsx("div",{className:"w-12 h-12 sm:w-16 sm:h-16 bg-newspaper-blue rounded-full flex items-center justify-center mx-auto mb-3 sm:mb-4",children:jsx("svg",{className:"w-6 h-6 sm:w-8 sm:h-8 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M5 19a2 2 0 01-2-2V7a2 2 0 012-2h4l2 2h4a2 2 0 012 2v1M5 19h14a2 2 0 002-2v-5a2 2 0 00-2-2H9a2 2 0 00-2 2v5a2 2 0 01-2 2z"})})}),jsx("h3",{className:"text-lg sm:text-xl font-semibold text-gray-900 mb-2",children:" "}),jsx("p",{className:"text-sm sm:text-base text-gray-600 px-2",children:"    "})]})]})]})}),jsx("div",{className:"bg-gray-50 py-12 sm:py-16",children:jsxs("div",{className:"max-w-4xl mx-auto px-4 text-center",children:[jsx("h2",{className:"text-2xl sm:text-3xl font-bold text-gray-900 mb-4 sm:mb-6",children:"  "}),jsx("p",{className:"text-sm sm:text-lg text-gray-700 leading-relaxed px-4",children:"     ,  ,       .   ,     ."})]})})]})},TodaysHeadlines=({newspaper:s})=>{const[e,i]=React.useState([]);return React.useEffect(()=>{if(s&&s.areas){const a=s.areas.filter(o=>o.title&&o.title.trim());i(a)}},[s]),e.length===0?null:jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6",children:[jsxs("div",{className:"flex items-center justify-between mb-6",children:[jsx("h3",{className:"text-2xl font-bold text-gray-900",children:"  "}),jsx(Link,{to:"/today",className:"text-newspaper-blue hover:text-blue-700 text-sm font-medium",children:"  "})]}),jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-6",children:e.slice(0,6).map((a,o)=>jsx("div",{className:"border border-gray-200 rounded-lg p-4 hover:shadow-md transition-shadow",children:jsxs("div",{className:"flex items-start space-x-3",children:[jsx("div",{className:"w-2 h-2 bg-newspaper-red rounded-full mt-2 flex-shrink-0"}),jsxs("div",{className:"flex-1",children:[jsx("h4",{className:"font-semibold text-gray-900 mb-2 line-clamp-2",children:a.title}),a.content&&jsxs("p",{className:"text-sm text-gray-600 line-clamp-3 mb-3",children:[a.content.substring(0,120),"..."]}),jsx(Link,{to:"/today",className:"text-xs text-newspaper-blue hover:text-blue-700 font-medium",children:"   "})]})]})},a.id))}),e.length>6&&jsx("div",{className:"text-center mt-6",children:jsxs(Link,{to:"/today",className:"inline-flex items-center bg-newspaper-blue text-white px-6 py-2 rounded-lg hover:bg-blue-700 transition-colors",children:["  (",e.length-6,")",jsx("svg",{className:"w-4 h-4 ml-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 5l7 7-7 7"})})]})})]})};var extendStatics=function(s,e){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,a){i.__proto__=a}||function(i,a){for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(i[o]=a[o])},extendStatics(s,e)};function __extends(s,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");extendStatics(s,e);function i(){this.constructor=s}s.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}var __assign=function(){return __assign=Object.assign||function(e){for(var i,a=1,o=arguments.length;a<o;a++){i=arguments[a];for(var c in i)Object.prototype.hasOwnProperty.call(i,c)&&(e[c]=i[c])}return e},__assign.apply(this,arguments)};function __rest(s,e){var i={};for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&e.indexOf(a)<0&&(i[a]=s[a]);if(s!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,a=Object.getOwnPropertySymbols(s);o<a.length;o++)e.indexOf(a[o])<0&&Object.prototype.propertyIsEnumerable.call(s,a[o])&&(i[a[o]]=s[a[o]]);return i}function __decorate(s,e,i,a){var o=arguments.length,c=o<3?e:a===null?a=Object.getOwnPropertyDescriptor(e,i):a,d;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")c=Reflect.decorate(s,e,i,a);else for(var g=s.length-1;g>=0;g--)(d=s[g])&&(c=(o<3?d(c):o>3?d(e,i,c):d(e,i))||c);return o>3&&c&&Object.defineProperty(e,i,c),c}function __param(s,e){return function(i,a){e(i,a,s)}}function __esDecorate(s,e,i,a,o,c){function d($){if($!==void 0&&typeof $!="function")throw new TypeError("Function expected");return $}for(var g=a.kind,h=g==="getter"?"get":g==="setter"?"set":"value",_=!e&&s?a.static?s:s.prototype:null,b=e||(_?Object.getOwnPropertyDescriptor(_,a.name):{}),rt,nt=!1,it=i.length-1;it>=0;it--){var ot={};for(var ct in a)ot[ct]=ct==="access"?{}:a[ct];for(var ct in a.access)ot.access[ct]=a.access[ct];ot.addInitializer=function($){if(nt)throw new TypeError("Cannot add initializers after decoration has completed");c.push(d($||null))};var tt=(0,i[it])(g==="accessor"?{get:b.get,set:b.set}:b[h],ot);if(g==="accessor"){if(tt===void 0)continue;if(tt===null||typeof tt!="object")throw new TypeError("Object expected");(rt=d(tt.get))&&(b.get=rt),(rt=d(tt.set))&&(b.set=rt),(rt=d(tt.init))&&o.unshift(rt)}else(rt=d(tt))&&(g==="field"?o.unshift(rt):b[h]=rt)}_&&Object.defineProperty(_,a.name,b),nt=!0}function __runInitializers(s,e,i){for(var a=arguments.length>2,o=0;o<e.length;o++)i=a?e[o].call(s,i):e[o].call(s);return a?i:void 0}function __propKey(s){return typeof s=="symbol"?s:"".concat(s)}function __setFunctionName(s,e,i){return typeof e=="symbol"&&(e=e.description?"[".concat(e.description,"]"):""),Object.defineProperty(s,"name",{configurable:!0,value:i?"".concat(i," ",e):e})}function __metadata(s,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(s,e)}function __awaiter(s,e,i,a){function o(c){return c instanceof i?c:new i(function(d){d(c)})}return new(i||(i=Promise))(function(c,d){function g(b){try{_(a.next(b))}catch(rt){d(rt)}}function h(b){try{_(a.throw(b))}catch(rt){d(rt)}}function _(b){b.done?c(b.value):o(b.value).then(g,h)}_((a=a.apply(s,e||[])).next())})}function __generator(s,e){var i={label:0,sent:function(){if(c[0]&1)throw c[1];return c[1]},trys:[],ops:[]},a,o,c,d=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return d.next=g(0),d.throw=g(1),d.return=g(2),typeof Symbol=="function"&&(d[Symbol.iterator]=function(){return this}),d;function g(_){return function(b){return h([_,b])}}function h(_){if(a)throw new TypeError("Generator is already executing.");for(;d&&(d=0,_[0]&&(i=0)),i;)try{if(a=1,o&&(c=_[0]&2?o.return:_[0]?o.throw||((c=o.return)&&c.call(o),0):o.next)&&!(c=c.call(o,_[1])).done)return c;switch(o=0,c&&(_=[_[0]&2,c.value]),_[0]){case 0:case 1:c=_;break;case 4:return i.label++,{value:_[1],done:!1};case 5:i.label++,o=_[1],_=[0];continue;case 7:_=i.ops.pop(),i.trys.pop();continue;default:if(c=i.trys,!(c=c.length>0&&c[c.length-1])&&(_[0]===6||_[0]===2)){i=0;continue}if(_[0]===3&&(!c||_[1]>c[0]&&_[1]<c[3])){i.label=_[1];break}if(_[0]===6&&i.label<c[1]){i.label=c[1],c=_;break}if(c&&i.label<c[2]){i.label=c[2],i.ops.push(_);break}c[2]&&i.ops.pop(),i.trys.pop();continue}_=e.call(s,i)}catch(b){_=[6,b],o=0}finally{a=c=0}if(_[0]&5)throw _[1];return{value:_[0]?_[1]:void 0,done:!0}}}var __createBinding=Object.create?function(s,e,i,a){a===void 0&&(a=i);var o=Object.getOwnPropertyDescriptor(e,i);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[i]}}),Object.defineProperty(s,a,o)}:function(s,e,i,a){a===void 0&&(a=i),s[a]=e[i]};function __exportStar(s,e){for(var i in s)i!=="default"&&!Object.prototype.hasOwnProperty.call(e,i)&&__createBinding(e,s,i)}function __values(s){var e=typeof Symbol=="function"&&Symbol.iterator,i=e&&s[e],a=0;if(i)return i.call(s);if(s&&typeof s.length=="number")return{next:function(){return s&&a>=s.length&&(s=void 0),{value:s&&s[a++],done:!s}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function __read(s,e){var i=typeof Symbol=="function"&&s[Symbol.iterator];if(!i)return s;var a=i.call(s),o,c=[],d;try{for(;(e===void 0||e-- >0)&&!(o=a.next()).done;)c.push(o.value)}catch(g){d={error:g}}finally{try{o&&!o.done&&(i=a.return)&&i.call(a)}finally{if(d)throw d.error}}return c}function __spread(){for(var s=[],e=0;e<arguments.length;e++)s=s.concat(__read(arguments[e]));return s}function __spreadArrays(){for(var s=0,e=0,i=arguments.length;e<i;e++)s+=arguments[e].length;for(var a=Array(s),o=0,e=0;e<i;e++)for(var c=arguments[e],d=0,g=c.length;d<g;d++,o++)a[o]=c[d];return a}function __spreadArray(s,e,i){if(i||arguments.length===2)for(var a=0,o=e.length,c;a<o;a++)(c||!(a in e))&&(c||(c=Array.prototype.slice.call(e,0,a)),c[a]=e[a]);return s.concat(c||Array.prototype.slice.call(e))}function __await(s){return this instanceof __await?(this.v=s,this):new __await(s)}function __asyncGenerator(s,e,i){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var a=i.apply(s,e||[]),o,c=[];return o=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),g("next"),g("throw"),g("return",d),o[Symbol.asyncIterator]=function(){return this},o;function d(it){return function(ot){return Promise.resolve(ot).then(it,rt)}}function g(it,ot){a[it]&&(o[it]=function(ct){return new Promise(function(tt,$){c.push([it,ct,tt,$])>1||h(it,ct)})},ot&&(o[it]=ot(o[it])))}function h(it,ot){try{_(a[it](ot))}catch(ct){nt(c[0][3],ct)}}function _(it){it.value instanceof __await?Promise.resolve(it.value.v).then(b,rt):nt(c[0][2],it)}function b(it){h("next",it)}function rt(it){h("throw",it)}function nt(it,ot){it(ot),c.shift(),c.length&&h(c[0][0],c[0][1])}}function __asyncDelegator(s){var e,i;return e={},a("next"),a("throw",function(o){throw o}),a("return"),e[Symbol.iterator]=function(){return this},e;function a(o,c){e[o]=s[o]?function(d){return(i=!i)?{value:__await(s[o](d)),done:!1}:c?c(d):d}:c}}function __asyncValues(s){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=s[Symbol.asyncIterator],i;return e?e.call(s):(s=typeof __values=="function"?__values(s):s[Symbol.iterator](),i={},a("next"),a("throw"),a("return"),i[Symbol.asyncIterator]=function(){return this},i);function a(c){i[c]=s[c]&&function(d){return new Promise(function(g,h){d=s[c](d),o(g,h,d.done,d.value)})}}function o(c,d,g,h){Promise.resolve(h).then(function(_){c({value:_,done:g})},d)}}function __makeTemplateObject(s,e){return Object.defineProperty?Object.defineProperty(s,"raw",{value:e}):s.raw=e,s}var __setModuleDefault=Object.create?function(s,e){Object.defineProperty(s,"default",{enumerable:!0,value:e})}:function(s,e){s.default=e},ownKeys=function(s){return ownKeys=Object.getOwnPropertyNames||function(e){var i=[];for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(i[i.length]=a);return i},ownKeys(s)};function __importStar(s){if(s&&s.__esModule)return s;var e={};if(s!=null)for(var i=ownKeys(s),a=0;a<i.length;a++)i[a]!=="default"&&__createBinding(e,s,i[a]);return __setModuleDefault(e,s),e}function __importDefault(s){return s&&s.__esModule?s:{default:s}}function __classPrivateFieldGet(s,e,i,a){if(i==="a"&&!a)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?s!==e||!a:!e.has(s))throw new TypeError("Cannot read private member from an object whose class did not declare it");return i==="m"?a:i==="a"?a.call(s):a?a.value:e.get(s)}function __classPrivateFieldSet(s,e,i,a,o){if(a==="m")throw new TypeError("Private method is not writable");if(a==="a"&&!o)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?s!==e||!o:!e.has(s))throw new TypeError("Cannot write private member to an object whose class did not declare it");return a==="a"?o.call(s,i):o?o.value=i:e.set(s,i),i}function __classPrivateFieldIn(s,e){if(e===null||typeof e!="object"&&typeof e!="function")throw new TypeError("Cannot use 'in' operator on non-object");return typeof s=="function"?e===s:s.has(e)}function __addDisposableResource(s,e,i){if(e!=null){if(typeof e!="object"&&typeof e!="function")throw new TypeError("Object expected.");var a,o;if(i){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");a=e[Symbol.asyncDispose]}if(a===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");a=e[Symbol.dispose],i&&(o=a)}if(typeof a!="function")throw new TypeError("Object not disposable.");o&&(a=function(){try{o.call(this)}catch(c){return Promise.reject(c)}}),s.stack.push({value:e,dispose:a,async:i})}else i&&s.stack.push({async:!0});return e}var _SuppressedError=typeof SuppressedError=="function"?SuppressedError:function(s,e,i){var a=new Error(i);return a.name="SuppressedError",a.error=s,a.suppressed=e,a};function __disposeResources(s){function e(c){s.error=s.hasError?new _SuppressedError(c,s.error,"An error was suppressed during disposal."):c,s.hasError=!0}var i,a=0;function o(){for(;i=s.stack.pop();)try{if(!i.async&&a===1)return a=0,s.stack.push(i),Promise.resolve().then(o);if(i.dispose){var c=i.dispose.call(i.value);if(i.async)return a|=2,Promise.resolve(c).then(o,function(d){return e(d),o()})}else a|=1}catch(d){e(d)}if(a===1)return s.hasError?Promise.reject(s.error):Promise.resolve();if(s.hasError)throw s.error}return o()}function __rewriteRelativeImportExtension(s,e){return typeof s=="string"&&/^\.\.?\//.test(s)?s.replace(/\.(tsx)$|((?:\.d)?)((?:\.[^./]+?)?)\.([cm]?)ts$/i,function(i,a,o,c,d){return a?e?".jsx":".js":o&&(!c||!d)?i:o+c+"."+d.toLowerCase()+"js"}):s}const tslib_es6={__extends,__assign,__rest,__decorate,__param,__esDecorate,__runInitializers,__propKey,__setFunctionName,__metadata,__awaiter,__generator,__createBinding,__exportStar,__values,__read,__spread,__spreadArrays,__spreadArray,__await,__asyncGenerator,__asyncDelegator,__asyncValues,__makeTemplateObject,__importStar,__importDefault,__classPrivateFieldGet,__classPrivateFieldSet,__classPrivateFieldIn,__addDisposableResource,__disposeResources,__rewriteRelativeImportExtension},tslib_es6$1=Object.freeze(Object.defineProperty({__proto__:null,__addDisposableResource,get __assign(){return __assign},__asyncDelegator,__asyncGenerator,__asyncValues,__await,__awaiter,__classPrivateFieldGet,__classPrivateFieldIn,__classPrivateFieldSet,__createBinding,__decorate,__disposeResources,__esDecorate,__exportStar,__extends,__generator,__importDefault,__importStar,__makeTemplateObject,__metadata,__param,__propKey,__read,__rest,__rewriteRelativeImportExtension,__runInitializers,__setFunctionName,__spread,__spreadArray,__spreadArrays,__values,default:tslib_es6},Symbol.toStringTag,{value:"Module"})),resolveFetch$4=s=>s?(...e)=>s(...e):(...e)=>fetch(...e);class FunctionsError extends Error{constructor(e,i="FunctionsError",a){super(e),this.name=i,this.context=a}}class FunctionsFetchError extends FunctionsError{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class FunctionsRelayError extends FunctionsError{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class FunctionsHttpError extends FunctionsError{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var FunctionRegion;(function(s){s.Any="any",s.ApNortheast1="ap-northeast-1",s.ApNortheast2="ap-northeast-2",s.ApSouth1="ap-south-1",s.ApSoutheast1="ap-southeast-1",s.ApSoutheast2="ap-southeast-2",s.CaCentral1="ca-central-1",s.EuCentral1="eu-central-1",s.EuWest1="eu-west-1",s.EuWest2="eu-west-2",s.EuWest3="eu-west-3",s.SaEast1="sa-east-1",s.UsEast1="us-east-1",s.UsWest1="us-west-1",s.UsWest2="us-west-2"})(FunctionRegion||(FunctionRegion={}));class FunctionsClient{constructor(e,{headers:i={},customFetch:a,region:o=FunctionRegion.Any}={}){this.url=e,this.headers=i,this.region=o,this.fetch=resolveFetch$4(a)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e){return __awaiter(this,arguments,void 0,function*(i,a={}){var o;let c,d;try{const{headers:g,method:h,body:_,signal:b,timeout:rt}=a;let nt={},{region:it}=a;it||(it=this.region);const ot=new URL(`${this.url}/${i}`);it&&it!=="any"&&(nt["x-region"]=it,ot.searchParams.set("forceFunctionRegion",it));let ct;_&&(g&&!Object.prototype.hasOwnProperty.call(g,"Content-Type")||!g)?typeof Blob<"u"&&_ instanceof Blob||_ instanceof ArrayBuffer?(nt["Content-Type"]="application/octet-stream",ct=_):typeof _=="string"?(nt["Content-Type"]="text/plain",ct=_):typeof FormData<"u"&&_ instanceof FormData?ct=_:(nt["Content-Type"]="application/json",ct=JSON.stringify(_)):ct=_;let tt=b;rt&&(d=new AbortController,c=setTimeout(()=>d.abort(),rt),b?(tt=d.signal,b.addEventListener("abort",()=>d.abort())):tt=d.signal);const $=yield this.fetch(ot.toString(),{method:h||"POST",headers:Object.assign(Object.assign(Object.assign({},nt),this.headers),g),body:ct,signal:tt}).catch(at=>{throw new FunctionsFetchError(at)}),j=$.headers.get("x-relay-error");if(j&&j==="true")throw new FunctionsRelayError($);if(!$.ok)throw new FunctionsHttpError($);let et=((o=$.headers.get("Content-Type"))!==null&&o!==void 0?o:"text/plain").split(";")[0].trim(),ft;return et==="application/json"?ft=yield $.json():et==="application/octet-stream"||et==="application/pdf"?ft=yield $.blob():et==="text/event-stream"?ft=$:et==="multipart/form-data"?ft=yield $.formData():ft=yield $.text(),{data:ft,error:null,response:$}}catch(g){return{data:null,error:g,response:g instanceof FunctionsHttpError||g instanceof FunctionsRelayError?g.context:void 0}}finally{c&&clearTimeout(c)}})}}var cjs={};const require$$0=getAugmentedNamespace(tslib_es6$1);var PostgrestClient$2={},PostgrestQueryBuilder$2={},PostgrestFilterBuilder$2={},PostgrestTransformBuilder$2={},PostgrestBuilder$2={},PostgrestError$2={},hasRequiredPostgrestError;function requirePostgrestError(){if(hasRequiredPostgrestError)return PostgrestError$2;hasRequiredPostgrestError=1,Object.defineProperty(PostgrestError$2,"__esModule",{value:!0});class s extends Error{constructor(i){super(i.message),this.name="PostgrestError",this.details=i.details,this.hint=i.hint,this.code=i.code}}return PostgrestError$2.default=s,PostgrestError$2}var hasRequiredPostgrestBuilder;function requirePostgrestBuilder(){if(hasRequiredPostgrestBuilder)return PostgrestBuilder$2;hasRequiredPostgrestBuilder=1,Object.defineProperty(PostgrestBuilder$2,"__esModule",{value:!0});const e=require$$0.__importDefault(requirePostgrestError());class i{constructor(o){var c,d;this.shouldThrowOnError=!1,this.method=o.method,this.url=o.url,this.headers=new Headers(o.headers),this.schema=o.schema,this.body=o.body,this.shouldThrowOnError=(c=o.shouldThrowOnError)!==null&&c!==void 0?c:!1,this.signal=o.signal,this.isMaybeSingle=(d=o.isMaybeSingle)!==null&&d!==void 0?d:!1,o.fetch?this.fetch=o.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(o,c){return this.headers=new Headers(this.headers),this.headers.set(o,c),this}then(o,c){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const d=this.fetch;let g=d(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async h=>{var _,b,rt,nt;let it=null,ot=null,ct=null,tt=h.status,$=h.statusText;if(h.ok){if(this.method!=="HEAD"){const at=await h.text();at===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((_=this.headers.get("Accept"))===null||_===void 0)&&_.includes("application/vnd.pgrst.plan+text"))?ot=at:ot=JSON.parse(at))}const et=(b=this.headers.get("Prefer"))===null||b===void 0?void 0:b.match(/count=(exact|planned|estimated)/),ft=(rt=h.headers.get("content-range"))===null||rt===void 0?void 0:rt.split("/");et&&ft&&ft.length>1&&(ct=parseInt(ft[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(ot)&&(ot.length>1?(it={code:"PGRST116",details:`Results contain ${ot.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},ot=null,ct=null,tt=406,$="Not Acceptable"):ot.length===1?ot=ot[0]:ot=null)}else{const et=await h.text();try{it=JSON.parse(et),Array.isArray(it)&&h.status===404&&(ot=[],it=null,tt=200,$="OK")}catch{h.status===404&&et===""?(tt=204,$="No Content"):it={message:et}}if(it&&this.isMaybeSingle&&(!((nt=it==null?void 0:it.details)===null||nt===void 0)&&nt.includes("0 rows"))&&(it=null,tt=200,$="OK"),it&&this.shouldThrowOnError)throw new e.default(it)}return{error:it,data:ot,count:ct,status:tt,statusText:$}});return this.shouldThrowOnError||(g=g.catch(h=>{var _,b,rt,nt,it,ot;let ct="";const tt=h==null?void 0:h.cause;if(tt){const $=(_=tt==null?void 0:tt.message)!==null&&_!==void 0?_:"",j=(b=tt==null?void 0:tt.code)!==null&&b!==void 0?b:"";ct=`${(rt=h==null?void 0:h.name)!==null&&rt!==void 0?rt:"FetchError"}: ${h==null?void 0:h.message}`,ct+=`

Caused by: ${(nt=tt==null?void 0:tt.name)!==null&&nt!==void 0?nt:"Error"}: ${$}`,j&&(ct+=` (${j})`),tt!=null&&tt.stack&&(ct+=`
${tt.stack}`)}else ct=(it=h==null?void 0:h.stack)!==null&&it!==void 0?it:"";return{error:{message:`${(ot=h==null?void 0:h.name)!==null&&ot!==void 0?ot:"FetchError"}: ${h==null?void 0:h.message}`,details:ct,hint:"",code:""},data:null,count:null,status:0,statusText:""}})),g.then(o,c)}returns(){return this}overrideTypes(){return this}}return PostgrestBuilder$2.default=i,PostgrestBuilder$2}var hasRequiredPostgrestTransformBuilder;function requirePostgrestTransformBuilder(){if(hasRequiredPostgrestTransformBuilder)return PostgrestTransformBuilder$2;hasRequiredPostgrestTransformBuilder=1,Object.defineProperty(PostgrestTransformBuilder$2,"__esModule",{value:!0});const e=require$$0.__importDefault(requirePostgrestBuilder());class i extends e.default{select(o){let c=!1;const d=(o??"*").split("").map(g=>/\s/.test(g)&&!c?"":(g==='"'&&(c=!c),g)).join("");return this.url.searchParams.set("select",d),this.headers.append("Prefer","return=representation"),this}order(o,{ascending:c=!0,nullsFirst:d,foreignTable:g,referencedTable:h=g}={}){const _=h?`${h}.order`:"order",b=this.url.searchParams.get(_);return this.url.searchParams.set(_,`${b?`${b},`:""}${o}.${c?"asc":"desc"}${d===void 0?"":d?".nullsfirst":".nullslast"}`),this}limit(o,{foreignTable:c,referencedTable:d=c}={}){const g=typeof d>"u"?"limit":`${d}.limit`;return this.url.searchParams.set(g,`${o}`),this}range(o,c,{foreignTable:d,referencedTable:g=d}={}){const h=typeof g>"u"?"offset":`${g}.offset`,_=typeof g>"u"?"limit":`${g}.limit`;return this.url.searchParams.set(h,`${o}`),this.url.searchParams.set(_,`${c-o+1}`),this}abortSignal(o){return this.signal=o,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:o=!1,verbose:c=!1,settings:d=!1,buffers:g=!1,wal:h=!1,format:_="text"}={}){var b;const rt=[o?"analyze":null,c?"verbose":null,d?"settings":null,g?"buffers":null,h?"wal":null].filter(Boolean).join("|"),nt=(b=this.headers.get("Accept"))!==null&&b!==void 0?b:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${_}; for="${nt}"; options=${rt};`),_==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(o){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${o}`),this}}return PostgrestTransformBuilder$2.default=i,PostgrestTransformBuilder$2}var hasRequiredPostgrestFilterBuilder;function requirePostgrestFilterBuilder(){if(hasRequiredPostgrestFilterBuilder)return PostgrestFilterBuilder$2;hasRequiredPostgrestFilterBuilder=1,Object.defineProperty(PostgrestFilterBuilder$2,"__esModule",{value:!0});const e=require$$0.__importDefault(requirePostgrestTransformBuilder()),i=new RegExp("[,()]");class a extends e.default{eq(c,d){return this.url.searchParams.append(c,`eq.${d}`),this}neq(c,d){return this.url.searchParams.append(c,`neq.${d}`),this}gt(c,d){return this.url.searchParams.append(c,`gt.${d}`),this}gte(c,d){return this.url.searchParams.append(c,`gte.${d}`),this}lt(c,d){return this.url.searchParams.append(c,`lt.${d}`),this}lte(c,d){return this.url.searchParams.append(c,`lte.${d}`),this}like(c,d){return this.url.searchParams.append(c,`like.${d}`),this}likeAllOf(c,d){return this.url.searchParams.append(c,`like(all).{${d.join(",")}}`),this}likeAnyOf(c,d){return this.url.searchParams.append(c,`like(any).{${d.join(",")}}`),this}ilike(c,d){return this.url.searchParams.append(c,`ilike.${d}`),this}ilikeAllOf(c,d){return this.url.searchParams.append(c,`ilike(all).{${d.join(",")}}`),this}ilikeAnyOf(c,d){return this.url.searchParams.append(c,`ilike(any).{${d.join(",")}}`),this}regexMatch(c,d){return this.url.searchParams.append(c,`match.${d}`),this}regexIMatch(c,d){return this.url.searchParams.append(c,`imatch.${d}`),this}is(c,d){return this.url.searchParams.append(c,`is.${d}`),this}isDistinct(c,d){return this.url.searchParams.append(c,`isdistinct.${d}`),this}in(c,d){const g=Array.from(new Set(d)).map(h=>typeof h=="string"&&i.test(h)?`"${h}"`:`${h}`).join(",");return this.url.searchParams.append(c,`in.(${g})`),this}contains(c,d){return typeof d=="string"?this.url.searchParams.append(c,`cs.${d}`):Array.isArray(d)?this.url.searchParams.append(c,`cs.{${d.join(",")}}`):this.url.searchParams.append(c,`cs.${JSON.stringify(d)}`),this}containedBy(c,d){return typeof d=="string"?this.url.searchParams.append(c,`cd.${d}`):Array.isArray(d)?this.url.searchParams.append(c,`cd.{${d.join(",")}}`):this.url.searchParams.append(c,`cd.${JSON.stringify(d)}`),this}rangeGt(c,d){return this.url.searchParams.append(c,`sr.${d}`),this}rangeGte(c,d){return this.url.searchParams.append(c,`nxl.${d}`),this}rangeLt(c,d){return this.url.searchParams.append(c,`sl.${d}`),this}rangeLte(c,d){return this.url.searchParams.append(c,`nxr.${d}`),this}rangeAdjacent(c,d){return this.url.searchParams.append(c,`adj.${d}`),this}overlaps(c,d){return typeof d=="string"?this.url.searchParams.append(c,`ov.${d}`):this.url.searchParams.append(c,`ov.{${d.join(",")}}`),this}textSearch(c,d,{config:g,type:h}={}){let _="";h==="plain"?_="pl":h==="phrase"?_="ph":h==="websearch"&&(_="w");const b=g===void 0?"":`(${g})`;return this.url.searchParams.append(c,`${_}fts${b}.${d}`),this}match(c){return Object.entries(c).forEach(([d,g])=>{this.url.searchParams.append(d,`eq.${g}`)}),this}not(c,d,g){return this.url.searchParams.append(c,`not.${d}.${g}`),this}or(c,{foreignTable:d,referencedTable:g=d}={}){const h=g?`${g}.or`:"or";return this.url.searchParams.append(h,`(${c})`),this}filter(c,d,g){return this.url.searchParams.append(c,`${d}.${g}`),this}}return PostgrestFilterBuilder$2.default=a,PostgrestFilterBuilder$2}var hasRequiredPostgrestQueryBuilder;function requirePostgrestQueryBuilder(){if(hasRequiredPostgrestQueryBuilder)return PostgrestQueryBuilder$2;hasRequiredPostgrestQueryBuilder=1,Object.defineProperty(PostgrestQueryBuilder$2,"__esModule",{value:!0});const e=require$$0.__importDefault(requirePostgrestFilterBuilder());class i{constructor(o,{headers:c={},schema:d,fetch:g}){this.url=o,this.headers=new Headers(c),this.schema=d,this.fetch=g}select(o,c){const{head:d=!1,count:g}=c??{},h=d?"HEAD":"GET";let _=!1;const b=(o??"*").split("").map(rt=>/\s/.test(rt)&&!_?"":(rt==='"'&&(_=!_),rt)).join("");return this.url.searchParams.set("select",b),g&&this.headers.append("Prefer",`count=${g}`),new e.default({method:h,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(o,{count:c,defaultToNull:d=!0}={}){var g;const h="POST";if(c&&this.headers.append("Prefer",`count=${c}`),d||this.headers.append("Prefer","missing=default"),Array.isArray(o)){const _=o.reduce((b,rt)=>b.concat(Object.keys(rt)),[]);if(_.length>0){const b=[...new Set(_)].map(rt=>`"${rt}"`);this.url.searchParams.set("columns",b.join(","))}}return new e.default({method:h,url:this.url,headers:this.headers,schema:this.schema,body:o,fetch:(g=this.fetch)!==null&&g!==void 0?g:fetch})}upsert(o,{onConflict:c,ignoreDuplicates:d=!1,count:g,defaultToNull:h=!0}={}){var _;const b="POST";if(this.headers.append("Prefer",`resolution=${d?"ignore":"merge"}-duplicates`),c!==void 0&&this.url.searchParams.set("on_conflict",c),g&&this.headers.append("Prefer",`count=${g}`),h||this.headers.append("Prefer","missing=default"),Array.isArray(o)){const rt=o.reduce((nt,it)=>nt.concat(Object.keys(it)),[]);if(rt.length>0){const nt=[...new Set(rt)].map(it=>`"${it}"`);this.url.searchParams.set("columns",nt.join(","))}}return new e.default({method:b,url:this.url,headers:this.headers,schema:this.schema,body:o,fetch:(_=this.fetch)!==null&&_!==void 0?_:fetch})}update(o,{count:c}={}){var d;const g="PATCH";return c&&this.headers.append("Prefer",`count=${c}`),new e.default({method:g,url:this.url,headers:this.headers,schema:this.schema,body:o,fetch:(d=this.fetch)!==null&&d!==void 0?d:fetch})}delete({count:o}={}){var c;const d="DELETE";return o&&this.headers.append("Prefer",`count=${o}`),new e.default({method:d,url:this.url,headers:this.headers,schema:this.schema,fetch:(c=this.fetch)!==null&&c!==void 0?c:fetch})}}return PostgrestQueryBuilder$2.default=i,PostgrestQueryBuilder$2}var hasRequiredPostgrestClient;function requirePostgrestClient(){if(hasRequiredPostgrestClient)return PostgrestClient$2;hasRequiredPostgrestClient=1,Object.defineProperty(PostgrestClient$2,"__esModule",{value:!0});const s=require$$0,e=s.__importDefault(requirePostgrestQueryBuilder()),i=s.__importDefault(requirePostgrestFilterBuilder());class a{constructor(c,{headers:d={},schema:g,fetch:h}={}){this.url=c,this.headers=new Headers(d),this.schemaName=g,this.fetch=h}from(c){if(!c||typeof c!="string"||c.trim()==="")throw new Error("Invalid relation name: relation must be a non-empty string.");const d=new URL(`${this.url}/${c}`);return new e.default(d,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(c){return new a(this.url,{headers:this.headers,schema:c,fetch:this.fetch})}rpc(c,d={},{head:g=!1,get:h=!1,count:_}={}){var b;let rt;const nt=new URL(`${this.url}/rpc/${c}`);let it;g||h?(rt=g?"HEAD":"GET",Object.entries(d).filter(([ct,tt])=>tt!==void 0).map(([ct,tt])=>[ct,Array.isArray(tt)?`{${tt.join(",")}}`:`${tt}`]).forEach(([ct,tt])=>{nt.searchParams.append(ct,tt)})):(rt="POST",it=d);const ot=new Headers(this.headers);return _&&ot.set("Prefer",`count=${_}`),new i.default({method:rt,url:nt,headers:ot,schema:this.schemaName,body:it,fetch:(b=this.fetch)!==null&&b!==void 0?b:fetch})}}return PostgrestClient$2.default=a,PostgrestClient$2}Object.defineProperty(cjs,"__esModule",{value:!0});var PostgrestError$1=cjs.PostgrestError=PostgrestBuilder$1=cjs.PostgrestBuilder=PostgrestTransformBuilder$1=cjs.PostgrestTransformBuilder=PostgrestFilterBuilder$1=cjs.PostgrestFilterBuilder=PostgrestQueryBuilder$1=cjs.PostgrestQueryBuilder=PostgrestClient$1=cjs.PostgrestClient=void 0;const tslib_1=require$$0,PostgrestClient_1=tslib_1.__importDefault(requirePostgrestClient());var PostgrestClient$1=cjs.PostgrestClient=PostgrestClient_1.default;const PostgrestQueryBuilder_1=tslib_1.__importDefault(requirePostgrestQueryBuilder());var PostgrestQueryBuilder$1=cjs.PostgrestQueryBuilder=PostgrestQueryBuilder_1.default;const PostgrestFilterBuilder_1=tslib_1.__importDefault(requirePostgrestFilterBuilder());var PostgrestFilterBuilder$1=cjs.PostgrestFilterBuilder=PostgrestFilterBuilder_1.default;const PostgrestTransformBuilder_1=tslib_1.__importDefault(requirePostgrestTransformBuilder());var PostgrestTransformBuilder$1=cjs.PostgrestTransformBuilder=PostgrestTransformBuilder_1.default;const PostgrestBuilder_1=tslib_1.__importDefault(requirePostgrestBuilder());var PostgrestBuilder$1=cjs.PostgrestBuilder=PostgrestBuilder_1.default;const PostgrestError_1=tslib_1.__importDefault(requirePostgrestError());PostgrestError$1=cjs.PostgrestError=PostgrestError_1.default;var _default=cjs.default={PostgrestClient:PostgrestClient_1.default,PostgrestQueryBuilder:PostgrestQueryBuilder_1.default,PostgrestFilterBuilder:PostgrestFilterBuilder_1.default,PostgrestTransformBuilder:PostgrestTransformBuilder_1.default,PostgrestBuilder:PostgrestBuilder_1.default,PostgrestError:PostgrestError_1.default};const index$1=_mergeNamespaces({__proto__:null,get PostgrestBuilder(){return PostgrestBuilder$1},get PostgrestClient(){return PostgrestClient$1},get PostgrestError(){return PostgrestError$1},get PostgrestFilterBuilder(){return PostgrestFilterBuilder$1},get PostgrestQueryBuilder(){return PostgrestQueryBuilder$1},get PostgrestTransformBuilder(){return PostgrestTransformBuilder$1},default:_default},[cjs]),{PostgrestClient,PostgrestQueryBuilder,PostgrestFilterBuilder,PostgrestTransformBuilder,PostgrestBuilder,PostgrestError}=_default||index$1;class WebSocketFactory{constructor(){}static detectEnvironment(){var e;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((e=navigator.userAgent)===null||e===void 0)&&e.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const i=process.versions;if(i&&i.node){const a=i.node,o=parseInt(a.replace(/^v/,"").split(".")[0]);return o>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${o} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${o} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const e=this.detectEnvironment();if(e.constructor)return e.constructor;let i=e.error||"WebSocket not supported in this environment.";throw e.workaround&&(i+=`

Suggested solution: ${e.workaround}`),new Error(i)}static createWebSocket(e,i){const a=this.getWebSocketConstructor();return new a(e,i)}static isWebSocketSupported(){try{const e=this.detectEnvironment();return e.type==="native"||e.type==="ws"}catch{return!1}}}const version$3="2.84.0",DEFAULT_VERSION=`realtime-js/${version$3}`,VSN_1_0_0="1.0.0",VSN_2_0_0="2.0.0",DEFAULT_VSN=VSN_1_0_0,DEFAULT_TIMEOUT=1e4,WS_CLOSE_NORMAL=1e3,MAX_PUSH_BUFFER_SIZE=100;var SOCKET_STATES;(function(s){s[s.connecting=0]="connecting",s[s.open=1]="open",s[s.closing=2]="closing",s[s.closed=3]="closed"})(SOCKET_STATES||(SOCKET_STATES={}));var CHANNEL_STATES;(function(s){s.closed="closed",s.errored="errored",s.joined="joined",s.joining="joining",s.leaving="leaving"})(CHANNEL_STATES||(CHANNEL_STATES={}));var CHANNEL_EVENTS;(function(s){s.close="phx_close",s.error="phx_error",s.join="phx_join",s.reply="phx_reply",s.leave="phx_leave",s.access_token="access_token"})(CHANNEL_EVENTS||(CHANNEL_EVENTS={}));var TRANSPORTS;(function(s){s.websocket="websocket"})(TRANSPORTS||(TRANSPORTS={}));var CONNECTION_STATE;(function(s){s.Connecting="connecting",s.Open="open",s.Closing="closing",s.Closed="closed"})(CONNECTION_STATE||(CONNECTION_STATE={}));class Serializer{constructor(){this.HEADER_LENGTH=1,this.META_LENGTH=4,this.USER_BROADCAST_PUSH_META_LENGTH=5,this.KINDS={userBroadcastPush:3,userBroadcast:4},this.BINARY_ENCODING=0,this.JSON_ENCODING=1,this.BROADCAST_EVENT="broadcast"}encode(e,i){if(e.event===this.BROADCAST_EVENT&&!(e.payload instanceof ArrayBuffer)&&typeof e.payload.event=="string")return i(this._binaryEncodeUserBroadcastPush(e));let a=[e.join_ref,e.ref,e.topic,e.event,e.payload];return i(JSON.stringify(a))}_binaryEncodeUserBroadcastPush(e){var i;return this._isArrayBuffer((i=e.payload)===null||i===void 0?void 0:i.payload)?this._encodeBinaryUserBroadcastPush(e):this._encodeJsonUserBroadcastPush(e)}_encodeBinaryUserBroadcastPush(e){var i,a,o,c;const d=e.topic,g=(i=e.ref)!==null&&i!==void 0?i:"",h=(a=e.join_ref)!==null&&a!==void 0?a:"",_=e.payload.event,b=(c=(o=e.payload)===null||o===void 0?void 0:o.payload)!==null&&c!==void 0?c:new ArrayBuffer(0),rt=this.USER_BROADCAST_PUSH_META_LENGTH+h.length+g.length+d.length+_.length,nt=new ArrayBuffer(this.HEADER_LENGTH+rt);let it=new DataView(nt),ot=0;it.setUint8(ot++,this.KINDS.userBroadcastPush),it.setUint8(ot++,h.length),it.setUint8(ot++,g.length),it.setUint8(ot++,d.length),it.setUint8(ot++,_.length),it.setUint8(ot++,this.BINARY_ENCODING),Array.from(h,tt=>it.setUint8(ot++,tt.charCodeAt(0))),Array.from(g,tt=>it.setUint8(ot++,tt.charCodeAt(0))),Array.from(d,tt=>it.setUint8(ot++,tt.charCodeAt(0))),Array.from(_,tt=>it.setUint8(ot++,tt.charCodeAt(0)));var ct=new Uint8Array(nt.byteLength+b.byteLength);return ct.set(new Uint8Array(nt),0),ct.set(new Uint8Array(b),nt.byteLength),ct.buffer}_encodeJsonUserBroadcastPush(e){var i,a,o,c;const d=e.topic,g=(i=e.ref)!==null&&i!==void 0?i:"",h=(a=e.join_ref)!==null&&a!==void 0?a:"",_=e.payload.event,b=(c=(o=e.payload)===null||o===void 0?void 0:o.payload)!==null&&c!==void 0?c:{},nt=new TextEncoder().encode(JSON.stringify(b)).buffer,it=this.USER_BROADCAST_PUSH_META_LENGTH+h.length+g.length+d.length+_.length,ot=new ArrayBuffer(this.HEADER_LENGTH+it);let ct=new DataView(ot),tt=0;ct.setUint8(tt++,this.KINDS.userBroadcastPush),ct.setUint8(tt++,h.length),ct.setUint8(tt++,g.length),ct.setUint8(tt++,d.length),ct.setUint8(tt++,_.length),ct.setUint8(tt++,this.JSON_ENCODING),Array.from(h,j=>ct.setUint8(tt++,j.charCodeAt(0))),Array.from(g,j=>ct.setUint8(tt++,j.charCodeAt(0))),Array.from(d,j=>ct.setUint8(tt++,j.charCodeAt(0))),Array.from(_,j=>ct.setUint8(tt++,j.charCodeAt(0)));var $=new Uint8Array(ot.byteLength+nt.byteLength);return $.set(new Uint8Array(ot),0),$.set(new Uint8Array(nt),ot.byteLength),$.buffer}decode(e,i){if(this._isArrayBuffer(e)){let a=this._binaryDecode(e);return i(a)}if(typeof e=="string"){const a=JSON.parse(e),[o,c,d,g,h]=a;return i({join_ref:o,ref:c,topic:d,event:g,payload:h})}return i({})}_binaryDecode(e){const i=new DataView(e),a=i.getUint8(0),o=new TextDecoder;switch(a){case this.KINDS.userBroadcast:return this._decodeUserBroadcast(e,i,o)}}_decodeUserBroadcast(e,i,a){const o=i.getUint8(1),c=i.getUint8(2),d=i.getUint8(3),g=i.getUint8(4);let h=this.HEADER_LENGTH+4;const _=a.decode(e.slice(h,h+o));h=h+o;const b=a.decode(e.slice(h,h+c));h=h+c;const rt=a.decode(e.slice(h,h+d));h=h+d;const nt=e.slice(h,e.byteLength),it=g===this.JSON_ENCODING?JSON.parse(a.decode(nt)):nt,ot={type:this.BROADCAST_EVENT,event:b,payload:it};return d>0&&(ot.meta=JSON.parse(rt)),{join_ref:null,ref:null,topic:_,event:this.BROADCAST_EVENT,payload:ot}}_isArrayBuffer(e){var i;return e instanceof ArrayBuffer||((i=e==null?void 0:e.constructor)===null||i===void 0?void 0:i.name)==="ArrayBuffer"}}class Timer{constructor(e,i){this.callback=e,this.timerCalc=i,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=i}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var PostgresTypes;(function(s){s.abstime="abstime",s.bool="bool",s.date="date",s.daterange="daterange",s.float4="float4",s.float8="float8",s.int2="int2",s.int4="int4",s.int4range="int4range",s.int8="int8",s.int8range="int8range",s.json="json",s.jsonb="jsonb",s.money="money",s.numeric="numeric",s.oid="oid",s.reltime="reltime",s.text="text",s.time="time",s.timestamp="timestamp",s.timestamptz="timestamptz",s.timetz="timetz",s.tsrange="tsrange",s.tstzrange="tstzrange"})(PostgresTypes||(PostgresTypes={}));const convertChangeData=(s,e,i={})=>{var a;const o=(a=i.skipTypes)!==null&&a!==void 0?a:[];return e?Object.keys(e).reduce((c,d)=>(c[d]=convertColumn(d,s,e,o),c),{}):{}},convertColumn=(s,e,i,a)=>{const o=e.find(g=>g.name===s),c=o==null?void 0:o.type,d=i[s];return c&&!a.includes(c)?convertCell(c,d):noop$1(d)},convertCell=(s,e)=>{if(s.charAt(0)==="_"){const i=s.slice(1,s.length);return toArray(e,i)}switch(s){case PostgresTypes.bool:return toBoolean(e);case PostgresTypes.float4:case PostgresTypes.float8:case PostgresTypes.int2:case PostgresTypes.int4:case PostgresTypes.int8:case PostgresTypes.numeric:case PostgresTypes.oid:return toNumber(e);case PostgresTypes.json:case PostgresTypes.jsonb:return toJson(e);case PostgresTypes.timestamp:return toTimestampString(e);case PostgresTypes.abstime:case PostgresTypes.date:case PostgresTypes.daterange:case PostgresTypes.int4range:case PostgresTypes.int8range:case PostgresTypes.money:case PostgresTypes.reltime:case PostgresTypes.text:case PostgresTypes.time:case PostgresTypes.timestamptz:case PostgresTypes.timetz:case PostgresTypes.tsrange:case PostgresTypes.tstzrange:return noop$1(e);default:return noop$1(e)}},noop$1=s=>s,toBoolean=s=>{switch(s){case"t":return!0;case"f":return!1;default:return s}},toNumber=s=>{if(typeof s=="string"){const e=parseFloat(s);if(!Number.isNaN(e))return e}return s},toJson=s=>{if(typeof s=="string")try{return JSON.parse(s)}catch(e){return console.log(`JSON parse error: ${e}`),s}return s},toArray=(s,e)=>{if(typeof s!="string")return s;const i=s.length-1,a=s[i];if(s[0]==="{"&&a==="}"){let c;const d=s.slice(1,i);try{c=JSON.parse("["+d+"]")}catch{c=d?d.split(","):[]}return c.map(g=>convertCell(e,g))}return s},toTimestampString=s=>typeof s=="string"?s.replace(" ","T"):s,httpEndpointURL=s=>{const e=new URL(s);return e.protocol=e.protocol.replace(/^ws/i,"http"),e.pathname=e.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),e.pathname===""||e.pathname==="/"?e.pathname="/api/broadcast":e.pathname=e.pathname+"/api/broadcast",e.href};class Push{constructor(e,i,a={},o=DEFAULT_TIMEOUT){this.channel=e,this.event=i,this.payload=a,this.timeout=o,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,i){var a;return this._hasReceived(e)&&i((a=this.receivedResp)===null||a===void 0?void 0:a.response),this.recHooks.push({status:e,callback:i}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=i=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=i,this._matchReceive(i)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,i){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:i})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:i}){this.recHooks.filter(a=>a.status===e).forEach(a=>a.callback(i))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var REALTIME_PRESENCE_LISTEN_EVENTS;(function(s){s.SYNC="sync",s.JOIN="join",s.LEAVE="leave"})(REALTIME_PRESENCE_LISTEN_EVENTS||(REALTIME_PRESENCE_LISTEN_EVENTS={}));class RealtimePresence{constructor(e,i){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const a=(i==null?void 0:i.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(a.state,{},o=>{const{onJoin:c,onLeave:d,onSync:g}=this.caller;this.joinRef=this.channel._joinRef(),this.state=RealtimePresence.syncState(this.state,o,c,d),this.pendingDiffs.forEach(h=>{this.state=RealtimePresence.syncDiff(this.state,h,c,d)}),this.pendingDiffs=[],g()}),this.channel._on(a.diff,{},o=>{const{onJoin:c,onLeave:d,onSync:g}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(o):(this.state=RealtimePresence.syncDiff(this.state,o,c,d),g())}),this.onJoin((o,c,d)=>{this.channel._trigger("presence",{event:"join",key:o,currentPresences:c,newPresences:d})}),this.onLeave((o,c,d)=>{this.channel._trigger("presence",{event:"leave",key:o,currentPresences:c,leftPresences:d})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,i,a,o){const c=this.cloneDeep(e),d=this.transformState(i),g={},h={};return this.map(c,(_,b)=>{d[_]||(h[_]=b)}),this.map(d,(_,b)=>{const rt=c[_];if(rt){const nt=b.map(tt=>tt.presence_ref),it=rt.map(tt=>tt.presence_ref),ot=b.filter(tt=>it.indexOf(tt.presence_ref)<0),ct=rt.filter(tt=>nt.indexOf(tt.presence_ref)<0);ot.length>0&&(g[_]=ot),ct.length>0&&(h[_]=ct)}else g[_]=b}),this.syncDiff(c,{joins:g,leaves:h},a,o)}static syncDiff(e,i,a,o){const{joins:c,leaves:d}={joins:this.transformState(i.joins),leaves:this.transformState(i.leaves)};return a||(a=()=>{}),o||(o=()=>{}),this.map(c,(g,h)=>{var _;const b=(_=e[g])!==null&&_!==void 0?_:[];if(e[g]=this.cloneDeep(h),b.length>0){const rt=e[g].map(it=>it.presence_ref),nt=b.filter(it=>rt.indexOf(it.presence_ref)<0);e[g].unshift(...nt)}a(g,b,h)}),this.map(d,(g,h)=>{let _=e[g];if(!_)return;const b=h.map(rt=>rt.presence_ref);_=_.filter(rt=>b.indexOf(rt.presence_ref)<0),e[g]=_,o(g,_,h),_.length===0&&delete e[g]}),e}static map(e,i){return Object.getOwnPropertyNames(e).map(a=>i(a,e[a]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((i,a)=>{const o=e[a];return"metas"in o?i[a]=o.metas.map(c=>(c.presence_ref=c.phx_ref,delete c.phx_ref,delete c.phx_ref_prev,c)):i[a]=o,i},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var REALTIME_POSTGRES_CHANGES_LISTEN_EVENT;(function(s){s.ALL="*",s.INSERT="INSERT",s.UPDATE="UPDATE",s.DELETE="DELETE"})(REALTIME_POSTGRES_CHANGES_LISTEN_EVENT||(REALTIME_POSTGRES_CHANGES_LISTEN_EVENT={}));var REALTIME_LISTEN_TYPES;(function(s){s.BROADCAST="broadcast",s.PRESENCE="presence",s.POSTGRES_CHANGES="postgres_changes",s.SYSTEM="system"})(REALTIME_LISTEN_TYPES||(REALTIME_LISTEN_TYPES={}));var REALTIME_SUBSCRIBE_STATES;(function(s){s.SUBSCRIBED="SUBSCRIBED",s.TIMED_OUT="TIMED_OUT",s.CLOSED="CLOSED",s.CHANNEL_ERROR="CHANNEL_ERROR"})(REALTIME_SUBSCRIBE_STATES||(REALTIME_SUBSCRIBE_STATES={}));class RealtimeChannel{constructor(e,i={config:{}},a){var o,c;if(this.topic=e,this.params=i,this.socket=a,this.bindings={},this.state=CHANNEL_STATES.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},i.config),this.timeout=this.socket.timeout,this.joinPush=new Push(this,CHANNEL_EVENTS.join,this.params,this.timeout),this.rejoinTimer=new Timer(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=CHANNEL_STATES.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(d=>d.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=CHANNEL_STATES.closed,this.socket._remove(this)}),this._onError(d=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,d),this.state=CHANNEL_STATES.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=CHANNEL_STATES.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",d=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,d),this.state=CHANNEL_STATES.errored,this.rejoinTimer.scheduleTimeout())}),this._on(CHANNEL_EVENTS.reply,{},(d,g)=>{this._trigger(this._replyEventName(g),d)}),this.presence=new RealtimePresence(this),this.broadcastEndpointURL=httpEndpointURL(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((c=(o=this.params.config)===null||o===void 0?void 0:o.broadcast)===null||c===void 0)&&c.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(e,i=this.timeout){var a,o,c;if(this.socket.isConnected()||this.socket.connect(),this.state==CHANNEL_STATES.closed){const{config:{broadcast:d,presence:g,private:h}}=this.params,_=(o=(a=this.bindings.postgres_changes)===null||a===void 0?void 0:a.map(it=>it.filter))!==null&&o!==void 0?o:[],b=!!this.bindings[REALTIME_LISTEN_TYPES.PRESENCE]&&this.bindings[REALTIME_LISTEN_TYPES.PRESENCE].length>0||((c=this.params.config.presence)===null||c===void 0?void 0:c.enabled)===!0,rt={},nt={broadcast:d,presence:Object.assign(Object.assign({},g),{enabled:b}),postgres_changes:_,private:h};this.socket.accessTokenValue&&(rt.access_token=this.socket.accessTokenValue),this._onError(it=>e==null?void 0:e(REALTIME_SUBSCRIBE_STATES.CHANNEL_ERROR,it)),this._onClose(()=>e==null?void 0:e(REALTIME_SUBSCRIBE_STATES.CLOSED)),this.updateJoinPayload(Object.assign({config:nt},rt)),this.joinedOnce=!0,this._rejoin(i),this.joinPush.receive("ok",async({postgres_changes:it})=>{var ot;if(this.socket.setAuth(),it===void 0){e==null||e(REALTIME_SUBSCRIBE_STATES.SUBSCRIBED);return}else{const ct=this.bindings.postgres_changes,tt=(ot=ct==null?void 0:ct.length)!==null&&ot!==void 0?ot:0,$=[];for(let j=0;j<tt;j++){const et=ct[j],{filter:{event:ft,schema:at,table:ut,filter:yt}}=et,mt=it&&it[j];if(mt&&mt.event===ft&&mt.schema===at&&mt.table===ut&&mt.filter===yt)$.push(Object.assign(Object.assign({},et),{id:mt.id}));else{this.unsubscribe(),this.state=CHANNEL_STATES.errored,e==null||e(REALTIME_SUBSCRIBE_STATES.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=$,e&&e(REALTIME_SUBSCRIBE_STATES.SUBSCRIBED);return}}).receive("error",it=>{this.state=CHANNEL_STATES.errored,e==null||e(REALTIME_SUBSCRIBE_STATES.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(it).join(", ")||"error")))}).receive("timeout",()=>{e==null||e(REALTIME_SUBSCRIBE_STATES.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,i={}){return await this.send({type:"presence",event:"track",payload:e},i.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,i,a){return this.state===CHANNEL_STATES.joined&&e===REALTIME_LISTEN_TYPES.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(e,i,a)}async httpSend(e,i,a={}){var o;const c=this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"";if(i==null)return Promise.reject("Payload is required for httpSend()");const d={method:"POST",headers:{Authorization:c,apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:e,payload:i,private:this.private}]})},g=await this._fetchWithTimeout(this.broadcastEndpointURL,d,(o=a.timeout)!==null&&o!==void 0?o:this.timeout);if(g.status===202)return{success:!0};let h=g.statusText;try{const _=await g.json();h=_.error||_.message||h}catch{}return Promise.reject(new Error(h))}async send(e,i={}){var a,o;if(!this._canPush()&&e.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:c,payload:d}=e,h={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:c,payload:d,private:this.private}]})};try{const _=await this._fetchWithTimeout(this.broadcastEndpointURL,h,(a=i.timeout)!==null&&a!==void 0?a:this.timeout);return await((o=_.body)===null||o===void 0?void 0:o.cancel()),_.ok?"ok":"error"}catch(_){return _.name==="AbortError"?"timed out":"error"}}else return new Promise(c=>{var d,g,h;const _=this._push(e.type,e,i.timeout||this.timeout);e.type==="broadcast"&&!(!((h=(g=(d=this.params)===null||d===void 0?void 0:d.config)===null||g===void 0?void 0:g.broadcast)===null||h===void 0)&&h.ack)&&c("ok"),_.receive("ok",()=>c("ok")),_.receive("error",()=>c("error")),_.receive("timeout",()=>c("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=CHANNEL_STATES.leaving;const i=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(CHANNEL_EVENTS.close,"leave",this._joinRef())};this.joinPush.destroy();let a=null;return new Promise(o=>{a=new Push(this,CHANNEL_EVENTS.leave,{},e),a.receive("ok",()=>{i(),o("ok")}).receive("timeout",()=>{i(),o("timed out")}).receive("error",()=>{o("error")}),a.send(),this._canPush()||a.trigger("ok",{})}).finally(()=>{a==null||a.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=CHANNEL_STATES.closed,this.bindings={}}async _fetchWithTimeout(e,i,a){const o=new AbortController,c=setTimeout(()=>o.abort(),a),d=await this.socket.fetch(e,Object.assign(Object.assign({},i),{signal:o.signal}));return clearTimeout(c),d}_push(e,i,a=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let o=new Push(this,e,i,a);return this._canPush()?o.send():this._addToPushBuffer(o),o}_addToPushBuffer(e){if(e.startTimeout(),this.pushBuffer.push(e),this.pushBuffer.length>MAX_PUSH_BUFFER_SIZE){const i=this.pushBuffer.shift();i&&(i.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${i.event}`,i.payload))}}_onMessage(e,i,a){return i}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,i,a){var o,c;const d=e.toLocaleLowerCase(),{close:g,error:h,leave:_,join:b}=CHANNEL_EVENTS;if(a&&[g,h,_,b].indexOf(d)>=0&&a!==this._joinRef())return;let nt=this._onMessage(d,i,a);if(i&&!nt)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(d)?(o=this.bindings.postgres_changes)===null||o===void 0||o.filter(it=>{var ot,ct,tt;return((ot=it.filter)===null||ot===void 0?void 0:ot.event)==="*"||((tt=(ct=it.filter)===null||ct===void 0?void 0:ct.event)===null||tt===void 0?void 0:tt.toLocaleLowerCase())===d}).map(it=>it.callback(nt,a)):(c=this.bindings[d])===null||c===void 0||c.filter(it=>{var ot,ct,tt,$,j,et;if(["broadcast","presence","postgres_changes"].includes(d))if("id"in it){const ft=it.id,at=(ot=it.filter)===null||ot===void 0?void 0:ot.event;return ft&&((ct=i.ids)===null||ct===void 0?void 0:ct.includes(ft))&&(at==="*"||(at==null?void 0:at.toLocaleLowerCase())===((tt=i.data)===null||tt===void 0?void 0:tt.type.toLocaleLowerCase()))}else{const ft=(j=($=it==null?void 0:it.filter)===null||$===void 0?void 0:$.event)===null||j===void 0?void 0:j.toLocaleLowerCase();return ft==="*"||ft===((et=i==null?void 0:i.event)===null||et===void 0?void 0:et.toLocaleLowerCase())}else return it.type.toLocaleLowerCase()===d}).map(it=>{if(typeof nt=="object"&&"ids"in nt){const ot=nt.data,{schema:ct,table:tt,commit_timestamp:$,type:j,errors:et}=ot;nt=Object.assign(Object.assign({},{schema:ct,table:tt,commit_timestamp:$,eventType:j,new:{},old:{},errors:et}),this._getPayloadRecords(ot))}it.callback(nt,a)})}_isClosed(){return this.state===CHANNEL_STATES.closed}_isJoined(){return this.state===CHANNEL_STATES.joined}_isJoining(){return this.state===CHANNEL_STATES.joining}_isLeaving(){return this.state===CHANNEL_STATES.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,i,a){const o=e.toLocaleLowerCase(),c={type:o,filter:i,callback:a};return this.bindings[o]?this.bindings[o].push(c):this.bindings[o]=[c],this}_off(e,i){const a=e.toLocaleLowerCase();return this.bindings[a]&&(this.bindings[a]=this.bindings[a].filter(o=>{var c;return!(((c=o.type)===null||c===void 0?void 0:c.toLocaleLowerCase())===a&&RealtimeChannel.isEqual(o.filter,i))})),this}static isEqual(e,i){if(Object.keys(e).length!==Object.keys(i).length)return!1;for(const a in e)if(e[a]!==i[a])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(CHANNEL_EVENTS.close,{},e)}_onError(e){this._on(CHANNEL_EVENTS.error,{},i=>e(i))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=CHANNEL_STATES.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const i={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(i.new=convertChangeData(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(i.old=convertChangeData(e.columns,e.old_record)),i}}const noop=()=>{},CONNECTION_TIMEOUTS={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},RECONNECT_INTERVALS=[1e3,2e3,5e3,1e4],DEFAULT_RECONNECT_FALLBACK=1e4,WORKER_SCRIPT=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class RealtimeClient{constructor(e,i){var a;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=DEFAULT_TIMEOUT,this.transport=null,this.heartbeatIntervalMs=CONNECTION_TIMEOUTS.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=noop,this.ref=0,this.reconnectTimer=null,this.vsn=DEFAULT_VSN,this.logger=noop,this.conn=null,this.sendBuffer=[],this.serializer=new Serializer,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=o=>o?(...c)=>o(...c):(...c)=>fetch(...c),!(!((a=i==null?void 0:i.params)===null||a===void 0)&&a.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=i.params.apikey,this.endPoint=`${e}/${TRANSPORTS.websocket}`,this.httpEndpoint=httpEndpointURL(e),this._initializeOptions(i),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(i==null?void 0:i.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this.accessToken&&!this._authPromise&&this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=WebSocketFactory.createWebSocket(this.endpointURL())}catch(e){this._setConnectionState("disconnected");const i=e.message;throw i.includes("Node.js")?new Error(`${i}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${i}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:this.vsn}))}disconnect(e,i){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const a=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(a),this._setConnectionState("disconnected")},typeof this.conn.close=="function"&&(e?this.conn.close(e,i??""):this.conn.close()),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(e){const i=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),i}async removeAllChannels(){const e=await Promise.all(this.channels.map(i=>i.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,i,a){this.logger(e,i,a)}connectionState(){switch(this.conn&&this.conn.readyState){case SOCKET_STATES.connecting:return CONNECTION_STATE.Connecting;case SOCKET_STATES.open:return CONNECTION_STATE.Open;case SOCKET_STATES.closing:return CONNECTION_STATE.Closing;default:return CONNECTION_STATE.Closed}}isConnected(){return this.connectionState()===CONNECTION_STATE.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(e,i={config:{}}){const a=`realtime:${e}`,o=this.getChannels().find(c=>c.topic===a);if(o)return o;{const c=new RealtimeChannel(`realtime:${e}`,i,this);return this.channels.push(c),c}}push(e){const{topic:i,event:a,payload:o,ref:c}=e,d=()=>{this.encode(e,g=>{var h;(h=this.conn)===null||h===void 0||h.send(g)})};this.log("push",`${i} ${a} (${c})`,o),this.isConnected()?d():this.sendBuffer.push(d)}async setAuth(e=null){this._authPromise=this._performAuth(e);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var e;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(i){this.log("error","error in heartbeat callback",i)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(i){this.log("error","error in heartbeat callback",i)}this._wasManualDisconnect=!1,(e=this.conn)===null||e===void 0||e.close(WS_CLOSE_NORMAL,"heartbeat timeout"),setTimeout(()=>{var i;this.isConnected()||(i=this.reconnectTimer)===null||i===void 0||i.scheduleTimeout()},CONNECTION_TIMEOUTS.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(i){this.log("error","error in heartbeat callback",i)}this._setAuthSafely("heartbeat")}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let i=this.channels.find(a=>a.topic===e&&(a._isJoined()||a._isJoining()));i&&(this.log("transport",`leaving duplicate topic "${e}"`),i.unsubscribe())}_remove(e){this.channels=this.channels.filter(i=>i.topic!==e.topic)}_onConnMessage(e){this.decode(e.data,i=>{if(i.topic==="phoenix"&&i.event==="phx_reply")try{this.heartbeatCallback(i.payload.status==="ok"?"ok":"error")}catch(_){this.log("error","error in heartbeat callback",_)}i.ref&&i.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:a,event:o,payload:c,ref:d}=i,g=d?`(${d})`:"",h=c.status||"";this.log("receive",`${h} ${a} ${o} ${g}`.trim(),c),this.channels.filter(_=>_._isMember(a)).forEach(_=>_._trigger(o,c,d)),this._triggerStateCallbacks("message",i)})}_clearTimer(e){var i;e==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):e==="reconnect"&&((i=this.reconnectTimer)===null||i===void 0||i.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_teardownConnection(){if(this.conn){if(this.conn.readyState===SOCKET_STATES.open||this.conn.readyState===SOCKET_STATES.connecting)try{this.conn.close()}catch(e){this.log("error","Error closing connection",e)}this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null}this._clearAllTimers(),this.channels.forEach(e=>e.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),(this._authPromise||(this.accessToken&&!this.accessTokenValue?this.setAuth():Promise.resolve())).then(()=>{this.flushSendBuffer()}).catch(i=>{this.log("error","error waiting for auth on connect",i),this.flushSendBuffer()}),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=i=>{this.log("worker","worker error",i.message),this.workerRef.terminate()},this.workerRef.onmessage=i=>{i.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(e){var i;this._setConnectionState("disconnected"),this.log("transport","close",e),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(i=this.reconnectTimer)===null||i===void 0||i.scheduleTimeout(),this._triggerStateCallbacks("close",e)}_onConnError(e){this._setConnectionState("disconnected"),this.log("transport",`${e}`),this._triggerChanError(),this._triggerStateCallbacks("error",e)}_triggerChanError(){this.channels.forEach(e=>e._trigger(CHANNEL_EVENTS.error))}_appendParams(e,i){if(Object.keys(i).length===0)return e;const a=e.match(/\?/)?"&":"?",o=new URLSearchParams(i);return`${e}${a}${o}`}_workerObjectUrl(e){let i;if(e)i=e;else{const a=new Blob([WORKER_SCRIPT],{type:"application/javascript"});i=URL.createObjectURL(a)}return i}_setConnectionState(e,i=!1){this._connectionState=e,e==="connecting"?this._wasManualDisconnect=!1:e==="disconnecting"&&(this._wasManualDisconnect=i)}async _performAuth(e=null){let i;e?i=e:this.accessToken?i=await this.accessToken():i=this.accessTokenValue,this.accessTokenValue!=i&&(this.accessTokenValue=i,this.channels.forEach(a=>{const o={access_token:i,version:DEFAULT_VERSION};i&&a.updateJoinPayload(o),a.joinedOnce&&a._isJoined()&&a._push(CHANNEL_EVENTS.access_token,{access_token:i})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(e="general"){this.setAuth().catch(i=>{this.log("error",`error setting auth in ${e}`,i)})}_triggerStateCallbacks(e,i){try{this.stateChangeCallbacks[e].forEach(a=>{try{a(i)}catch(o){this.log("error",`error in ${e} callback`,o)}})}catch(a){this.log("error",`error triggering ${e} callbacks`,a)}}_setupReconnectionTimer(){this.reconnectTimer=new Timer(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},CONNECTION_TIMEOUTS.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(e){var i,a,o,c,d,g,h,_,b,rt,nt,it;switch(this.transport=(i=e==null?void 0:e.transport)!==null&&i!==void 0?i:null,this.timeout=(a=e==null?void 0:e.timeout)!==null&&a!==void 0?a:DEFAULT_TIMEOUT,this.heartbeatIntervalMs=(o=e==null?void 0:e.heartbeatIntervalMs)!==null&&o!==void 0?o:CONNECTION_TIMEOUTS.HEARTBEAT_INTERVAL,this.worker=(c=e==null?void 0:e.worker)!==null&&c!==void 0?c:!1,this.accessToken=(d=e==null?void 0:e.accessToken)!==null&&d!==void 0?d:null,this.heartbeatCallback=(g=e==null?void 0:e.heartbeatCallback)!==null&&g!==void 0?g:noop,this.vsn=(h=e==null?void 0:e.vsn)!==null&&h!==void 0?h:DEFAULT_VSN,e!=null&&e.params&&(this.params=e.params),e!=null&&e.logger&&(this.logger=e.logger),(e!=null&&e.logLevel||e!=null&&e.log_level)&&(this.logLevel=e.logLevel||e.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(_=e==null?void 0:e.reconnectAfterMs)!==null&&_!==void 0?_:ot=>RECONNECT_INTERVALS[ot-1]||DEFAULT_RECONNECT_FALLBACK,this.vsn){case VSN_1_0_0:this.encode=(b=e==null?void 0:e.encode)!==null&&b!==void 0?b:(ot,ct)=>ct(JSON.stringify(ot)),this.decode=(rt=e==null?void 0:e.decode)!==null&&rt!==void 0?rt:(ot,ct)=>ct(JSON.parse(ot));break;case VSN_2_0_0:this.encode=(nt=e==null?void 0:e.encode)!==null&&nt!==void 0?nt:this.serializer.encode.bind(this.serializer),this.decode=(it=e==null?void 0:e.decode)!==null&&it!==void 0?it:this.serializer.decode.bind(this.serializer);break;default:throw new Error(`Unsupported serializer version: ${this.vsn}`)}if(this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=e==null?void 0:e.workerUrl}}}class StorageError extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function isStorageError(s){return typeof s=="object"&&s!==null&&"__isStorageError"in s}class StorageApiError extends StorageError{constructor(e,i,a){super(e),this.name="StorageApiError",this.status=i,this.statusCode=a}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class StorageUnknownError extends StorageError{constructor(e,i){super(e),this.name="StorageUnknownError",this.originalError=i}}const resolveFetch$3=s=>s?(...e)=>s(...e):(...e)=>fetch(...e),resolveResponse=()=>Response,recursiveToCamel=s=>{if(Array.isArray(s))return s.map(i=>recursiveToCamel(i));if(typeof s=="function"||s!==Object(s))return s;const e={};return Object.entries(s).forEach(([i,a])=>{const o=i.replace(/([-_][a-z])/gi,c=>c.toUpperCase().replace(/[-_]/g,""));e[o]=recursiveToCamel(a)}),e},isPlainObject$1=s=>{if(typeof s!="object"||s===null)return!1;const e=Object.getPrototypeOf(s);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in s)&&!(Symbol.iterator in s)},_getErrorMessage$2=s=>{var e;return s.msg||s.message||s.error_description||(typeof s.error=="string"?s.error:(e=s.error)===null||e===void 0?void 0:e.message)||JSON.stringify(s)},handleError$2=(s,e,i)=>__awaiter(void 0,void 0,void 0,function*(){const a=yield resolveResponse();s instanceof a&&!(i!=null&&i.noResolveJson)?s.json().then(o=>{const c=s.status||500,d=(o==null?void 0:o.statusCode)||c+"";e(new StorageApiError(_getErrorMessage$2(o),c,d))}).catch(o=>{e(new StorageUnknownError(_getErrorMessage$2(o),o))}):e(new StorageUnknownError(_getErrorMessage$2(s),s))}),_getRequestParams$2=(s,e,i,a)=>{const o={method:s,headers:(e==null?void 0:e.headers)||{}};return s==="GET"||!a?o:(isPlainObject$1(a)?(o.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),o.body=JSON.stringify(a)):o.body=a,e!=null&&e.duplex&&(o.duplex=e.duplex),Object.assign(Object.assign({},o),i))};function _handleRequest$2(s,e,i,a,o,c){return __awaiter(this,void 0,void 0,function*(){return new Promise((d,g)=>{s(i,_getRequestParams$2(e,a,o,c)).then(h=>{if(!h.ok)throw h;return a!=null&&a.noResolveJson?h:h.json()}).then(h=>d(h)).catch(h=>handleError$2(h,g,a))})})}function get(s,e,i,a){return __awaiter(this,void 0,void 0,function*(){return _handleRequest$2(s,"GET",e,i,a)})}function post$1(s,e,i,a,o){return __awaiter(this,void 0,void 0,function*(){return _handleRequest$2(s,"POST",e,a,o,i)})}function put(s,e,i,a,o){return __awaiter(this,void 0,void 0,function*(){return _handleRequest$2(s,"PUT",e,a,o,i)})}function head(s,e,i,a){return __awaiter(this,void 0,void 0,function*(){return _handleRequest$2(s,"HEAD",e,Object.assign(Object.assign({},i),{noResolveJson:!0}),a)})}function remove(s,e,i,a,o){return __awaiter(this,void 0,void 0,function*(){return _handleRequest$2(s,"DELETE",e,a,o,i)})}class StreamDownloadBuilder{constructor(e,i){this.downloadFn=e,this.shouldThrowOnError=i}then(e,i){return this.execute().then(e,i)}execute(){return __awaiter(this,void 0,void 0,function*(){try{return{data:(yield this.downloadFn()).body,error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(isStorageError(e))return{data:null,error:e};throw e}})}}var _a;class BlobDownloadBuilder{constructor(e,i){this.downloadFn=e,this.shouldThrowOnError=i,this[_a]="BlobDownloadBuilder",this.promise=null}asStream(){return new StreamDownloadBuilder(this.downloadFn,this.shouldThrowOnError)}then(e,i){return this.getPromise().then(e,i)}catch(e){return this.getPromise().catch(e)}finally(e){return this.getPromise().finally(e)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}execute(){return __awaiter(this,void 0,void 0,function*(){try{return{data:yield(yield this.downloadFn()).blob(),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(isStorageError(e))return{data:null,error:e};throw e}})}}_a=Symbol.toStringTag;const BlobDownloadBuilder$1=BlobDownloadBuilder,DEFAULT_SEARCH_OPTIONS={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},DEFAULT_FILE_OPTIONS={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class StorageFileApi{constructor(e,i={},a,o){this.shouldThrowOnError=!1,this.url=e,this.headers=i,this.bucketId=a,this.fetch=resolveFetch$3(o)}throwOnError(){return this.shouldThrowOnError=!0,this}uploadOrUpdate(e,i,a,o){return __awaiter(this,void 0,void 0,function*(){try{let c;const d=Object.assign(Object.assign({},DEFAULT_FILE_OPTIONS),o);let g=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(d.upsert)});const h=d.metadata;typeof Blob<"u"&&a instanceof Blob?(c=new FormData,c.append("cacheControl",d.cacheControl),h&&c.append("metadata",this.encodeMetadata(h)),c.append("",a)):typeof FormData<"u"&&a instanceof FormData?(c=a,c.has("cacheControl")||c.append("cacheControl",d.cacheControl),h&&!c.has("metadata")&&c.append("metadata",this.encodeMetadata(h))):(c=a,g["cache-control"]=`max-age=${d.cacheControl}`,g["content-type"]=d.contentType,h&&(g["x-metadata"]=this.toBase64(this.encodeMetadata(h))),(typeof ReadableStream<"u"&&c instanceof ReadableStream||c&&typeof c=="object"&&"pipe"in c&&typeof c.pipe=="function")&&!d.duplex&&(d.duplex="half")),o!=null&&o.headers&&(g=Object.assign(Object.assign({},g),o.headers));const _=this._removeEmptyFolders(i),b=this._getFinalPath(_),rt=yield(e=="PUT"?put:post$1)(this.fetch,`${this.url}/object/${b}`,c,Object.assign({headers:g},d!=null&&d.duplex?{duplex:d.duplex}:{}));return{data:{path:_,id:rt.Id,fullPath:rt.Key},error:null}}catch(c){if(this.shouldThrowOnError)throw c;if(isStorageError(c))return{data:null,error:c};throw c}})}upload(e,i,a){return __awaiter(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,i,a)})}uploadToSignedUrl(e,i,a,o){return __awaiter(this,void 0,void 0,function*(){const c=this._removeEmptyFolders(e),d=this._getFinalPath(c),g=new URL(this.url+`/object/upload/sign/${d}`);g.searchParams.set("token",i);try{let h;const _=Object.assign({upsert:DEFAULT_FILE_OPTIONS.upsert},o),b=Object.assign(Object.assign({},this.headers),{"x-upsert":String(_.upsert)});typeof Blob<"u"&&a instanceof Blob?(h=new FormData,h.append("cacheControl",_.cacheControl),h.append("",a)):typeof FormData<"u"&&a instanceof FormData?(h=a,h.append("cacheControl",_.cacheControl)):(h=a,b["cache-control"]=`max-age=${_.cacheControl}`,b["content-type"]=_.contentType);const rt=yield put(this.fetch,g.toString(),h,{headers:b});return{data:{path:c,fullPath:rt.Key},error:null}}catch(h){if(this.shouldThrowOnError)throw h;if(isStorageError(h))return{data:null,error:h};throw h}})}createSignedUploadUrl(e,i){return __awaiter(this,void 0,void 0,function*(){try{let a=this._getFinalPath(e);const o=Object.assign({},this.headers);i!=null&&i.upsert&&(o["x-upsert"]="true");const c=yield post$1(this.fetch,`${this.url}/object/upload/sign/${a}`,{},{headers:o}),d=new URL(this.url+c.url),g=d.searchParams.get("token");if(!g)throw new StorageError("No token returned by API");return{data:{signedUrl:d.toString(),path:e,token:g},error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(isStorageError(a))return{data:null,error:a};throw a}})}update(e,i,a){return __awaiter(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,i,a)})}move(e,i,a){return __awaiter(this,void 0,void 0,function*(){try{return{data:yield post$1(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:i,destinationBucket:a==null?void 0:a.destinationBucket},{headers:this.headers}),error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(isStorageError(o))return{data:null,error:o};throw o}})}copy(e,i,a){return __awaiter(this,void 0,void 0,function*(){try{return{data:{path:(yield post$1(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:i,destinationBucket:a==null?void 0:a.destinationBucket},{headers:this.headers})).Key},error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(isStorageError(o))return{data:null,error:o};throw o}})}createSignedUrl(e,i,a){return __awaiter(this,void 0,void 0,function*(){try{let o=this._getFinalPath(e),c=yield post$1(this.fetch,`${this.url}/object/sign/${o}`,Object.assign({expiresIn:i},a!=null&&a.transform?{transform:a.transform}:{}),{headers:this.headers});const d=a!=null&&a.download?`&download=${a.download===!0?"":a.download}`:"";return c={signedUrl:encodeURI(`${this.url}${c.signedURL}${d}`)},{data:c,error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(isStorageError(o))return{data:null,error:o};throw o}})}createSignedUrls(e,i,a){return __awaiter(this,void 0,void 0,function*(){try{const o=yield post$1(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:i,paths:e},{headers:this.headers}),c=a!=null&&a.download?`&download=${a.download===!0?"":a.download}`:"";return{data:o.map(d=>Object.assign(Object.assign({},d),{signedUrl:d.signedURL?encodeURI(`${this.url}${d.signedURL}${c}`):null})),error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(isStorageError(o))return{data:null,error:o};throw o}})}download(e,i){const o=typeof(i==null?void 0:i.transform)<"u"?"render/image/authenticated":"object",c=this.transformOptsToQueryString((i==null?void 0:i.transform)||{}),d=c?`?${c}`:"",g=this._getFinalPath(e),h=()=>get(this.fetch,`${this.url}/${o}/${g}${d}`,{headers:this.headers,noResolveJson:!0});return new BlobDownloadBuilder$1(h,this.shouldThrowOnError)}info(e){return __awaiter(this,void 0,void 0,function*(){const i=this._getFinalPath(e);try{const a=yield get(this.fetch,`${this.url}/object/info/${i}`,{headers:this.headers});return{data:recursiveToCamel(a),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(isStorageError(a))return{data:null,error:a};throw a}})}exists(e){return __awaiter(this,void 0,void 0,function*(){const i=this._getFinalPath(e);try{return yield head(this.fetch,`${this.url}/object/${i}`,{headers:this.headers}),{data:!0,error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(isStorageError(a)&&a instanceof StorageUnknownError){const o=a.originalError;if([400,404].includes(o==null?void 0:o.status))return{data:!1,error:a}}throw a}})}getPublicUrl(e,i){const a=this._getFinalPath(e),o=[],c=i!=null&&i.download?`download=${i.download===!0?"":i.download}`:"";c!==""&&o.push(c);const g=typeof(i==null?void 0:i.transform)<"u"?"render/image":"object",h=this.transformOptsToQueryString((i==null?void 0:i.transform)||{});h!==""&&o.push(h);let _=o.join("&");return _!==""&&(_=`?${_}`),{data:{publicUrl:encodeURI(`${this.url}/${g}/public/${a}${_}`)}}}remove(e){return __awaiter(this,void 0,void 0,function*(){try{return{data:yield remove(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(isStorageError(i))return{data:null,error:i};throw i}})}list(e,i,a){return __awaiter(this,void 0,void 0,function*(){try{const o=Object.assign(Object.assign(Object.assign({},DEFAULT_SEARCH_OPTIONS),i),{prefix:e||""});return{data:yield post$1(this.fetch,`${this.url}/object/list/${this.bucketId}`,o,{headers:this.headers},a),error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(isStorageError(o))return{data:null,error:o};throw o}})}listV2(e,i){return __awaiter(this,void 0,void 0,function*(){try{const a=Object.assign({},e);return{data:yield post$1(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,a,{headers:this.headers},i),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(isStorageError(a))return{data:null,error:a};throw a}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e.replace(/^\/+/,"")}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const i=[];return e.width&&i.push(`width=${e.width}`),e.height&&i.push(`height=${e.height}`),e.resize&&i.push(`resize=${e.resize}`),e.format&&i.push(`format=${e.format}`),e.quality&&i.push(`quality=${e.quality}`),i.join("&")}}const version$2="2.84.0",DEFAULT_HEADERS$3={"X-Client-Info":`storage-js/${version$2}`};class StorageBucketApi{constructor(e,i={},a,o){this.shouldThrowOnError=!1;const c=new URL(e);o!=null&&o.useNewHostname&&/supabase\.(co|in|red)$/.test(c.hostname)&&!c.hostname.includes("storage.supabase.")&&(c.hostname=c.hostname.replace("supabase.","storage.supabase.")),this.url=c.href.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},DEFAULT_HEADERS$3),i),this.fetch=resolveFetch$3(a)}throwOnError(){return this.shouldThrowOnError=!0,this}listBuckets(e){return __awaiter(this,void 0,void 0,function*(){try{const i=this.listBucketOptionsToQueryString(e);return{data:yield get(this.fetch,`${this.url}/bucket${i}`,{headers:this.headers}),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(isStorageError(i))return{data:null,error:i};throw i}})}getBucket(e){return __awaiter(this,void 0,void 0,function*(){try{return{data:yield get(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(isStorageError(i))return{data:null,error:i};throw i}})}createBucket(e){return __awaiter(this,arguments,void 0,function*(i,a={public:!1}){try{return{data:yield post$1(this.fetch,`${this.url}/bucket`,{id:i,name:i,type:a.type,public:a.public,file_size_limit:a.fileSizeLimit,allowed_mime_types:a.allowedMimeTypes},{headers:this.headers}),error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(isStorageError(o))return{data:null,error:o};throw o}})}updateBucket(e,i){return __awaiter(this,void 0,void 0,function*(){try{return{data:yield put(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:i.public,file_size_limit:i.fileSizeLimit,allowed_mime_types:i.allowedMimeTypes},{headers:this.headers}),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(isStorageError(a))return{data:null,error:a};throw a}})}emptyBucket(e){return __awaiter(this,void 0,void 0,function*(){try{return{data:yield post$1(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(isStorageError(i))return{data:null,error:i};throw i}})}deleteBucket(e){return __awaiter(this,void 0,void 0,function*(){try{return{data:yield remove(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(isStorageError(i))return{data:null,error:i};throw i}})}listBucketOptionsToQueryString(e){const i={};return e&&("limit"in e&&(i.limit=String(e.limit)),"offset"in e&&(i.offset=String(e.offset)),e.search&&(i.search=e.search),e.sortColumn&&(i.sortColumn=e.sortColumn),e.sortOrder&&(i.sortOrder=e.sortOrder)),Object.keys(i).length>0?"?"+new URLSearchParams(i).toString():""}}class StorageAnalyticsClient{constructor(e,i={},a){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},DEFAULT_HEADERS$3),i),this.fetch=resolveFetch$3(a)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(e){return __awaiter(this,void 0,void 0,function*(){try{return{data:yield post$1(this.fetch,`${this.url}/bucket`,{name:e},{headers:this.headers}),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(isStorageError(i))return{data:null,error:i};throw i}})}listBuckets(e){return __awaiter(this,void 0,void 0,function*(){try{const i=new URLSearchParams;(e==null?void 0:e.limit)!==void 0&&i.set("limit",e.limit.toString()),(e==null?void 0:e.offset)!==void 0&&i.set("offset",e.offset.toString()),e!=null&&e.sortColumn&&i.set("sortColumn",e.sortColumn),e!=null&&e.sortOrder&&i.set("sortOrder",e.sortOrder),e!=null&&e.search&&i.set("search",e.search);const a=i.toString(),o=a?`${this.url}/bucket?${a}`:`${this.url}/bucket`;return{data:yield get(this.fetch,o,{headers:this.headers}),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(isStorageError(i))return{data:null,error:i};throw i}})}deleteBucket(e){return __awaiter(this,void 0,void 0,function*(){try{return{data:yield remove(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(isStorageError(i))return{data:null,error:i};throw i}})}}const DEFAULT_HEADERS$2={"X-Client-Info":`storage-js/${version$2}`,"Content-Type":"application/json"};class StorageVectorsError extends Error{constructor(e){super(e),this.__isStorageVectorsError=!0,this.name="StorageVectorsError"}}function isStorageVectorsError(s){return typeof s=="object"&&s!==null&&"__isStorageVectorsError"in s}class StorageVectorsApiError extends StorageVectorsError{constructor(e,i,a){super(e),this.name="StorageVectorsApiError",this.status=i,this.statusCode=a}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class StorageVectorsUnknownError extends StorageVectorsError{constructor(e,i){super(e),this.name="StorageVectorsUnknownError",this.originalError=i}}var StorageVectorsErrorCode;(function(s){s.InternalError="InternalError",s.S3VectorConflictException="S3VectorConflictException",s.S3VectorNotFoundException="S3VectorNotFoundException",s.S3VectorBucketNotEmpty="S3VectorBucketNotEmpty",s.S3VectorMaxBucketsExceeded="S3VectorMaxBucketsExceeded",s.S3VectorMaxIndexesExceeded="S3VectorMaxIndexesExceeded"})(StorageVectorsErrorCode||(StorageVectorsErrorCode={}));const resolveFetch$2=s=>s?(...e)=>s(...e):(...e)=>fetch(...e),isPlainObject=s=>{if(typeof s!="object"||s===null)return!1;const e=Object.getPrototypeOf(s);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in s)&&!(Symbol.iterator in s)},_getErrorMessage$1=s=>s.msg||s.message||s.error_description||s.error||JSON.stringify(s),handleError$1=(s,e,i)=>__awaiter(void 0,void 0,void 0,function*(){if(s&&typeof s=="object"&&"status"in s&&"ok"in s&&typeof s.status=="number"&&!(i!=null&&i.noResolveJson)){const o=s.status||500,c=s;if(typeof c.json=="function")c.json().then(d=>{const g=(d==null?void 0:d.statusCode)||(d==null?void 0:d.code)||o+"";e(new StorageVectorsApiError(_getErrorMessage$1(d),o,g))}).catch(()=>{const d=o+"",g=c.statusText||`HTTP ${o} error`;e(new StorageVectorsApiError(g,o,d))});else{const d=o+"",g=c.statusText||`HTTP ${o} error`;e(new StorageVectorsApiError(g,o,d))}}else e(new StorageVectorsUnknownError(_getErrorMessage$1(s),s))}),_getRequestParams$1=(s,e,i,a)=>{const o={method:s,headers:(e==null?void 0:e.headers)||{}};return s==="GET"||!a?o:(isPlainObject(a)?(o.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),o.body=JSON.stringify(a)):o.body=a,Object.assign(Object.assign({},o),i))};function _handleRequest$1(s,e,i,a,o,c){return __awaiter(this,void 0,void 0,function*(){return new Promise((d,g)=>{s(i,_getRequestParams$1(e,a,o,c)).then(h=>{if(!h.ok)throw h;if(a!=null&&a.noResolveJson)return h;const _=h.headers.get("content-type");return!_||!_.includes("application/json")?{}:h.json()}).then(h=>d(h)).catch(h=>handleError$1(h,g,a))})})}function post(s,e,i,a,o){return __awaiter(this,void 0,void 0,function*(){return _handleRequest$1(s,"POST",e,a,o,i)})}class VectorIndexApi{constructor(e,i={},a){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},DEFAULT_HEADERS$2),i),this.fetch=resolveFetch$2(a)}throwOnError(){return this.shouldThrowOnError=!0,this}createIndex(e){return __awaiter(this,void 0,void 0,function*(){try{return{data:(yield post(this.fetch,`${this.url}/CreateIndex`,e,{headers:this.headers}))||{},error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(isStorageVectorsError(i))return{data:null,error:i};throw i}})}getIndex(e,i){return __awaiter(this,void 0,void 0,function*(){try{return{data:yield post(this.fetch,`${this.url}/GetIndex`,{vectorBucketName:e,indexName:i},{headers:this.headers}),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(isStorageVectorsError(a))return{data:null,error:a};throw a}})}listIndexes(e){return __awaiter(this,void 0,void 0,function*(){try{return{data:yield post(this.fetch,`${this.url}/ListIndexes`,e,{headers:this.headers}),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(isStorageVectorsError(i))return{data:null,error:i};throw i}})}deleteIndex(e,i){return __awaiter(this,void 0,void 0,function*(){try{return{data:(yield post(this.fetch,`${this.url}/DeleteIndex`,{vectorBucketName:e,indexName:i},{headers:this.headers}))||{},error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(isStorageVectorsError(a))return{data:null,error:a};throw a}})}}class VectorDataApi{constructor(e,i={},a){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},DEFAULT_HEADERS$2),i),this.fetch=resolveFetch$2(a)}throwOnError(){return this.shouldThrowOnError=!0,this}putVectors(e){return __awaiter(this,void 0,void 0,function*(){try{if(e.vectors.length<1||e.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return{data:(yield post(this.fetch,`${this.url}/PutVectors`,e,{headers:this.headers}))||{},error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(isStorageVectorsError(i))return{data:null,error:i};throw i}})}getVectors(e){return __awaiter(this,void 0,void 0,function*(){try{return{data:yield post(this.fetch,`${this.url}/GetVectors`,e,{headers:this.headers}),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(isStorageVectorsError(i))return{data:null,error:i};throw i}})}listVectors(e){return __awaiter(this,void 0,void 0,function*(){try{if(e.segmentCount!==void 0){if(e.segmentCount<1||e.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(e.segmentIndex!==void 0&&(e.segmentIndex<0||e.segmentIndex>=e.segmentCount))throw new Error(`segmentIndex must be between 0 and ${e.segmentCount-1}`)}return{data:yield post(this.fetch,`${this.url}/ListVectors`,e,{headers:this.headers}),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(isStorageVectorsError(i))return{data:null,error:i};throw i}})}queryVectors(e){return __awaiter(this,void 0,void 0,function*(){try{return{data:yield post(this.fetch,`${this.url}/QueryVectors`,e,{headers:this.headers}),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(isStorageVectorsError(i))return{data:null,error:i};throw i}})}deleteVectors(e){return __awaiter(this,void 0,void 0,function*(){try{if(e.keys.length<1||e.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return{data:(yield post(this.fetch,`${this.url}/DeleteVectors`,e,{headers:this.headers}))||{},error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(isStorageVectorsError(i))return{data:null,error:i};throw i}})}}class VectorBucketApi{constructor(e,i={},a){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},DEFAULT_HEADERS$2),i),this.fetch=resolveFetch$2(a)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(e){return __awaiter(this,void 0,void 0,function*(){try{return{data:(yield post(this.fetch,`${this.url}/CreateVectorBucket`,{vectorBucketName:e},{headers:this.headers}))||{},error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(isStorageVectorsError(i))return{data:null,error:i};throw i}})}getBucket(e){return __awaiter(this,void 0,void 0,function*(){try{return{data:yield post(this.fetch,`${this.url}/GetVectorBucket`,{vectorBucketName:e},{headers:this.headers}),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(isStorageVectorsError(i))return{data:null,error:i};throw i}})}listBuckets(){return __awaiter(this,arguments,void 0,function*(e={}){try{return{data:yield post(this.fetch,`${this.url}/ListVectorBuckets`,e,{headers:this.headers}),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(isStorageVectorsError(i))return{data:null,error:i};throw i}})}deleteBucket(e){return __awaiter(this,void 0,void 0,function*(){try{return{data:(yield post(this.fetch,`${this.url}/DeleteVectorBucket`,{vectorBucketName:e},{headers:this.headers}))||{},error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(isStorageVectorsError(i))return{data:null,error:i};throw i}})}}class StorageVectorsClient extends VectorBucketApi{constructor(e,i={}){super(e,i.headers||{},i.fetch)}from(e){return new VectorBucketScope(this.url,this.headers,e,this.fetch)}}class VectorBucketScope extends VectorIndexApi{constructor(e,i,a,o){super(e,i,o),this.vectorBucketName=a}createIndex(e){const i=Object.create(null,{createIndex:{get:()=>super.createIndex}});return __awaiter(this,void 0,void 0,function*(){return i.createIndex.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName}))})}listIndexes(){const e=Object.create(null,{listIndexes:{get:()=>super.listIndexes}});return __awaiter(this,arguments,void 0,function*(i={}){return e.listIndexes.call(this,Object.assign(Object.assign({},i),{vectorBucketName:this.vectorBucketName}))})}getIndex(e){const i=Object.create(null,{getIndex:{get:()=>super.getIndex}});return __awaiter(this,void 0,void 0,function*(){return i.getIndex.call(this,this.vectorBucketName,e)})}deleteIndex(e){const i=Object.create(null,{deleteIndex:{get:()=>super.deleteIndex}});return __awaiter(this,void 0,void 0,function*(){return i.deleteIndex.call(this,this.vectorBucketName,e)})}index(e){return new VectorIndexScope(this.url,this.headers,this.vectorBucketName,e,this.fetch)}}class VectorIndexScope extends VectorDataApi{constructor(e,i,a,o,c){super(e,i,c),this.vectorBucketName=a,this.indexName=o}putVectors(e){const i=Object.create(null,{putVectors:{get:()=>super.putVectors}});return __awaiter(this,void 0,void 0,function*(){return i.putVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}getVectors(e){const i=Object.create(null,{getVectors:{get:()=>super.getVectors}});return __awaiter(this,void 0,void 0,function*(){return i.getVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}listVectors(){const e=Object.create(null,{listVectors:{get:()=>super.listVectors}});return __awaiter(this,arguments,void 0,function*(i={}){return e.listVectors.call(this,Object.assign(Object.assign({},i),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}queryVectors(e){const i=Object.create(null,{queryVectors:{get:()=>super.queryVectors}});return __awaiter(this,void 0,void 0,function*(){return i.queryVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}deleteVectors(e){const i=Object.create(null,{deleteVectors:{get:()=>super.deleteVectors}});return __awaiter(this,void 0,void 0,function*(){return i.deleteVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}}class StorageClient extends StorageBucketApi{constructor(e,i={},a,o){super(e,i,a,o)}from(e){return new StorageFileApi(this.url,this.headers,e,this.fetch)}get vectors(){return new StorageVectorsClient(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new StorageAnalyticsClient(this.url+"/iceberg",this.headers,this.fetch)}}const version$1="2.84.0";let JS_ENV="";typeof Deno<"u"?JS_ENV="deno":typeof document<"u"?JS_ENV="web":typeof navigator<"u"&&navigator.product==="ReactNative"?JS_ENV="react-native":JS_ENV="node";const DEFAULT_HEADERS$1={"X-Client-Info":`supabase-js-${JS_ENV}/${version$1}`},DEFAULT_GLOBAL_OPTIONS={headers:DEFAULT_HEADERS$1},DEFAULT_DB_OPTIONS={schema:"public"},DEFAULT_AUTH_OPTIONS={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},DEFAULT_REALTIME_OPTIONS={},resolveFetch$1=s=>s?(...e)=>s(...e):(...e)=>fetch(...e),resolveHeadersConstructor=()=>Headers,fetchWithAuth=(s,e,i)=>{const a=resolveFetch$1(i),o=resolveHeadersConstructor();return async(c,d)=>{var g;const h=(g=await e())!==null&&g!==void 0?g:s;let _=new o(d==null?void 0:d.headers);return _.has("apikey")||_.set("apikey",s),_.has("Authorization")||_.set("Authorization",`Bearer ${h}`),a(c,Object.assign(Object.assign({},d),{headers:_}))}};function ensureTrailingSlash(s){return s.endsWith("/")?s:s+"/"}function applySettingDefaults(s,e){var i,a;const{db:o,auth:c,realtime:d,global:g}=s,{db:h,auth:_,realtime:b,global:rt}=e,nt={db:Object.assign(Object.assign({},h),o),auth:Object.assign(Object.assign({},_),c),realtime:Object.assign(Object.assign({},b),d),storage:{},global:Object.assign(Object.assign(Object.assign({},rt),g),{headers:Object.assign(Object.assign({},(i=rt==null?void 0:rt.headers)!==null&&i!==void 0?i:{}),(a=g==null?void 0:g.headers)!==null&&a!==void 0?a:{})}),accessToken:async()=>""};return s.accessToken?nt.accessToken=s.accessToken:delete nt.accessToken,nt}function validateSupabaseUrl(s){const e=s==null?void 0:s.trim();if(!e)throw new Error("supabaseUrl is required.");if(!e.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(ensureTrailingSlash(e))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}const version="2.84.0",AUTO_REFRESH_TICK_DURATION_MS=30*1e3,AUTO_REFRESH_TICK_THRESHOLD=3,EXPIRY_MARGIN_MS=AUTO_REFRESH_TICK_THRESHOLD*AUTO_REFRESH_TICK_DURATION_MS,GOTRUE_URL="http://localhost:9999",STORAGE_KEY="supabase.auth.token",DEFAULT_HEADERS={"X-Client-Info":`gotrue-js/${version}`},API_VERSION_HEADER_NAME="X-Supabase-Api-Version",API_VERSIONS={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},BASE64URL_REGEX=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,JWKS_TTL=10*60*1e3;class AuthError extends Error{constructor(e,i,a){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=i,this.code=a}}function isAuthError(s){return typeof s=="object"&&s!==null&&"__isAuthError"in s}class AuthApiError extends AuthError{constructor(e,i,a){super(e,i,a),this.name="AuthApiError",this.status=i,this.code=a}}function isAuthApiError(s){return isAuthError(s)&&s.name==="AuthApiError"}class AuthUnknownError extends AuthError{constructor(e,i){super(e),this.name="AuthUnknownError",this.originalError=i}}class CustomAuthError extends AuthError{constructor(e,i,a,o){super(e,a,o),this.name=i,this.status=a}}class AuthSessionMissingError extends CustomAuthError{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function isAuthSessionMissingError(s){return isAuthError(s)&&s.name==="AuthSessionMissingError"}class AuthInvalidTokenResponseError extends CustomAuthError{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class AuthInvalidCredentialsError extends CustomAuthError{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class AuthImplicitGrantRedirectError extends CustomAuthError{constructor(e,i=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=i}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function isAuthImplicitGrantRedirectError(s){return isAuthError(s)&&s.name==="AuthImplicitGrantRedirectError"}class AuthPKCEGrantCodeExchangeError extends CustomAuthError{constructor(e,i=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=i}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class AuthRetryableFetchError extends CustomAuthError{constructor(e,i){super(e,"AuthRetryableFetchError",i,void 0)}}function isAuthRetryableFetchError(s){return isAuthError(s)&&s.name==="AuthRetryableFetchError"}class AuthWeakPasswordError extends CustomAuthError{constructor(e,i,a){super(e,"AuthWeakPasswordError",i,"weak_password"),this.reasons=a}}class AuthInvalidJwtError extends CustomAuthError{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const TO_BASE64URL="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),IGNORE_BASE64URL=` 	
\r=`.split(""),FROM_BASE64URL=(()=>{const s=new Array(128);for(let e=0;e<s.length;e+=1)s[e]=-1;for(let e=0;e<IGNORE_BASE64URL.length;e+=1)s[IGNORE_BASE64URL[e].charCodeAt(0)]=-2;for(let e=0;e<TO_BASE64URL.length;e+=1)s[TO_BASE64URL[e].charCodeAt(0)]=e;return s})();function byteToBase64URL(s,e,i){if(s!==null)for(e.queue=e.queue<<8|s,e.queuedBits+=8;e.queuedBits>=6;){const a=e.queue>>e.queuedBits-6&63;i(TO_BASE64URL[a]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){const a=e.queue>>e.queuedBits-6&63;i(TO_BASE64URL[a]),e.queuedBits-=6}}function byteFromBase64URL(s,e,i){const a=FROM_BASE64URL[s];if(a>-1)for(e.queue=e.queue<<6|a,e.queuedBits+=6;e.queuedBits>=8;)i(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(a===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(s)}"`)}}function stringFromBase64URL(s){const e=[],i=d=>{e.push(String.fromCodePoint(d))},a={utf8seq:0,codepoint:0},o={queue:0,queuedBits:0},c=d=>{stringFromUTF8(d,a,i)};for(let d=0;d<s.length;d+=1)byteFromBase64URL(s.charCodeAt(d),o,c);return e.join("")}function codepointToUTF8(s,e){if(s<=127){e(s);return}else if(s<=2047){e(192|s>>6),e(128|s&63);return}else if(s<=65535){e(224|s>>12),e(128|s>>6&63),e(128|s&63);return}else if(s<=1114111){e(240|s>>18),e(128|s>>12&63),e(128|s>>6&63),e(128|s&63);return}throw new Error(`Unrecognized Unicode codepoint: ${s.toString(16)}`)}function stringToUTF8(s,e){for(let i=0;i<s.length;i+=1){let a=s.charCodeAt(i);if(a>55295&&a<=56319){const o=(a-55296)*1024&65535;a=(s.charCodeAt(i+1)-56320&65535|o)+65536,i+=1}codepointToUTF8(a,e)}}function stringFromUTF8(s,e,i){if(e.utf8seq===0){if(s<=127){i(s);return}for(let a=1;a<6;a+=1)if(!(s>>7-a&1)){e.utf8seq=a;break}if(e.utf8seq===2)e.codepoint=s&31;else if(e.utf8seq===3)e.codepoint=s&15;else if(e.utf8seq===4)e.codepoint=s&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(s<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|s&63,e.utf8seq-=1,e.utf8seq===0&&i(e.codepoint)}}function base64UrlToUint8Array(s){const e=[],i={queue:0,queuedBits:0},a=o=>{e.push(o)};for(let o=0;o<s.length;o+=1)byteFromBase64URL(s.charCodeAt(o),i,a);return new Uint8Array(e)}function stringToUint8Array(s){const e=[];return stringToUTF8(s,i=>e.push(i)),new Uint8Array(e)}function bytesToBase64URL(s){const e=[],i={queue:0,queuedBits:0},a=o=>{e.push(o)};return s.forEach(o=>byteToBase64URL(o,i,a)),byteToBase64URL(null,i,a),e.join("")}function expiresAt(s){return Math.round(Date.now()/1e3)+s}function generateCallbackId(){return Symbol("auth-callback")}const isBrowser=()=>typeof window<"u"&&typeof document<"u",localStorageWriteTests={tested:!1,writable:!1},supportsLocalStorage=()=>{if(!isBrowser())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(localStorageWriteTests.tested)return localStorageWriteTests.writable;const s=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(s,s),globalThis.localStorage.removeItem(s),localStorageWriteTests.tested=!0,localStorageWriteTests.writable=!0}catch{localStorageWriteTests.tested=!0,localStorageWriteTests.writable=!1}return localStorageWriteTests.writable};function parseParametersFromURL(s){const e={},i=new URL(s);if(i.hash&&i.hash[0]==="#")try{new URLSearchParams(i.hash.substring(1)).forEach((o,c)=>{e[c]=o})}catch{}return i.searchParams.forEach((a,o)=>{e[o]=a}),e}const resolveFetch=s=>s?(...e)=>s(...e):(...e)=>fetch(...e),looksLikeFetchResponse=s=>typeof s=="object"&&s!==null&&"status"in s&&"ok"in s&&"json"in s&&typeof s.json=="function",setItemAsync=async(s,e,i)=>{await s.setItem(e,JSON.stringify(i))},getItemAsync=async(s,e)=>{const i=await s.getItem(e);if(!i)return null;try{return JSON.parse(i)}catch{return i}},removeItemAsync=async(s,e)=>{await s.removeItem(e)};class Deferred{constructor(){this.promise=new Deferred.promiseConstructor((e,i)=>{this.resolve=e,this.reject=i})}}Deferred.promiseConstructor=Promise;function decodeJWT(s){const e=s.split(".");if(e.length!==3)throw new AuthInvalidJwtError("Invalid JWT structure");for(let a=0;a<e.length;a++)if(!BASE64URL_REGEX.test(e[a]))throw new AuthInvalidJwtError("JWT not in base64url format");return{header:JSON.parse(stringFromBase64URL(e[0])),payload:JSON.parse(stringFromBase64URL(e[1])),signature:base64UrlToUint8Array(e[2]),raw:{header:e[0],payload:e[1]}}}async function sleep(s){return await new Promise(e=>{setTimeout(()=>e(null),s)})}function retryable(s,e){return new Promise((a,o)=>{(async()=>{for(let c=0;c<1/0;c++)try{const d=await s(c);if(!e(c,null,d)){a(d);return}}catch(d){if(!e(c,d)){o(d);return}}})()})}function dec2hex(s){return("0"+s.toString(16)).substr(-2)}function generatePKCEVerifier(){const e=new Uint32Array(56);if(typeof crypto>"u"){const i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",a=i.length;let o="";for(let c=0;c<56;c++)o+=i.charAt(Math.floor(Math.random()*a));return o}return crypto.getRandomValues(e),Array.from(e,dec2hex).join("")}async function sha256(s){const i=new TextEncoder().encode(s),a=await crypto.subtle.digest("SHA-256",i),o=new Uint8Array(a);return Array.from(o).map(c=>String.fromCharCode(c)).join("")}async function generatePKCEChallenge(s){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),s;const i=await sha256(s);return btoa(i).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function getCodeChallengeAndMethod(s,e,i=!1){const a=generatePKCEVerifier();let o=a;i&&(o+="/PASSWORD_RECOVERY"),await setItemAsync(s,`${e}-code-verifier`,o);const c=await generatePKCEChallenge(a);return[c,a===c?"plain":"s256"]}const API_VERSION_REGEX=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function parseResponseAPIVersion(s){const e=s.headers.get(API_VERSION_HEADER_NAME);if(!e||!e.match(API_VERSION_REGEX))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function validateExp(s){if(!s)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(s<=e)throw new Error("JWT has expired")}function getAlgorithm(s){switch(s){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const UUID_REGEX=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function validateUUID(s){if(!UUID_REGEX.test(s))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function userNotAvailableProxy(){const s={};return new Proxy(s,{get:(e,i)=>{if(i==="__isUserNotAvailableProxy")return!0;if(typeof i=="symbol"){const a=i.toString();if(a==="Symbol(Symbol.toPrimitive)"||a==="Symbol(Symbol.toStringTag)"||a==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${i}" property of the session object is not supported. Please use getUser() instead.`)},set:(e,i)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${i}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(e,i)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${i}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function insecureUserWarningProxy(s,e){return new Proxy(s,{get:(i,a,o)=>{if(a==="__isInsecureUserWarningProxy")return!0;if(typeof a=="symbol"){const c=a.toString();if(c==="Symbol(Symbol.toPrimitive)"||c==="Symbol(Symbol.toStringTag)"||c==="Symbol(util.inspect.custom)"||c==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(i,a,o)}return!e.value&&typeof a=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),e.value=!0),Reflect.get(i,a,o)}})}function deepClone(s){return JSON.parse(JSON.stringify(s))}const _getErrorMessage=s=>s.msg||s.message||s.error_description||s.error||JSON.stringify(s),NETWORK_ERROR_CODES=[502,503,504];async function handleError(s){var e;if(!looksLikeFetchResponse(s))throw new AuthRetryableFetchError(_getErrorMessage(s),0);if(NETWORK_ERROR_CODES.includes(s.status))throw new AuthRetryableFetchError(_getErrorMessage(s),s.status);let i;try{i=await s.json()}catch(c){throw new AuthUnknownError(_getErrorMessage(c),c)}let a;const o=parseResponseAPIVersion(s);if(o&&o.getTime()>=API_VERSIONS["2024-01-01"].timestamp&&typeof i=="object"&&i&&typeof i.code=="string"?a=i.code:typeof i=="object"&&i&&typeof i.error_code=="string"&&(a=i.error_code),a){if(a==="weak_password")throw new AuthWeakPasswordError(_getErrorMessage(i),s.status,((e=i.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(a==="session_not_found")throw new AuthSessionMissingError}else if(typeof i=="object"&&i&&typeof i.weak_password=="object"&&i.weak_password&&Array.isArray(i.weak_password.reasons)&&i.weak_password.reasons.length&&i.weak_password.reasons.reduce((c,d)=>c&&typeof d=="string",!0))throw new AuthWeakPasswordError(_getErrorMessage(i),s.status,i.weak_password.reasons);throw new AuthApiError(_getErrorMessage(i),s.status||500,a)}const _getRequestParams=(s,e,i,a)=>{const o={method:s,headers:(e==null?void 0:e.headers)||{}};return s==="GET"?o:(o.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),o.body=JSON.stringify(a),Object.assign(Object.assign({},o),i))};async function _request(s,e,i,a){var o;const c=Object.assign({},a==null?void 0:a.headers);c[API_VERSION_HEADER_NAME]||(c[API_VERSION_HEADER_NAME]=API_VERSIONS["2024-01-01"].name),a!=null&&a.jwt&&(c.Authorization=`Bearer ${a.jwt}`);const d=(o=a==null?void 0:a.query)!==null&&o!==void 0?o:{};a!=null&&a.redirectTo&&(d.redirect_to=a.redirectTo);const g=Object.keys(d).length?"?"+new URLSearchParams(d).toString():"",h=await _handleRequest(s,e,i+g,{headers:c,noResolveJson:a==null?void 0:a.noResolveJson},{},a==null?void 0:a.body);return a!=null&&a.xform?a==null?void 0:a.xform(h):{data:Object.assign({},h),error:null}}async function _handleRequest(s,e,i,a,o,c){const d=_getRequestParams(e,a,o,c);let g;try{g=await s(i,Object.assign({},d))}catch(h){throw console.error(h),new AuthRetryableFetchError(_getErrorMessage(h),0)}if(g.ok||await handleError(g),a!=null&&a.noResolveJson)return g;try{return await g.json()}catch(h){await handleError(h)}}function _sessionResponse(s){var e;let i=null;hasSession(s)&&(i=Object.assign({},s),s.expires_at||(i.expires_at=expiresAt(s.expires_in)));const a=(e=s.user)!==null&&e!==void 0?e:s;return{data:{session:i,user:a},error:null}}function _sessionResponsePassword(s){const e=_sessionResponse(s);return!e.error&&s.weak_password&&typeof s.weak_password=="object"&&Array.isArray(s.weak_password.reasons)&&s.weak_password.reasons.length&&s.weak_password.message&&typeof s.weak_password.message=="string"&&s.weak_password.reasons.reduce((i,a)=>i&&typeof a=="string",!0)&&(e.data.weak_password=s.weak_password),e}function _userResponse(s){var e;return{data:{user:(e=s.user)!==null&&e!==void 0?e:s},error:null}}function _ssoResponse(s){return{data:s,error:null}}function _generateLinkResponse(s){const{action_link:e,email_otp:i,hashed_token:a,redirect_to:o,verification_type:c}=s,d=__rest(s,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),g={action_link:e,email_otp:i,hashed_token:a,redirect_to:o,verification_type:c},h=Object.assign({},d);return{data:{properties:g,user:h},error:null}}function _noResolveJsonResponse(s){return s}function hasSession(s){return s.access_token&&s.refresh_token&&s.expires_in}const SIGN_OUT_SCOPES=["global","local","others"];class GoTrueAdminApi{constructor({url:e="",headers:i={},fetch:a}){this.url=e,this.headers=i,this.fetch=resolveFetch(a),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(e,i=SIGN_OUT_SCOPES[0]){if(SIGN_OUT_SCOPES.indexOf(i)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${SIGN_OUT_SCOPES.join(", ")}`);try{return await _request(this.fetch,"POST",`${this.url}/logout?scope=${i}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(a){if(isAuthError(a))return{data:null,error:a};throw a}}async inviteUserByEmail(e,i={}){try{return await _request(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:i.data},headers:this.headers,redirectTo:i.redirectTo,xform:_userResponse})}catch(a){if(isAuthError(a))return{data:{user:null},error:a};throw a}}async generateLink(e){try{const{options:i}=e,a=__rest(e,["options"]),o=Object.assign(Object.assign({},a),i);return"newEmail"in a&&(o.new_email=a==null?void 0:a.newEmail,delete o.newEmail),await _request(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:o,headers:this.headers,xform:_generateLinkResponse,redirectTo:i==null?void 0:i.redirectTo})}catch(i){if(isAuthError(i))return{data:{properties:null,user:null},error:i};throw i}}async createUser(e){try{return await _request(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:_userResponse})}catch(i){if(isAuthError(i))return{data:{user:null},error:i};throw i}}async listUsers(e){var i,a,o,c,d,g,h;try{const _={nextPage:null,lastPage:0,total:0},b=await _request(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(a=(i=e==null?void 0:e.page)===null||i===void 0?void 0:i.toString())!==null&&a!==void 0?a:"",per_page:(c=(o=e==null?void 0:e.perPage)===null||o===void 0?void 0:o.toString())!==null&&c!==void 0?c:""},xform:_noResolveJsonResponse});if(b.error)throw b.error;const rt=await b.json(),nt=(d=b.headers.get("x-total-count"))!==null&&d!==void 0?d:0,it=(h=(g=b.headers.get("link"))===null||g===void 0?void 0:g.split(","))!==null&&h!==void 0?h:[];return it.length>0&&(it.forEach(ot=>{const ct=parseInt(ot.split(";")[0].split("=")[1].substring(0,1)),tt=JSON.parse(ot.split(";")[1].split("=")[1]);_[`${tt}Page`]=ct}),_.total=parseInt(nt)),{data:Object.assign(Object.assign({},rt),_),error:null}}catch(_){if(isAuthError(_))return{data:{users:[]},error:_};throw _}}async getUserById(e){validateUUID(e);try{return await _request(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:_userResponse})}catch(i){if(isAuthError(i))return{data:{user:null},error:i};throw i}}async updateUserById(e,i){validateUUID(e);try{return await _request(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:i,headers:this.headers,xform:_userResponse})}catch(a){if(isAuthError(a))return{data:{user:null},error:a};throw a}}async deleteUser(e,i=!1){validateUUID(e);try{return await _request(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:i},xform:_userResponse})}catch(a){if(isAuthError(a))return{data:{user:null},error:a};throw a}}async _listFactors(e){validateUUID(e.userId);try{const{data:i,error:a}=await _request(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:o=>({data:{factors:o},error:null})});return{data:i,error:a}}catch(i){if(isAuthError(i))return{data:null,error:i};throw i}}async _deleteFactor(e){validateUUID(e.userId),validateUUID(e.id);try{return{data:await _request(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(i){if(isAuthError(i))return{data:null,error:i};throw i}}async _listOAuthClients(e){var i,a,o,c,d,g,h;try{const _={nextPage:null,lastPage:0,total:0},b=await _request(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(a=(i=e==null?void 0:e.page)===null||i===void 0?void 0:i.toString())!==null&&a!==void 0?a:"",per_page:(c=(o=e==null?void 0:e.perPage)===null||o===void 0?void 0:o.toString())!==null&&c!==void 0?c:""},xform:_noResolveJsonResponse});if(b.error)throw b.error;const rt=await b.json(),nt=(d=b.headers.get("x-total-count"))!==null&&d!==void 0?d:0,it=(h=(g=b.headers.get("link"))===null||g===void 0?void 0:g.split(","))!==null&&h!==void 0?h:[];return it.length>0&&(it.forEach(ot=>{const ct=parseInt(ot.split(";")[0].split("=")[1].substring(0,1)),tt=JSON.parse(ot.split(";")[1].split("=")[1]);_[`${tt}Page`]=ct}),_.total=parseInt(nt)),{data:Object.assign(Object.assign({},rt),_),error:null}}catch(_){if(isAuthError(_))return{data:{clients:[]},error:_};throw _}}async _createOAuthClient(e){try{return await _request(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:e,headers:this.headers,xform:i=>({data:i,error:null})})}catch(i){if(isAuthError(i))return{data:null,error:i};throw i}}async _getOAuthClient(e){try{return await _request(this.fetch,"GET",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,xform:i=>({data:i,error:null})})}catch(i){if(isAuthError(i))return{data:null,error:i};throw i}}async _updateOAuthClient(e,i){try{return await _request(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${e}`,{body:i,headers:this.headers,xform:a=>({data:a,error:null})})}catch(a){if(isAuthError(a))return{data:null,error:a};throw a}}async _deleteOAuthClient(e){try{return await _request(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(i){if(isAuthError(i))return{data:null,error:i};throw i}}async _regenerateOAuthClientSecret(e){try{return await _request(this.fetch,"POST",`${this.url}/admin/oauth/clients/${e}/regenerate_secret`,{headers:this.headers,xform:i=>({data:i,error:null})})}catch(i){if(isAuthError(i))return{data:null,error:i};throw i}}}function memoryLocalStorageAdapter(s={}){return{getItem:e=>s[e]||null,setItem:(e,i)=>{s[e]=i},removeItem:e=>{delete s[e]}}}const internals={debug:!!(globalThis&&supportsLocalStorage()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class LockAcquireTimeoutError extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class NavigatorLockAcquireTimeoutError extends LockAcquireTimeoutError{}async function navigatorLock(s,e,i){internals.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",s,e);const a=new globalThis.AbortController;return e>0&&setTimeout(()=>{a.abort(),internals.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",s)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(s,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:a.signal},async o=>{if(o){internals.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",s,o.name);try{return await i()}finally{internals.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",s,o.name)}}else{if(e===0)throw internals.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",s),new NavigatorLockAcquireTimeoutError(`Acquiring an exclusive Navigator LockManager lock "${s}" immediately failed`);if(internals.debug)try{const c=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(c,null,"  "))}catch(c){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",c)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await i()}}))}function polyfillGlobalThis(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function getAddress(s){if(!/^0x[a-fA-F0-9]{40}$/.test(s))throw new Error(`@supabase/auth-js: Address "${s}" is invalid.`);return s.toLowerCase()}function fromHex(s){return parseInt(s,16)}function toHex(s){const e=new TextEncoder().encode(s);return"0x"+Array.from(e,a=>a.toString(16).padStart(2,"0")).join("")}function createSiweMessage(s){var e;const{chainId:i,domain:a,expirationTime:o,issuedAt:c=new Date,nonce:d,notBefore:g,requestId:h,resources:_,scheme:b,uri:rt,version:nt}=s;{if(!Number.isInteger(i))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${i}`);if(!a)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(d&&d.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${d}`);if(!rt)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(nt!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${nt}`);if(!((e=s.statement)===null||e===void 0)&&e.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${s.statement}`)}const it=getAddress(s.address),ot=b?`${b}://${a}`:a,ct=s.statement?`${s.statement}
`:"",tt=`${ot} wants you to sign in with your Ethereum account:
${it}

${ct}`;let $=`URI: ${rt}
Version: ${nt}
Chain ID: ${i}${d?`
Nonce: ${d}`:""}
Issued At: ${c.toISOString()}`;if(o&&($+=`
Expiration Time: ${o.toISOString()}`),g&&($+=`
Not Before: ${g.toISOString()}`),h&&($+=`
Request ID: ${h}`),_){let j=`
Resources:`;for(const et of _){if(!et||typeof et!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${et}`);j+=`
- ${et}`}$+=j}return`${tt}
${$}`}class WebAuthnError extends Error{constructor({message:e,code:i,cause:a,name:o}){var c;super(e,{cause:a}),this.__isWebAuthnError=!0,this.name=(c=o??(a instanceof Error?a.name:void 0))!==null&&c!==void 0?c:"Unknown Error",this.code=i}}class WebAuthnUnknownError extends WebAuthnError{constructor(e,i){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:i,message:e}),this.name="WebAuthnUnknownError",this.originalError=i}}function identifyRegistrationError({error:s,options:e}){var i,a,o;const{publicKey:c}=e;if(!c)throw Error("options was missing required publicKey property");if(s.name==="AbortError"){if(e.signal instanceof AbortSignal)return new WebAuthnError({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:s})}else if(s.name==="ConstraintError"){if(((i=c.authenticatorSelection)===null||i===void 0?void 0:i.requireResidentKey)===!0)return new WebAuthnError({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:s});if(e.mediation==="conditional"&&((a=c.authenticatorSelection)===null||a===void 0?void 0:a.userVerification)==="required")return new WebAuthnError({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:s});if(((o=c.authenticatorSelection)===null||o===void 0?void 0:o.userVerification)==="required")return new WebAuthnError({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:s})}else{if(s.name==="InvalidStateError")return new WebAuthnError({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:s});if(s.name==="NotAllowedError")return new WebAuthnError({message:s.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:s});if(s.name==="NotSupportedError")return c.pubKeyCredParams.filter(g=>g.type==="public-key").length===0?new WebAuthnError({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:s}):new WebAuthnError({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:s});if(s.name==="SecurityError"){const d=window.location.hostname;if(isValidDomain(d)){if(c.rp.id!==d)return new WebAuthnError({message:`The RP ID "${c.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:s})}else return new WebAuthnError({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:s})}else if(s.name==="TypeError"){if(c.user.id.byteLength<1||c.user.id.byteLength>64)return new WebAuthnError({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:s})}else if(s.name==="UnknownError")return new WebAuthnError({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:s})}return new WebAuthnError({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:s})}function identifyAuthenticationError({error:s,options:e}){const{publicKey:i}=e;if(!i)throw Error("options was missing required publicKey property");if(s.name==="AbortError"){if(e.signal instanceof AbortSignal)return new WebAuthnError({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:s})}else{if(s.name==="NotAllowedError")return new WebAuthnError({message:s.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:s});if(s.name==="SecurityError"){const a=window.location.hostname;if(isValidDomain(a)){if(i.rpId!==a)return new WebAuthnError({message:`The RP ID "${i.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:s})}else return new WebAuthnError({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:s})}else if(s.name==="UnknownError")return new WebAuthnError({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:s})}return new WebAuthnError({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:s})}class WebAuthnAbortService{createNewAbortSignal(){if(this.controller){const i=new Error("Cancelling existing WebAuthn API call for new one");i.name="AbortError",this.controller.abort(i)}const e=new AbortController;return this.controller=e,e.signal}cancelCeremony(){if(this.controller){const e=new Error("Manually cancelling existing WebAuthn API call");e.name="AbortError",this.controller.abort(e),this.controller=void 0}}}const webAuthnAbortService=new WebAuthnAbortService;function deserializeCredentialCreationOptions(s){if(!s)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(s);const{challenge:e,user:i,excludeCredentials:a}=s,o=__rest(s,["challenge","user","excludeCredentials"]),c=base64UrlToUint8Array(e).buffer,d=Object.assign(Object.assign({},i),{id:base64UrlToUint8Array(i.id).buffer}),g=Object.assign(Object.assign({},o),{challenge:c,user:d});if(a&&a.length>0){g.excludeCredentials=new Array(a.length);for(let h=0;h<a.length;h++){const _=a[h];g.excludeCredentials[h]=Object.assign(Object.assign({},_),{id:base64UrlToUint8Array(_.id).buffer,type:_.type||"public-key",transports:_.transports})}}return g}function deserializeCredentialRequestOptions(s){if(!s)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(s);const{challenge:e,allowCredentials:i}=s,a=__rest(s,["challenge","allowCredentials"]),o=base64UrlToUint8Array(e).buffer,c=Object.assign(Object.assign({},a),{challenge:o});if(i&&i.length>0){c.allowCredentials=new Array(i.length);for(let d=0;d<i.length;d++){const g=i[d];c.allowCredentials[d]=Object.assign(Object.assign({},g),{id:base64UrlToUint8Array(g.id).buffer,type:g.type||"public-key",transports:g.transports})}}return c}function serializeCredentialCreationResponse(s){var e;if("toJSON"in s&&typeof s.toJSON=="function")return s.toJSON();const i=s;return{id:s.id,rawId:s.id,response:{attestationObject:bytesToBase64URL(new Uint8Array(s.response.attestationObject)),clientDataJSON:bytesToBase64URL(new Uint8Array(s.response.clientDataJSON))},type:"public-key",clientExtensionResults:s.getClientExtensionResults(),authenticatorAttachment:(e=i.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function serializeCredentialRequestResponse(s){var e;if("toJSON"in s&&typeof s.toJSON=="function")return s.toJSON();const i=s,a=s.getClientExtensionResults(),o=s.response;return{id:s.id,rawId:s.id,response:{authenticatorData:bytesToBase64URL(new Uint8Array(o.authenticatorData)),clientDataJSON:bytesToBase64URL(new Uint8Array(o.clientDataJSON)),signature:bytesToBase64URL(new Uint8Array(o.signature)),userHandle:o.userHandle?bytesToBase64URL(new Uint8Array(o.userHandle)):void 0},type:"public-key",clientExtensionResults:a,authenticatorAttachment:(e=i.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function isValidDomain(s){return s==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(s)}function browserSupportsWebAuthn(){var s,e;return!!(isBrowser()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((s=navigator==null?void 0:navigator.credentials)===null||s===void 0?void 0:s.create)=="function"&&typeof((e=navigator==null?void 0:navigator.credentials)===null||e===void 0?void 0:e.get)=="function")}async function createCredential(s){try{const e=await navigator.credentials.create(s);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new WebAuthnUnknownError("Browser returned unexpected credential type",e)}:{data:null,error:new WebAuthnUnknownError("Empty credential response",e)}}catch(e){return{data:null,error:identifyRegistrationError({error:e,options:s})}}}async function getCredential(s){try{const e=await navigator.credentials.get(s);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new WebAuthnUnknownError("Browser returned unexpected credential type",e)}:{data:null,error:new WebAuthnUnknownError("Empty credential response",e)}}catch(e){return{data:null,error:identifyAuthenticationError({error:e,options:s})}}}const DEFAULT_CREATION_OPTIONS={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"direct"},DEFAULT_REQUEST_OPTIONS={userVerification:"preferred",hints:["security-key"],attestation:"direct"};function deepMerge(...s){const e=o=>o!==null&&typeof o=="object"&&!Array.isArray(o),i=o=>o instanceof ArrayBuffer||ArrayBuffer.isView(o),a={};for(const o of s)if(o)for(const c in o){const d=o[c];if(d!==void 0)if(Array.isArray(d))a[c]=d;else if(i(d))a[c]=d;else if(e(d)){const g=a[c];e(g)?a[c]=deepMerge(g,d):a[c]=deepMerge(d)}else a[c]=d}return a}function mergeCredentialCreationOptions(s,e){return deepMerge(DEFAULT_CREATION_OPTIONS,s,e||{})}function mergeCredentialRequestOptions(s,e){return deepMerge(DEFAULT_REQUEST_OPTIONS,s,e||{})}class WebAuthnApi{constructor(e){this.client=e,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(e){return this.client.mfa.enroll(Object.assign(Object.assign({},e),{factorType:"webauthn"}))}async _challenge({factorId:e,webauthn:i,friendlyName:a,signal:o},c){try{const{data:d,error:g}=await this.client.mfa.challenge({factorId:e,webauthn:i});if(!d)return{data:null,error:g};const h=o??webAuthnAbortService.createNewAbortSignal();if(d.webauthn.type==="create"){const{user:_}=d.webauthn.credential_options.publicKey;_.name||(_.name=`${_.id}:${a}`),_.displayName||(_.displayName=_.name)}switch(d.webauthn.type){case"create":{const _=mergeCredentialCreationOptions(d.webauthn.credential_options.publicKey,c==null?void 0:c.create),{data:b,error:rt}=await createCredential({publicKey:_,signal:h});return b?{data:{factorId:e,challengeId:d.id,webauthn:{type:d.webauthn.type,credential_response:b}},error:null}:{data:null,error:rt}}case"request":{const _=mergeCredentialRequestOptions(d.webauthn.credential_options.publicKey,c==null?void 0:c.request),{data:b,error:rt}=await getCredential(Object.assign(Object.assign({},d.webauthn.credential_options),{publicKey:_,signal:h}));return b?{data:{factorId:e,challengeId:d.id,webauthn:{type:d.webauthn.type,credential_response:b}},error:null}:{data:null,error:rt}}}}catch(d){return isAuthError(d)?{data:null,error:d}:{data:null,error:new AuthUnknownError("Unexpected error in challenge",d)}}}async _verify({challengeId:e,factorId:i,webauthn:a}){return this.client.mfa.verify({factorId:i,challengeId:e,webauthn:a})}async _authenticate({factorId:e,webauthn:{rpId:i=typeof window<"u"?window.location.hostname:void 0,rpOrigins:a=typeof window<"u"?[window.location.origin]:void 0,signal:o}={}},c){if(!i)return{data:null,error:new AuthError("rpId is required for WebAuthn authentication")};try{if(!browserSupportsWebAuthn())return{data:null,error:new AuthUnknownError("Browser does not support WebAuthn",null)};const{data:d,error:g}=await this.challenge({factorId:e,webauthn:{rpId:i,rpOrigins:a},signal:o},{request:c});if(!d)return{data:null,error:g};const{webauthn:h}=d;return this._verify({factorId:e,challengeId:d.challengeId,webauthn:{type:h.type,rpId:i,rpOrigins:a,credential_response:h.credential_response}})}catch(d){return isAuthError(d)?{data:null,error:d}:{data:null,error:new AuthUnknownError("Unexpected error in authenticate",d)}}}async _register({friendlyName:e,webauthn:{rpId:i=typeof window<"u"?window.location.hostname:void 0,rpOrigins:a=typeof window<"u"?[window.location.origin]:void 0,signal:o}={}},c){if(!i)return{data:null,error:new AuthError("rpId is required for WebAuthn registration")};try{if(!browserSupportsWebAuthn())return{data:null,error:new AuthUnknownError("Browser does not support WebAuthn",null)};const{data:d,error:g}=await this._enroll({friendlyName:e});if(!d)return await this.client.mfa.listFactors().then(b=>{var rt;return(rt=b.data)===null||rt===void 0?void 0:rt.all.find(nt=>nt.factor_type==="webauthn"&&nt.friendly_name===e&&nt.status!=="unverified")}).then(b=>b?this.client.mfa.unenroll({factorId:b==null?void 0:b.id}):void 0),{data:null,error:g};const{data:h,error:_}=await this._challenge({factorId:d.id,friendlyName:d.friendly_name,webauthn:{rpId:i,rpOrigins:a},signal:o},{create:c});return h?this._verify({factorId:d.id,challengeId:h.challengeId,webauthn:{rpId:i,rpOrigins:a,type:h.webauthn.type,credential_response:h.webauthn.credential_response}}):{data:null,error:_}}catch(d){return isAuthError(d)?{data:null,error:d}:{data:null,error:new AuthUnknownError("Unexpected error in register",d)}}}}polyfillGlobalThis();const DEFAULT_OPTIONS={url:GOTRUE_URL,storageKey:STORAGE_KEY,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:DEFAULT_HEADERS,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1};async function lockNoOp(s,e,i){return await i()}const GLOBAL_JWKS={};class GoTrueClient{get jwks(){var e,i;return(i=(e=GLOBAL_JWKS[this.storageKey])===null||e===void 0?void 0:e.jwks)!==null&&i!==void 0?i:{keys:[]}}set jwks(e){GLOBAL_JWKS[this.storageKey]=Object.assign(Object.assign({},GLOBAL_JWKS[this.storageKey]),{jwks:e})}get jwks_cached_at(){var e,i;return(i=(e=GLOBAL_JWKS[this.storageKey])===null||e===void 0?void 0:e.cachedAt)!==null&&i!==void 0?i:Number.MIN_SAFE_INTEGER}set jwks_cached_at(e){GLOBAL_JWKS[this.storageKey]=Object.assign(Object.assign({},GLOBAL_JWKS[this.storageKey]),{cachedAt:e})}constructor(e){var i,a,o;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;const c=Object.assign(Object.assign({},DEFAULT_OPTIONS),e);if(this.storageKey=c.storageKey,this.instanceID=(i=GoTrueClient.nextInstanceID[this.storageKey])!==null&&i!==void 0?i:0,GoTrueClient.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!c.debug,typeof c.debug=="function"&&(this.logger=c.debug),this.instanceID>0&&isBrowser()){const d=`${this._logPrefix()} Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.`;console.warn(d),this.logDebugMessages&&console.trace(d)}if(this.persistSession=c.persistSession,this.autoRefreshToken=c.autoRefreshToken,this.admin=new GoTrueAdminApi({url:c.url,headers:c.headers,fetch:c.fetch}),this.url=c.url,this.headers=c.headers,this.fetch=resolveFetch(c.fetch),this.lock=c.lock||lockNoOp,this.detectSessionInUrl=c.detectSessionInUrl,this.flowType=c.flowType,this.hasCustomAuthorizationHeader=c.hasCustomAuthorizationHeader,this.throwOnError=c.throwOnError,c.lock?this.lock=c.lock:isBrowser()&&(!((a=globalThis==null?void 0:globalThis.navigator)===null||a===void 0)&&a.locks)?this.lock=navigatorLock:this.lock=lockNoOp,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new WebAuthnApi(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this),listGrants:this._listOAuthGrants.bind(this),revokeGrant:this._revokeOAuthGrant.bind(this)},this.persistSession?(c.storage?this.storage=c.storage:supportsLocalStorage()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=memoryLocalStorageAdapter(this.memoryStorage)),c.userStorage&&(this.userStorage=c.userStorage)):(this.memoryStorage={},this.storage=memoryLocalStorageAdapter(this.memoryStorage)),isBrowser()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(d){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",d)}(o=this.broadcastChannel)===null||o===void 0||o.addEventListener("message",async d=>{this._debug("received broadcast notification from other tab or client",d),await this._notifyAllSubscribers(d.data.event,d.data.session,!1)})}this.initialize()}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(e){if(this.throwOnError&&e&&e.error)throw e.error;return e}_logPrefix(){return`GoTrueClient@${this.storageKey}:${this.instanceID} (${version}) ${new Date().toISOString()}`}_debug(...e){return this.logDebugMessages&&this.logger(this._logPrefix(),...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{let i={},a="none";if(isBrowser()&&(i=parseParametersFromURL(window.location.href),this._isImplicitGrantCallback(i)?a="implicit":await this._isPKCECallback(i)&&(a="pkce")),isBrowser()&&this.detectSessionInUrl&&a!=="none"){const{data:o,error:c}=await this._getSessionFromURL(i,a);if(c){if(this._debug("#_initialize()","error detecting session from URL",c),isAuthImplicitGrantRedirectError(c)){const h=(e=c.details)===null||e===void 0?void 0:e.code;if(h==="identity_already_exists"||h==="identity_not_found"||h==="single_identity_not_deletable")return{error:c}}return await this._removeSession(),{error:c}}const{session:d,redirectType:g}=o;return this._debug("#_initialize()","detected session in URL",d,"redirect type",g),await this._saveSession(d),setTimeout(async()=>{g==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",d):await this._notifyAllSubscribers("SIGNED_IN",d)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(i){return isAuthError(i)?this._returnResult({error:i}):this._returnResult({error:new AuthUnknownError("Unexpected error during initialization",i)})}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var i,a,o;try{const c=await _request(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(a=(i=e==null?void 0:e.options)===null||i===void 0?void 0:i.data)!==null&&a!==void 0?a:{},gotrue_meta_security:{captcha_token:(o=e==null?void 0:e.options)===null||o===void 0?void 0:o.captchaToken}},xform:_sessionResponse}),{data:d,error:g}=c;if(g||!d)return this._returnResult({data:{user:null,session:null},error:g});const h=d.session,_=d.user;return d.session&&(await this._saveSession(d.session),await this._notifyAllSubscribers("SIGNED_IN",h)),this._returnResult({data:{user:_,session:h},error:null})}catch(c){if(isAuthError(c))return this._returnResult({data:{user:null,session:null},error:c});throw c}}async signUp(e){var i,a,o;try{let c;if("email"in e){const{email:b,password:rt,options:nt}=e;let it=null,ot=null;this.flowType==="pkce"&&([it,ot]=await getCodeChallengeAndMethod(this.storage,this.storageKey)),c=await _request(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:nt==null?void 0:nt.emailRedirectTo,body:{email:b,password:rt,data:(i=nt==null?void 0:nt.data)!==null&&i!==void 0?i:{},gotrue_meta_security:{captcha_token:nt==null?void 0:nt.captchaToken},code_challenge:it,code_challenge_method:ot},xform:_sessionResponse})}else if("phone"in e){const{phone:b,password:rt,options:nt}=e;c=await _request(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:b,password:rt,data:(a=nt==null?void 0:nt.data)!==null&&a!==void 0?a:{},channel:(o=nt==null?void 0:nt.channel)!==null&&o!==void 0?o:"sms",gotrue_meta_security:{captcha_token:nt==null?void 0:nt.captchaToken}},xform:_sessionResponse})}else throw new AuthInvalidCredentialsError("You must provide either an email or phone number and a password");const{data:d,error:g}=c;if(g||!d)return this._returnResult({data:{user:null,session:null},error:g});const h=d.session,_=d.user;return d.session&&(await this._saveSession(d.session),await this._notifyAllSubscribers("SIGNED_IN",h)),this._returnResult({data:{user:_,session:h},error:null})}catch(c){if(isAuthError(c))return this._returnResult({data:{user:null,session:null},error:c});throw c}}async signInWithPassword(e){try{let i;if("email"in e){const{email:c,password:d,options:g}=e;i=await _request(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:c,password:d,gotrue_meta_security:{captcha_token:g==null?void 0:g.captchaToken}},xform:_sessionResponsePassword})}else if("phone"in e){const{phone:c,password:d,options:g}=e;i=await _request(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:c,password:d,gotrue_meta_security:{captcha_token:g==null?void 0:g.captchaToken}},xform:_sessionResponsePassword})}else throw new AuthInvalidCredentialsError("You must provide either an email or phone number and a password");const{data:a,error:o}=i;if(o)return this._returnResult({data:{user:null,session:null},error:o});if(!a||!a.session||!a.user){const c=new AuthInvalidTokenResponseError;return this._returnResult({data:{user:null,session:null},error:c})}return a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",a.session)),this._returnResult({data:Object.assign({user:a.user,session:a.session},a.weak_password?{weakPassword:a.weak_password}:null),error:o})}catch(i){if(isAuthError(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}}async signInWithOAuth(e){var i,a,o,c;return await this._handleProviderSignIn(e.provider,{redirectTo:(i=e.options)===null||i===void 0?void 0:i.redirectTo,scopes:(a=e.options)===null||a===void 0?void 0:a.scopes,queryParams:(o=e.options)===null||o===void 0?void 0:o.queryParams,skipBrowserRedirect:(c=e.options)===null||c===void 0?void 0:c.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:i}=e;switch(i){case"ethereum":return await this.signInWithEthereum(e);case"solana":return await this.signInWithSolana(e);default:throw new Error(`@supabase/auth-js: Unsupported chain "${i}"`)}}async signInWithEthereum(e){var i,a,o,c,d,g,h,_,b,rt,nt;let it,ot;if("message"in e)it=e.message,ot=e.signature;else{const{chain:ct,wallet:tt,statement:$,options:j}=e;let et;if(isBrowser())if(typeof tt=="object")et=tt;else{const pt=window;if("ethereum"in pt&&typeof pt.ethereum=="object"&&"request"in pt.ethereum&&typeof pt.ethereum.request=="function")et=pt.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof tt!="object"||!(j!=null&&j.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");et=tt}const ft=new URL((i=j==null?void 0:j.url)!==null&&i!==void 0?i:window.location.href),at=await et.request({method:"eth_requestAccounts"}).then(pt=>pt).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!at||at.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const ut=getAddress(at[0]);let yt=(a=j==null?void 0:j.signInWithEthereum)===null||a===void 0?void 0:a.chainId;if(!yt){const pt=await et.request({method:"eth_chainId"});yt=fromHex(pt)}const mt={domain:ft.host,address:ut,statement:$,uri:ft.href,version:"1",chainId:yt,nonce:(o=j==null?void 0:j.signInWithEthereum)===null||o===void 0?void 0:o.nonce,issuedAt:(d=(c=j==null?void 0:j.signInWithEthereum)===null||c===void 0?void 0:c.issuedAt)!==null&&d!==void 0?d:new Date,expirationTime:(g=j==null?void 0:j.signInWithEthereum)===null||g===void 0?void 0:g.expirationTime,notBefore:(h=j==null?void 0:j.signInWithEthereum)===null||h===void 0?void 0:h.notBefore,requestId:(_=j==null?void 0:j.signInWithEthereum)===null||_===void 0?void 0:_.requestId,resources:(b=j==null?void 0:j.signInWithEthereum)===null||b===void 0?void 0:b.resources};it=createSiweMessage(mt),ot=await et.request({method:"personal_sign",params:[toHex(it),ut]})}try{const{data:ct,error:tt}=await _request(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:it,signature:ot},!((rt=e.options)===null||rt===void 0)&&rt.captchaToken?{gotrue_meta_security:{captcha_token:(nt=e.options)===null||nt===void 0?void 0:nt.captchaToken}}:null),xform:_sessionResponse});if(tt)throw tt;if(!ct||!ct.session||!ct.user){const $=new AuthInvalidTokenResponseError;return this._returnResult({data:{user:null,session:null},error:$})}return ct.session&&(await this._saveSession(ct.session),await this._notifyAllSubscribers("SIGNED_IN",ct.session)),this._returnResult({data:Object.assign({},ct),error:tt})}catch(ct){if(isAuthError(ct))return this._returnResult({data:{user:null,session:null},error:ct});throw ct}}async signInWithSolana(e){var i,a,o,c,d,g,h,_,b,rt,nt,it;let ot,ct;if("message"in e)ot=e.message,ct=e.signature;else{const{chain:tt,wallet:$,statement:j,options:et}=e;let ft;if(isBrowser())if(typeof $=="object")ft=$;else{const ut=window;if("solana"in ut&&typeof ut.solana=="object"&&("signIn"in ut.solana&&typeof ut.solana.signIn=="function"||"signMessage"in ut.solana&&typeof ut.solana.signMessage=="function"))ft=ut.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof $!="object"||!(et!=null&&et.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");ft=$}const at=new URL((i=et==null?void 0:et.url)!==null&&i!==void 0?i:window.location.href);if("signIn"in ft&&ft.signIn){const ut=await ft.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},et==null?void 0:et.signInWithSolana),{version:"1",domain:at.host,uri:at.href}),j?{statement:j}:null));let yt;if(Array.isArray(ut)&&ut[0]&&typeof ut[0]=="object")yt=ut[0];else if(ut&&typeof ut=="object"&&"signedMessage"in ut&&"signature"in ut)yt=ut;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in yt&&"signature"in yt&&(typeof yt.signedMessage=="string"||yt.signedMessage instanceof Uint8Array)&&yt.signature instanceof Uint8Array)ot=typeof yt.signedMessage=="string"?yt.signedMessage:new TextDecoder().decode(yt.signedMessage),ct=yt.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in ft)||typeof ft.signMessage!="function"||!("publicKey"in ft)||typeof ft!="object"||!ft.publicKey||!("toBase58"in ft.publicKey)||typeof ft.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");ot=[`${at.host} wants you to sign in with your Solana account:`,ft.publicKey.toBase58(),...j?["",j,""]:[""],"Version: 1",`URI: ${at.href}`,`Issued At: ${(o=(a=et==null?void 0:et.signInWithSolana)===null||a===void 0?void 0:a.issuedAt)!==null&&o!==void 0?o:new Date().toISOString()}`,...!((c=et==null?void 0:et.signInWithSolana)===null||c===void 0)&&c.notBefore?[`Not Before: ${et.signInWithSolana.notBefore}`]:[],...!((d=et==null?void 0:et.signInWithSolana)===null||d===void 0)&&d.expirationTime?[`Expiration Time: ${et.signInWithSolana.expirationTime}`]:[],...!((g=et==null?void 0:et.signInWithSolana)===null||g===void 0)&&g.chainId?[`Chain ID: ${et.signInWithSolana.chainId}`]:[],...!((h=et==null?void 0:et.signInWithSolana)===null||h===void 0)&&h.nonce?[`Nonce: ${et.signInWithSolana.nonce}`]:[],...!((_=et==null?void 0:et.signInWithSolana)===null||_===void 0)&&_.requestId?[`Request ID: ${et.signInWithSolana.requestId}`]:[],...!((rt=(b=et==null?void 0:et.signInWithSolana)===null||b===void 0?void 0:b.resources)===null||rt===void 0)&&rt.length?["Resources",...et.signInWithSolana.resources.map(yt=>`- ${yt}`)]:[]].join(`
`);const ut=await ft.signMessage(new TextEncoder().encode(ot),"utf8");if(!ut||!(ut instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");ct=ut}}try{const{data:tt,error:$}=await _request(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:ot,signature:bytesToBase64URL(ct)},!((nt=e.options)===null||nt===void 0)&&nt.captchaToken?{gotrue_meta_security:{captcha_token:(it=e.options)===null||it===void 0?void 0:it.captchaToken}}:null),xform:_sessionResponse});if($)throw $;if(!tt||!tt.session||!tt.user){const j=new AuthInvalidTokenResponseError;return this._returnResult({data:{user:null,session:null},error:j})}return tt.session&&(await this._saveSession(tt.session),await this._notifyAllSubscribers("SIGNED_IN",tt.session)),this._returnResult({data:Object.assign({},tt),error:$})}catch(tt){if(isAuthError(tt))return this._returnResult({data:{user:null,session:null},error:tt});throw tt}}async _exchangeCodeForSession(e){const i=await getItemAsync(this.storage,`${this.storageKey}-code-verifier`),[a,o]=(i??"").split("/");try{const{data:c,error:d}=await _request(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:a},xform:_sessionResponse});if(await removeItemAsync(this.storage,`${this.storageKey}-code-verifier`),d)throw d;if(!c||!c.session||!c.user){const g=new AuthInvalidTokenResponseError;return this._returnResult({data:{user:null,session:null,redirectType:null},error:g})}return c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",c.session)),this._returnResult({data:Object.assign(Object.assign({},c),{redirectType:o??null}),error:d})}catch(c){if(isAuthError(c))return this._returnResult({data:{user:null,session:null,redirectType:null},error:c});throw c}}async signInWithIdToken(e){try{const{options:i,provider:a,token:o,access_token:c,nonce:d}=e,g=await _request(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:a,id_token:o,access_token:c,nonce:d,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}},xform:_sessionResponse}),{data:h,error:_}=g;if(_)return this._returnResult({data:{user:null,session:null},error:_});if(!h||!h.session||!h.user){const b=new AuthInvalidTokenResponseError;return this._returnResult({data:{user:null,session:null},error:b})}return h.session&&(await this._saveSession(h.session),await this._notifyAllSubscribers("SIGNED_IN",h.session)),this._returnResult({data:h,error:_})}catch(i){if(isAuthError(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}}async signInWithOtp(e){var i,a,o,c,d;try{if("email"in e){const{email:g,options:h}=e;let _=null,b=null;this.flowType==="pkce"&&([_,b]=await getCodeChallengeAndMethod(this.storage,this.storageKey));const{error:rt}=await _request(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:g,data:(i=h==null?void 0:h.data)!==null&&i!==void 0?i:{},create_user:(a=h==null?void 0:h.shouldCreateUser)!==null&&a!==void 0?a:!0,gotrue_meta_security:{captcha_token:h==null?void 0:h.captchaToken},code_challenge:_,code_challenge_method:b},redirectTo:h==null?void 0:h.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:rt})}if("phone"in e){const{phone:g,options:h}=e,{data:_,error:b}=await _request(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:g,data:(o=h==null?void 0:h.data)!==null&&o!==void 0?o:{},create_user:(c=h==null?void 0:h.shouldCreateUser)!==null&&c!==void 0?c:!0,gotrue_meta_security:{captcha_token:h==null?void 0:h.captchaToken},channel:(d=h==null?void 0:h.channel)!==null&&d!==void 0?d:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:_==null?void 0:_.message_id},error:b})}throw new AuthInvalidCredentialsError("You must provide either an email or phone number.")}catch(g){if(isAuthError(g))return this._returnResult({data:{user:null,session:null},error:g});throw g}}async verifyOtp(e){var i,a;try{let o,c;"options"in e&&(o=(i=e.options)===null||i===void 0?void 0:i.redirectTo,c=(a=e.options)===null||a===void 0?void 0:a.captchaToken);const{data:d,error:g}=await _request(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:c}}),redirectTo:o,xform:_sessionResponse});if(g)throw g;if(!d)throw new Error("An error occurred on token verification.");const h=d.session,_=d.user;return h!=null&&h.access_token&&(await this._saveSession(h),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",h)),this._returnResult({data:{user:_,session:h},error:null})}catch(o){if(isAuthError(o))return this._returnResult({data:{user:null,session:null},error:o});throw o}}async signInWithSSO(e){var i,a,o,c,d;try{let g=null,h=null;this.flowType==="pkce"&&([g,h]=await getCodeChallengeAndMethod(this.storage,this.storageKey));const _=await _request(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(a=(i=e.options)===null||i===void 0?void 0:i.redirectTo)!==null&&a!==void 0?a:void 0}),!((o=e==null?void 0:e.options)===null||o===void 0)&&o.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:g,code_challenge_method:h}),headers:this.headers,xform:_ssoResponse});return!((c=_.data)===null||c===void 0)&&c.url&&isBrowser()&&!(!((d=e.options)===null||d===void 0)&&d.skipBrowserRedirect)&&window.location.assign(_.data.url),this._returnResult(_)}catch(g){if(isAuthError(g))return this._returnResult({data:null,error:g});throw g}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:i},error:a}=e;if(a)throw a;if(!i)throw new AuthSessionMissingError;const{error:o}=await _request(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:i.access_token});return this._returnResult({data:{user:null,session:null},error:o})})}catch(e){if(isAuthError(e))return this._returnResult({data:{user:null,session:null},error:e});throw e}}async resend(e){try{const i=`${this.url}/resend`;if("email"in e){const{email:a,type:o,options:c}=e,{error:d}=await _request(this.fetch,"POST",i,{headers:this.headers,body:{email:a,type:o,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken}},redirectTo:c==null?void 0:c.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:d})}else if("phone"in e){const{phone:a,type:o,options:c}=e,{data:d,error:g}=await _request(this.fetch,"POST",i,{headers:this.headers,body:{phone:a,type:o,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:d==null?void 0:d.message_id},error:g})}throw new AuthInvalidCredentialsError("You must provide either an email or phone number and a type")}catch(i){if(isAuthError(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async i=>i))}async _acquireLock(e,i){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const a=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),o=(async()=>(await a,await i()))();return this.pendingInLock.push((async()=>{try{await o}catch{}})()),o}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const a=i();for(this.pendingInLock.push((async()=>{try{await a}catch{}})()),await a;this.pendingInLock.length;){const o=[...this.pendingInLock];await Promise.all(o),this.pendingInLock.splice(0,o.length)}return await a}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const i=await this.__loadSession();return await e(i)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const i=await getItemAsync(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",i),i!==null&&(this._isValidSession(i)?e=i:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const a=e.expires_at?e.expires_at*1e3-Date.now()<EXPIRY_MARGIN_MS:!1;if(this._debug("#__loadSession()",`session has${a?"":" not"} expired`,"expires_at",e.expires_at),!a){if(this.userStorage){const d=await getItemAsync(this.userStorage,this.storageKey+"-user");d!=null&&d.user?e.user=d.user:e.user=userNotAvailableProxy()}if(this.storage.isServer&&e.user&&!e.user.__isUserNotAvailableProxy){const d={value:this.suppressGetSessionWarning};e.user=insecureUserWarningProxy(e.user,d),d.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:e},error:null}}const{data:o,error:c}=await this._callRefreshToken(e.refresh_token);return c?this._returnResult({data:{session:null},error:c}):this._returnResult({data:{session:o},error:null})}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await _request(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:_userResponse}):await this._useSession(async i=>{var a,o,c;const{data:d,error:g}=i;if(g)throw g;return!(!((a=d.session)===null||a===void 0)&&a.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new AuthSessionMissingError}:await _request(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(c=(o=d.session)===null||o===void 0?void 0:o.access_token)!==null&&c!==void 0?c:void 0,xform:_userResponse})})}catch(i){if(isAuthError(i))return isAuthSessionMissingError(i)&&(await this._removeSession(),await removeItemAsync(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:i});throw i}}async updateUser(e,i={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,i))}async _updateUser(e,i={}){try{return await this._useSession(async a=>{const{data:o,error:c}=a;if(c)throw c;if(!o.session)throw new AuthSessionMissingError;const d=o.session;let g=null,h=null;this.flowType==="pkce"&&e.email!=null&&([g,h]=await getCodeChallengeAndMethod(this.storage,this.storageKey));const{data:_,error:b}=await _request(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:i==null?void 0:i.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:g,code_challenge_method:h}),jwt:d.access_token,xform:_userResponse});if(b)throw b;return d.user=_.user,await this._saveSession(d),await this._notifyAllSubscribers("USER_UPDATED",d),this._returnResult({data:{user:d.user},error:null})})}catch(a){if(isAuthError(a))return this._returnResult({data:{user:null},error:a});throw a}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new AuthSessionMissingError;const i=Date.now()/1e3;let a=i,o=!0,c=null;const{payload:d}=decodeJWT(e.access_token);if(d.exp&&(a=d.exp,o=a<=i),o){const{data:g,error:h}=await this._callRefreshToken(e.refresh_token);if(h)return this._returnResult({data:{user:null,session:null},error:h});if(!g)return{data:{user:null,session:null},error:null};c=g}else{const{data:g,error:h}=await this._getUser(e.access_token);if(h)throw h;c={access_token:e.access_token,refresh_token:e.refresh_token,user:g.user,token_type:"bearer",expires_in:a-i,expires_at:a},await this._saveSession(c),await this._notifyAllSubscribers("SIGNED_IN",c)}return this._returnResult({data:{user:c.user,session:c},error:null})}catch(i){if(isAuthError(i))return this._returnResult({data:{session:null,user:null},error:i});throw i}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async i=>{var a;if(!e){const{data:d,error:g}=i;if(g)throw g;e=(a=d.session)!==null&&a!==void 0?a:void 0}if(!(e!=null&&e.refresh_token))throw new AuthSessionMissingError;const{data:o,error:c}=await this._callRefreshToken(e.refresh_token);return c?this._returnResult({data:{user:null,session:null},error:c}):o?this._returnResult({data:{user:o.user,session:o},error:null}):this._returnResult({data:{user:null,session:null},error:null})})}catch(i){if(isAuthError(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}}async _getSessionFromURL(e,i){try{if(!isBrowser())throw new AuthImplicitGrantRedirectError("No browser detected.");if(e.error||e.error_description||e.error_code)throw new AuthImplicitGrantRedirectError(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(i){case"implicit":if(this.flowType==="pkce")throw new AuthPKCEGrantCodeExchangeError("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new AuthImplicitGrantRedirectError("Not a valid implicit grant flow url.");break;default:}if(i==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new AuthPKCEGrantCodeExchangeError("No code detected.");const{data:j,error:et}=await this._exchangeCodeForSession(e.code);if(et)throw et;const ft=new URL(window.location.href);return ft.searchParams.delete("code"),window.history.replaceState(window.history.state,"",ft.toString()),{data:{session:j.session,redirectType:null},error:null}}const{provider_token:a,provider_refresh_token:o,access_token:c,refresh_token:d,expires_in:g,expires_at:h,token_type:_}=e;if(!c||!g||!d||!_)throw new AuthImplicitGrantRedirectError("No session defined in URL");const b=Math.round(Date.now()/1e3),rt=parseInt(g);let nt=b+rt;h&&(nt=parseInt(h));const it=nt-b;it*1e3<=AUTO_REFRESH_TICK_DURATION_MS&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${it}s, should have been closer to ${rt}s`);const ot=nt-rt;b-ot>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",ot,nt,b):b-ot<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",ot,nt,b);const{data:ct,error:tt}=await this._getUser(c);if(tt)throw tt;const $={provider_token:a,provider_refresh_token:o,access_token:c,expires_in:rt,expires_at:nt,refresh_token:d,token_type:_,user:ct.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:$,redirectType:e.type},error:null})}catch(a){if(isAuthError(a))return this._returnResult({data:{session:null,redirectType:null},error:a});throw a}}_isImplicitGrantCallback(e){return!!(e.access_token||e.error_description)}async _isPKCECallback(e){const i=await getItemAsync(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&i)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async i=>{var a;const{data:o,error:c}=i;if(c)return this._returnResult({error:c});const d=(a=o.session)===null||a===void 0?void 0:a.access_token;if(d){const{error:g}=await this.admin.signOut(d,e);if(g&&!(isAuthApiError(g)&&(g.status===404||g.status===401||g.status===403)))return this._returnResult({error:g})}return e!=="others"&&(await this._removeSession(),await removeItemAsync(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})})}onAuthStateChange(e){const i=generateCallbackId(),a={id:i,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",i),this.stateChangeEmitters.delete(i)}};return this._debug("#onAuthStateChange()","registered callback with id",i),this.stateChangeEmitters.set(i,a),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(i)})))(),{data:{subscription:a}}}async _emitInitialSession(e){return await this._useSession(async i=>{var a,o;try{const{data:{session:c},error:d}=i;if(d)throw d;await((a=this.stateChangeEmitters.get(e))===null||a===void 0?void 0:a.callback("INITIAL_SESSION",c)),this._debug("INITIAL_SESSION","callback id",e,"session",c)}catch(c){await((o=this.stateChangeEmitters.get(e))===null||o===void 0?void 0:o.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",c),console.error(c)}})}async resetPasswordForEmail(e,i={}){let a=null,o=null;this.flowType==="pkce"&&([a,o]=await getCodeChallengeAndMethod(this.storage,this.storageKey,!0));try{return await _request(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:a,code_challenge_method:o,gotrue_meta_security:{captcha_token:i.captchaToken}},headers:this.headers,redirectTo:i.redirectTo})}catch(c){if(isAuthError(c))return this._returnResult({data:null,error:c});throw c}}async getUserIdentities(){var e;try{const{data:i,error:a}=await this.getUser();if(a)throw a;return this._returnResult({data:{identities:(e=i.user.identities)!==null&&e!==void 0?e:[]},error:null})}catch(i){if(isAuthError(i))return this._returnResult({data:null,error:i});throw i}}async linkIdentity(e){return"token"in e?this.linkIdentityIdToken(e):this.linkIdentityOAuth(e)}async linkIdentityOAuth(e){var i;try{const{data:a,error:o}=await this._useSession(async c=>{var d,g,h,_,b;const{data:rt,error:nt}=c;if(nt)throw nt;const it=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(d=e.options)===null||d===void 0?void 0:d.redirectTo,scopes:(g=e.options)===null||g===void 0?void 0:g.scopes,queryParams:(h=e.options)===null||h===void 0?void 0:h.queryParams,skipBrowserRedirect:!0});return await _request(this.fetch,"GET",it,{headers:this.headers,jwt:(b=(_=rt.session)===null||_===void 0?void 0:_.access_token)!==null&&b!==void 0?b:void 0})});if(o)throw o;return isBrowser()&&!(!((i=e.options)===null||i===void 0)&&i.skipBrowserRedirect)&&window.location.assign(a==null?void 0:a.url),this._returnResult({data:{provider:e.provider,url:a==null?void 0:a.url},error:null})}catch(a){if(isAuthError(a))return this._returnResult({data:{provider:e.provider,url:null},error:a});throw a}}async linkIdentityIdToken(e){return await this._useSession(async i=>{var a;try{const{error:o,data:{session:c}}=i;if(o)throw o;const{options:d,provider:g,token:h,access_token:_,nonce:b}=e,rt=await _request(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(a=c==null?void 0:c.access_token)!==null&&a!==void 0?a:void 0,body:{provider:g,id_token:h,access_token:_,nonce:b,link_identity:!0,gotrue_meta_security:{captcha_token:d==null?void 0:d.captchaToken}},xform:_sessionResponse}),{data:nt,error:it}=rt;return it?this._returnResult({data:{user:null,session:null},error:it}):!nt||!nt.session||!nt.user?this._returnResult({data:{user:null,session:null},error:new AuthInvalidTokenResponseError}):(nt.session&&(await this._saveSession(nt.session),await this._notifyAllSubscribers("USER_UPDATED",nt.session)),this._returnResult({data:nt,error:it}))}catch(o){if(isAuthError(o))return this._returnResult({data:{user:null,session:null},error:o});throw o}})}async unlinkIdentity(e){try{return await this._useSession(async i=>{var a,o;const{data:c,error:d}=i;if(d)throw d;return await _request(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(o=(a=c.session)===null||a===void 0?void 0:a.access_token)!==null&&o!==void 0?o:void 0})})}catch(i){if(isAuthError(i))return this._returnResult({data:null,error:i});throw i}}async _refreshAccessToken(e){const i=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(i,"begin");try{const a=Date.now();return await retryable(async o=>(o>0&&await sleep(200*Math.pow(2,o-1)),this._debug(i,"refreshing attempt",o),await _request(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:_sessionResponse})),(o,c)=>{const d=200*Math.pow(2,o);return c&&isAuthRetryableFetchError(c)&&Date.now()+d-a<AUTO_REFRESH_TICK_DURATION_MS})}catch(a){if(this._debug(i,"error",a),isAuthError(a))return this._returnResult({data:{session:null,user:null},error:a});throw a}finally{this._debug(i,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,i){const a=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:i.redirectTo,scopes:i.scopes,queryParams:i.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",i,"url",a),isBrowser()&&!i.skipBrowserRedirect&&window.location.assign(a),{data:{provider:e,url:a},error:null}}async _recoverAndRefresh(){var e,i;const a="#_recoverAndRefresh()";this._debug(a,"begin");try{const o=await getItemAsync(this.storage,this.storageKey);if(o&&this.userStorage){let d=await getItemAsync(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!d&&(d={user:o.user},await setItemAsync(this.userStorage,this.storageKey+"-user",d)),o.user=(e=d==null?void 0:d.user)!==null&&e!==void 0?e:userNotAvailableProxy()}else if(o&&!o.user&&!o.user){const d=await getItemAsync(this.storage,this.storageKey+"-user");d&&(d!=null&&d.user)?(o.user=d.user,await removeItemAsync(this.storage,this.storageKey+"-user"),await setItemAsync(this.storage,this.storageKey,o)):o.user=userNotAvailableProxy()}if(this._debug(a,"session from storage",o),!this._isValidSession(o)){this._debug(a,"session is not valid"),o!==null&&await this._removeSession();return}const c=((i=o.expires_at)!==null&&i!==void 0?i:1/0)*1e3-Date.now()<EXPIRY_MARGIN_MS;if(this._debug(a,`session has${c?"":" not"} expired with margin of ${EXPIRY_MARGIN_MS}s`),c){if(this.autoRefreshToken&&o.refresh_token){const{error:d}=await this._callRefreshToken(o.refresh_token);d&&(console.error(d),isAuthRetryableFetchError(d)||(this._debug(a,"refresh failed with a non-retryable error, removing the session",d),await this._removeSession()))}}else if(o.user&&o.user.__isUserNotAvailableProxy===!0)try{const{data:d,error:g}=await this._getUser(o.access_token);!g&&(d!=null&&d.user)?(o.user=d.user,await this._saveSession(o),await this._notifyAllSubscribers("SIGNED_IN",o)):this._debug(a,"could not get user data, skipping SIGNED_IN notification")}catch(d){console.error("Error getting user data:",d),this._debug(a,"error getting user data, skipping SIGNED_IN notification",d)}else await this._notifyAllSubscribers("SIGNED_IN",o)}catch(o){this._debug(a,"error",o),console.error(o);return}finally{this._debug(a,"end")}}async _callRefreshToken(e){var i,a;if(!e)throw new AuthSessionMissingError;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const o=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(o,"begin");try{this.refreshingDeferred=new Deferred;const{data:c,error:d}=await this._refreshAccessToken(e);if(d)throw d;if(!c.session)throw new AuthSessionMissingError;await this._saveSession(c.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",c.session);const g={data:c.session,error:null};return this.refreshingDeferred.resolve(g),g}catch(c){if(this._debug(o,"error",c),isAuthError(c)){const d={data:null,error:c};return isAuthRetryableFetchError(c)||await this._removeSession(),(i=this.refreshingDeferred)===null||i===void 0||i.resolve(d),d}throw(a=this.refreshingDeferred)===null||a===void 0||a.reject(c),c}finally{this.refreshingDeferred=null,this._debug(o,"end")}}async _notifyAllSubscribers(e,i,a=!0){const o=`#_notifyAllSubscribers(${e})`;this._debug(o,"begin",i,`broadcast = ${a}`);try{this.broadcastChannel&&a&&this.broadcastChannel.postMessage({event:e,session:i});const c=[],d=Array.from(this.stateChangeEmitters.values()).map(async g=>{try{await g.callback(e,i)}catch(h){c.push(h)}});if(await Promise.all(d),c.length>0){for(let g=0;g<c.length;g+=1)console.error(c[g]);throw c[0]}}finally{this._debug(o,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0;const i=Object.assign({},e),a=i.user&&i.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!a&&i.user&&await setItemAsync(this.userStorage,this.storageKey+"-user",{user:i.user});const o=Object.assign({},i);delete o.user;const c=deepClone(o);await setItemAsync(this.storage,this.storageKey,c)}else{const o=deepClone(i);await setItemAsync(this.storage,this.storageKey,o)}}async _removeSession(){this._debug("#_removeSession()"),await removeItemAsync(this.storage,this.storageKey),await removeItemAsync(this.storage,this.storageKey+"-code-verifier"),await removeItemAsync(this.storage,this.storageKey+"-user"),this.userStorage&&await removeItemAsync(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&isBrowser()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(i){console.error("removing visibilitychange callback failed",i)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),AUTO_REFRESH_TICK_DURATION_MS);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async i=>{const{data:{session:a}}=i;if(!a||!a.refresh_token||!a.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const o=Math.floor((a.expires_at*1e3-e)/AUTO_REFRESH_TICK_DURATION_MS);this._debug("#_autoRefreshTokenTick()",`access token expires in ${o} ticks, a tick lasts ${AUTO_REFRESH_TICK_DURATION_MS}ms, refresh threshold is ${AUTO_REFRESH_TICK_THRESHOLD} ticks`),o<=AUTO_REFRESH_TICK_THRESHOLD&&await this._callRefreshToken(a.refresh_token)})}catch(i){console.error("Auto refresh tick failed with error. This is likely a transient error.",i)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof LockAcquireTimeoutError)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!isBrowser()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const i=`#_onVisibilityChanged(${e})`;this._debug(i,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(i,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,i,a){const o=[`provider=${encodeURIComponent(i)}`];if(a!=null&&a.redirectTo&&o.push(`redirect_to=${encodeURIComponent(a.redirectTo)}`),a!=null&&a.scopes&&o.push(`scopes=${encodeURIComponent(a.scopes)}`),this.flowType==="pkce"){const[c,d]=await getCodeChallengeAndMethod(this.storage,this.storageKey),g=new URLSearchParams({code_challenge:`${encodeURIComponent(c)}`,code_challenge_method:`${encodeURIComponent(d)}`});o.push(g.toString())}if(a!=null&&a.queryParams){const c=new URLSearchParams(a.queryParams);o.push(c.toString())}return a!=null&&a.skipBrowserRedirect&&o.push(`skip_http_redirect=${a.skipBrowserRedirect}`),`${e}?${o.join("&")}`}async _unenroll(e){try{return await this._useSession(async i=>{var a;const{data:o,error:c}=i;return c?this._returnResult({data:null,error:c}):await _request(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(a=o==null?void 0:o.session)===null||a===void 0?void 0:a.access_token})})}catch(i){if(isAuthError(i))return this._returnResult({data:null,error:i});throw i}}async _enroll(e){try{return await this._useSession(async i=>{var a,o;const{data:c,error:d}=i;if(d)return this._returnResult({data:null,error:d});const g=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:e.factorType==="totp"?{issuer:e.issuer}:{}),{data:h,error:_}=await _request(this.fetch,"POST",`${this.url}/factors`,{body:g,headers:this.headers,jwt:(a=c==null?void 0:c.session)===null||a===void 0?void 0:a.access_token});return _?this._returnResult({data:null,error:_}):(e.factorType==="totp"&&h.type==="totp"&&(!((o=h==null?void 0:h.totp)===null||o===void 0)&&o.qr_code)&&(h.totp.qr_code=`data:image/svg+xml;utf-8,${h.totp.qr_code}`),this._returnResult({data:h,error:null}))})}catch(i){if(isAuthError(i))return this._returnResult({data:null,error:i});throw i}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async i=>{var a;const{data:o,error:c}=i;if(c)return this._returnResult({data:null,error:c});const d=Object.assign({challenge_id:e.challengeId},"webauthn"in e?{webauthn:Object.assign(Object.assign({},e.webauthn),{credential_response:e.webauthn.type==="create"?serializeCredentialCreationResponse(e.webauthn.credential_response):serializeCredentialRequestResponse(e.webauthn.credential_response)})}:{code:e.code}),{data:g,error:h}=await _request(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:d,headers:this.headers,jwt:(a=o==null?void 0:o.session)===null||a===void 0?void 0:a.access_token});return h?this._returnResult({data:null,error:h}):(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+g.expires_in},g)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",g),this._returnResult({data:g,error:h}))})}catch(i){if(isAuthError(i))return this._returnResult({data:null,error:i});throw i}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async i=>{var a;const{data:o,error:c}=i;if(c)return this._returnResult({data:null,error:c});const d=await _request(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:e,headers:this.headers,jwt:(a=o==null?void 0:o.session)===null||a===void 0?void 0:a.access_token});if(d.error)return d;const{data:g}=d;if(g.type!=="webauthn")return{data:g,error:null};switch(g.webauthn.type){case"create":return{data:Object.assign(Object.assign({},g),{webauthn:Object.assign(Object.assign({},g.webauthn),{credential_options:Object.assign(Object.assign({},g.webauthn.credential_options),{publicKey:deserializeCredentialCreationOptions(g.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},g),{webauthn:Object.assign(Object.assign({},g.webauthn),{credential_options:Object.assign(Object.assign({},g.webauthn.credential_options),{publicKey:deserializeCredentialRequestOptions(g.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(i){if(isAuthError(i))return this._returnResult({data:null,error:i});throw i}})}async _challengeAndVerify(e){const{data:i,error:a}=await this._challenge({factorId:e.factorId});return a?this._returnResult({data:null,error:a}):await this._verify({factorId:e.factorId,challengeId:i.id,code:e.code})}async _listFactors(){var e;const{data:{user:i},error:a}=await this.getUser();if(a)return{data:null,error:a};const o={all:[],phone:[],totp:[],webauthn:[]};for(const c of(e=i==null?void 0:i.factors)!==null&&e!==void 0?e:[])o.all.push(c),c.status==="verified"&&o[c.factor_type].push(c);return{data:o,error:null}}async _getAuthenticatorAssuranceLevel(){var e,i;const{data:{session:a},error:o}=await this.getSession();if(o)return this._returnResult({data:null,error:o});if(!a)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:c}=decodeJWT(a.access_token);let d=null;c.aal&&(d=c.aal);let g=d;((i=(e=a.user.factors)===null||e===void 0?void 0:e.filter(b=>b.status==="verified"))!==null&&i!==void 0?i:[]).length>0&&(g="aal2");const _=c.amr||[];return{data:{currentLevel:d,nextLevel:g,currentAuthenticationMethods:_},error:null}}async _getAuthorizationDetails(e){try{return await this._useSession(async i=>{const{data:{session:a},error:o}=i;return o?this._returnResult({data:null,error:o}):a?await _request(this.fetch,"GET",`${this.url}/oauth/authorizations/${e}`,{headers:this.headers,jwt:a.access_token,xform:c=>({data:c,error:null})}):this._returnResult({data:null,error:new AuthSessionMissingError})})}catch(i){if(isAuthError(i))return this._returnResult({data:null,error:i});throw i}}async _approveAuthorization(e,i){try{return await this._useSession(async a=>{const{data:{session:o},error:c}=a;if(c)return this._returnResult({data:null,error:c});if(!o)return this._returnResult({data:null,error:new AuthSessionMissingError});const d=await _request(this.fetch,"POST",`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:o.access_token,body:{action:"approve"},xform:g=>({data:g,error:null})});return d.data&&d.data.redirect_url&&isBrowser()&&!(i!=null&&i.skipBrowserRedirect)&&window.location.assign(d.data.redirect_url),d})}catch(a){if(isAuthError(a))return this._returnResult({data:null,error:a});throw a}}async _denyAuthorization(e,i){try{return await this._useSession(async a=>{const{data:{session:o},error:c}=a;if(c)return this._returnResult({data:null,error:c});if(!o)return this._returnResult({data:null,error:new AuthSessionMissingError});const d=await _request(this.fetch,"POST",`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:o.access_token,body:{action:"deny"},xform:g=>({data:g,error:null})});return d.data&&d.data.redirect_url&&isBrowser()&&!(i!=null&&i.skipBrowserRedirect)&&window.location.assign(d.data.redirect_url),d})}catch(a){if(isAuthError(a))return this._returnResult({data:null,error:a});throw a}}async _listOAuthGrants(){try{return await this._useSession(async e=>{const{data:{session:i},error:a}=e;return a?this._returnResult({data:null,error:a}):i?await _request(this.fetch,"GET",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:i.access_token,xform:o=>({data:o,error:null})}):this._returnResult({data:null,error:new AuthSessionMissingError})})}catch(e){if(isAuthError(e))return this._returnResult({data:null,error:e});throw e}}async _revokeOAuthGrant(e){try{return await this._useSession(async i=>{const{data:{session:a},error:o}=i;return o?this._returnResult({data:null,error:o}):a?await _request(this.fetch,"DELETE",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:a.access_token,query:{client_id:e.clientId},xform:()=>({data:{},error:null})}):this._returnResult({data:null,error:new AuthSessionMissingError})})}catch(i){if(isAuthError(i))return this._returnResult({data:null,error:i});throw i}}async fetchJwk(e,i={keys:[]}){let a=i.keys.find(g=>g.kid===e);if(a)return a;const o=Date.now();if(a=this.jwks.keys.find(g=>g.kid===e),a&&this.jwks_cached_at+JWKS_TTL>o)return a;const{data:c,error:d}=await _request(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(d)throw d;return!c.keys||c.keys.length===0||(this.jwks=c,this.jwks_cached_at=o,a=c.keys.find(g=>g.kid===e),!a)?null:a}async getClaims(e,i={}){try{let a=e;if(!a){const{data:it,error:ot}=await this.getSession();if(ot||!it.session)return this._returnResult({data:null,error:ot});a=it.session.access_token}const{header:o,payload:c,signature:d,raw:{header:g,payload:h}}=decodeJWT(a);i!=null&&i.allowExpired||validateExp(c.exp);const _=!o.alg||o.alg.startsWith("HS")||!o.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(o.kid,i!=null&&i.keys?{keys:i.keys}:i==null?void 0:i.jwks);if(!_){const{error:it}=await this.getUser(a);if(it)throw it;return{data:{claims:c,header:o,signature:d},error:null}}const b=getAlgorithm(o.alg),rt=await crypto.subtle.importKey("jwk",_,b,!0,["verify"]);if(!await crypto.subtle.verify(b,rt,d,stringToUint8Array(`${g}.${h}`)))throw new AuthInvalidJwtError("Invalid JWT signature");return{data:{claims:c,header:o,signature:d},error:null}}catch(a){if(isAuthError(a))return this._returnResult({data:null,error:a});throw a}}}GoTrueClient.nextInstanceID={};const AuthClient=GoTrueClient;class SupabaseAuthClient extends AuthClient{constructor(e){super(e)}}class SupabaseClient{constructor(e,i,a){var o,c,d;this.supabaseUrl=e,this.supabaseKey=i;const g=validateSupabaseUrl(e);if(!i)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",g),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",g),this.storageUrl=new URL("storage/v1",g),this.functionsUrl=new URL("functions/v1",g);const h=`sb-${g.hostname.split(".")[0]}-auth-token`,_={db:DEFAULT_DB_OPTIONS,realtime:DEFAULT_REALTIME_OPTIONS,auth:Object.assign(Object.assign({},DEFAULT_AUTH_OPTIONS),{storageKey:h}),global:DEFAULT_GLOBAL_OPTIONS},b=applySettingDefaults(a??{},_);this.storageKey=(o=b.auth.storageKey)!==null&&o!==void 0?o:"",this.headers=(c=b.global.headers)!==null&&c!==void 0?c:{},b.accessToken?(this.accessToken=b.accessToken,this.auth=new Proxy({},{get:(rt,nt)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(nt)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((d=b.auth)!==null&&d!==void 0?d:{},this.headers,b.global.fetch),this.fetch=fetchWithAuth(i,this._getAccessToken.bind(this),b.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},b.realtime)),this.accessToken&&this.accessToken().then(rt=>this.realtime.setAuth(rt)).catch(rt=>console.warn("Failed to set initial Realtime auth token:",rt)),this.rest=new PostgrestClient(new URL("rest/v1",g).href,{headers:this.headers,schema:b.db.schema,fetch:this.fetch}),this.storage=new StorageClient(this.storageUrl.href,this.headers,this.fetch,a==null?void 0:a.storage),b.accessToken||this._listenForAuthEvents()}get functions(){return new FunctionsClient(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,i={},a={head:!1,get:!1,count:void 0}){return this.rest.rpc(e,i,a)}channel(e,i={config:{}}){return this.realtime.channel(e,i)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var e,i;if(this.accessToken)return await this.accessToken();const{data:a}=await this.auth.getSession();return(i=(e=a.session)===null||e===void 0?void 0:e.access_token)!==null&&i!==void 0?i:this.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:i,detectSessionInUrl:a,storage:o,userStorage:c,storageKey:d,flowType:g,lock:h,debug:_,throwOnError:b},rt,nt){const it={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new SupabaseAuthClient({url:this.authUrl.href,headers:Object.assign(Object.assign({},it),rt),storageKey:d,autoRefreshToken:e,persistSession:i,detectSessionInUrl:a,storage:o,userStorage:c,flowType:g,lock:h,debug:_,throwOnError:b,fetch:nt,hasCustomAuthorizationHeader:Object.keys(this.headers).some(ot=>ot.toLowerCase()==="authorization")})}_initRealtimeClient(e){return new RealtimeClient(this.realtimeUrl.href,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((i,a)=>{this._handleTokenChanged(i,"CLIENT",a==null?void 0:a.access_token)})}_handleTokenChanged(e,i,a){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==a?(this.changedAccessToken=a,this.realtime.setAuth(a)):e==="SIGNED_OUT"&&(this.realtime.setAuth(),i=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const createClient=(s,e,i)=>new SupabaseClient(s,e,i);function shouldShowDeprecationWarning(){if(typeof window<"u"||typeof process>"u")return!1;const s=process.version;if(s==null)return!1;const e=s.match(/^v(\d+)\./);return e?parseInt(e[1],10)<=18:!1}shouldShowDeprecationWarning()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const supabaseUrl="https://oppktobyzoegwuhsxmon.supabase.co",supabaseAnonKey="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im9wcGt0b2J5em9lZ3d1aHN4bW9uIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjM5OTk0MTksImV4cCI6MjA3OTU3NTQxOX0.zeoGDkRuie4E_3SUJAZbUCXa0nZ2us8m0Gwn12RI_yE",supabase=createClient(supabaseUrl,supabaseAnonKey),uploadPDFToStorage=async(s,e)=>{try{const i=`${e}/${s.name}`,{data:a,error:o}=await supabase.storage.from("pdfs").upload(i,s);if(o)throw o;const{data:{publicUrl:c}}=supabase.storage.from("pdfs").getPublicUrl(i);return c}catch(i){throw console.error("Error uploading PDF:",i),i}},uploadImageToStorage=async(s,e,i)=>{try{const a=`${e}/page-${i}.jpg`,{data:o,error:c}=await supabase.storage.from("images").upload(a,s);if(c)throw c;const{data:{publicUrl:d}}=supabase.storage.from("images").getPublicUrl(a);return d}catch(a){throw console.error("Error uploading image:",a),a}},saveNewspaperToSupabase=async s=>{try{const e={name:s.name,date:s.date,total_pages:s.totalPages,actual_pages:s.actualPages,width:s.width,height:s.height,pages:s.pages||[],preview_image:s.previewImage,areas:s.areas||[],created_at:new Date().toISOString(),updated_at:new Date().toISOString()};if(s.id&&s.id!==Date.now().toString()){const{data:i,error:a}=await supabase.from("newspapers").update(e).eq("id",s.id).select();if(a)throw a;return s.id}else{const{data:i,error:a}=await supabase.from("newspapers").insert([e]).select();if(a)throw a;return i[0].id}}catch(e){throw console.error("Error saving newspaper:",e),e}},getNewspapersFromSupabase=async()=>{try{const{data:s,error:e}=await supabase.from("newspapers").select("*").order("date",{ascending:!1});if(e)throw e;return s.map(i=>({id:i.id,name:i.name,date:i.date,totalPages:i.total_pages,actualPages:i.actual_pages,width:i.width,height:i.height,pages:i.pages||[],previewImage:i.preview_image,areas:i.areas||[]}))}catch(s){throw console.error("Error getting newspapers:",s),s}},getNewspaperFromSupabase=async s=>{try{const{data:e,error:i}=await supabase.from("newspapers").select("*").eq("id",s).single();if(i)throw i;return{id:e.id,name:e.name,date:e.date,totalPages:e.total_pages,actualPages:e.actual_pages,width:e.width,height:e.height,pages:e.pages||[],previewImage:e.preview_image,areas:e.areas||[]}}catch(e){return console.error("Error getting newspaper:",e),null}},updateNewspaperAreas=async(s,e)=>{try{const{error:i}=await supabase.from("newspapers").update({areas:e,updated_at:new Date().toISOString()}).eq("id",s);if(i)throw i;return!0}catch(i){throw console.error("Error updating areas:",i),i}},getTodaysNewspaperFromSupabase=async()=>{try{const{data:s,error:e}=await supabase.from("settings").select("*").eq("key","todaysNewspaper").single();if(e&&e.code!=="PGRST116")throw e;return s&&s.newspaper_id?await getNewspaperFromSupabase(s.newspaper_id):null}catch(s){return console.error("Error getting today's newspaper:",s),null}},setTodaysNewspaperInSupabase=async s=>{try{const{error:e}=await supabase.from("settings").upsert({key:"todaysNewspaper",newspaper_id:s,updated_at:new Date().toISOString()});if(e)throw e;return!0}catch(e){throw console.error("Error setting today's newspaper:",e),e}},deleteNewspaperFromSupabase=async s=>{try{const{error:e}=await supabase.from("newspapers").delete().eq("id",s);if(e)throw e;return!0}catch(e){throw console.error("Error deleting newspaper:",e),e}},processImagesForStorage=async(s,e)=>{const i=[];for(let a=0;a<s.length;a++){const o=s[a];try{const d=await(await fetch(o.imageUrl)).blob(),g=await uploadImageToStorage(d,e,o.pageNumber);i.push({...o,imageUrl:g})}catch(c){console.error("Error uploading image:",c),i.push(o)}}return i},saveNewspaper=async(s,e=null)=>{try{console.log("Saving newspaper to Supabase:",s.name);let i={...s};if(e)try{const o=await uploadPDFToStorage(e,s.id);i.pdfUrl=o}catch(o){console.error("PDF upload failed:",o)}return s.pages&&(i.pages=await processImagesForStorage(s.pages,s.id)),delete i.pdfData,await saveNewspaperToSupabase(i)}catch(i){throw console.error("Error saving to Supabase:",i),i}},getNewspapers=async()=>{try{const s=await getNewspapersFromSupabase();return console.log("Retrieved newspapers from Supabase:",s.length),s}catch(s){return console.error("Error getting newspapers from Supabase:",s),[]}},getNewspaperById=async s=>{try{return await getNewspaperFromSupabase(s)}catch(e){return console.error("Error getting newspaper by ID from Supabase:",e),null}},deleteNewspaper=async s=>{try{return await deleteNewspaperFromSupabase(s),!0}catch(e){return console.error("Error deleting newspaper from Supabase:",e),!1}},saveClickableAreas=async(s,e)=>{try{return await updateNewspaperAreas(s,e)}catch(i){return console.error("Error saving areas to Supabase:",i),!1}},getTodaysNewspaper=async()=>{try{return await getTodaysNewspaperFromSupabase()}catch(s){return console.error("Error getting today's newspaper from Supabase:",s),null}},setTodaysNewspaper=async s=>{try{return typeof s=="object"&&s.id?await setTodaysNewspaperInSupabase(s.id):await setTodaysNewspaperInSupabase(s)}catch(e){return console.error("Error setting today's newspaper in Supabase:",e),!1}},getClickableAreas=async s=>{try{const e=await getNewspaperById(s);return(e==null?void 0:e.areas)||[]}catch(e){return console.error("Error getting clickable areas:",e),[]}},publishToday=async s=>{try{return await setTodaysNewspaper(s)}catch(e){return console.error("Error publishing newspaper:",e),!1}},getStorageStatus=()=>({usingFirebase:!0,storageType:"Supabase Cloud Storage"}),NewspaperViewer=({newspaper:s})=>{const[e,i]=reactExports.useState([]),[a,o]=reactExports.useState(null),[c,d]=reactExports.useState(0),[g,h]=reactExports.useState(1),[_,b]=reactExports.useState(!1),rt=reactExports.useRef(null);reactExports.useEffect(()=>{(async()=>{if(s)try{const j=s.areas||await getClickableAreas(s.id)||[];console.log("Loading areas for newspaper:",s.id,"Areas:",j),i(j)}catch(j){console.error("Error loading areas:",j),i([])}})()},[s]);const nt=$=>{console.log("Clicked area data:",$),console.log("Area title:",$.title),console.log("Area content:",$.content),($.title||$.content)&&o($)},it=()=>{o(null)},ot=()=>{s.pages&&c<s.totalPages-1&&d(c+1)},ct=()=>{c>0&&d(c-1)},tt=()=>s.pages&&s.pages[c]?s.pages[c].imageUrl:s.previewImage;return s?jsxs("div",{className:"min-h-screen bg-gray-100",children:[jsx("div",{className:"bg-white shadow-sm border-b",children:jsx("div",{className:"max-w-7xl mx-auto px-4 py-3",children:jsxs("div",{className:"flex justify-between items-center",children:[jsxs("div",{children:[jsx("h1",{className:"text-xl font-bold text-newspaper-blue",children:" "}),jsx("p",{className:"text-sm text-gray-600",children:new Date(s.date).toLocaleDateString("kn-IN")})]}),jsxs("div",{className:"flex items-center gap-2",children:[jsx("button",{onClick:()=>b(!_),className:"bg-gray-200 hover:bg-gray-300 px-3 py-2 rounded text-sm",children:_?"":""}),jsxs("div",{className:"flex items-center gap-1 bg-gray-200 rounded",children:[jsx("button",{onClick:()=>h(Math.max(.5,g-.25)),className:"px-2 py-1 hover:bg-gray-300 rounded-l",children:"-"}),jsxs("span",{className:"px-2 py-1 text-sm",children:[Math.round(g*100),"%"]}),jsx("button",{onClick:()=>h(Math.min(3,g+.25)),className:"px-2 py-1 hover:bg-gray-300 rounded-r",children:"+"})]})]})]})})}),jsxs("div",{className:"flex",children:[_&&s.pages&&jsx("div",{className:"w-64 bg-white shadow-lg h-screen overflow-y-auto",children:jsxs("div",{className:"p-4",children:[jsx("h3",{className:"font-semibold mb-3",children:""}),jsx("div",{className:"space-y-2",children:s.pages.map(($,j)=>jsxs("div",{onClick:()=>d(j),className:`cursor-pointer border-2 rounded p-2 transition-colors ${c===j?"border-newspaper-blue bg-blue-50":"border-gray-200 hover:border-gray-300"}`,children:[jsx("img",{src:$.imageUrl,alt:`Page ${j+1}`,className:"w-full h-auto rounded"}),jsxs("p",{className:"text-xs text-center mt-1",children:[" ",j+1]})]},j))})]})}),jsx("div",{className:"flex-1 overflow-auto",children:jsx("div",{className:"p-4",children:jsx("div",{className:"bg-white rounded-lg shadow-lg overflow-hidden",children:jsxs("div",{className:"relative",style:{transform:`scale(${g})`,transformOrigin:"top left"},children:[jsx("img",{ref:rt,src:tt(),alt:`Newspaper page ${c+1}`,className:"newspaper-viewer-image w-full h-auto"}),e.filter($=>$.pageNumber===c+1).map($=>jsx("div",{className:"absolute cursor-pointer hover:bg-red-500 hover:bg-opacity-20 transition-colors border-2 border-transparent hover:border-red-500",style:{left:$.x,top:$.y,width:Math.abs($.width),height:Math.abs($.height)},onClick:()=>nt($),title:$.title||"   "},$.id))]})})})})]}),s.pages&&s.totalPages>1&&jsx("div",{className:"fixed bottom-0 left-0 right-0 bg-white shadow-lg border-t",children:jsx("div",{className:"max-w-7xl mx-auto px-4 py-3",children:jsxs("div",{className:"flex justify-between items-center",children:[jsxs("button",{onClick:ct,disabled:c===0,className:"bg-newspaper-blue text-white px-4 py-2 rounded hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:[jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M15 19l-7-7 7-7"})})," "]}),jsxs("div",{className:"flex items-center gap-4",children:[jsxs("span",{className:"text-sm font-medium",children:[" ",c+1," / ",s.totalPages]}),jsx("input",{type:"range",min:"0",max:s.totalPages-1,value:c,onChange:$=>d(parseInt($.target.value)),className:"w-32"})]}),jsxs("button",{onClick:ot,disabled:c===s.totalPages-1,className:"bg-newspaper-blue text-white px-4 py-2 rounded hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:[" ",jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 5l7 7-7 7"})})]})]})})}),a&&jsx("div",{className:"fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-50 p-4",children:jsxs("div",{className:"bg-white rounded-lg w-full max-w-5xl max-h-[95vh] overflow-hidden flex flex-col",children:[jsxs("div",{className:"flex justify-between items-center p-4 border-b bg-newspaper-blue text-white",children:[jsx("h3",{className:"text-xl font-bold",children:a.title||""}),jsx("button",{onClick:it,className:"text-white hover:text-gray-200 text-2xl font-bold w-8 h-8 flex items-center justify-center rounded hover:bg-blue-700",children:""})]}),jsxs("div",{className:"flex-1 overflow-y-auto p-6",children:[jsx("div",{className:"mb-4",children:jsx(CroppedImage,{sourceImage:tt(),area:a,alt:a.title||""})}),a.imageUrl&&jsx("div",{className:"mb-4",children:jsx("img",{src:a.imageUrl,alt:a.title,className:"w-full h-auto rounded-lg",onError:$=>{$.target.style.display="none"}})}),jsx("div",{className:"text-gray-800 leading-relaxed whitespace-pre-wrap",children:a.content||"   ."})]}),jsx("div",{className:"p-4 border-t bg-gray-50 text-center",children:jsx("button",{onClick:it,className:"bg-newspaper-red text-white px-8 py-2 rounded-lg hover:bg-red-700 transition-colors font-medium",children:""})})]})})]}):jsxs("div",{className:"bg-white rounded-lg shadow-md p-8 text-center",children:[jsx("div",{className:"text-gray-500 mb-4",children:jsx("svg",{className:"mx-auto h-16 w-16 mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19 20H5a2 2 0 01-2-2V6a2 2 0 012-2h10a2 2 0 012 2v1m2 13a2 2 0 01-2-2V7m2 13a2 2 0 002-2V9a2 2 0 00-2-2h-2m-4-3H9M7 16h6M7 8h6v4H7V8z"})})}),jsx("h3",{className:"text-xl font-semibold text-gray-700 mb-2",children:"  "}),jsx("p",{className:"text-gray-600",children:"     "})]})},CroppedImage=({sourceImage:s,area:e,alt:i})=>{const a=React.useRef(null),o=React.useRef(null),[c,d]=reactExports.useState(null);return reactExports.useEffect(()=>{s&&e&&setTimeout(()=>{const h=a.current,_=h.getContext("2d"),b=new Image;b.onload=()=>{const rt=document.querySelector(".newspaper-viewer-image");if(!rt)return;const nt=b.naturalWidth/rt.clientWidth,it=b.naturalHeight/rt.clientHeight,ot=Math.min(e.x,e.x+e.width)*nt,ct=Math.min(e.y,e.y+e.height)*it,tt=Math.abs(e.width)*nt,$=Math.abs(e.height)*it,j=2;h.width=tt*j,h.height=$*j,_.imageSmoothingEnabled=!0,_.imageSmoothingQuality="high",_.scale(j,j),_.drawImage(b,ot,ct,tt,$,0,0,tt,$),d(h.toDataURL("image/png",1))},b.crossOrigin="anonymous",b.src=s},100)},[s,e]),jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[jsx("canvas",{ref:a,style:{display:"none"}}),c?jsx("img",{ref:o,src:c,alt:i,className:"max-w-full h-auto mx-auto rounded border border-gray-300 shadow-sm bg-white",style:{maxHeight:"400px"}}):jsx("div",{className:"text-center py-4 text-gray-500",children:"Loading cropped image..."})]})},NewsPage=()=>{const{newspaperId:s}=useParams(),[e,i]=reactExports.useState(null),[a,o]=reactExports.useState(!0);return reactExports.useEffect(()=>{(async()=>{try{let d;s?d=await getNewspaperById(s):d=await getTodaysNewspaper(),i(d)}catch(d){console.error("Error loading newspaper:",d)}finally{o(!1)}})()},[s]),a?jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:jsxs("div",{className:"text-center",children:[jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-newspaper-blue mx-auto mb-4"}),jsx("p",{className:"text-gray-600",children:"  ..."})]})}):jsx("div",{className:"min-h-screen bg-gray-50",children:jsx("div",{className:"max-w-7xl mx-auto px-4 py-6 sm:py-8",children:jsx(NewspaperViewer,{newspaper:e})})})},Archive=()=>{const[s,e]=reactExports.useState([]),[i,a]=reactExports.useState([]),[o,c]=reactExports.useState(""),[d,g]=reactExports.useState("date-desc");reactExports.useEffect(()=>{(async()=>{try{const b=await getNewspapers();e(b),a(b)}catch(b){console.error("Error loading newspapers:",b),e([]),a([])}})()},[]),reactExports.useEffect(()=>{let _=s.filter(b=>b.name.toLowerCase().includes(o.toLowerCase()));_.sort((b,rt)=>{switch(d){case"date-desc":return new Date(rt.date)-new Date(b.date);case"date-asc":return new Date(b.date)-new Date(rt.date);case"name-asc":return b.name.localeCompare(rt.name);case"name-desc":return rt.name.localeCompare(b.name);default:return 0}}),a(_)},[s,o,d]);const h=_=>new Date(_).toLocaleDateString("kn-IN",{year:"numeric",month:"long",day:"numeric"});return jsx("div",{className:"min-h-screen bg-gray-50",children:jsxs("div",{className:"max-w-7xl mx-auto px-4 py-6 sm:py-8",children:[jsxs("div",{className:"mb-6 sm:mb-8",children:[jsx("h1",{className:"text-2xl sm:text-3xl font-bold text-newspaper-blue mb-1 sm:mb-2",children:" "}),jsx("p",{className:"text-sm sm:text-base text-gray-600",children:"    "})]}),jsx("div",{className:"bg-white rounded-lg shadow-md p-4 sm:p-6 mb-4 sm:mb-6",children:jsxs("div",{className:"flex flex-col sm:flex-row gap-3 sm:gap-4",children:[jsxs("div",{className:"flex-1",children:[jsx("label",{className:"block text-xs sm:text-sm font-medium text-gray-700 mb-1 sm:mb-2",children:""}),jsxs("div",{className:"relative",children:[jsx("input",{type:"text",value:o,onChange:_=>c(_.target.value),placeholder:"  ...",className:"w-full pl-8 sm:pl-10 pr-3 sm:pr-4 py-2 text-sm border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-newspaper-blue"}),jsx("svg",{className:"absolute left-2 sm:left-3 top-2.5 h-4 w-4 sm:h-5 sm:w-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})]})]}),jsxs("div",{className:"sm:w-40 md:w-48",children:[jsx("label",{className:"block text-xs sm:text-sm font-medium text-gray-700 mb-1 sm:mb-2",children:""}),jsxs("select",{value:d,onChange:_=>g(_.target.value),className:"w-full px-2 sm:px-3 py-2 text-sm border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-newspaper-blue",children:[jsx("option",{value:"date-desc",children:" "}),jsx("option",{value:"date-asc",children:" "}),jsx("option",{value:"name-asc",children:" (-)"}),jsx("option",{value:"name-desc",children:" (-)"})]})]})]})}),jsx("div",{className:"mb-3 sm:mb-4",children:jsxs("p",{className:"text-sm sm:text-base text-gray-600",children:[i.length,"  "]})}),i.length===0?jsxs("div",{className:"bg-white rounded-lg shadow-md p-8 text-center",children:[jsx("div",{className:"text-gray-400 mb-4",children:jsx("svg",{className:"mx-auto h-16 w-16",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19 20H5a2 2 0 01-2-2V6a2 2 0 012-2h10a2 2 0 012 2v1m2 13a2 2 0 01-2-2V7m2 13a2 2 0 002-2V9a2 2 0 00-2-2h-2m-4-3H9M7 16h6M7 8h6v4H7V8z"})})}),jsx("h3",{className:"text-xl font-semibold text-gray-700 mb-2",children:o?"  ":"  "}),jsx("p",{className:"text-gray-600",children:o?"   ":"    "})]}):jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 sm:gap-6",children:i.map(_=>jsxs("div",{className:"bg-white rounded-lg shadow-md overflow-hidden hover:shadow-lg transition-shadow",children:[jsx("div",{className:"aspect-w-3 aspect-h-4",children:jsx("img",{src:_.previewImage,alt:_.name,className:"w-full h-48 sm:h-64 object-cover"})}),jsxs("div",{className:"p-3 sm:p-4",children:[jsxs("div",{className:"flex items-center mb-2",children:[jsx("div",{className:"w-2 h-2 bg-newspaper-red rounded-full mr-2"}),jsx("span",{className:"text-xs sm:text-sm text-gray-600",children:h(_.date)})]}),jsx("h3",{className:"font-semibold text-gray-900 mb-2 truncate text-sm sm:text-base",children:_.name}),jsxs("p",{className:"text-xs sm:text-sm text-gray-600 mb-3 sm:mb-4",children:[": ",_.width,"  ",_.height]}),jsxs("div",{className:"flex flex-col sm:flex-row gap-2",children:[jsx(Link,{to:`/newspaper/${_.id}`,className:"flex-1 bg-newspaper-blue text-white text-center py-2 px-3 sm:px-4 rounded-md hover:bg-blue-700 transition-colors text-xs sm:text-sm",children:""}),jsx("a",{href:_.pdfData,download:_.name,className:"flex-1 border border-newspaper-blue text-newspaper-blue text-center py-2 px-3 sm:px-4 rounded-md hover:bg-blue-50 transition-colors text-xs sm:text-sm",children:""})]})]})]},_.id))})]})})};function commonjsRequire(s){throw new Error('Could not dynamically require "'+s+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var pdf={exports:{}};const __viteBrowserExternal={},__viteBrowserExternal$1=Object.freeze(Object.defineProperty({__proto__:null,default:__viteBrowserExternal},Symbol.toStringTag,{value:"Module"})),require$$5=getAugmentedNamespace(__viteBrowserExternal$1);(function(module,exports){(function(e,i){module.exports=e.pdfjsLib=i()})(globalThis,()=>(()=>{var __webpack_modules__=[,(s,e)=>{var jr;Object.defineProperty(e,"__esModule",{value:!0}),e.VerbosityLevel=e.Util=e.UnknownErrorException=e.UnexpectedResponseException=e.TextRenderingMode=e.RenderingIntentFlag=e.PromiseCapability=e.PermissionFlag=e.PasswordResponses=e.PasswordException=e.PageActionEventType=e.OPS=e.MissingPDFException=e.MAX_IMAGE_SIZE_TO_CACHE=e.LINE_FACTOR=e.LINE_DESCENT_FACTOR=e.InvalidPDFException=e.ImageKind=e.IDENTITY_MATRIX=e.FormatError=e.FeatureTest=e.FONT_IDENTITY_MATRIX=e.DocumentActionEventType=e.CMapCompressionType=e.BaseException=e.BASELINE_FACTOR=e.AnnotationType=e.AnnotationReplyType=e.AnnotationPrefix=e.AnnotationMode=e.AnnotationFlag=e.AnnotationFieldFlag=e.AnnotationEditorType=e.AnnotationEditorPrefix=e.AnnotationEditorParamsType=e.AnnotationBorderStyleType=e.AnnotationActionEventType=e.AbortException=void 0,e.assert=$t,e.bytesToString=Rt,e.createValidAbsoluteUrl=nr,e.getModificationDate=hr,e.getUuid=Or,e.getVerbosityLevel=Mt,e.info=qt,e.isArrayBuffer=Zt,e.isArrayEqual=dr,e.isNodeJS=void 0,e.normalizeUnicode=Nr,e.objectFromMap=Qt,e.objectSize=Xt,e.setVerbosityLevel=xt,e.shadow=or,e.string32=Wt,e.stringToBytes=Vt,e.stringToPDFString=tr,e.stringToUTF8String=Bt,e.unreachable=At,e.utf8StringToString=zt,e.warn=Yt;const i=typeof process=="object"&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser");e.isNodeJS=i;const a=[1,0,0,1,0,0];e.IDENTITY_MATRIX=a;const o=[.001,0,0,.001,0,0];e.FONT_IDENTITY_MATRIX=o;const c=1e7;e.MAX_IMAGE_SIZE_TO_CACHE=c;const d=1.35;e.LINE_FACTOR=d;const g=.35;e.LINE_DESCENT_FACTOR=g;const h=g/d;e.BASELINE_FACTOR=h;const _={ANY:1,DISPLAY:2,PRINT:4,SAVE:8,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,OPLIST:256};e.RenderingIntentFlag=_;const b={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3};e.AnnotationMode=b;const rt="pdfjs_internal_editor_";e.AnnotationEditorPrefix=rt;const nt={DISABLE:-1,NONE:0,FREETEXT:3,STAMP:13,INK:15};e.AnnotationEditorType=nt;const it={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23};e.AnnotationEditorParamsType=it;const ot={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048};e.PermissionFlag=ot;const ct={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_ADD_TO_PATH:4,STROKE_ADD_TO_PATH:5,FILL_STROKE_ADD_TO_PATH:6,ADD_TO_PATH:7,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4};e.TextRenderingMode=ct;const tt={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3};e.ImageKind=tt;const $={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26};e.AnnotationType=$;const j={GROUP:"Group",REPLY:"R"};e.AnnotationReplyType=j;const et={INVISIBLE:1,HIDDEN:2,PRINT:4,NOZOOM:8,NOROTATE:16,NOVIEW:32,READONLY:64,LOCKED:128,TOGGLENOVIEW:256,LOCKEDCONTENTS:512};e.AnnotationFlag=et;const ft={READONLY:1,REQUIRED:2,NOEXPORT:4,MULTILINE:4096,PASSWORD:8192,NOTOGGLETOOFF:16384,RADIO:32768,PUSHBUTTON:65536,COMBO:131072,EDIT:262144,SORT:524288,FILESELECT:1048576,MULTISELECT:2097152,DONOTSPELLCHECK:4194304,DONOTSCROLL:8388608,COMB:16777216,RICHTEXT:33554432,RADIOSINUNISON:33554432,COMMITONSELCHANGE:67108864};e.AnnotationFieldFlag=ft;const at={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5};e.AnnotationBorderStyleType=at;const ut={E:"Mouse Enter",X:"Mouse Exit",D:"Mouse Down",U:"Mouse Up",Fo:"Focus",Bl:"Blur",PO:"PageOpen",PC:"PageClose",PV:"PageVisible",PI:"PageInvisible",K:"Keystroke",F:"Format",V:"Validate",C:"Calculate"};e.AnnotationActionEventType=ut;const yt={WC:"WillClose",WS:"WillSave",DS:"DidSave",WP:"WillPrint",DP:"DidPrint"};e.DocumentActionEventType=yt;const mt={O:"PageOpen",C:"PageClose"};e.PageActionEventType=mt;const pt={ERRORS:0,WARNINGS:1,INFOS:5};e.VerbosityLevel=pt;const bt={NONE:0,BINARY:1};e.CMapCompressionType=bt;const _t={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91};e.OPS=_t;const Nt={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};e.PasswordResponses=Nt;let It=pt.WARNINGS;function xt(Jt){Number.isInteger(Jt)&&(It=Jt)}function Mt(){return It}function qt(Jt){It>=pt.INFOS&&console.log(`Info: ${Jt}`)}function Yt(Jt){It>=pt.WARNINGS&&console.log(`Warning: ${Jt}`)}function At(Jt){throw new Error(Jt)}function $t(Jt,Ut){Jt||At(Ut)}function Kt(Jt){switch(Jt==null?void 0:Jt.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function nr(Jt,Ut=null,Lt=null){if(!Jt)return null;try{if(Lt&&typeof Jt=="string"){if(Lt.addDefaultProtocol&&Jt.startsWith("www.")){const ar=Jt.match(/\./g);(ar==null?void 0:ar.length)>=2&&(Jt=`http://${Jt}`)}if(Lt.tryConvertEncoding)try{Jt=Bt(Jt)}catch{}}const sr=Ut?new URL(Jt,Ut):new URL(Jt);if(Kt(sr))return sr}catch{}return null}function or(Jt,Ut,Lt,sr=!1){return Object.defineProperty(Jt,Ut,{value:Lt,enumerable:!sr,configurable:!0,writable:!1}),Lt}const Et=function(){function Ut(Lt,sr){this.constructor===Ut&&At("Cannot initialize BaseException."),this.message=Lt,this.name=sr}return Ut.prototype=new Error,Ut.constructor=Ut,Ut}();e.BaseException=Et;class lt extends Et{constructor(Ut,Lt){super(Ut,"PasswordException"),this.code=Lt}}e.PasswordException=lt;class ht extends Et{constructor(Ut,Lt){super(Ut,"UnknownErrorException"),this.details=Lt}}e.UnknownErrorException=ht;class dt extends Et{constructor(Ut){super(Ut,"InvalidPDFException")}}e.InvalidPDFException=dt;class gt extends Et{constructor(Ut){super(Ut,"MissingPDFException")}}e.MissingPDFException=gt;class vt extends Et{constructor(Ut,Lt){super(Ut,"UnexpectedResponseException"),this.status=Lt}}e.UnexpectedResponseException=vt;class St extends Et{constructor(Ut){super(Ut,"FormatError")}}e.FormatError=St;class kt extends Et{constructor(Ut){super(Ut,"AbortException")}}e.AbortException=kt;function Rt(Jt){(typeof Jt!="object"||(Jt==null?void 0:Jt.length)===void 0)&&At("Invalid argument for bytesToString");const Ut=Jt.length,Lt=8192;if(Ut<Lt)return String.fromCharCode.apply(null,Jt);const sr=[];for(let ar=0;ar<Ut;ar+=Lt){const $r=Math.min(ar+Lt,Ut),Ur=Jt.subarray(ar,$r);sr.push(String.fromCharCode.apply(null,Ur))}return sr.join("")}function Vt(Jt){typeof Jt!="string"&&At("Invalid argument for stringToBytes");const Ut=Jt.length,Lt=new Uint8Array(Ut);for(let sr=0;sr<Ut;++sr)Lt[sr]=Jt.charCodeAt(sr)&255;return Lt}function Wt(Jt){return String.fromCharCode(Jt>>24&255,Jt>>16&255,Jt>>8&255,Jt&255)}function Xt(Jt){return Object.keys(Jt).length}function Qt(Jt){const Ut=Object.create(null);for(const[Lt,sr]of Jt)Ut[Lt]=sr;return Ut}function lr(){const Jt=new Uint8Array(4);return Jt[0]=1,new Uint32Array(Jt.buffer,0,1)[0]===1}function er(){try{return new Function(""),!0}catch{return!1}}class mr{static get isLittleEndian(){return or(this,"isLittleEndian",lr())}static get isEvalSupported(){return or(this,"isEvalSupported",er())}static get isOffscreenCanvasSupported(){return or(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}static get platform(){return typeof navigator>"u"?or(this,"platform",{isWin:!1,isMac:!1}):or(this,"platform",{isWin:navigator.platform.includes("Win"),isMac:navigator.platform.includes("Mac")})}static get isCSSRoundSupported(){var Ut,Lt;return or(this,"isCSSRoundSupported",(Lt=(Ut=globalThis.CSS)==null?void 0:Ut.supports)==null?void 0:Lt.call(Ut,"width: round(1.5px, 1px)"))}}e.FeatureTest=mr;const xr=[...Array(256).keys()].map(Jt=>Jt.toString(16).padStart(2,"0"));class ur{static makeHexColor(Ut,Lt,sr){return`#${xr[Ut]}${xr[Lt]}${xr[sr]}`}static scaleMinMax(Ut,Lt){let sr;Ut[0]?(Ut[0]<0&&(sr=Lt[0],Lt[0]=Lt[1],Lt[1]=sr),Lt[0]*=Ut[0],Lt[1]*=Ut[0],Ut[3]<0&&(sr=Lt[2],Lt[2]=Lt[3],Lt[3]=sr),Lt[2]*=Ut[3],Lt[3]*=Ut[3]):(sr=Lt[0],Lt[0]=Lt[2],Lt[2]=sr,sr=Lt[1],Lt[1]=Lt[3],Lt[3]=sr,Ut[1]<0&&(sr=Lt[2],Lt[2]=Lt[3],Lt[3]=sr),Lt[2]*=Ut[1],Lt[3]*=Ut[1],Ut[2]<0&&(sr=Lt[0],Lt[0]=Lt[1],Lt[1]=sr),Lt[0]*=Ut[2],Lt[1]*=Ut[2]),Lt[0]+=Ut[4],Lt[1]+=Ut[4],Lt[2]+=Ut[5],Lt[3]+=Ut[5]}static transform(Ut,Lt){return[Ut[0]*Lt[0]+Ut[2]*Lt[1],Ut[1]*Lt[0]+Ut[3]*Lt[1],Ut[0]*Lt[2]+Ut[2]*Lt[3],Ut[1]*Lt[2]+Ut[3]*Lt[3],Ut[0]*Lt[4]+Ut[2]*Lt[5]+Ut[4],Ut[1]*Lt[4]+Ut[3]*Lt[5]+Ut[5]]}static applyTransform(Ut,Lt){const sr=Ut[0]*Lt[0]+Ut[1]*Lt[2]+Lt[4],ar=Ut[0]*Lt[1]+Ut[1]*Lt[3]+Lt[5];return[sr,ar]}static applyInverseTransform(Ut,Lt){const sr=Lt[0]*Lt[3]-Lt[1]*Lt[2],ar=(Ut[0]*Lt[3]-Ut[1]*Lt[2]+Lt[2]*Lt[5]-Lt[4]*Lt[3])/sr,$r=(-Ut[0]*Lt[1]+Ut[1]*Lt[0]+Lt[4]*Lt[1]-Lt[5]*Lt[0])/sr;return[ar,$r]}static getAxialAlignedBoundingBox(Ut,Lt){const sr=this.applyTransform(Ut,Lt),ar=this.applyTransform(Ut.slice(2,4),Lt),$r=this.applyTransform([Ut[0],Ut[3]],Lt),Ur=this.applyTransform([Ut[2],Ut[1]],Lt);return[Math.min(sr[0],ar[0],$r[0],Ur[0]),Math.min(sr[1],ar[1],$r[1],Ur[1]),Math.max(sr[0],ar[0],$r[0],Ur[0]),Math.max(sr[1],ar[1],$r[1],Ur[1])]}static inverseTransform(Ut){const Lt=Ut[0]*Ut[3]-Ut[1]*Ut[2];return[Ut[3]/Lt,-Ut[1]/Lt,-Ut[2]/Lt,Ut[0]/Lt,(Ut[2]*Ut[5]-Ut[4]*Ut[3])/Lt,(Ut[4]*Ut[1]-Ut[5]*Ut[0])/Lt]}static singularValueDecompose2dScale(Ut){const Lt=[Ut[0],Ut[2],Ut[1],Ut[3]],sr=Ut[0]*Lt[0]+Ut[1]*Lt[2],ar=Ut[0]*Lt[1]+Ut[1]*Lt[3],$r=Ut[2]*Lt[0]+Ut[3]*Lt[2],Ur=Ut[2]*Lt[1]+Ut[3]*Lt[3],Ft=(sr+Ur)/2,cr=Math.sqrt((sr+Ur)**2-4*(sr*Ur-$r*ar))/2,br=Ft+cr||1,fr=Ft-cr||1;return[Math.sqrt(br),Math.sqrt(fr)]}static normalizeRect(Ut){const Lt=Ut.slice(0);return Ut[0]>Ut[2]&&(Lt[0]=Ut[2],Lt[2]=Ut[0]),Ut[1]>Ut[3]&&(Lt[1]=Ut[3],Lt[3]=Ut[1]),Lt}static intersect(Ut,Lt){const sr=Math.max(Math.min(Ut[0],Ut[2]),Math.min(Lt[0],Lt[2])),ar=Math.min(Math.max(Ut[0],Ut[2]),Math.max(Lt[0],Lt[2]));if(sr>ar)return null;const $r=Math.max(Math.min(Ut[1],Ut[3]),Math.min(Lt[1],Lt[3])),Ur=Math.min(Math.max(Ut[1],Ut[3]),Math.max(Lt[1],Lt[3]));return $r>Ur?null:[sr,$r,ar,Ur]}static bezierBoundingBox(Ut,Lt,sr,ar,$r,Ur,Ft,cr){const br=[],fr=[[],[]];let Sr,Er,Dr,ir,Lr,wr,Tt,st;for(let Dt=0;Dt<2;++Dt){if(Dt===0?(Er=6*Ut-12*sr+6*$r,Sr=-3*Ut+9*sr-9*$r+3*Ft,Dr=3*sr-3*Ut):(Er=6*Lt-12*ar+6*Ur,Sr=-3*Lt+9*ar-9*Ur+3*cr,Dr=3*ar-3*Lt),Math.abs(Sr)<1e-12){if(Math.abs(Er)<1e-12)continue;ir=-Dr/Er,0<ir&&ir<1&&br.push(ir);continue}Tt=Er*Er-4*Dr*Sr,st=Math.sqrt(Tt),!(Tt<0)&&(Lr=(-Er+st)/(2*Sr),0<Lr&&Lr<1&&br.push(Lr),wr=(-Er-st)/(2*Sr),0<wr&&wr<1&&br.push(wr))}let wt=br.length,Ct;const Ot=wt;for(;wt--;)ir=br[wt],Ct=1-ir,fr[0][wt]=Ct*Ct*Ct*Ut+3*Ct*Ct*ir*sr+3*Ct*ir*ir*$r+ir*ir*ir*Ft,fr[1][wt]=Ct*Ct*Ct*Lt+3*Ct*Ct*ir*ar+3*Ct*ir*ir*Ur+ir*ir*ir*cr;return fr[0][Ot]=Ut,fr[1][Ot]=Lt,fr[0][Ot+1]=Ft,fr[1][Ot+1]=cr,fr[0].length=fr[1].length=Ot+2,[Math.min(...fr[0]),Math.min(...fr[1]),Math.max(...fr[0]),Math.max(...fr[1])]}}e.Util=ur;const _r=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,728,711,710,729,733,731,730,732,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,8226,8224,8225,8230,8212,8211,402,8260,8249,8250,8722,8240,8222,8220,8221,8216,8217,8218,8482,64257,64258,321,338,352,376,381,305,322,339,353,382,0,8364];function tr(Jt){if(Jt[0]>=""){let Lt;if(Jt[0]===""&&Jt[1]===""?Lt="utf-16be":Jt[0]===""&&Jt[1]===""?Lt="utf-16le":Jt[0]===""&&Jt[1]===""&&Jt[2]===""&&(Lt="utf-8"),Lt)try{const sr=new TextDecoder(Lt,{fatal:!0}),ar=Vt(Jt);return sr.decode(ar)}catch(sr){Yt(`stringToPDFString: "${sr}".`)}}const Ut=[];for(let Lt=0,sr=Jt.length;Lt<sr;Lt++){const ar=_r[Jt.charCodeAt(Lt)];Ut.push(ar?String.fromCharCode(ar):Jt.charAt(Lt))}return Ut.join("")}function Bt(Jt){return decodeURIComponent(escape(Jt))}function zt(Jt){return unescape(encodeURIComponent(Jt))}function Zt(Jt){return typeof Jt=="object"&&(Jt==null?void 0:Jt.byteLength)!==void 0}function dr(Jt,Ut){if(Jt.length!==Ut.length)return!1;for(let Lt=0,sr=Jt.length;Lt<sr;Lt++)if(Jt[Lt]!==Ut[Lt])return!1;return!0}function hr(Jt=new Date){return[Jt.getUTCFullYear().toString(),(Jt.getUTCMonth()+1).toString().padStart(2,"0"),Jt.getUTCDate().toString().padStart(2,"0"),Jt.getUTCHours().toString().padStart(2,"0"),Jt.getUTCMinutes().toString().padStart(2,"0"),Jt.getUTCSeconds().toString().padStart(2,"0")].join("")}class kr{constructor(){Pt(this,jr,!1);this.promise=new Promise((Ut,Lt)=>{this.resolve=sr=>{Ht(this,jr,!0),Ut(sr)},this.reject=sr=>{Ht(this,jr,!0),Lt(sr)}})}get settled(){return _e(this,jr)}}jr=new WeakMap,e.PromiseCapability=kr;let Pr=null,Tr=null;function Nr(Jt){return Pr||(Pr=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,Tr=new Map([["","t"]])),Jt.replaceAll(Pr,(Ut,Lt,sr)=>Lt?Lt.normalize("NFKC"):Tr.get(sr))}function Or(){if(typeof crypto<"u"&&typeof(crypto==null?void 0:crypto.randomUUID)=="function")return crypto.randomUUID();const Jt=new Uint8Array(32);if(typeof crypto<"u"&&typeof(crypto==null?void 0:crypto.getRandomValues)=="function")crypto.getRandomValues(Jt);else for(let Ut=0;Ut<32;Ut++)Jt[Ut]=Math.floor(Math.random()*255);return Rt(Jt)}const Cr="pdfjs_internal_id_";e.AnnotationPrefix=Cr},(__unused_webpack_module,exports,__w_pdfjs_require__)=>{var s,i,a,o,Yr,d,un,h,_,b,rt,nt,it,ot,ct,tt,dn,j,et,An,at,ut;Object.defineProperty(exports,"__esModule",{value:!0}),exports.RenderTask=exports.PDFWorkerUtil=exports.PDFWorker=exports.PDFPageProxy=exports.PDFDocumentProxy=exports.PDFDocumentLoadingTask=exports.PDFDataRangeTransport=exports.LoopbackPort=exports.DefaultStandardFontDataFactory=exports.DefaultFilterFactory=exports.DefaultCanvasFactory=exports.DefaultCMapReaderFactory=void 0,Object.defineProperty(exports,"SVGGraphics",{enumerable:!0,get:function(){return _displaySvg.SVGGraphics}}),exports.build=void 0,exports.getDocument=getDocument,exports.version=void 0;var _util=__w_pdfjs_require__(1),_annotation_storage=__w_pdfjs_require__(3),_display_utils=__w_pdfjs_require__(6),_font_loader=__w_pdfjs_require__(9),_displayNode_utils=__w_pdfjs_require__(10),_canvas=__w_pdfjs_require__(11),_worker_options=__w_pdfjs_require__(14),_message_handler=__w_pdfjs_require__(15),_metadata=__w_pdfjs_require__(16),_optional_content_config=__w_pdfjs_require__(17),_transport_stream=__w_pdfjs_require__(18),_displayFetch_stream=__w_pdfjs_require__(19),_displayNetwork=__w_pdfjs_require__(22),_displayNode_stream=__w_pdfjs_require__(23),_displaySvg=__w_pdfjs_require__(24),_xfa_text=__w_pdfjs_require__(25);const DEFAULT_RANGE_CHUNK_SIZE=65536,RENDERING_CANCELLED_TIMEOUT=100,DELAYED_CLEANUP_TIMEOUT=5e3,DefaultCanvasFactory=_util.isNodeJS?_displayNode_utils.NodeCanvasFactory:_display_utils.DOMCanvasFactory;exports.DefaultCanvasFactory=DefaultCanvasFactory;const DefaultCMapReaderFactory=_util.isNodeJS?_displayNode_utils.NodeCMapReaderFactory:_display_utils.DOMCMapReaderFactory;exports.DefaultCMapReaderFactory=DefaultCMapReaderFactory;const DefaultFilterFactory=_util.isNodeJS?_displayNode_utils.NodeFilterFactory:_display_utils.DOMFilterFactory;exports.DefaultFilterFactory=DefaultFilterFactory;const DefaultStandardFontDataFactory=_util.isNodeJS?_displayNode_utils.NodeStandardFontDataFactory:_display_utils.DOMStandardFontDataFactory;exports.DefaultStandardFontDataFactory=DefaultStandardFontDataFactory;function getDocument(mt){if(typeof mt=="string"||mt instanceof URL?mt={url:mt}:(0,_util.isArrayBuffer)(mt)&&(mt={data:mt}),typeof mt!="object")throw new Error("Invalid parameter in getDocument, need parameter object.");if(!mt.url&&!mt.data&&!mt.range)throw new Error("Invalid parameter object: need either .data, .range or .url");const pt=new PDFDocumentLoadingTask,{docId:bt}=pt,_t=mt.url?getUrlProp(mt.url):null,Nt=mt.data?getDataProp(mt.data):null,It=mt.httpHeaders||null,xt=mt.withCredentials===!0,Mt=mt.password??null,qt=mt.range instanceof PDFDataRangeTransport?mt.range:null,Yt=Number.isInteger(mt.rangeChunkSize)&&mt.rangeChunkSize>0?mt.rangeChunkSize:DEFAULT_RANGE_CHUNK_SIZE;let At=mt.worker instanceof PDFWorker?mt.worker:null;const $t=mt.verbosity,Kt=typeof mt.docBaseUrl=="string"&&!(0,_display_utils.isDataScheme)(mt.docBaseUrl)?mt.docBaseUrl:null,nr=typeof mt.cMapUrl=="string"?mt.cMapUrl:null,or=mt.cMapPacked!==!1,Et=mt.CMapReaderFactory||DefaultCMapReaderFactory,lt=typeof mt.standardFontDataUrl=="string"?mt.standardFontDataUrl:null,ht=mt.StandardFontDataFactory||DefaultStandardFontDataFactory,dt=mt.stopAtErrors!==!0,gt=Number.isInteger(mt.maxImageSize)&&mt.maxImageSize>-1?mt.maxImageSize:-1,vt=mt.isEvalSupported!==!1,St=typeof mt.isOffscreenCanvasSupported=="boolean"?mt.isOffscreenCanvasSupported:!_util.isNodeJS,kt=Number.isInteger(mt.canvasMaxAreaInBytes)?mt.canvasMaxAreaInBytes:-1,Rt=typeof mt.disableFontFace=="boolean"?mt.disableFontFace:_util.isNodeJS,Vt=mt.fontExtraProperties===!0,Wt=mt.enableXfa===!0,Xt=mt.ownerDocument||globalThis.document,Qt=mt.disableRange===!0,lr=mt.disableStream===!0,er=mt.disableAutoFetch===!0,mr=mt.pdfBug===!0,xr=qt?qt.length:mt.length??NaN,ur=typeof mt.useSystemFonts=="boolean"?mt.useSystemFonts:!_util.isNodeJS&&!Rt,_r=typeof mt.useWorkerFetch=="boolean"?mt.useWorkerFetch:Et===_display_utils.DOMCMapReaderFactory&&ht===_display_utils.DOMStandardFontDataFactory&&nr&&lt&&(0,_display_utils.isValidFetchUrl)(nr,document.baseURI)&&(0,_display_utils.isValidFetchUrl)(lt,document.baseURI),tr=mt.canvasFactory||new DefaultCanvasFactory({ownerDocument:Xt}),Bt=mt.filterFactory||new DefaultFilterFactory({docId:bt,ownerDocument:Xt}),zt=null;(0,_util.setVerbosityLevel)($t);const Zt={canvasFactory:tr,filterFactory:Bt};if(_r||(Zt.cMapReaderFactory=new Et({baseUrl:nr,isCompressed:or}),Zt.standardFontDataFactory=new ht({baseUrl:lt})),!At){const kr={verbosity:$t,port:_worker_options.GlobalWorkerOptions.workerPort};At=kr.port?PDFWorker.fromPort(kr):new PDFWorker(kr),pt._worker=At}const dr={docId:bt,apiVersion:"3.11.174",data:Nt,password:Mt,disableAutoFetch:er,rangeChunkSize:Yt,length:xr,docBaseUrl:Kt,enableXfa:Wt,evaluatorOptions:{maxImageSize:gt,disableFontFace:Rt,ignoreErrors:dt,isEvalSupported:vt,isOffscreenCanvasSupported:St,canvasMaxAreaInBytes:kt,fontExtraProperties:Vt,useSystemFonts:ur,cMapUrl:_r?nr:null,standardFontDataUrl:_r?lt:null}},hr={ignoreErrors:dt,isEvalSupported:vt,disableFontFace:Rt,fontExtraProperties:Vt,enableXfa:Wt,ownerDocument:Xt,disableAutoFetch:er,pdfBug:mr,styleElement:zt};return At.promise.then(function(){if(pt.destroyed)throw new Error("Loading aborted");const kr=_fetchDocument(At,dr),Pr=new Promise(function(Tr){let Nr;qt?Nr=new _transport_stream.PDFDataTransportStream({length:xr,initialData:qt.initialData,progressiveDone:qt.progressiveDone,contentDispositionFilename:qt.contentDispositionFilename,disableRange:Qt,disableStream:lr},qt):Nt||(Nr=(Cr=>_util.isNodeJS?new _displayNode_stream.PDFNodeStream(Cr):(0,_display_utils.isValidFetchUrl)(Cr.url)?new _displayFetch_stream.PDFFetchStream(Cr):new _displayNetwork.PDFNetworkStream(Cr))({url:_t,length:xr,httpHeaders:It,withCredentials:xt,rangeChunkSize:Yt,disableRange:Qt,disableStream:lr})),Tr(Nr)});return Promise.all([kr,Pr]).then(function([Tr,Nr]){if(pt.destroyed)throw new Error("Loading aborted");const Or=new _message_handler.MessageHandler(bt,Tr,At.port),Cr=new WorkerTransport(Or,pt,Nr,hr,Zt);pt._transport=Cr,Or.send("Ready",null)})}).catch(pt._capability.reject),pt}async function _fetchDocument(mt,pt){if(mt.destroyed)throw new Error("Worker was destroyed");const bt=await mt.messageHandler.sendWithPromise("GetDocRequest",pt,pt.data?[pt.data.buffer]:null);if(mt.destroyed)throw new Error("Worker was destroyed");return bt}function getUrlProp(mt){if(mt instanceof URL)return mt.href;try{return new URL(mt,window.location).href}catch{if(_util.isNodeJS&&typeof mt=="string")return mt}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}function getDataProp(mt){if(_util.isNodeJS&&typeof Buffer<"u"&&mt instanceof Buffer)throw new Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(mt instanceof Uint8Array&&mt.byteLength===mt.buffer.byteLength)return mt;if(typeof mt=="string")return(0,_util.stringToBytes)(mt);if(typeof mt=="object"&&!isNaN(mt==null?void 0:mt.length)||(0,_util.isArrayBuffer)(mt))return new Uint8Array(mt);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}const e=class e{constructor(){this._capability=new _util.PromiseCapability,this._transport=null,this._worker=null,this.docId=`d${tn(e,s)._++}`,this.destroyed=!1,this.onPassword=null,this.onProgress=null}get promise(){return this._capability.promise}async destroy(){var pt,bt,_t;this.destroyed=!0;try{(pt=this._worker)!=null&&pt.port&&(this._worker._pendingDestroy=!0),await((bt=this._transport)==null?void 0:bt.destroy())}catch(Nt){throw(_t=this._worker)!=null&&_t.port&&delete this._worker._pendingDestroy,Nt}this._transport=null,this._worker&&(this._worker.destroy(),this._worker=null)}};s=new WeakMap,Pt(e,s,0);let PDFDocumentLoadingTask=e;exports.PDFDocumentLoadingTask=PDFDocumentLoadingTask;class PDFDataRangeTransport{constructor(pt,bt,_t=!1,Nt=null){this.length=pt,this.initialData=bt,this.progressiveDone=_t,this.contentDispositionFilename=Nt,this._rangeListeners=[],this._progressListeners=[],this._progressiveReadListeners=[],this._progressiveDoneListeners=[],this._readyCapability=new _util.PromiseCapability}addRangeListener(pt){this._rangeListeners.push(pt)}addProgressListener(pt){this._progressListeners.push(pt)}addProgressiveReadListener(pt){this._progressiveReadListeners.push(pt)}addProgressiveDoneListener(pt){this._progressiveDoneListeners.push(pt)}onDataRange(pt,bt){for(const _t of this._rangeListeners)_t(pt,bt)}onDataProgress(pt,bt){this._readyCapability.promise.then(()=>{for(const _t of this._progressListeners)_t(pt,bt)})}onDataProgressiveRead(pt){this._readyCapability.promise.then(()=>{for(const bt of this._progressiveReadListeners)bt(pt)})}onDataProgressiveDone(){this._readyCapability.promise.then(()=>{for(const pt of this._progressiveDoneListeners)pt()})}transportReady(){this._readyCapability.resolve()}requestDataRange(pt,bt){(0,_util.unreachable)("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}}exports.PDFDataRangeTransport=PDFDataRangeTransport;class PDFDocumentProxy{constructor(pt,bt){this._pdfInfo=pt,this._transport=bt,Object.defineProperty(this,"getJavaScript",{value:()=>((0,_display_utils.deprecated)("`PDFDocumentProxy.getJavaScript`, please use `PDFDocumentProxy.getJSActions` instead."),this.getJSActions().then(_t=>{if(!_t)return _t;const Nt=[];for(const It in _t)Nt.push(..._t[It]);return Nt}))})}get annotationStorage(){return this._transport.annotationStorage}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return(0,_util.shadow)(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(pt){return this._transport.getPage(pt)}getPageIndex(pt){return this._transport.getPageIndex(pt)}getDestinations(){return this._transport.getDestinations()}getDestination(pt){return this._transport.getDestination(pt)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig(){return this._transport.getOptionalContentConfig()}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(pt=!1){return this._transport.startCleanup(pt||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}exports.PDFDocumentProxy=PDFDocumentProxy;class PDFPageProxy{constructor(pt,bt,_t,Nt=!1){Pt(this,o);Pt(this,d);Pt(this,i,null);Pt(this,a,!1);this._pageIndex=pt,this._pageInfo=bt,this._transport=_t,this._stats=Nt?new _display_utils.StatTimer:null,this._pdfBug=Nt,this.commonObjs=_t.commonObjs,this.objs=new PDFObjects,this._maybeCleanupAfterRender=!1,this._intentStates=new Map,this.destroyed=!1}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:pt,rotation:bt=this.rotate,offsetX:_t=0,offsetY:Nt=0,dontFlip:It=!1}={}){return new _display_utils.PageViewport({viewBox:this.view,scale:pt,rotation:bt,offsetX:_t,offsetY:Nt,dontFlip:It})}getAnnotations({intent:pt="display"}={}){const bt=this._transport.getRenderingIntent(pt);return this._transport.getAnnotations(this._pageIndex,bt.renderingIntent)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get filterFactory(){return this._transport.filterFactory}get isPureXfa(){return(0,_util.shadow)(this,"isPureXfa",!!this._transport._htmlForXfa)}async getXfa(){var pt;return((pt=this._transport._htmlForXfa)==null?void 0:pt.children[this._pageIndex])||null}render({canvasContext:pt,viewport:bt,intent:_t="display",annotationMode:Nt=_util.AnnotationMode.ENABLE,transform:It=null,background:xt=null,optionalContentConfigPromise:Mt=null,annotationCanvasMap:qt=null,pageColors:Yt=null,printAnnotationStorage:At=null}){var ht,dt;(ht=this._stats)==null||ht.time("Overall");const $t=this._transport.getRenderingIntent(_t,Nt,At);Ht(this,a,!1),jt(this,d,un).call(this),Mt||(Mt=this._transport.getOptionalContentConfig());let Kt=this._intentStates.get($t.cacheKey);Kt||(Kt=Object.create(null),this._intentStates.set($t.cacheKey,Kt)),Kt.streamReaderCancelTimeout&&(clearTimeout(Kt.streamReaderCancelTimeout),Kt.streamReaderCancelTimeout=null);const nr=!!($t.renderingIntent&_util.RenderingIntentFlag.PRINT);Kt.displayReadyCapability||(Kt.displayReadyCapability=new _util.PromiseCapability,Kt.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(dt=this._stats)==null||dt.time("Page Request"),this._pumpOperatorList($t));const or=gt=>{var vt,St;Kt.renderTasks.delete(Et),(this._maybeCleanupAfterRender||nr)&&Ht(this,a,!0),jt(this,o,Yr).call(this,!nr),gt?(Et.capability.reject(gt),this._abortOperatorList({intentState:Kt,reason:gt instanceof Error?gt:new Error(gt)})):Et.capability.resolve(),(vt=this._stats)==null||vt.timeEnd("Rendering"),(St=this._stats)==null||St.timeEnd("Overall")},Et=new InternalRenderTask({callback:or,params:{canvasContext:pt,viewport:bt,transform:It,background:xt},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:qt,operatorList:Kt.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!nr,pdfBug:this._pdfBug,pageColors:Yt});(Kt.renderTasks||(Kt.renderTasks=new Set)).add(Et);const lt=Et.task;return Promise.all([Kt.displayReadyCapability.promise,Mt]).then(([gt,vt])=>{var St;if(this.destroyed){or();return}(St=this._stats)==null||St.time("Rendering"),Et.initializeGraphics({transparency:gt,optionalContentConfig:vt}),Et.operatorListChanged()}).catch(or),lt}getOperatorList({intent:pt="display",annotationMode:bt=_util.AnnotationMode.ENABLE,printAnnotationStorage:_t=null}={}){var qt;function Nt(){xt.operatorList.lastChunk&&(xt.opListReadCapability.resolve(xt.operatorList),xt.renderTasks.delete(Mt))}const It=this._transport.getRenderingIntent(pt,bt,_t,!0);let xt=this._intentStates.get(It.cacheKey);xt||(xt=Object.create(null),this._intentStates.set(It.cacheKey,xt));let Mt;return xt.opListReadCapability||(Mt=Object.create(null),Mt.operatorListChanged=Nt,xt.opListReadCapability=new _util.PromiseCapability,(xt.renderTasks||(xt.renderTasks=new Set)).add(Mt),xt.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(qt=this._stats)==null||qt.time("Page Request"),this._pumpOperatorList(It)),xt.opListReadCapability.promise}streamTextContent({includeMarkedContent:pt=!1,disableNormalization:bt=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:pt===!0,disableNormalization:bt===!0},{highWaterMark:100,size(Nt){return Nt.items.length}})}getTextContent(pt={}){if(this._transport._htmlForXfa)return this.getXfa().then(_t=>_xfa_text.XfaText.textContent(_t));const bt=this.streamTextContent(pt);return new Promise(function(_t,Nt){function It(){xt.read().then(function({value:qt,done:Yt}){if(Yt){_t(Mt);return}Object.assign(Mt.styles,qt.styles),Mt.items.push(...qt.items),It()},Nt)}const xt=bt.getReader(),Mt={items:[],styles:Object.create(null)};It()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const pt=[];for(const bt of this._intentStates.values())if(this._abortOperatorList({intentState:bt,reason:new Error("Page was destroyed."),force:!0}),!bt.opListReadCapability)for(const _t of bt.renderTasks)pt.push(_t.completed),_t.cancel();return this.objs.clear(),Ht(this,a,!1),jt(this,d,un).call(this),Promise.all(pt)}cleanup(pt=!1){Ht(this,a,!0);const bt=jt(this,o,Yr).call(this,!1);return pt&&bt&&this._stats&&(this._stats=new _display_utils.StatTimer),bt}_startRenderPage(pt,bt){var Nt,It;const _t=this._intentStates.get(bt);_t&&((Nt=this._stats)==null||Nt.timeEnd("Page Request"),(It=_t.displayReadyCapability)==null||It.resolve(pt))}_renderPageChunk(pt,bt){for(let _t=0,Nt=pt.length;_t<Nt;_t++)bt.operatorList.fnArray.push(pt.fnArray[_t]),bt.operatorList.argsArray.push(pt.argsArray[_t]);bt.operatorList.lastChunk=pt.lastChunk,bt.operatorList.separateAnnots=pt.separateAnnots;for(const _t of bt.renderTasks)_t.operatorListChanged();pt.lastChunk&&jt(this,o,Yr).call(this,!0)}_pumpOperatorList({renderingIntent:pt,cacheKey:bt,annotationStorageSerializable:_t}){const{map:Nt,transfers:It}=_t,Mt=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:pt,cacheKey:bt,annotationStorage:Nt},It).getReader(),qt=this._intentStates.get(bt);qt.streamReader=Mt;const Yt=()=>{Mt.read().then(({value:At,done:$t})=>{if($t){qt.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(At,qt),Yt())},At=>{if(qt.streamReader=null,!this._transport.destroyed){if(qt.operatorList){qt.operatorList.lastChunk=!0;for(const $t of qt.renderTasks)$t.operatorListChanged();jt(this,o,Yr).call(this,!0)}if(qt.displayReadyCapability)qt.displayReadyCapability.reject(At);else if(qt.opListReadCapability)qt.opListReadCapability.reject(At);else throw At}})};Yt()}_abortOperatorList({intentState:pt,reason:bt,force:_t=!1}){if(pt.streamReader){if(pt.streamReaderCancelTimeout&&(clearTimeout(pt.streamReaderCancelTimeout),pt.streamReaderCancelTimeout=null),!_t){if(pt.renderTasks.size>0)return;if(bt instanceof _display_utils.RenderingCancelledException){let Nt=RENDERING_CANCELLED_TIMEOUT;bt.extraDelay>0&&bt.extraDelay<1e3&&(Nt+=bt.extraDelay),pt.streamReaderCancelTimeout=setTimeout(()=>{pt.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:pt,reason:bt,force:!0})},Nt);return}}if(pt.streamReader.cancel(new _util.AbortException(bt.message)).catch(()=>{}),pt.streamReader=null,!this._transport.destroyed){for(const[Nt,It]of this._intentStates)if(It===pt){this._intentStates.delete(Nt);break}this.cleanup()}}}get stats(){return this._stats}}i=new WeakMap,a=new WeakMap,o=new WeakSet,Yr=function(pt=!1){if(jt(this,d,un).call(this),!_e(this,a)||this.destroyed)return!1;if(pt)return Ht(this,i,setTimeout(()=>{Ht(this,i,null),jt(this,o,Yr).call(this,!1)},DELAYED_CLEANUP_TIMEOUT)),!1;for(const{renderTasks:bt,operatorList:_t}of this._intentStates.values())if(bt.size>0||!_t.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),Ht(this,a,!1),!0},d=new WeakSet,un=function(){_e(this,i)&&(clearTimeout(_e(this,i)),Ht(this,i,null))},exports.PDFPageProxy=PDFPageProxy;class LoopbackPort{constructor(){Pt(this,h,new Set);Pt(this,_,Promise.resolve())}postMessage(pt,bt){const _t={data:structuredClone(pt,bt?{transfer:bt}:null)};_e(this,_).then(()=>{for(const Nt of _e(this,h))Nt.call(this,_t)})}addEventListener(pt,bt){_e(this,h).add(bt)}removeEventListener(pt,bt){_e(this,h).delete(bt)}terminate(){_e(this,h).clear()}}h=new WeakMap,_=new WeakMap,exports.LoopbackPort=LoopbackPort;const PDFWorkerUtil={isWorkerDisabled:!1,fallbackWorkerSrc:null,fakeWorkerId:0};exports.PDFWorkerUtil=PDFWorkerUtil;{if(_util.isNodeJS&&typeof commonjsRequire=="function")PDFWorkerUtil.isWorkerDisabled=!0,PDFWorkerUtil.fallbackWorkerSrc="./pdf.worker.js";else if(typeof document=="object"){const mt=(b=document==null?void 0:document.currentScript)==null?void 0:b.src;mt&&(PDFWorkerUtil.fallbackWorkerSrc=mt.replace(/(\.(?:min\.)?js)(\?.*)?$/i,".worker$1$2"))}PDFWorkerUtil.isSameOrigin=function(mt,pt){let bt;try{if(bt=new URL(mt),!bt.origin||bt.origin==="null")return!1}catch{return!1}const _t=new URL(pt,bt);return bt.origin===_t.origin},PDFWorkerUtil.createCDNWrapper=function(mt){const pt=`importScripts("${mt}");`;return URL.createObjectURL(new Blob([pt]))}}const _PDFWorker=class _PDFWorker{constructor({name:mt=null,port:pt=null,verbosity:bt=(0,_util.getVerbosityLevel)()}={}){var _t;if(this.name=mt,this.destroyed=!1,this.verbosity=bt,this._readyCapability=new _util.PromiseCapability,this._port=null,this._webWorker=null,this._messageHandler=null,pt){if((_t=_e(_PDFWorker,rt))!=null&&_t.has(pt))throw new Error("Cannot use more than one PDFWorker per port.");(_e(_PDFWorker,rt)||Ht(_PDFWorker,rt,new WeakMap)).set(pt,this),this._initializeFromPort(pt);return}this._initialize()}get promise(){return this._readyCapability.promise}get port(){return this._port}get messageHandler(){return this._messageHandler}_initializeFromPort(mt){this._port=mt,this._messageHandler=new _message_handler.MessageHandler("main","worker",mt),this._messageHandler.on("ready",function(){}),this._readyCapability.resolve(),this._messageHandler.send("configure",{verbosity:this.verbosity})}_initialize(){if(!PDFWorkerUtil.isWorkerDisabled&&!_PDFWorker._mainThreadWorkerMessageHandler){let{workerSrc:mt}=_PDFWorker;try{PDFWorkerUtil.isSameOrigin(window.location.href,mt)||(mt=PDFWorkerUtil.createCDNWrapper(new URL(mt,window.location).href));const pt=new Worker(mt),bt=new _message_handler.MessageHandler("main","worker",pt),_t=()=>{pt.removeEventListener("error",Nt),bt.destroy(),pt.terminate(),this.destroyed?this._readyCapability.reject(new Error("Worker was destroyed")):this._setupFakeWorker()},Nt=()=>{this._webWorker||_t()};pt.addEventListener("error",Nt),bt.on("test",xt=>{if(pt.removeEventListener("error",Nt),this.destroyed){_t();return}xt?(this._messageHandler=bt,this._port=pt,this._webWorker=pt,this._readyCapability.resolve(),bt.send("configure",{verbosity:this.verbosity})):(this._setupFakeWorker(),bt.destroy(),pt.terminate())}),bt.on("ready",xt=>{if(pt.removeEventListener("error",Nt),this.destroyed){_t();return}try{It()}catch{this._setupFakeWorker()}});const It=()=>{const xt=new Uint8Array;bt.send("test",xt,[xt.buffer])};It();return}catch{(0,_util.info)("The worker has been disabled.")}}this._setupFakeWorker()}_setupFakeWorker(){PDFWorkerUtil.isWorkerDisabled||((0,_util.warn)("Setting up fake worker."),PDFWorkerUtil.isWorkerDisabled=!0),_PDFWorker._setupFakeWorkerGlobal.then(mt=>{if(this.destroyed){this._readyCapability.reject(new Error("Worker was destroyed"));return}const pt=new LoopbackPort;this._port=pt;const bt=`fake${PDFWorkerUtil.fakeWorkerId++}`,_t=new _message_handler.MessageHandler(bt+"_worker",bt,pt);mt.setup(_t,pt);const Nt=new _message_handler.MessageHandler(bt,bt+"_worker",pt);this._messageHandler=Nt,this._readyCapability.resolve(),Nt.send("configure",{verbosity:this.verbosity})}).catch(mt=>{this._readyCapability.reject(new Error(`Setting up fake worker failed: "${mt.message}".`))})}destroy(){var mt;this.destroyed=!0,this._webWorker&&(this._webWorker.terminate(),this._webWorker=null),(mt=_e(_PDFWorker,rt))==null||mt.delete(this._port),this._port=null,this._messageHandler&&(this._messageHandler.destroy(),this._messageHandler=null)}static fromPort(mt){var bt;if(!(mt!=null&&mt.port))throw new Error("PDFWorker.fromPort - invalid method signature.");const pt=(bt=_e(this,rt))==null?void 0:bt.get(mt.port);if(pt){if(pt._pendingDestroy)throw new Error("PDFWorker.fromPort - the worker is being destroyed.\nPlease remember to await `PDFDocumentLoadingTask.destroy()`-calls.");return pt}return new _PDFWorker(mt)}static get workerSrc(){if(_worker_options.GlobalWorkerOptions.workerSrc)return _worker_options.GlobalWorkerOptions.workerSrc;if(PDFWorkerUtil.fallbackWorkerSrc!==null)return _util.isNodeJS||(0,_display_utils.deprecated)('No "GlobalWorkerOptions.workerSrc" specified.'),PDFWorkerUtil.fallbackWorkerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _mainThreadWorkerMessageHandler(){var mt;try{return((mt=globalThis.pdfjsWorker)==null?void 0:mt.WorkerMessageHandler)||null}catch{return null}}static get _setupFakeWorkerGlobal(){const loader=async()=>{const mainWorkerMessageHandler=this._mainThreadWorkerMessageHandler;if(mainWorkerMessageHandler)return mainWorkerMessageHandler;if(_util.isNodeJS&&typeof commonjsRequire=="function"){const worker=eval("require")(this.workerSrc);return worker.WorkerMessageHandler}return await(0,_display_utils.loadScript)(this.workerSrc),window.pdfjsWorker.WorkerMessageHandler};return(0,_util.shadow)(this,"_setupFakeWorkerGlobal",loader())}};rt=new WeakMap,Pt(_PDFWorker,rt,void 0);let PDFWorker=_PDFWorker;exports.PDFWorker=PDFWorker;class WorkerTransport{constructor(pt,bt,_t,Nt,It){Pt(this,tt);Pt(this,nt,new Map);Pt(this,it,new Map);Pt(this,ot,new Map);Pt(this,ct,null);this.messageHandler=pt,this.loadingTask=bt,this.commonObjs=new PDFObjects,this.fontLoader=new _font_loader.FontLoader({ownerDocument:Nt.ownerDocument,styleElement:Nt.styleElement}),this._params=Nt,this.canvasFactory=It.canvasFactory,this.filterFactory=It.filterFactory,this.cMapReaderFactory=It.cMapReaderFactory,this.standardFontDataFactory=It.standardFontDataFactory,this.destroyed=!1,this.destroyCapability=null,this._networkStream=_t,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=new _util.PromiseCapability,this.setupMessageHandler()}get annotationStorage(){return(0,_util.shadow)(this,"annotationStorage",new _annotation_storage.AnnotationStorage)}getRenderingIntent(pt,bt=_util.AnnotationMode.ENABLE,_t=null,Nt=!1){let It=_util.RenderingIntentFlag.DISPLAY,xt=_annotation_storage.SerializableEmpty;switch(pt){case"any":It=_util.RenderingIntentFlag.ANY;break;case"display":break;case"print":It=_util.RenderingIntentFlag.PRINT;break;default:(0,_util.warn)(`getRenderingIntent - invalid intent: ${pt}`)}switch(bt){case _util.AnnotationMode.DISABLE:It+=_util.RenderingIntentFlag.ANNOTATIONS_DISABLE;break;case _util.AnnotationMode.ENABLE:break;case _util.AnnotationMode.ENABLE_FORMS:It+=_util.RenderingIntentFlag.ANNOTATIONS_FORMS;break;case _util.AnnotationMode.ENABLE_STORAGE:It+=_util.RenderingIntentFlag.ANNOTATIONS_STORAGE,xt=(It&_util.RenderingIntentFlag.PRINT&&_t instanceof _annotation_storage.PrintAnnotationStorage?_t:this.annotationStorage).serializable;break;default:(0,_util.warn)(`getRenderingIntent - invalid annotationMode: ${bt}`)}return Nt&&(It+=_util.RenderingIntentFlag.OPLIST),{renderingIntent:It,cacheKey:`${It}_${xt.hash}`,annotationStorageSerializable:xt}}destroy(){var _t;if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=new _util.PromiseCapability,(_t=_e(this,ct))==null||_t.reject(new Error("Worker was destroyed during onPassword callback"));const pt=[];for(const Nt of _e(this,it).values())pt.push(Nt._destroy());_e(this,it).clear(),_e(this,ot).clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const bt=this.messageHandler.sendWithPromise("Terminate",null);return pt.push(bt),Promise.all(pt).then(()=>{var Nt;this.commonObjs.clear(),this.fontLoader.clear(),_e(this,nt).clear(),this.filterFactory.destroy(),(Nt=this._networkStream)==null||Nt.cancelAllRequests(new _util.AbortException("Worker was terminated.")),this.messageHandler&&(this.messageHandler.destroy(),this.messageHandler=null),this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:pt,loadingTask:bt}=this;pt.on("GetReader",(_t,Nt)=>{(0,_util.assert)(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=It=>{this._lastProgress={loaded:It.loaded,total:It.total}},Nt.onPull=()=>{this._fullReader.read().then(function({value:It,done:xt}){if(xt){Nt.close();return}(0,_util.assert)(It instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),Nt.enqueue(new Uint8Array(It),1,[It])}).catch(It=>{Nt.error(It)})},Nt.onCancel=It=>{this._fullReader.cancel(It),Nt.ready.catch(xt=>{if(!this.destroyed)throw xt})}}),pt.on("ReaderHeadersReady",_t=>{const Nt=new _util.PromiseCapability,It=this._fullReader;return It.headersReady.then(()=>{var xt;(!It.isStreamingSupported||!It.isRangeSupported)&&(this._lastProgress&&((xt=bt.onProgress)==null||xt.call(bt,this._lastProgress)),It.onProgress=Mt=>{var qt;(qt=bt.onProgress)==null||qt.call(bt,{loaded:Mt.loaded,total:Mt.total})}),Nt.resolve({isStreamingSupported:It.isStreamingSupported,isRangeSupported:It.isRangeSupported,contentLength:It.contentLength})},Nt.reject),Nt.promise}),pt.on("GetRangeReader",(_t,Nt)=>{(0,_util.assert)(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const It=this._networkStream.getRangeReader(_t.begin,_t.end);if(!It){Nt.close();return}Nt.onPull=()=>{It.read().then(function({value:xt,done:Mt}){if(Mt){Nt.close();return}(0,_util.assert)(xt instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),Nt.enqueue(new Uint8Array(xt),1,[xt])}).catch(xt=>{Nt.error(xt)})},Nt.onCancel=xt=>{It.cancel(xt),Nt.ready.catch(Mt=>{if(!this.destroyed)throw Mt})}}),pt.on("GetDoc",({pdfInfo:_t})=>{this._numPages=_t.numPages,this._htmlForXfa=_t.htmlForXfa,delete _t.htmlForXfa,bt._capability.resolve(new PDFDocumentProxy(_t,this))}),pt.on("DocException",function(_t){let Nt;switch(_t.name){case"PasswordException":Nt=new _util.PasswordException(_t.message,_t.code);break;case"InvalidPDFException":Nt=new _util.InvalidPDFException(_t.message);break;case"MissingPDFException":Nt=new _util.MissingPDFException(_t.message);break;case"UnexpectedResponseException":Nt=new _util.UnexpectedResponseException(_t.message,_t.status);break;case"UnknownErrorException":Nt=new _util.UnknownErrorException(_t.message,_t.details);break;default:(0,_util.unreachable)("DocException - expected a valid Error.")}bt._capability.reject(Nt)}),pt.on("PasswordRequest",_t=>{if(Ht(this,ct,new _util.PromiseCapability),bt.onPassword){const Nt=It=>{It instanceof Error?_e(this,ct).reject(It):_e(this,ct).resolve({password:It})};try{bt.onPassword(Nt,_t.code)}catch(It){_e(this,ct).reject(It)}}else _e(this,ct).reject(new _util.PasswordException(_t.message,_t.code));return _e(this,ct).promise}),pt.on("DataLoaded",_t=>{var Nt;(Nt=bt.onProgress)==null||Nt.call(bt,{loaded:_t.length,total:_t.length}),this.downloadInfoCapability.resolve(_t)}),pt.on("StartRenderPage",_t=>{if(this.destroyed)return;_e(this,it).get(_t.pageIndex)._startRenderPage(_t.transparency,_t.cacheKey)}),pt.on("commonobj",([_t,Nt,It])=>{var xt;if(!this.destroyed&&!this.commonObjs.has(_t))switch(Nt){case"Font":const Mt=this._params;if("error"in It){const At=It.error;(0,_util.warn)(`Error during font loading: ${At}`),this.commonObjs.resolve(_t,At);break}const qt=Mt.pdfBug&&((xt=globalThis.FontInspector)!=null&&xt.enabled)?(At,$t)=>globalThis.FontInspector.fontAdded(At,$t):null,Yt=new _font_loader.FontFaceObject(It,{isEvalSupported:Mt.isEvalSupported,disableFontFace:Mt.disableFontFace,ignoreErrors:Mt.ignoreErrors,inspectFont:qt});this.fontLoader.bind(Yt).catch(At=>pt.sendWithPromise("FontFallback",{id:_t})).finally(()=>{!Mt.fontExtraProperties&&Yt.data&&(Yt.data=null),this.commonObjs.resolve(_t,Yt)});break;case"FontPath":case"Image":case"Pattern":this.commonObjs.resolve(_t,It);break;default:throw new Error(`Got unknown common object type ${Nt}`)}}),pt.on("obj",([_t,Nt,It,xt])=>{var qt;if(this.destroyed)return;const Mt=_e(this,it).get(Nt);if(!Mt.objs.has(_t))switch(It){case"Image":if(Mt.objs.resolve(_t,xt),xt){let Yt;if(xt.bitmap){const{width:At,height:$t}=xt;Yt=At*$t*4}else Yt=((qt=xt.data)==null?void 0:qt.length)||0;Yt>_util.MAX_IMAGE_SIZE_TO_CACHE&&(Mt._maybeCleanupAfterRender=!0)}break;case"Pattern":Mt.objs.resolve(_t,xt);break;default:throw new Error(`Got unknown object type ${It}`)}}),pt.on("DocProgress",_t=>{var Nt;this.destroyed||(Nt=bt.onProgress)==null||Nt.call(bt,{loaded:_t.loaded,total:_t.total})}),pt.on("FetchBuiltInCMap",_t=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.cMapReaderFactory?this.cMapReaderFactory.fetch(_t):Promise.reject(new Error("CMapReaderFactory not initialized, see the `useWorkerFetch` parameter."))),pt.on("FetchStandardFontData",_t=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.standardFontDataFactory?this.standardFontDataFactory.fetch(_t):Promise.reject(new Error("StandardFontDataFactory not initialized, see the `useWorkerFetch` parameter.")))}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){var _t;this.annotationStorage.size<=0&&(0,_util.warn)("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");const{map:pt,transfers:bt}=this.annotationStorage.serializable;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:pt,filename:((_t=this._fullReader)==null?void 0:_t.filename)??null},bt).finally(()=>{this.annotationStorage.resetModified()})}getPage(pt){if(!Number.isInteger(pt)||pt<=0||pt>this._numPages)return Promise.reject(new Error("Invalid page request."));const bt=pt-1,_t=_e(this,ot).get(bt);if(_t)return _t;const Nt=this.messageHandler.sendWithPromise("GetPage",{pageIndex:bt}).then(It=>{if(this.destroyed)throw new Error("Transport destroyed");const xt=new PDFPageProxy(bt,It,this,this._params.pdfBug);return _e(this,it).set(bt,xt),xt});return _e(this,ot).set(bt,Nt),Nt}getPageIndex(pt){return typeof pt!="object"||pt===null||!Number.isInteger(pt.num)||pt.num<0||!Number.isInteger(pt.gen)||pt.gen<0?Promise.reject(new Error("Invalid pageIndex request.")):this.messageHandler.sendWithPromise("GetPageIndex",{num:pt.num,gen:pt.gen})}getAnnotations(pt,bt){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:pt,intent:bt})}getFieldObjects(){return jt(this,tt,dn).call(this,"GetFieldObjects")}hasJSActions(){return jt(this,tt,dn).call(this,"HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(pt){return typeof pt!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:pt})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getDocJSActions(){return jt(this,tt,dn).call(this,"GetDocJSActions")}getPageJSActions(pt){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:pt})}getStructTree(pt){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:pt})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(){return this.messageHandler.sendWithPromise("GetOptionalContentConfig",null).then(pt=>new _optional_content_config.OptionalContentConfig(pt))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){const pt="GetMetadata",bt=_e(this,nt).get(pt);if(bt)return bt;const _t=this.messageHandler.sendWithPromise(pt,null).then(Nt=>{var It,xt;return{info:Nt[0],metadata:Nt[1]?new _metadata.Metadata(Nt[1]):null,contentDispositionFilename:((It=this._fullReader)==null?void 0:It.filename)??null,contentLength:((xt=this._fullReader)==null?void 0:xt.contentLength)??null}});return _e(this,nt).set(pt,_t),_t}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(pt=!1){if(!this.destroyed){await this.messageHandler.sendWithPromise("Cleanup",null);for(const bt of _e(this,it).values())if(!bt.cleanup())throw new Error(`startCleanup: Page ${bt.pageNumber} is currently rendering.`);this.commonObjs.clear(),pt||this.fontLoader.clear(),_e(this,nt).clear(),this.filterFactory.destroy(!0)}}get loadingParams(){const{disableAutoFetch:pt,enableXfa:bt}=this._params;return(0,_util.shadow)(this,"loadingParams",{disableAutoFetch:pt,enableXfa:bt})}}nt=new WeakMap,it=new WeakMap,ot=new WeakMap,ct=new WeakMap,tt=new WeakSet,dn=function(pt,bt=null){const _t=_e(this,nt).get(pt);if(_t)return _t;const Nt=this.messageHandler.sendWithPromise(pt,bt);return _e(this,nt).set(pt,Nt),Nt};class PDFObjects{constructor(){Pt(this,et);Pt(this,j,Object.create(null))}get(pt,bt=null){if(bt){const Nt=jt(this,et,An).call(this,pt);return Nt.capability.promise.then(()=>bt(Nt.data)),null}const _t=_e(this,j)[pt];if(!(_t!=null&&_t.capability.settled))throw new Error(`Requesting object that isn't resolved yet ${pt}.`);return _t.data}has(pt){const bt=_e(this,j)[pt];return(bt==null?void 0:bt.capability.settled)||!1}resolve(pt,bt=null){const _t=jt(this,et,An).call(this,pt);_t.data=bt,_t.capability.resolve()}clear(){var pt;for(const bt in _e(this,j)){const{data:_t}=_e(this,j)[bt];(pt=_t==null?void 0:_t.bitmap)==null||pt.close()}Ht(this,j,Object.create(null))}}j=new WeakMap,et=new WeakSet,An=function(pt){var bt;return(bt=_e(this,j))[pt]||(bt[pt]={capability:new _util.PromiseCapability,data:null})};class RenderTask{constructor(pt){Pt(this,at,null);Ht(this,at,pt),this.onContinue=null}get promise(){return _e(this,at).capability.promise}cancel(pt=0){_e(this,at).cancel(null,pt)}get separateAnnots(){const{separateAnnots:pt}=_e(this,at).operatorList;if(!pt)return!1;const{annotationCanvasMap:bt}=_e(this,at);return pt.form||pt.canvas&&(bt==null?void 0:bt.size)>0}}at=new WeakMap,exports.RenderTask=RenderTask;const yt=class yt{constructor({callback:pt,params:bt,objs:_t,commonObjs:Nt,annotationCanvasMap:It,operatorList:xt,pageIndex:Mt,canvasFactory:qt,filterFactory:Yt,useRequestAnimationFrame:At=!1,pdfBug:$t=!1,pageColors:Kt=null}){this.callback=pt,this.params=bt,this.objs=_t,this.commonObjs=Nt,this.annotationCanvasMap=It,this.operatorListIdx=null,this.operatorList=xt,this._pageIndex=Mt,this.canvasFactory=qt,this.filterFactory=Yt,this._pdfBug=$t,this.pageColors=Kt,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=At===!0&&typeof window<"u",this.cancelled=!1,this.capability=new _util.PromiseCapability,this.task=new RenderTask(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=bt.canvasContext.canvas}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:pt=!1,optionalContentConfig:bt}){var Mt,qt;if(this.cancelled)return;if(this._canvas){if(_e(yt,ut).has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");_e(yt,ut).add(this._canvas)}this._pdfBug&&((Mt=globalThis.StepperManager)!=null&&Mt.enabled)&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{canvasContext:_t,viewport:Nt,transform:It,background:xt}=this.params;this.gfx=new _canvas.CanvasGraphics(_t,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:bt},this.annotationCanvasMap,this.pageColors),this.gfx.beginDrawing({transform:It,viewport:Nt,transparency:pt,background:xt}),this.operatorListIdx=0,this.graphicsReady=!0,(qt=this.graphicsReadyCallback)==null||qt.call(this)}cancel(pt=null,bt=0){var _t;this.running=!1,this.cancelled=!0,(_t=this.gfx)==null||_t.endDrawing(),_e(yt,ut).delete(this._canvas),this.callback(pt||new _display_utils.RenderingCancelledException(`Rendering cancelled, page ${this._pageIndex+1}`,bt))}operatorListChanged(){var pt;if(!this.graphicsReady){this.graphicsReadyCallback||(this.graphicsReadyCallback=this._continueBound);return}(pt=this.stepper)==null||pt.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?window.requestAnimationFrame(()=>{this._nextBound().catch(this._cancelBound)}):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),_e(yt,ut).delete(this._canvas),this.callback())))}};ut=new WeakMap,Pt(yt,ut,new WeakSet);let InternalRenderTask=yt;const version="3.11.174";exports.version=version;const build="ce8716743";exports.build=build},(s,e,i)=>{var _,b,rt,as,it;Object.defineProperty(e,"__esModule",{value:!0}),e.SerializableEmpty=e.PrintAnnotationStorage=e.AnnotationStorage=void 0;var a=i(1),o=i(4),c=i(8);const d=Object.freeze({map:null,hash:"",transfers:void 0});e.SerializableEmpty=d;class g{constructor(){Pt(this,rt);Pt(this,_,!1);Pt(this,b,new Map);this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(ct,tt){const $=_e(this,b).get(ct);return $===void 0?tt:Object.assign(tt,$)}getRawValue(ct){return _e(this,b).get(ct)}remove(ct){if(_e(this,b).delete(ct),_e(this,b).size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function"){for(const tt of _e(this,b).values())if(tt instanceof o.AnnotationEditor)return;this.onAnnotationEditor(null)}}setValue(ct,tt){const $=_e(this,b).get(ct);let j=!1;if($!==void 0)for(const[et,ft]of Object.entries(tt))$[et]!==ft&&(j=!0,$[et]=ft);else j=!0,_e(this,b).set(ct,tt);j&&jt(this,rt,as).call(this),tt instanceof o.AnnotationEditor&&typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(tt.constructor._type)}has(ct){return _e(this,b).has(ct)}getAll(){return _e(this,b).size>0?(0,a.objectFromMap)(_e(this,b)):null}setAll(ct){for(const[tt,$]of Object.entries(ct))this.setValue(tt,$)}get size(){return _e(this,b).size}resetModified(){_e(this,_)&&(Ht(this,_,!1),typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new h(this)}get serializable(){if(_e(this,b).size===0)return d;const ct=new Map,tt=new c.MurmurHash3_64,$=[],j=Object.create(null);let et=!1;for(const[ft,at]of _e(this,b)){const ut=at instanceof o.AnnotationEditor?at.serialize(!1,j):at;ut&&(ct.set(ft,ut),tt.update(`${ft}:${JSON.stringify(ut)}`),et||(et=!!ut.bitmap))}if(et)for(const ft of ct.values())ft.bitmap&&$.push(ft.bitmap);return ct.size>0?{map:ct,hash:tt.hexdigest(),transfers:$}:d}}_=new WeakMap,b=new WeakMap,rt=new WeakSet,as=function(){_e(this,_)||(Ht(this,_,!0),typeof this.onSetModified=="function"&&this.onSetModified())},e.AnnotationStorage=g;class h extends g{constructor(tt){super();Pt(this,it,void 0);const{map:$,hash:j,transfers:et}=tt.serializable,ft=structuredClone($,et?{transfer:et}:null);Ht(this,it,{map:ft,hash:j,transfers:et})}get print(){(0,a.unreachable)("Should not call PrintAnnotationStorage.print")}get serializable(){return _e(this,it)}}it=new WeakMap,e.PrintAnnotationStorage=h},(s,e,i)=>{var h,_,b,rt,nt,it,ot,ct,tt,$,j,et,ft,at,ut,kn,mt,Tn,bt,Cn,Nt,Pn,xt,os,qt,ls,At,cs,Kt,Rn,or,us;Object.defineProperty(e,"__esModule",{value:!0}),e.AnnotationEditor=void 0;var a=i(5),o=i(1),c=i(6);const lt=class lt{constructor(dt){Pt(this,ut);Pt(this,mt);Pt(this,Nt);Pt(this,xt);Pt(this,qt);Pt(this,At);Pt(this,Kt);Pt(this,or);Pt(this,h,"");Pt(this,_,!1);Pt(this,b,null);Pt(this,rt,null);Pt(this,nt,null);Pt(this,it,!1);Pt(this,ot,null);Pt(this,ct,this.focusin.bind(this));Pt(this,tt,this.focusout.bind(this));Pt(this,$,!1);Pt(this,j,!1);Pt(this,et,!1);Br(this,"_initialOptions",Object.create(null));Br(this,"_uiManager",null);Br(this,"_focusEventsAllowed",!0);Br(this,"_l10nPromise",null);Pt(this,ft,!1);Pt(this,at,lt._zIndex++);this.constructor===lt&&(0,o.unreachable)("Cannot initialize AnnotationEditor."),this.parent=dt.parent,this.id=dt.id,this.width=this.height=null,this.pageIndex=dt.parent.pageIndex,this.name=dt.name,this.div=null,this._uiManager=dt.uiManager,this.annotationElementId=null,this._willKeepAspectRatio=!1,this._initialOptions.isCentered=dt.isCentered,this._structTreeParentId=null;const{rotation:gt,rawDims:{pageWidth:vt,pageHeight:St,pageX:kt,pageY:Rt}}=this.parent.viewport;this.rotation=gt,this.pageRotation=(360+gt-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[vt,St],this.pageTranslation=[kt,Rt];const[Vt,Wt]=this.parentDimensions;this.x=dt.x/Vt,this.y=dt.y/Wt,this.isAttachedToDOM=!1,this.deleted=!1}get editorType(){return Object.getPrototypeOf(this).constructor._type}static get _defaultLineColor(){return(0,o.shadow)(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}static deleteAnnotationElement(dt){const gt=new g({id:dt.parent.getNextId(),parent:dt.parent,uiManager:dt._uiManager});gt.annotationElementId=dt.annotationElementId,gt.deleted=!0,gt._uiManager.addToAnnotationStorage(gt)}static initialize(dt,gt=null){if(lt._l10nPromise||(lt._l10nPromise=new Map(["editor_alt_text_button_label","editor_alt_text_edit_button_label","editor_alt_text_decorative_tooltip"].map(St=>[St,dt.get(St)]))),gt!=null&&gt.strings)for(const St of gt.strings)lt._l10nPromise.set(St,dt.get(St));if(lt._borderLineWidth!==-1)return;const vt=getComputedStyle(document.documentElement);lt._borderLineWidth=parseFloat(vt.getPropertyValue("--outline-width"))||0}static updateDefaultParams(dt,gt){}static get defaultPropertiesToUpdate(){return[]}static isHandlingMimeForPasting(dt){return!1}static paste(dt,gt){(0,o.unreachable)("Not implemented")}get propertiesToUpdate(){return[]}get _isDraggable(){return _e(this,ft)}set _isDraggable(dt){var gt;Ht(this,ft,dt),(gt=this.div)==null||gt.classList.toggle("draggable",dt)}center(){const[dt,gt]=this.pageDimensions;switch(this.parentRotation){case 90:this.x-=this.height*gt/(dt*2),this.y+=this.width*dt/(gt*2);break;case 180:this.x+=this.width/2,this.y+=this.height/2;break;case 270:this.x+=this.height*gt/(dt*2),this.y-=this.width*dt/(gt*2);break;default:this.x-=this.width/2,this.y-=this.height/2;break}this.fixAndSetPosition()}addCommands(dt){this._uiManager.addCommands(dt)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=_e(this,at)}setParent(dt){dt!==null&&(this.pageIndex=dt.pageIndex,this.pageDimensions=dt.pageDimensions),this.parent=dt}focusin(dt){this._focusEventsAllowed&&(_e(this,$)?Ht(this,$,!1):this.parent.setSelected(this))}focusout(dt){var vt;if(!this._focusEventsAllowed||!this.isAttachedToDOM)return;const gt=dt.relatedTarget;gt!=null&&gt.closest(`#${this.id}`)||(dt.preventDefault(),(vt=this.parent)!=null&&vt.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}setAt(dt,gt,vt,St){const[kt,Rt]=this.parentDimensions;[vt,St]=this.screenToPageTranslation(vt,St),this.x=(dt+vt)/kt,this.y=(gt+St)/Rt,this.fixAndSetPosition()}translate(dt,gt){jt(this,ut,kn).call(this,this.parentDimensions,dt,gt)}translateInPage(dt,gt){jt(this,ut,kn).call(this,this.pageDimensions,dt,gt),this.div.scrollIntoView({block:"nearest"})}drag(dt,gt){const[vt,St]=this.parentDimensions;if(this.x+=dt/vt,this.y+=gt/St,this.parent&&(this.x<0||this.x>1||this.y<0||this.y>1)){const{x:Xt,y:Qt}=this.div.getBoundingClientRect();this.parent.findNewParent(this,Xt,Qt)&&(this.x-=Math.floor(this.x),this.y-=Math.floor(this.y))}let{x:kt,y:Rt}=this;const[Vt,Wt]=jt(this,mt,Tn).call(this);kt+=Vt,Rt+=Wt,this.div.style.left=`${(100*kt).toFixed(2)}%`,this.div.style.top=`${(100*Rt).toFixed(2)}%`,this.div.scrollIntoView({block:"nearest"})}fixAndSetPosition(){const[dt,gt]=this.pageDimensions;let{x:vt,y:St,width:kt,height:Rt}=this;switch(kt*=dt,Rt*=gt,vt*=dt,St*=gt,this.rotation){case 0:vt=Math.max(0,Math.min(dt-kt,vt)),St=Math.max(0,Math.min(gt-Rt,St));break;case 90:vt=Math.max(0,Math.min(dt-Rt,vt)),St=Math.min(gt,Math.max(kt,St));break;case 180:vt=Math.min(dt,Math.max(kt,vt)),St=Math.min(gt,Math.max(Rt,St));break;case 270:vt=Math.min(dt,Math.max(Rt,vt)),St=Math.max(0,Math.min(gt-kt,St));break}this.x=vt/=dt,this.y=St/=gt;const[Vt,Wt]=jt(this,mt,Tn).call(this);vt+=Vt,St+=Wt;const{style:Xt}=this.div;Xt.left=`${(100*vt).toFixed(2)}%`,Xt.top=`${(100*St).toFixed(2)}%`,this.moveInDOM()}screenToPageTranslation(dt,gt){var vt;return jt(vt=lt,bt,Cn).call(vt,dt,gt,this.parentRotation)}pageTranslationToScreen(dt,gt){var vt;return jt(vt=lt,bt,Cn).call(vt,dt,gt,360-this.parentRotation)}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){const{parentScale:dt,pageDimensions:[gt,vt]}=this,St=gt*dt,kt=vt*dt;return o.FeatureTest.isCSSRoundSupported?[Math.round(St),Math.round(kt)]:[St,kt]}setDims(dt,gt){var kt;const[vt,St]=this.parentDimensions;this.div.style.width=`${(100*dt/vt).toFixed(2)}%`,_e(this,it)||(this.div.style.height=`${(100*gt/St).toFixed(2)}%`),(kt=_e(this,b))==null||kt.classList.toggle("small",dt<lt.SMALL_EDITOR_SIZE||gt<lt.SMALL_EDITOR_SIZE)}fixDims(){const{style:dt}=this.div,{height:gt,width:vt}=dt,St=vt.endsWith("%"),kt=!_e(this,it)&&gt.endsWith("%");if(St&&kt)return;const[Rt,Vt]=this.parentDimensions;St||(dt.width=`${(100*parseFloat(vt)/Rt).toFixed(2)}%`),!_e(this,it)&&!kt&&(dt.height=`${(100*parseFloat(gt)/Vt).toFixed(2)}%`)}getInitialTranslation(){return[0,0]}async addAltTextButton(){if(_e(this,b))return;const dt=Ht(this,b,document.createElement("button"));dt.className="altText";const gt=await lt._l10nPromise.get("editor_alt_text_button_label");dt.textContent=gt,dt.setAttribute("aria-label",gt),dt.tabIndex="0",dt.addEventListener("contextmenu",c.noContextMenu),dt.addEventListener("pointerdown",vt=>vt.stopPropagation()),dt.addEventListener("click",vt=>{vt.preventDefault(),this._uiManager.editAltText(this)},{capture:!0}),dt.addEventListener("keydown",vt=>{vt.target===dt&&vt.key==="Enter"&&(vt.preventDefault(),this._uiManager.editAltText(this))}),jt(this,Kt,Rn).call(this),this.div.append(dt),lt.SMALL_EDITOR_SIZE||(lt.SMALL_EDITOR_SIZE=Math.min(128,Math.round(dt.getBoundingClientRect().width*1.4)))}getClientDimensions(){return this.div.getBoundingClientRect()}get altTextData(){return{altText:_e(this,h),decorative:_e(this,_)}}set altTextData({altText:dt,decorative:gt}){_e(this,h)===dt&&_e(this,_)===gt||(Ht(this,h,dt),Ht(this,_,gt),jt(this,Kt,Rn).call(this))}render(){this.div=document.createElement("div"),this.div.setAttribute("data-editor-rotation",(360-this.rotation)%360),this.div.className=this.name,this.div.setAttribute("id",this.id),this.div.setAttribute("tabIndex",0),this.setInForeground(),this.div.addEventListener("focusin",_e(this,ct)),this.div.addEventListener("focusout",_e(this,tt));const[dt,gt]=this.parentDimensions;this.parentRotation%180!==0&&(this.div.style.maxWidth=`${(100*gt/dt).toFixed(2)}%`,this.div.style.maxHeight=`${(100*dt/gt).toFixed(2)}%`);const[vt,St]=this.getInitialTranslation();return this.translate(vt,St),(0,a.bindEvents)(this,this.div,["pointerdown"]),this.div}pointerdown(dt){const{isMac:gt}=o.FeatureTest.platform;if(dt.button!==0||dt.ctrlKey&&gt){dt.preventDefault();return}Ht(this,$,!0),jt(this,or,us).call(this,dt)}moveInDOM(){var dt;(dt=this.parent)==null||dt.moveEditorInDOM(this)}_setParentAndPosition(dt,gt,vt){dt.changeParent(this),this.x=gt,this.y=vt,this.fixAndSetPosition()}getRect(dt,gt){const vt=this.parentScale,[St,kt]=this.pageDimensions,[Rt,Vt]=this.pageTranslation,Wt=dt/vt,Xt=gt/vt,Qt=this.x*St,lr=this.y*kt,er=this.width*St,mr=this.height*kt;switch(this.rotation){case 0:return[Qt+Wt+Rt,kt-lr-Xt-mr+Vt,Qt+Wt+er+Rt,kt-lr-Xt+Vt];case 90:return[Qt+Xt+Rt,kt-lr+Wt+Vt,Qt+Xt+mr+Rt,kt-lr+Wt+er+Vt];case 180:return[Qt-Wt-er+Rt,kt-lr+Xt+Vt,Qt-Wt+Rt,kt-lr+Xt+mr+Vt];case 270:return[Qt-Xt-mr+Rt,kt-lr-Wt-er+Vt,Qt-Xt+Rt,kt-lr-Wt+Vt];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(dt,gt){const[vt,St,kt,Rt]=dt,Vt=kt-vt,Wt=Rt-St;switch(this.rotation){case 0:return[vt,gt-Rt,Vt,Wt];case 90:return[vt,gt-St,Wt,Vt];case 180:return[kt,gt-St,Vt,Wt];case 270:return[kt,gt-Rt,Wt,Vt];default:throw new Error("Invalid rotation")}}onceAdded(){}isEmpty(){return!1}enableEditMode(){Ht(this,et,!0)}disableEditMode(){Ht(this,et,!1)}isInEditMode(){return _e(this,et)}shouldGetKeyboardEvents(){return!1}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}rebuild(){var dt,gt;(dt=this.div)==null||dt.addEventListener("focusin",_e(this,ct)),(gt=this.div)==null||gt.addEventListener("focusout",_e(this,tt))}serialize(dt=!1,gt=null){(0,o.unreachable)("An editor must be serializable")}static deserialize(dt,gt,vt){const St=new this.prototype.constructor({parent:gt,id:gt.getNextId(),uiManager:vt});St.rotation=dt.rotation;const[kt,Rt]=St.pageDimensions,[Vt,Wt,Xt,Qt]=St.getRectInCurrentCoords(dt.rect,Rt);return St.x=Vt/kt,St.y=Wt/Rt,St.width=Xt/kt,St.height=Qt/Rt,St}remove(){var dt;this.div.removeEventListener("focusin",_e(this,ct)),this.div.removeEventListener("focusout",_e(this,tt)),this.isEmpty()||this.commit(),this.parent?this.parent.remove(this):this._uiManager.removeEditor(this),(dt=_e(this,b))==null||dt.remove(),Ht(this,b,null),Ht(this,rt,null)}get isResizable(){return!1}makeResizable(){this.isResizable&&(jt(this,xt,os).call(this),_e(this,ot).classList.remove("hidden"))}select(){var dt;this.makeResizable(),(dt=this.div)==null||dt.classList.add("selectedEditor")}unselect(){var dt,gt,vt;(dt=_e(this,ot))==null||dt.classList.add("hidden"),(gt=this.div)==null||gt.classList.remove("selectedEditor"),(vt=this.div)!=null&&vt.contains(document.activeElement)&&this._uiManager.currentLayer.div.focus()}updateParams(dt,gt){}disableEditing(){_e(this,b)&&(_e(this,b).hidden=!0)}enableEditing(){_e(this,b)&&(_e(this,b).hidden=!1)}enterInEditMode(){}get contentDiv(){return this.div}get isEditing(){return _e(this,j)}set isEditing(dt){Ht(this,j,dt),this.parent&&(dt?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null))}setAspectRatio(dt,gt){Ht(this,it,!0);const vt=dt/gt,{style:St}=this.div;St.aspectRatio=vt,St.height="auto"}static get MIN_SIZE(){return 16}};h=new WeakMap,_=new WeakMap,b=new WeakMap,rt=new WeakMap,nt=new WeakMap,it=new WeakMap,ot=new WeakMap,ct=new WeakMap,tt=new WeakMap,$=new WeakMap,j=new WeakMap,et=new WeakMap,ft=new WeakMap,at=new WeakMap,ut=new WeakSet,kn=function([dt,gt],vt,St){[vt,St]=this.screenToPageTranslation(vt,St),this.x+=vt/dt,this.y+=St/gt,this.fixAndSetPosition()},mt=new WeakSet,Tn=function(){const[dt,gt]=this.parentDimensions,{_borderLineWidth:vt}=lt,St=vt/dt,kt=vt/gt;switch(this.rotation){case 90:return[-St,kt];case 180:return[St,kt];case 270:return[St,-kt];default:return[-St,-kt]}},bt=new WeakSet,Cn=function(dt,gt,vt){switch(vt){case 90:return[gt,-dt];case 180:return[-dt,-gt];case 270:return[-gt,dt];default:return[dt,gt]}},Nt=new WeakSet,Pn=function(dt){switch(dt){case 90:{const[gt,vt]=this.pageDimensions;return[0,-gt/vt,vt/gt,0]}case 180:return[-1,0,0,-1];case 270:{const[gt,vt]=this.pageDimensions;return[0,gt/vt,-vt/gt,0]}default:return[1,0,0,1]}},xt=new WeakSet,os=function(){if(_e(this,ot))return;Ht(this,ot,document.createElement("div")),_e(this,ot).classList.add("resizers");const dt=["topLeft","topRight","bottomRight","bottomLeft"];this._willKeepAspectRatio||dt.push("topMiddle","middleRight","bottomMiddle","middleLeft");for(const gt of dt){const vt=document.createElement("div");_e(this,ot).append(vt),vt.classList.add("resizer",gt),vt.addEventListener("pointerdown",jt(this,qt,ls).bind(this,gt)),vt.addEventListener("contextmenu",c.noContextMenu)}this.div.prepend(_e(this,ot))},qt=new WeakSet,ls=function(dt,gt){gt.preventDefault();const{isMac:vt}=o.FeatureTest.platform;if(gt.button!==0||gt.ctrlKey&&vt)return;const St=jt(this,At,cs).bind(this,dt),kt=this._isDraggable;this._isDraggable=!1;const Rt={passive:!0,capture:!0};window.addEventListener("pointermove",St,Rt);const Vt=this.x,Wt=this.y,Xt=this.width,Qt=this.height,lr=this.parent.div.style.cursor,er=this.div.style.cursor;this.div.style.cursor=this.parent.div.style.cursor=window.getComputedStyle(gt.target).cursor;const mr=()=>{this._isDraggable=kt,window.removeEventListener("pointerup",mr),window.removeEventListener("blur",mr),window.removeEventListener("pointermove",St,Rt),this.parent.div.style.cursor=lr,this.div.style.cursor=er;const xr=this.x,ur=this.y,_r=this.width,tr=this.height;xr===Vt&&ur===Wt&&_r===Xt&&tr===Qt||this.addCommands({cmd:()=>{this.width=_r,this.height=tr,this.x=xr,this.y=ur;const[Bt,zt]=this.parentDimensions;this.setDims(Bt*_r,zt*tr),this.fixAndSetPosition()},undo:()=>{this.width=Xt,this.height=Qt,this.x=Vt,this.y=Wt;const[Bt,zt]=this.parentDimensions;this.setDims(Bt*Xt,zt*Qt),this.fixAndSetPosition()},mustExec:!0})};window.addEventListener("pointerup",mr),window.addEventListener("blur",mr)},At=new WeakSet,cs=function(dt,gt){const[vt,St]=this.parentDimensions,kt=this.x,Rt=this.y,Vt=this.width,Wt=this.height,Xt=lt.MIN_SIZE/vt,Qt=lt.MIN_SIZE/St,lr=sr=>Math.round(sr*1e4)/1e4,er=jt(this,Nt,Pn).call(this,this.rotation),mr=(sr,ar)=>[er[0]*sr+er[2]*ar,er[1]*sr+er[3]*ar],xr=jt(this,Nt,Pn).call(this,360-this.rotation),ur=(sr,ar)=>[xr[0]*sr+xr[2]*ar,xr[1]*sr+xr[3]*ar];let _r,tr,Bt=!1,zt=!1;switch(dt){case"topLeft":Bt=!0,_r=(sr,ar)=>[0,0],tr=(sr,ar)=>[sr,ar];break;case"topMiddle":_r=(sr,ar)=>[sr/2,0],tr=(sr,ar)=>[sr/2,ar];break;case"topRight":Bt=!0,_r=(sr,ar)=>[sr,0],tr=(sr,ar)=>[0,ar];break;case"middleRight":zt=!0,_r=(sr,ar)=>[sr,ar/2],tr=(sr,ar)=>[0,ar/2];break;case"bottomRight":Bt=!0,_r=(sr,ar)=>[sr,ar],tr=(sr,ar)=>[0,0];break;case"bottomMiddle":_r=(sr,ar)=>[sr/2,ar],tr=(sr,ar)=>[sr/2,0];break;case"bottomLeft":Bt=!0,_r=(sr,ar)=>[0,ar],tr=(sr,ar)=>[sr,0];break;case"middleLeft":zt=!0,_r=(sr,ar)=>[0,ar/2],tr=(sr,ar)=>[sr,ar/2];break}const Zt=_r(Vt,Wt),dr=tr(Vt,Wt);let hr=mr(...dr);const kr=lr(kt+hr[0]),Pr=lr(Rt+hr[1]);let Tr=1,Nr=1,[Or,Cr]=this.screenToPageTranslation(gt.movementX,gt.movementY);if([Or,Cr]=ur(Or/vt,Cr/St),Bt){const sr=Math.hypot(Vt,Wt);Tr=Nr=Math.max(Math.min(Math.hypot(dr[0]-Zt[0]-Or,dr[1]-Zt[1]-Cr)/sr,1/Vt,1/Wt),Xt/Vt,Qt/Wt)}else zt?Tr=Math.max(Xt,Math.min(1,Math.abs(dr[0]-Zt[0]-Or)))/Vt:Nr=Math.max(Qt,Math.min(1,Math.abs(dr[1]-Zt[1]-Cr)))/Wt;const jr=lr(Vt*Tr),Jt=lr(Wt*Nr);hr=mr(...tr(jr,Jt));const Ut=kr-hr[0],Lt=Pr-hr[1];this.width=jr,this.height=Jt,this.x=Ut,this.y=Lt,this.setDims(vt*jr,St*Jt),this.fixAndSetPosition()},Kt=new WeakSet,Rn=async function(){var vt;const dt=_e(this,b);if(!dt)return;if(!_e(this,h)&&!_e(this,_)){dt.classList.remove("done"),(vt=_e(this,rt))==null||vt.remove();return}lt._l10nPromise.get("editor_alt_text_edit_button_label").then(St=>{dt.setAttribute("aria-label",St)});let gt=_e(this,rt);if(!gt){Ht(this,rt,gt=document.createElement("span")),gt.className="tooltip",gt.setAttribute("role","tooltip");const St=gt.id=`alt-text-tooltip-${this.id}`;dt.setAttribute("aria-describedby",St);const kt=100;dt.addEventListener("mouseenter",()=>{Ht(this,nt,setTimeout(()=>{Ht(this,nt,null),_e(this,rt).classList.add("show"),this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",subtype:this.editorType,data:{action:"alt_text_tooltip"}}})},kt))}),dt.addEventListener("mouseleave",()=>{var Rt;clearTimeout(_e(this,nt)),Ht(this,nt,null),(Rt=_e(this,rt))==null||Rt.classList.remove("show")})}dt.classList.add("done"),gt.innerText=_e(this,_)?await lt._l10nPromise.get("editor_alt_text_decorative_tooltip"):_e(this,h),gt.parentNode||dt.append(gt)},or=new WeakSet,us=function(dt){if(!this._isDraggable)return;const gt=this._uiManager.isSelected(this);this._uiManager.setUpDragSession();let vt,St;gt&&(vt={passive:!0,capture:!0},St=Rt=>{const[Vt,Wt]=this.screenToPageTranslation(Rt.movementX,Rt.movementY);this._uiManager.dragSelectedEditors(Vt,Wt)},window.addEventListener("pointermove",St,vt));const kt=()=>{if(window.removeEventListener("pointerup",kt),window.removeEventListener("blur",kt),gt&&window.removeEventListener("pointermove",St,vt),Ht(this,$,!1),!this._uiManager.endDragSession()){const{isMac:Rt}=o.FeatureTest.platform;dt.ctrlKey&&!Rt||dt.shiftKey||dt.metaKey&&Rt?this.parent.toggleSelected(this):this.parent.setSelected(this)}};window.addEventListener("pointerup",kt),window.addEventListener("blur",kt)},Pt(lt,bt),Br(lt,"_borderLineWidth",-1),Br(lt,"_colorManager",new a.ColorManager),Br(lt,"_zIndex",1),Br(lt,"SMALL_EDITOR_SIZE",0);let d=lt;e.AnnotationEditor=d;class g extends d{constructor(dt){super(dt),this.annotationElementId=dt.annotationElementId,this.deleted=!0}serialize(){return{id:this.annotationElementId,deleted:!0,pageIndex:this.pageIndex}}}},(s,e,i)=>{var it,ot,ct,tt,$,Nn,ft,at,ut,yt,mt,ds,_t,Nt,It,xt,Mt,qt,Yt,At,$t,Kt,nr,or,Et,lt,ht,dt,gt,vt,St,kt,Rt,Vt,Wt,Xt,Qt,lr,er,mr,xr,ur,_r,tr,Bt,zt,Zt,hs,hr,On,Pr,In,Nr,hn,Cr,jn,Jt,Ln,Lt,Vr,ar,rn,Ur,fs,cr,ps,fr,Mn,Er,nn,ir,Dn;Object.defineProperty(e,"__esModule",{value:!0}),e.KeyboardManager=e.CommandManager=e.ColorManager=e.AnnotationEditorUIManager=void 0,e.bindEvents=c,e.opacityToHex=d;var a=i(1),o=i(6);function c(Tt,st,wt){for(const Ct of wt)st.addEventListener(Ct,Tt[Ct].bind(Tt))}function d(Tt){return Math.round(Math.min(255,Math.max(1,255*Tt))).toString(16).padStart(2,"0")}class g{constructor(){Pt(this,it,0)}getId(){return`${a.AnnotationEditorPrefix}${tn(this,it)._++}`}}it=new WeakMap;const et=class et{constructor(){Pt(this,$);Pt(this,ot,(0,a.getUuid)());Pt(this,ct,0);Pt(this,tt,null)}static get _isSVGFittingCanvas(){const st='data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>',Ct=new OffscreenCanvas(1,3).getContext("2d"),Ot=new Image;Ot.src=st;const Dt=Ot.decode().then(()=>(Ct.drawImage(Ot,0,0,1,1,0,0,1,3),new Uint32Array(Ct.getImageData(0,0,1,1).data.buffer)[0]===0));return(0,a.shadow)(this,"_isSVGFittingCanvas",Dt)}async getFromFile(st){const{lastModified:wt,name:Ct,size:Ot,type:Dt}=st;return jt(this,$,Nn).call(this,`${wt}_${Ct}_${Ot}_${Dt}`,st)}async getFromUrl(st){return jt(this,$,Nn).call(this,st,st)}async getFromId(st){_e(this,tt)||Ht(this,tt,new Map);const wt=_e(this,tt).get(st);return wt?wt.bitmap?(wt.refCounter+=1,wt):wt.file?this.getFromFile(wt.file):this.getFromUrl(wt.url):null}getSvgUrl(st){const wt=_e(this,tt).get(st);return wt!=null&&wt.isSvg?wt.svgUrl:null}deleteId(st){_e(this,tt)||Ht(this,tt,new Map);const wt=_e(this,tt).get(st);wt&&(wt.refCounter-=1,wt.refCounter===0&&(wt.bitmap=null))}isValidId(st){return st.startsWith(`image_${_e(this,ot)}_`)}};ot=new WeakMap,ct=new WeakMap,tt=new WeakMap,$=new WeakSet,Nn=async function(st,wt){_e(this,tt)||Ht(this,tt,new Map);let Ct=_e(this,tt).get(st);if(Ct===null)return null;if(Ct!=null&&Ct.bitmap)return Ct.refCounter+=1,Ct;try{Ct||(Ct={bitmap:null,id:`image_${_e(this,ot)}_${tn(this,ct)._++}`,refCounter:0,isSvg:!1});let Ot;if(typeof wt=="string"){Ct.url=wt;const Dt=await fetch(wt);if(!Dt.ok)throw new Error(Dt.statusText);Ot=await Dt.blob()}else Ot=Ct.file=wt;if(Ot.type==="image/svg+xml"){const Dt=et._isSVGFittingCanvas,Gt=new FileReader,rr=new Image,gr=new Promise((pr,Rr)=>{rr.onload=()=>{Ct.bitmap=rr,Ct.isSvg=!0,pr()},Gt.onload=async()=>{const vr=Ct.svgUrl=Gt.result;rr.src=await Dt?`${vr}#svgView(preserveAspectRatio(none))`:vr},rr.onerror=Gt.onerror=Rr});Gt.readAsDataURL(Ot),await gr}else Ct.bitmap=await createImageBitmap(Ot);Ct.refCounter=1}catch(Ot){console.error(Ot),Ct=null}return _e(this,tt).set(st,Ct),Ct&&_e(this,tt).set(Ct.id,Ct),Ct};let h=et;class _{constructor(st=128){Pt(this,ft,[]);Pt(this,at,!1);Pt(this,ut,void 0);Pt(this,yt,-1);Ht(this,ut,st)}add({cmd:st,undo:wt,mustExec:Ct,type:Ot=NaN,overwriteIfSameType:Dt=!1,keepUndo:Gt=!1}){if(Ct&&st(),_e(this,at))return;const rr={cmd:st,undo:wt,type:Ot};if(_e(this,yt)===-1){_e(this,ft).length>0&&(_e(this,ft).length=0),Ht(this,yt,0),_e(this,ft).push(rr);return}if(Dt&&_e(this,ft)[_e(this,yt)].type===Ot){Gt&&(rr.undo=_e(this,ft)[_e(this,yt)].undo),_e(this,ft)[_e(this,yt)]=rr;return}const gr=_e(this,yt)+1;gr===_e(this,ut)?_e(this,ft).splice(0,1):(Ht(this,yt,gr),gr<_e(this,ft).length&&_e(this,ft).splice(gr)),_e(this,ft).push(rr)}undo(){_e(this,yt)!==-1&&(Ht(this,at,!0),_e(this,ft)[_e(this,yt)].undo(),Ht(this,at,!1),Ht(this,yt,_e(this,yt)-1))}redo(){_e(this,yt)<_e(this,ft).length-1&&(Ht(this,yt,_e(this,yt)+1),Ht(this,at,!0),_e(this,ft)[_e(this,yt)].cmd(),Ht(this,at,!1))}hasSomethingToUndo(){return _e(this,yt)!==-1}hasSomethingToRedo(){return _e(this,yt)<_e(this,ft).length-1}destroy(){Ht(this,ft,null)}}ft=new WeakMap,at=new WeakMap,ut=new WeakMap,yt=new WeakMap,e.CommandManager=_;class b{constructor(st){Pt(this,mt);this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const{isMac:wt}=a.FeatureTest.platform;for(const[Ct,Ot,Dt={}]of st)for(const Gt of Ct){const rr=Gt.startsWith("mac+");wt&&rr?(this.callbacks.set(Gt.slice(4),{callback:Ot,options:Dt}),this.allKeys.add(Gt.split("+").at(-1))):!wt&&!rr&&(this.callbacks.set(Gt,{callback:Ot,options:Dt}),this.allKeys.add(Gt.split("+").at(-1)))}}exec(st,wt){if(!this.allKeys.has(wt.key))return;const Ct=this.callbacks.get(jt(this,mt,ds).call(this,wt));if(!Ct)return;const{callback:Ot,options:{bubbles:Dt=!1,args:Gt=[],checker:rr=null}}=Ct;rr&&!rr(st,wt)||(Ot.bind(st,...Gt)(),Dt||(wt.stopPropagation(),wt.preventDefault()))}}mt=new WeakSet,ds=function(st){st.altKey&&this.buffer.push("alt"),st.ctrlKey&&this.buffer.push("ctrl"),st.metaKey&&this.buffer.push("meta"),st.shiftKey&&this.buffer.push("shift"),this.buffer.push(st.key);const wt=this.buffer.join("+");return this.buffer.length=0,wt},e.KeyboardManager=b;const bt=class bt{get _colors(){const st=new Map([["CanvasText",null],["Canvas",null]]);return(0,o.getColorValues)(st),(0,a.shadow)(this,"_colors",st)}convert(st){const wt=(0,o.getRGB)(st);if(!window.matchMedia("(forced-colors: active)").matches)return wt;for(const[Ct,Ot]of this._colors)if(Ot.every((Dt,Gt)=>Dt===wt[Gt]))return bt._colorsMapping.get(Ct);return wt}getHexCode(st){const wt=this._colors.get(st);return wt?a.Util.makeHexColor(...wt):st}};Br(bt,"_colorsMapping",new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]));let rt=bt;e.ColorManager=rt;const wr=class wr{constructor(st,wt,Ct,Ot,Dt,Gt){Pt(this,Zt);Pt(this,hr);Pt(this,Pr);Pt(this,Nr);Pt(this,Cr);Pt(this,Jt);Pt(this,Lt);Pt(this,ar);Pt(this,Ur);Pt(this,cr);Pt(this,fr);Pt(this,Er);Pt(this,ir);Pt(this,_t,null);Pt(this,Nt,new Map);Pt(this,It,new Map);Pt(this,xt,null);Pt(this,Mt,null);Pt(this,qt,new _);Pt(this,Yt,0);Pt(this,At,new Set);Pt(this,$t,null);Pt(this,Kt,null);Pt(this,nr,new Set);Pt(this,or,null);Pt(this,Et,new g);Pt(this,lt,!1);Pt(this,ht,!1);Pt(this,dt,null);Pt(this,gt,a.AnnotationEditorType.NONE);Pt(this,vt,new Set);Pt(this,St,null);Pt(this,kt,this.blur.bind(this));Pt(this,Rt,this.focus.bind(this));Pt(this,Vt,this.copy.bind(this));Pt(this,Wt,this.cut.bind(this));Pt(this,Xt,this.paste.bind(this));Pt(this,Qt,this.keydown.bind(this));Pt(this,lr,this.onEditingAction.bind(this));Pt(this,er,this.onPageChanging.bind(this));Pt(this,mr,this.onScaleChanging.bind(this));Pt(this,xr,this.onRotationChanging.bind(this));Pt(this,ur,{isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1});Pt(this,_r,[0,0]);Pt(this,tr,null);Pt(this,Bt,null);Pt(this,zt,null);Ht(this,Bt,st),Ht(this,zt,wt),Ht(this,xt,Ct),this._eventBus=Ot,this._eventBus._on("editingaction",_e(this,lr)),this._eventBus._on("pagechanging",_e(this,er)),this._eventBus._on("scalechanging",_e(this,mr)),this._eventBus._on("rotationchanging",_e(this,xr)),Ht(this,Mt,Dt.annotationStorage),Ht(this,or,Dt.filterFactory),Ht(this,St,Gt),this.viewParameters={realScale:o.PixelsPerInch.PDF_TO_CSS_UNITS,rotation:0}}static get _keyboardManager(){const st=wr.prototype,wt=Dt=>{const{activeElement:Gt}=document;return Gt&&_e(Dt,Bt).contains(Gt)&&Dt.hasSomethingToControl()},Ct=this.TRANSLATE_SMALL,Ot=this.TRANSLATE_BIG;return(0,a.shadow)(this,"_keyboardManager",new b([[["ctrl+a","mac+meta+a"],st.selectAll],[["ctrl+z","mac+meta+z"],st.undo],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],st.redo],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],st.delete],[["Escape","mac+Escape"],st.unselectAll],[["ArrowLeft","mac+ArrowLeft"],st.translateSelectedEditors,{args:[-Ct,0],checker:wt}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],st.translateSelectedEditors,{args:[-Ot,0],checker:wt}],[["ArrowRight","mac+ArrowRight"],st.translateSelectedEditors,{args:[Ct,0],checker:wt}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],st.translateSelectedEditors,{args:[Ot,0],checker:wt}],[["ArrowUp","mac+ArrowUp"],st.translateSelectedEditors,{args:[0,-Ct],checker:wt}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],st.translateSelectedEditors,{args:[0,-Ot],checker:wt}],[["ArrowDown","mac+ArrowDown"],st.translateSelectedEditors,{args:[0,Ct],checker:wt}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],st.translateSelectedEditors,{args:[0,Ot],checker:wt}]]))}destroy(){jt(this,Nr,hn).call(this),jt(this,hr,On).call(this),this._eventBus._off("editingaction",_e(this,lr)),this._eventBus._off("pagechanging",_e(this,er)),this._eventBus._off("scalechanging",_e(this,mr)),this._eventBus._off("rotationchanging",_e(this,xr));for(const st of _e(this,It).values())st.destroy();_e(this,It).clear(),_e(this,Nt).clear(),_e(this,nr).clear(),Ht(this,_t,null),_e(this,vt).clear(),_e(this,qt).destroy(),_e(this,xt).destroy()}get hcmFilter(){return(0,a.shadow)(this,"hcmFilter",_e(this,St)?_e(this,or).addHCMFilter(_e(this,St).foreground,_e(this,St).background):"none")}get direction(){return(0,a.shadow)(this,"direction",getComputedStyle(_e(this,Bt)).direction)}editAltText(st){var wt;(wt=_e(this,xt))==null||wt.editAltText(this,st)}onPageChanging({pageNumber:st}){Ht(this,Yt,st-1)}focusMainContainer(){_e(this,Bt).focus()}findParent(st,wt){for(const Ct of _e(this,It).values()){const{x:Ot,y:Dt,width:Gt,height:rr}=Ct.div.getBoundingClientRect();if(st>=Ot&&st<=Ot+Gt&&wt>=Dt&&wt<=Dt+rr)return Ct}return null}disableUserSelect(st=!1){_e(this,zt).classList.toggle("noUserSelect",st)}addShouldRescale(st){_e(this,nr).add(st)}removeShouldRescale(st){_e(this,nr).delete(st)}onScaleChanging({scale:st}){this.commitOrRemove(),this.viewParameters.realScale=st*o.PixelsPerInch.PDF_TO_CSS_UNITS;for(const wt of _e(this,nr))wt.onScaleChanging()}onRotationChanging({pagesRotation:st}){this.commitOrRemove(),this.viewParameters.rotation=st}addToAnnotationStorage(st){!st.isEmpty()&&_e(this,Mt)&&!_e(this,Mt).has(st.id)&&_e(this,Mt).setValue(st.id,st)}blur(){if(!this.hasSelection)return;const{activeElement:st}=document;for(const wt of _e(this,vt))if(wt.div.contains(st)){Ht(this,dt,[wt,st]),wt._focusEventsAllowed=!1;break}}focus(){if(!_e(this,dt))return;const[st,wt]=_e(this,dt);Ht(this,dt,null),wt.addEventListener("focusin",()=>{st._focusEventsAllowed=!0},{once:!0}),wt.focus()}addEditListeners(){jt(this,Pr,In).call(this),jt(this,Cr,jn).call(this)}removeEditListeners(){jt(this,Nr,hn).call(this),jt(this,Jt,Ln).call(this)}copy(st){var Ct;if(st.preventDefault(),(Ct=_e(this,_t))==null||Ct.commitOrRemove(),!this.hasSelection)return;const wt=[];for(const Ot of _e(this,vt)){const Dt=Ot.serialize(!0);Dt&&wt.push(Dt)}wt.length!==0&&st.clipboardData.setData("application/pdfjs",JSON.stringify(wt))}cut(st){this.copy(st),this.delete()}paste(st){st.preventDefault();const{clipboardData:wt}=st;for(const Dt of wt.items)for(const Gt of _e(this,Kt))if(Gt.isHandlingMimeForPasting(Dt.type)){Gt.paste(Dt,this.currentLayer);return}let Ct=wt.getData("application/pdfjs");if(!Ct)return;try{Ct=JSON.parse(Ct)}catch(Dt){(0,a.warn)(`paste: "${Dt.message}".`);return}if(!Array.isArray(Ct))return;this.unselectAll();const Ot=this.currentLayer;try{const Dt=[];for(const gr of Ct){const pr=Ot.deserialize(gr);if(!pr)return;Dt.push(pr)}const Gt=()=>{for(const gr of Dt)jt(this,fr,Mn).call(this,gr);jt(this,ir,Dn).call(this,Dt)},rr=()=>{for(const gr of Dt)gr.remove()};this.addCommands({cmd:Gt,undo:rr,mustExec:!0})}catch(Dt){(0,a.warn)(`paste: "${Dt.message}".`)}}keydown(st){var wt;(wt=this.getActive())!=null&&wt.shouldGetKeyboardEvents()||wr._keyboardManager.exec(this,st)}onEditingAction(st){["undo","redo","delete","selectAll"].includes(st.name)&&this[st.name]()}setEditingState(st){st?(jt(this,Zt,hs).call(this),jt(this,Pr,In).call(this),jt(this,Cr,jn).call(this),jt(this,Lt,Vr).call(this,{isEditing:_e(this,gt)!==a.AnnotationEditorType.NONE,isEmpty:jt(this,Er,nn).call(this),hasSomethingToUndo:_e(this,qt).hasSomethingToUndo(),hasSomethingToRedo:_e(this,qt).hasSomethingToRedo(),hasSelectedEditor:!1})):(jt(this,hr,On).call(this),jt(this,Nr,hn).call(this),jt(this,Jt,Ln).call(this),jt(this,Lt,Vr).call(this,{isEditing:!1}),this.disableUserSelect(!1))}registerEditorTypes(st){if(!_e(this,Kt)){Ht(this,Kt,st);for(const wt of _e(this,Kt))jt(this,ar,rn).call(this,wt.defaultPropertiesToUpdate)}}getId(){return _e(this,Et).getId()}get currentLayer(){return _e(this,It).get(_e(this,Yt))}getLayer(st){return _e(this,It).get(st)}get currentPageIndex(){return _e(this,Yt)}addLayer(st){_e(this,It).set(st.pageIndex,st),_e(this,lt)?st.enable():st.disable()}removeLayer(st){_e(this,It).delete(st.pageIndex)}updateMode(st,wt=null){if(_e(this,gt)!==st){if(Ht(this,gt,st),st===a.AnnotationEditorType.NONE){this.setEditingState(!1),jt(this,cr,ps).call(this);return}this.setEditingState(!0),jt(this,Ur,fs).call(this),this.unselectAll();for(const Ct of _e(this,It).values())Ct.updateMode(st);if(wt){for(const Ct of _e(this,Nt).values())if(Ct.annotationElementId===wt){this.setSelected(Ct),Ct.enterInEditMode();break}}}}updateToolbar(st){st!==_e(this,gt)&&this._eventBus.dispatch("switchannotationeditormode",{source:this,mode:st})}updateParams(st,wt){if(_e(this,Kt)){if(st===a.AnnotationEditorParamsType.CREATE){this.currentLayer.addNewEditor(st);return}for(const Ct of _e(this,vt))Ct.updateParams(st,wt);for(const Ct of _e(this,Kt))Ct.updateDefaultParams(st,wt)}}enableWaiting(st=!1){if(_e(this,ht)!==st){Ht(this,ht,st);for(const wt of _e(this,It).values())st?wt.disableClick():wt.enableClick(),wt.div.classList.toggle("waiting",st)}}getEditors(st){const wt=[];for(const Ct of _e(this,Nt).values())Ct.pageIndex===st&&wt.push(Ct);return wt}getEditor(st){return _e(this,Nt).get(st)}addEditor(st){_e(this,Nt).set(st.id,st)}removeEditor(st){var wt;_e(this,Nt).delete(st.id),this.unselect(st),(!st.annotationElementId||!_e(this,At).has(st.annotationElementId))&&((wt=_e(this,Mt))==null||wt.remove(st.id))}addDeletedAnnotationElement(st){_e(this,At).add(st.annotationElementId),st.deleted=!0}isDeletedAnnotationElement(st){return _e(this,At).has(st)}removeDeletedAnnotationElement(st){_e(this,At).delete(st.annotationElementId),st.deleted=!1}setActiveEditor(st){_e(this,_t)!==st&&(Ht(this,_t,st),st&&jt(this,ar,rn).call(this,st.propertiesToUpdate))}toggleSelected(st){if(_e(this,vt).has(st)){_e(this,vt).delete(st),st.unselect(),jt(this,Lt,Vr).call(this,{hasSelectedEditor:this.hasSelection});return}_e(this,vt).add(st),st.select(),jt(this,ar,rn).call(this,st.propertiesToUpdate),jt(this,Lt,Vr).call(this,{hasSelectedEditor:!0})}setSelected(st){for(const wt of _e(this,vt))wt!==st&&wt.unselect();_e(this,vt).clear(),_e(this,vt).add(st),st.select(),jt(this,ar,rn).call(this,st.propertiesToUpdate),jt(this,Lt,Vr).call(this,{hasSelectedEditor:!0})}isSelected(st){return _e(this,vt).has(st)}unselect(st){st.unselect(),_e(this,vt).delete(st),jt(this,Lt,Vr).call(this,{hasSelectedEditor:this.hasSelection})}get hasSelection(){return _e(this,vt).size!==0}undo(){_e(this,qt).undo(),jt(this,Lt,Vr).call(this,{hasSomethingToUndo:_e(this,qt).hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:jt(this,Er,nn).call(this)})}redo(){_e(this,qt).redo(),jt(this,Lt,Vr).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:_e(this,qt).hasSomethingToRedo(),isEmpty:jt(this,Er,nn).call(this)})}addCommands(st){_e(this,qt).add(st),jt(this,Lt,Vr).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:jt(this,Er,nn).call(this)})}delete(){if(this.commitOrRemove(),!this.hasSelection)return;const st=[..._e(this,vt)],wt=()=>{for(const Ot of st)Ot.remove()},Ct=()=>{for(const Ot of st)jt(this,fr,Mn).call(this,Ot)};this.addCommands({cmd:wt,undo:Ct,mustExec:!0})}commitOrRemove(){var st;(st=_e(this,_t))==null||st.commitOrRemove()}hasSomethingToControl(){return _e(this,_t)||this.hasSelection}selectAll(){for(const st of _e(this,vt))st.commit();jt(this,ir,Dn).call(this,_e(this,Nt).values())}unselectAll(){if(_e(this,_t)){_e(this,_t).commitOrRemove();return}if(this.hasSelection){for(const st of _e(this,vt))st.unselect();_e(this,vt).clear(),jt(this,Lt,Vr).call(this,{hasSelectedEditor:!1})}}translateSelectedEditors(st,wt,Ct=!1){if(Ct||this.commitOrRemove(),!this.hasSelection)return;_e(this,_r)[0]+=st,_e(this,_r)[1]+=wt;const[Ot,Dt]=_e(this,_r),Gt=[..._e(this,vt)],rr=1e3;_e(this,tr)&&clearTimeout(_e(this,tr)),Ht(this,tr,setTimeout(()=>{Ht(this,tr,null),_e(this,_r)[0]=_e(this,_r)[1]=0,this.addCommands({cmd:()=>{for(const gr of Gt)_e(this,Nt).has(gr.id)&&gr.translateInPage(Ot,Dt)},undo:()=>{for(const gr of Gt)_e(this,Nt).has(gr.id)&&gr.translateInPage(-Ot,-Dt)},mustExec:!1})},rr));for(const gr of Gt)gr.translateInPage(st,wt)}setUpDragSession(){if(this.hasSelection){this.disableUserSelect(!0),Ht(this,$t,new Map);for(const st of _e(this,vt))_e(this,$t).set(st,{savedX:st.x,savedY:st.y,savedPageIndex:st.pageIndex,newX:0,newY:0,newPageIndex:-1})}}endDragSession(){if(!_e(this,$t))return!1;this.disableUserSelect(!1);const st=_e(this,$t);Ht(this,$t,null);let wt=!1;for(const[{x:Ot,y:Dt,pageIndex:Gt},rr]of st)rr.newX=Ot,rr.newY=Dt,rr.newPageIndex=Gt,wt||(wt=Ot!==rr.savedX||Dt!==rr.savedY||Gt!==rr.savedPageIndex);if(!wt)return!1;const Ct=(Ot,Dt,Gt,rr)=>{if(_e(this,Nt).has(Ot.id)){const gr=_e(this,It).get(rr);gr?Ot._setParentAndPosition(gr,Dt,Gt):(Ot.pageIndex=rr,Ot.x=Dt,Ot.y=Gt)}};return this.addCommands({cmd:()=>{for(const[Ot,{newX:Dt,newY:Gt,newPageIndex:rr}]of st)Ct(Ot,Dt,Gt,rr)},undo:()=>{for(const[Ot,{savedX:Dt,savedY:Gt,savedPageIndex:rr}]of st)Ct(Ot,Dt,Gt,rr)},mustExec:!0}),!0}dragSelectedEditors(st,wt){if(_e(this,$t))for(const Ct of _e(this,$t).keys())Ct.drag(st,wt)}rebuild(st){if(st.parent===null){const wt=this.getLayer(st.pageIndex);wt?(wt.changeParent(st),wt.addOrRebuild(st)):(this.addEditor(st),this.addToAnnotationStorage(st),st.rebuild())}else st.parent.addOrRebuild(st)}isActive(st){return _e(this,_t)===st}getActive(){return _e(this,_t)}getMode(){return _e(this,gt)}get imageManager(){return(0,a.shadow)(this,"imageManager",new h)}};_t=new WeakMap,Nt=new WeakMap,It=new WeakMap,xt=new WeakMap,Mt=new WeakMap,qt=new WeakMap,Yt=new WeakMap,At=new WeakMap,$t=new WeakMap,Kt=new WeakMap,nr=new WeakMap,or=new WeakMap,Et=new WeakMap,lt=new WeakMap,ht=new WeakMap,dt=new WeakMap,gt=new WeakMap,vt=new WeakMap,St=new WeakMap,kt=new WeakMap,Rt=new WeakMap,Vt=new WeakMap,Wt=new WeakMap,Xt=new WeakMap,Qt=new WeakMap,lr=new WeakMap,er=new WeakMap,mr=new WeakMap,xr=new WeakMap,ur=new WeakMap,_r=new WeakMap,tr=new WeakMap,Bt=new WeakMap,zt=new WeakMap,Zt=new WeakSet,hs=function(){window.addEventListener("focus",_e(this,Rt)),window.addEventListener("blur",_e(this,kt))},hr=new WeakSet,On=function(){window.removeEventListener("focus",_e(this,Rt)),window.removeEventListener("blur",_e(this,kt))},Pr=new WeakSet,In=function(){window.addEventListener("keydown",_e(this,Qt),{capture:!0})},Nr=new WeakSet,hn=function(){window.removeEventListener("keydown",_e(this,Qt),{capture:!0})},Cr=new WeakSet,jn=function(){document.addEventListener("copy",_e(this,Vt)),document.addEventListener("cut",_e(this,Wt)),document.addEventListener("paste",_e(this,Xt))},Jt=new WeakSet,Ln=function(){document.removeEventListener("copy",_e(this,Vt)),document.removeEventListener("cut",_e(this,Wt)),document.removeEventListener("paste",_e(this,Xt))},Lt=new WeakSet,Vr=function(st){Object.entries(st).some(([Ct,Ot])=>_e(this,ur)[Ct]!==Ot)&&this._eventBus.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(_e(this,ur),st)})},ar=new WeakSet,rn=function(st){this._eventBus.dispatch("annotationeditorparamschanged",{source:this,details:st})},Ur=new WeakSet,fs=function(){if(!_e(this,lt)){Ht(this,lt,!0);for(const st of _e(this,It).values())st.enable()}},cr=new WeakSet,ps=function(){if(this.unselectAll(),_e(this,lt)){Ht(this,lt,!1);for(const st of _e(this,It).values())st.disable()}},fr=new WeakSet,Mn=function(st){const wt=_e(this,It).get(st.pageIndex);wt?wt.addOrRebuild(st):this.addEditor(st)},Er=new WeakSet,nn=function(){if(_e(this,Nt).size===0)return!0;if(_e(this,Nt).size===1)for(const st of _e(this,Nt).values())return st.isEmpty();return!1},ir=new WeakSet,Dn=function(st){_e(this,vt).clear();for(const wt of st)wt.isEmpty()||(_e(this,vt).add(wt),wt.select());jt(this,Lt,Vr).call(this,{hasSelectedEditor:!0})},Br(wr,"TRANSLATE_SMALL",1),Br(wr,"TRANSLATE_BIG",10);let nt=wr;e.AnnotationEditorUIManager=nt},(s,e,i)=>{var Yt,At,$t,Kt,nr,or,Et,lt,ht,dt,gt,vt,Jr,kt,Qr,Vt,Fn,Xt,fn,lr,pn,mr,sn,ur,an;Object.defineProperty(e,"__esModule",{value:!0}),e.StatTimer=e.RenderingCancelledException=e.PixelsPerInch=e.PageViewport=e.PDFDateString=e.DOMStandardFontDataFactory=e.DOMSVGFactory=e.DOMFilterFactory=e.DOMCanvasFactory=e.DOMCMapReaderFactory=void 0,e.deprecated=yt,e.getColorValues=Nt,e.getCurrentTransform=It,e.getCurrentTransformInverse=xt,e.getFilenameFromUrl=$,e.getPdfFilenameFromUrl=j,e.getRGB=_t,e.getXfaPageViewport=bt,e.isDataScheme=ct,e.isPdfFile=tt,e.isValidFetchUrl=ft,e.loadScript=ut,e.noContextMenu=at,e.setLayerDimensions=Mt;var a=i(7),o=i(1);const c="http://www.w3.org/2000/svg",qt=class qt{};Br(qt,"CSS",96),Br(qt,"PDF",72),Br(qt,"PDF_TO_CSS_UNITS",qt.CSS/qt.PDF);let d=qt;e.PixelsPerInch=d;class g extends a.BaseFilterFactory{constructor({docId:zt,ownerDocument:Zt=globalThis.document}={}){super();Pt(this,vt);Pt(this,kt);Pt(this,Vt);Pt(this,Xt);Pt(this,lr);Pt(this,mr);Pt(this,ur);Pt(this,Yt,void 0);Pt(this,At,void 0);Pt(this,$t,void 0);Pt(this,Kt,void 0);Pt(this,nr,void 0);Pt(this,or,void 0);Pt(this,Et,void 0);Pt(this,lt,void 0);Pt(this,ht,void 0);Pt(this,dt,void 0);Pt(this,gt,0);Ht(this,$t,zt),Ht(this,Kt,Zt)}addFilter(zt){if(!zt)return"none";let Zt=_e(this,vt,Jr).get(zt);if(Zt)return Zt;let dr,hr,kr,Pr;if(zt.length===1){const Cr=zt[0],jr=new Array(256);for(let Jt=0;Jt<256;Jt++)jr[Jt]=Cr[Jt]/255;Pr=dr=hr=kr=jr.join(",")}else{const[Cr,jr,Jt]=zt,Ut=new Array(256),Lt=new Array(256),sr=new Array(256);for(let ar=0;ar<256;ar++)Ut[ar]=Cr[ar]/255,Lt[ar]=jr[ar]/255,sr[ar]=Jt[ar]/255;dr=Ut.join(","),hr=Lt.join(","),kr=sr.join(","),Pr=`${dr}${hr}${kr}`}if(Zt=_e(this,vt,Jr).get(Pr),Zt)return _e(this,vt,Jr).set(zt,Zt),Zt;const Tr=`g_${_e(this,$t)}_transfer_map_${tn(this,gt)._++}`,Nr=`url(#${Tr})`;_e(this,vt,Jr).set(zt,Nr),_e(this,vt,Jr).set(Pr,Nr);const Or=jt(this,Xt,fn).call(this,Tr);return jt(this,mr,sn).call(this,dr,hr,kr,Or),Nr}addHCMFilter(zt,Zt){var jr;const dr=`${zt}-${Zt}`;if(_e(this,or)===dr)return _e(this,Et);if(Ht(this,or,dr),Ht(this,Et,"none"),(jr=_e(this,nr))==null||jr.remove(),!zt||!Zt)return _e(this,Et);const hr=jt(this,ur,an).call(this,zt);zt=o.Util.makeHexColor(...hr);const kr=jt(this,ur,an).call(this,Zt);if(Zt=o.Util.makeHexColor(...kr),_e(this,kt,Qr).style.color="",zt==="#000000"&&Zt==="#ffffff"||zt===Zt)return _e(this,Et);const Pr=new Array(256);for(let Jt=0;Jt<=255;Jt++){const Ut=Jt/255;Pr[Jt]=Ut<=.03928?Ut/12.92:((Ut+.055)/1.055)**2.4}const Tr=Pr.join(","),Nr=`g_${_e(this,$t)}_hcm_filter`,Or=Ht(this,lt,jt(this,Xt,fn).call(this,Nr));jt(this,mr,sn).call(this,Tr,Tr,Tr,Or),jt(this,Vt,Fn).call(this,Or);const Cr=(Jt,Ut)=>{const Lt=hr[Jt]/255,sr=kr[Jt]/255,ar=new Array(Ut+1);for(let $r=0;$r<=Ut;$r++)ar[$r]=Lt+$r/Ut*(sr-Lt);return ar.join(",")};return jt(this,mr,sn).call(this,Cr(0,5),Cr(1,5),Cr(2,5),Or),Ht(this,Et,`url(#${Nr})`),_e(this,Et)}addHighlightHCMFilter(zt,Zt,dr,hr){var sr;const kr=`${zt}-${Zt}-${dr}-${hr}`;if(_e(this,ht)===kr)return _e(this,dt);if(Ht(this,ht,kr),Ht(this,dt,"none"),(sr=_e(this,lt))==null||sr.remove(),!zt||!Zt)return _e(this,dt);const[Pr,Tr]=[zt,Zt].map(jt(this,ur,an).bind(this));let Nr=Math.round(.2126*Pr[0]+.7152*Pr[1]+.0722*Pr[2]),Or=Math.round(.2126*Tr[0]+.7152*Tr[1]+.0722*Tr[2]),[Cr,jr]=[dr,hr].map(jt(this,ur,an).bind(this));Or<Nr&&([Nr,Or,Cr,jr]=[Or,Nr,jr,Cr]),_e(this,kt,Qr).style.color="";const Jt=(ar,$r,Ur)=>{const Ft=new Array(256),cr=(Or-Nr)/Ur,br=ar/255,fr=($r-ar)/(255*Ur);let Sr=0;for(let Er=0;Er<=Ur;Er++){const Dr=Math.round(Nr+Er*cr),ir=br+Er*fr;for(let Lr=Sr;Lr<=Dr;Lr++)Ft[Lr]=ir;Sr=Dr+1}for(let Er=Sr;Er<256;Er++)Ft[Er]=Ft[Sr-1];return Ft.join(",")},Ut=`g_${_e(this,$t)}_hcm_highlight_filter`,Lt=Ht(this,lt,jt(this,Xt,fn).call(this,Ut));return jt(this,Vt,Fn).call(this,Lt),jt(this,mr,sn).call(this,Jt(Cr[0],jr[0],5),Jt(Cr[1],jr[1],5),Jt(Cr[2],jr[2],5),Lt),Ht(this,dt,`url(#${Ut})`),_e(this,dt)}destroy(zt=!1){zt&&(_e(this,Et)||_e(this,dt))||(_e(this,At)&&(_e(this,At).parentNode.parentNode.remove(),Ht(this,At,null)),_e(this,Yt)&&(_e(this,Yt).clear(),Ht(this,Yt,null)),Ht(this,gt,0))}}Yt=new WeakMap,At=new WeakMap,$t=new WeakMap,Kt=new WeakMap,nr=new WeakMap,or=new WeakMap,Et=new WeakMap,lt=new WeakMap,ht=new WeakMap,dt=new WeakMap,gt=new WeakMap,vt=new WeakSet,Jr=function(){return _e(this,Yt)||Ht(this,Yt,new Map)},kt=new WeakSet,Qr=function(){if(!_e(this,At)){const zt=_e(this,Kt).createElement("div"),{style:Zt}=zt;Zt.visibility="hidden",Zt.contain="strict",Zt.width=Zt.height=0,Zt.position="absolute",Zt.top=Zt.left=0,Zt.zIndex=-1;const dr=_e(this,Kt).createElementNS(c,"svg");dr.setAttribute("width",0),dr.setAttribute("height",0),Ht(this,At,_e(this,Kt).createElementNS(c,"defs")),zt.append(dr),dr.append(_e(this,At)),_e(this,Kt).body.append(zt)}return _e(this,At)},Vt=new WeakSet,Fn=function(zt){const Zt=_e(this,Kt).createElementNS(c,"feColorMatrix");Zt.setAttribute("type","matrix"),Zt.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),zt.append(Zt)},Xt=new WeakSet,fn=function(zt){const Zt=_e(this,Kt).createElementNS(c,"filter");return Zt.setAttribute("color-interpolation-filters","sRGB"),Zt.setAttribute("id",zt),_e(this,kt,Qr).append(Zt),Zt},lr=new WeakSet,pn=function(zt,Zt,dr){const hr=_e(this,Kt).createElementNS(c,Zt);hr.setAttribute("type","discrete"),hr.setAttribute("tableValues",dr),zt.append(hr)},mr=new WeakSet,sn=function(zt,Zt,dr,hr){const kr=_e(this,Kt).createElementNS(c,"feComponentTransfer");hr.append(kr),jt(this,lr,pn).call(this,kr,"feFuncR",zt),jt(this,lr,pn).call(this,kr,"feFuncG",Zt),jt(this,lr,pn).call(this,kr,"feFuncB",dr)},ur=new WeakSet,an=function(zt){return _e(this,kt,Qr).style.color=zt,_t(getComputedStyle(_e(this,kt,Qr)).getPropertyValue("color"))},e.DOMFilterFactory=g;class h extends a.BaseCanvasFactory{constructor({ownerDocument:Bt=globalThis.document}={}){super(),this._document=Bt}_createCanvas(Bt,zt){const Zt=this._document.createElement("canvas");return Zt.width=Bt,Zt.height=zt,Zt}}e.DOMCanvasFactory=h;async function _(tr,Bt=!1){if(ft(tr,document.baseURI)){const zt=await fetch(tr);if(!zt.ok)throw new Error(zt.statusText);return Bt?new Uint8Array(await zt.arrayBuffer()):(0,o.stringToBytes)(await zt.text())}return new Promise((zt,Zt)=>{const dr=new XMLHttpRequest;dr.open("GET",tr,!0),Bt&&(dr.responseType="arraybuffer"),dr.onreadystatechange=()=>{if(dr.readyState===XMLHttpRequest.DONE){if(dr.status===200||dr.status===0){let hr;if(Bt&&dr.response?hr=new Uint8Array(dr.response):!Bt&&dr.responseText&&(hr=(0,o.stringToBytes)(dr.responseText)),hr){zt(hr);return}}Zt(new Error(dr.statusText))}},dr.send(null)})}class b extends a.BaseCMapReaderFactory{_fetchData(Bt,zt){return _(Bt,this.isCompressed).then(Zt=>({cMapData:Zt,compressionType:zt}))}}e.DOMCMapReaderFactory=b;class rt extends a.BaseStandardFontDataFactory{_fetchData(Bt){return _(Bt,!0)}}e.DOMStandardFontDataFactory=rt;class nt extends a.BaseSVGFactory{_createSVG(Bt){return document.createElementNS(c,Bt)}}e.DOMSVGFactory=nt;class it{constructor({viewBox:Bt,scale:zt,rotation:Zt,offsetX:dr=0,offsetY:hr=0,dontFlip:kr=!1}){this.viewBox=Bt,this.scale=zt,this.rotation=Zt,this.offsetX=dr,this.offsetY=hr;const Pr=(Bt[2]+Bt[0])/2,Tr=(Bt[3]+Bt[1])/2;let Nr,Or,Cr,jr;switch(Zt%=360,Zt<0&&(Zt+=360),Zt){case 180:Nr=-1,Or=0,Cr=0,jr=1;break;case 90:Nr=0,Or=1,Cr=1,jr=0;break;case 270:Nr=0,Or=-1,Cr=-1,jr=0;break;case 0:Nr=1,Or=0,Cr=0,jr=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}kr&&(Cr=-Cr,jr=-jr);let Jt,Ut,Lt,sr;Nr===0?(Jt=Math.abs(Tr-Bt[1])*zt+dr,Ut=Math.abs(Pr-Bt[0])*zt+hr,Lt=(Bt[3]-Bt[1])*zt,sr=(Bt[2]-Bt[0])*zt):(Jt=Math.abs(Pr-Bt[0])*zt+dr,Ut=Math.abs(Tr-Bt[1])*zt+hr,Lt=(Bt[2]-Bt[0])*zt,sr=(Bt[3]-Bt[1])*zt),this.transform=[Nr*zt,Or*zt,Cr*zt,jr*zt,Jt-Nr*zt*Pr-Cr*zt*Tr,Ut-Or*zt*Pr-jr*zt*Tr],this.width=Lt,this.height=sr}get rawDims(){const{viewBox:Bt}=this;return(0,o.shadow)(this,"rawDims",{pageWidth:Bt[2]-Bt[0],pageHeight:Bt[3]-Bt[1],pageX:Bt[0],pageY:Bt[1]})}clone({scale:Bt=this.scale,rotation:zt=this.rotation,offsetX:Zt=this.offsetX,offsetY:dr=this.offsetY,dontFlip:hr=!1}={}){return new it({viewBox:this.viewBox.slice(),scale:Bt,rotation:zt,offsetX:Zt,offsetY:dr,dontFlip:hr})}convertToViewportPoint(Bt,zt){return o.Util.applyTransform([Bt,zt],this.transform)}convertToViewportRectangle(Bt){const zt=o.Util.applyTransform([Bt[0],Bt[1]],this.transform),Zt=o.Util.applyTransform([Bt[2],Bt[3]],this.transform);return[zt[0],zt[1],Zt[0],Zt[1]]}convertToPdfPoint(Bt,zt){return o.Util.applyInverseTransform([Bt,zt],this.transform)}}e.PageViewport=it;class ot extends o.BaseException{constructor(Bt,zt=0){super(Bt,"RenderingCancelledException"),this.extraDelay=zt}}e.RenderingCancelledException=ot;function ct(tr){const Bt=tr.length;let zt=0;for(;zt<Bt&&tr[zt].trim()==="";)zt++;return tr.substring(zt,zt+5).toLowerCase()==="data:"}function tt(tr){return typeof tr=="string"&&/\.pdf$/i.test(tr)}function $(tr,Bt=!1){return Bt||([tr]=tr.split(/[#?]/,1)),tr.substring(tr.lastIndexOf("/")+1)}function j(tr,Bt="document.pdf"){if(typeof tr!="string")return Bt;if(ct(tr))return(0,o.warn)('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),Bt;const zt=/^(?:(?:[^:]+:)?\/\/[^/]+)?([^?#]*)(\?[^#]*)?(#.*)?$/,Zt=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i,dr=zt.exec(tr);let hr=Zt.exec(dr[1])||Zt.exec(dr[2])||Zt.exec(dr[3]);if(hr&&(hr=hr[0],hr.includes("%")))try{hr=Zt.exec(decodeURIComponent(hr))[0]}catch{}return hr||Bt}class et{constructor(){Br(this,"started",Object.create(null));Br(this,"times",[])}time(Bt){Bt in this.started&&(0,o.warn)(`Timer is already running for ${Bt}`),this.started[Bt]=Date.now()}timeEnd(Bt){Bt in this.started||(0,o.warn)(`Timer has not been started for ${Bt}`),this.times.push({name:Bt,start:this.started[Bt],end:Date.now()}),delete this.started[Bt]}toString(){const Bt=[];let zt=0;for(const{name:Zt}of this.times)zt=Math.max(Zt.length,zt);for(const{name:Zt,start:dr,end:hr}of this.times)Bt.push(`${Zt.padEnd(zt)} ${hr-dr}ms
`);return Bt.join("")}}e.StatTimer=et;function ft(tr,Bt){try{const{protocol:zt}=Bt?new URL(tr,Bt):new URL(tr);return zt==="http:"||zt==="https:"}catch{return!1}}function at(tr){tr.preventDefault()}function ut(tr,Bt=!1){return new Promise((zt,Zt)=>{const dr=document.createElement("script");dr.src=tr,dr.onload=function(hr){Bt&&dr.remove(),zt(hr)},dr.onerror=function(){Zt(new Error(`Cannot load script at: ${dr.src}`))},(document.head||document.documentElement).append(dr)})}function yt(tr){console.log("Deprecated API usage: "+tr)}let mt;class pt{static toDateObject(Bt){if(!Bt||typeof Bt!="string")return null;mt||(mt=new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?"));const zt=mt.exec(Bt);if(!zt)return null;const Zt=parseInt(zt[1],10);let dr=parseInt(zt[2],10);dr=dr>=1&&dr<=12?dr-1:0;let hr=parseInt(zt[3],10);hr=hr>=1&&hr<=31?hr:1;let kr=parseInt(zt[4],10);kr=kr>=0&&kr<=23?kr:0;let Pr=parseInt(zt[5],10);Pr=Pr>=0&&Pr<=59?Pr:0;let Tr=parseInt(zt[6],10);Tr=Tr>=0&&Tr<=59?Tr:0;const Nr=zt[7]||"Z";let Or=parseInt(zt[8],10);Or=Or>=0&&Or<=23?Or:0;let Cr=parseInt(zt[9],10)||0;return Cr=Cr>=0&&Cr<=59?Cr:0,Nr==="-"?(kr+=Or,Pr+=Cr):Nr==="+"&&(kr-=Or,Pr-=Cr),new Date(Date.UTC(Zt,dr,hr,kr,Pr,Tr))}}e.PDFDateString=pt;function bt(tr,{scale:Bt=1,rotation:zt=0}){const{width:Zt,height:dr}=tr.attributes.style,hr=[0,0,parseInt(Zt),parseInt(dr)];return new it({viewBox:hr,scale:Bt,rotation:zt})}function _t(tr){if(tr.startsWith("#")){const Bt=parseInt(tr.slice(1),16);return[(Bt&16711680)>>16,(Bt&65280)>>8,Bt&255]}return tr.startsWith("rgb(")?tr.slice(4,-1).split(",").map(Bt=>parseInt(Bt)):tr.startsWith("rgba(")?tr.slice(5,-1).split(",").map(Bt=>parseInt(Bt)).slice(0,3):((0,o.warn)(`Not a valid color format: "${tr}"`),[0,0,0])}function Nt(tr){const Bt=document.createElement("span");Bt.style.visibility="hidden",document.body.append(Bt);for(const zt of tr.keys()){Bt.style.color=zt;const Zt=window.getComputedStyle(Bt).color;tr.set(zt,_t(Zt))}Bt.remove()}function It(tr){const{a:Bt,b:zt,c:Zt,d:dr,e:hr,f:kr}=tr.getTransform();return[Bt,zt,Zt,dr,hr,kr]}function xt(tr){const{a:Bt,b:zt,c:Zt,d:dr,e:hr,f:kr}=tr.getTransform().invertSelf();return[Bt,zt,Zt,dr,hr,kr]}function Mt(tr,Bt,zt=!1,Zt=!0){if(Bt instanceof it){const{pageWidth:dr,pageHeight:hr}=Bt.rawDims,{style:kr}=tr,Pr=o.FeatureTest.isCSSRoundSupported,Tr=`var(--scale-factor) * ${dr}px`,Nr=`var(--scale-factor) * ${hr}px`,Or=Pr?`round(${Tr}, 1px)`:`calc(${Tr})`,Cr=Pr?`round(${Nr}, 1px)`:`calc(${Nr})`;!zt||Bt.rotation%180===0?(kr.width=Or,kr.height=Cr):(kr.width=Cr,kr.height=Or)}Zt&&tr.setAttribute("data-main-rotation",Bt.rotation)}},(s,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.BaseStandardFontDataFactory=e.BaseSVGFactory=e.BaseFilterFactory=e.BaseCanvasFactory=e.BaseCMapReaderFactory=void 0;var a=i(1);class o{constructor(){this.constructor===o&&(0,a.unreachable)("Cannot initialize BaseFilterFactory.")}addFilter(b){return"none"}addHCMFilter(b,rt){return"none"}addHighlightHCMFilter(b,rt,nt,it){return"none"}destroy(b=!1){}}e.BaseFilterFactory=o;class c{constructor(){this.constructor===c&&(0,a.unreachable)("Cannot initialize BaseCanvasFactory.")}create(b,rt){if(b<=0||rt<=0)throw new Error("Invalid canvas size");const nt=this._createCanvas(b,rt);return{canvas:nt,context:nt.getContext("2d")}}reset(b,rt,nt){if(!b.canvas)throw new Error("Canvas is not specified");if(rt<=0||nt<=0)throw new Error("Invalid canvas size");b.canvas.width=rt,b.canvas.height=nt}destroy(b){if(!b.canvas)throw new Error("Canvas is not specified");b.canvas.width=0,b.canvas.height=0,b.canvas=null,b.context=null}_createCanvas(b,rt){(0,a.unreachable)("Abstract method `_createCanvas` called.")}}e.BaseCanvasFactory=c;class d{constructor({baseUrl:b=null,isCompressed:rt=!0}){this.constructor===d&&(0,a.unreachable)("Cannot initialize BaseCMapReaderFactory."),this.baseUrl=b,this.isCompressed=rt}async fetch({name:b}){if(!this.baseUrl)throw new Error('The CMap "baseUrl" parameter must be specified, ensure that the "cMapUrl" and "cMapPacked" API parameters are provided.');if(!b)throw new Error("CMap name must be specified.");const rt=this.baseUrl+b+(this.isCompressed?".bcmap":""),nt=this.isCompressed?a.CMapCompressionType.BINARY:a.CMapCompressionType.NONE;return this._fetchData(rt,nt).catch(it=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${rt}`)})}_fetchData(b,rt){(0,a.unreachable)("Abstract method `_fetchData` called.")}}e.BaseCMapReaderFactory=d;class g{constructor({baseUrl:b=null}){this.constructor===g&&(0,a.unreachable)("Cannot initialize BaseStandardFontDataFactory."),this.baseUrl=b}async fetch({filename:b}){if(!this.baseUrl)throw new Error('The standard font "baseUrl" parameter must be specified, ensure that the "standardFontDataUrl" API parameter is provided.');if(!b)throw new Error("Font filename must be specified.");const rt=`${this.baseUrl}${b}`;return this._fetchData(rt).catch(nt=>{throw new Error(`Unable to load font data at: ${rt}`)})}_fetchData(b){(0,a.unreachable)("Abstract method `_fetchData` called.")}}e.BaseStandardFontDataFactory=g;class h{constructor(){this.constructor===h&&(0,a.unreachable)("Cannot initialize BaseSVGFactory.")}create(b,rt,nt=!1){if(b<=0||rt<=0)throw new Error("Invalid SVG dimensions");const it=this._createSVG("svg:svg");return it.setAttribute("version","1.1"),nt||(it.setAttribute("width",`${b}px`),it.setAttribute("height",`${rt}px`)),it.setAttribute("preserveAspectRatio","none"),it.setAttribute("viewBox",`0 0 ${b} ${rt}`),it}createElement(b){if(typeof b!="string")throw new Error("Invalid SVG element type");return this._createSVG(b)}_createSVG(b){(0,a.unreachable)("Abstract method `_createSVG` called.")}}e.BaseSVGFactory=h},(s,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.MurmurHash3_64=void 0;var a=i(1);const o=3285377520,c=4294901760,d=65535;class g{constructor(_){this.h1=_?_&4294967295:o,this.h2=_?_&4294967295:o}update(_){let b,rt;if(typeof _=="string"){b=new Uint8Array(_.length*2),rt=0;for(let yt=0,mt=_.length;yt<mt;yt++){const pt=_.charCodeAt(yt);pt<=255?b[rt++]=pt:(b[rt++]=pt>>>8,b[rt++]=pt&255)}}else if((0,a.isArrayBuffer)(_))b=_.slice(),rt=b.byteLength;else throw new Error("Wrong data format in MurmurHash3_64_update. Input must be a string or array.");const nt=rt>>2,it=rt-nt*4,ot=new Uint32Array(b.buffer,0,nt);let ct=0,tt=0,$=this.h1,j=this.h2;const et=3432918353,ft=461845907,at=et&d,ut=ft&d;for(let yt=0;yt<nt;yt++)yt&1?(ct=ot[yt],ct=ct*et&c|ct*at&d,ct=ct<<15|ct>>>17,ct=ct*ft&c|ct*ut&d,$^=ct,$=$<<13|$>>>19,$=$*5+3864292196):(tt=ot[yt],tt=tt*et&c|tt*at&d,tt=tt<<15|tt>>>17,tt=tt*ft&c|tt*ut&d,j^=tt,j=j<<13|j>>>19,j=j*5+3864292196);switch(ct=0,it){case 3:ct^=b[nt*4+2]<<16;case 2:ct^=b[nt*4+1]<<8;case 1:ct^=b[nt*4],ct=ct*et&c|ct*at&d,ct=ct<<15|ct>>>17,ct=ct*ft&c|ct*ut&d,nt&1?$^=ct:j^=ct}this.h1=$,this.h2=j}hexdigest(){let _=this.h1,b=this.h2;return _^=b>>>1,_=_*3981806797&c|_*36045&d,b=b*4283543511&c|((b<<16|_>>>16)*2950163797&c)>>>16,_^=b>>>1,_=_*444984403&c|_*60499&d,b=b*3301882366&c|((b<<16|_>>>16)*3120437893&c)>>>16,_^=b>>>1,(_>>>0).toString(16).padStart(8,"0")+(b>>>0).toString(16).padStart(8,"0")}}e.MurmurHash3_64=g},(s,e,i)=>{var d;Object.defineProperty(e,"__esModule",{value:!0}),e.FontLoader=e.FontFaceObject=void 0;var a=i(1);class o{constructor({ownerDocument:h=globalThis.document,styleElement:_=null}){Pt(this,d,new Set);this._document=h,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(h){this.nativeFontFaces.add(h),this._document.fonts.add(h)}removeNativeFontFace(h){this.nativeFontFaces.delete(h),this._document.fonts.delete(h)}insertRule(h){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));const _=this.styleElement.sheet;_.insertRule(h,_.cssRules.length)}clear(){for(const h of this.nativeFontFaces)this._document.fonts.delete(h);this.nativeFontFaces.clear(),_e(this,d).clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async loadSystemFont(h){if(!(!h||_e(this,d).has(h.loadedName))){if((0,a.assert)(!this.disableFontFace,"loadSystemFont shouldn't be called when `disableFontFace` is set."),this.isFontLoadingAPISupported){const{loadedName:_,src:b,style:rt}=h,nt=new FontFace(_,b,rt);this.addNativeFontFace(nt);try{await nt.load(),_e(this,d).add(_)}catch{(0,a.warn)(`Cannot load system font: ${h.baseFontName}, installing it could help to improve PDF rendering.`),this.removeNativeFontFace(nt)}return}(0,a.unreachable)("Not implemented: loadSystemFont without the Font Loading API.")}}async bind(h){if(h.attached||h.missingFile&&!h.systemFontInfo)return;if(h.attached=!0,h.systemFontInfo){await this.loadSystemFont(h.systemFontInfo);return}if(this.isFontLoadingAPISupported){const b=h.createNativeFontFace();if(b){this.addNativeFontFace(b);try{await b.loaded}catch(rt){throw(0,a.warn)(`Failed to load font '${b.family}': '${rt}'.`),h.disableFontFace=!0,rt}}return}const _=h.createFontFaceRule();if(_){if(this.insertRule(_),this.isSyncFontLoadingSupported)return;await new Promise(b=>{const rt=this._queueLoadingCallback(b);this._prepareFontLoadEvent(h,rt)})}}get isFontLoadingAPISupported(){var _;const h=!!((_=this._document)!=null&&_.fonts);return(0,a.shadow)(this,"isFontLoadingAPISupported",h)}get isSyncFontLoadingSupported(){let h=!1;return(a.isNodeJS||typeof navigator<"u"&&/Mozilla\/5.0.*?rv:\d+.*? Gecko/.test(navigator.userAgent))&&(h=!0),(0,a.shadow)(this,"isSyncFontLoadingSupported",h)}_queueLoadingCallback(h){function _(){for((0,a.assert)(!rt.done,"completeRequest() cannot be called twice."),rt.done=!0;b.length>0&&b[0].done;){const nt=b.shift();setTimeout(nt.callback,0)}}const{loadingRequests:b}=this,rt={done:!1,complete:_,callback:h};return b.push(rt),rt}get _loadTestFont(){const h=atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");return(0,a.shadow)(this,"_loadTestFont",h)}_prepareFontLoadEvent(h,_){function b(_t,Nt){return _t.charCodeAt(Nt)<<24|_t.charCodeAt(Nt+1)<<16|_t.charCodeAt(Nt+2)<<8|_t.charCodeAt(Nt+3)&255}function rt(_t,Nt,It,xt){const Mt=_t.substring(0,Nt),qt=_t.substring(Nt+It);return Mt+xt+qt}let nt,it;const ot=this._document.createElement("canvas");ot.width=1,ot.height=1;const ct=ot.getContext("2d");let tt=0;function $(_t,Nt){if(++tt>30){(0,a.warn)("Load test font never loaded."),Nt();return}if(ct.font="30px "+_t,ct.fillText(".",0,20),ct.getImageData(0,0,1,1).data[3]>0){Nt();return}setTimeout($.bind(null,_t,Nt))}const j=`lt${Date.now()}${this.loadTestFontId++}`;let et=this._loadTestFont;et=rt(et,976,j.length,j);const at=16,ut=1482184792;let yt=b(et,at);for(nt=0,it=j.length-3;nt<it;nt+=4)yt=yt-ut+b(j,nt)|0;nt<j.length&&(yt=yt-ut+b(j+"XXX",nt)|0),et=rt(et,at,4,(0,a.string32)(yt));const mt=`url(data:font/opentype;base64,${btoa(et)});`,pt=`@font-face {font-family:"${j}";src:${mt}}`;this.insertRule(pt);const bt=this._document.createElement("div");bt.style.visibility="hidden",bt.style.width=bt.style.height="10px",bt.style.position="absolute",bt.style.top=bt.style.left="0px";for(const _t of[h.loadedName,j]){const Nt=this._document.createElement("span");Nt.textContent="Hi",Nt.style.fontFamily=_t,bt.append(Nt)}this._document.body.append(bt),$(j,()=>{bt.remove(),_.complete()})}}d=new WeakMap,e.FontLoader=o;class c{constructor(h,{isEvalSupported:_=!0,disableFontFace:b=!1,ignoreErrors:rt=!1,inspectFont:nt=null}){this.compiledGlyphs=Object.create(null);for(const it in h)this[it]=h[it];this.isEvalSupported=_!==!1,this.disableFontFace=b===!0,this.ignoreErrors=rt===!0,this._inspectFont=nt}createNativeFontFace(){var _;if(!this.data||this.disableFontFace)return null;let h;if(!this.cssFontInfo)h=new FontFace(this.loadedName,this.data,{});else{const b={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(b.style=`oblique ${this.cssFontInfo.italicAngle}deg`),h=new FontFace(this.cssFontInfo.fontFamily,this.data,b)}return(_=this._inspectFont)==null||_.call(this,this),h}createFontFaceRule(){var rt;if(!this.data||this.disableFontFace)return null;const h=(0,a.bytesToString)(this.data),_=`url(data:${this.mimetype};base64,${btoa(h)});`;let b;if(!this.cssFontInfo)b=`@font-face {font-family:"${this.loadedName}";src:${_}}`;else{let nt=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(nt+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),b=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${nt}src:${_}}`}return(rt=this._inspectFont)==null||rt.call(this,this,_),b}getPathGenerator(h,_){if(this.compiledGlyphs[_]!==void 0)return this.compiledGlyphs[_];let b;try{b=h.get(this.loadedName+"_path_"+_)}catch(rt){if(!this.ignoreErrors)throw rt;return(0,a.warn)(`getPathGenerator - ignoring character: "${rt}".`),this.compiledGlyphs[_]=function(nt,it){}}if(this.isEvalSupported&&a.FeatureTest.isEvalSupported){const rt=[];for(const nt of b){const it=nt.args!==void 0?nt.args.join(","):"";rt.push("c.",nt.cmd,"(",it,`);
`)}return this.compiledGlyphs[_]=new Function("c","size",rt.join(""))}return this.compiledGlyphs[_]=function(rt,nt){for(const it of b)it.cmd==="scale"&&(it.args=[nt,-nt]),rt[it.cmd].apply(rt,it.args)}}}e.FontFaceObject=c},(s,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.NodeStandardFontDataFactory=e.NodeFilterFactory=e.NodeCanvasFactory=e.NodeCMapReaderFactory=void 0;var a=i(7);i(1);const o=function(_){return new Promise((b,rt)=>{require$$5.readFile(_,(it,ot)=>{if(it||!ot){rt(new Error(it));return}b(new Uint8Array(ot))})})};class c extends a.BaseFilterFactory{}e.NodeFilterFactory=c;class d extends a.BaseCanvasFactory{_createCanvas(b,rt){return require$$5.createCanvas(b,rt)}}e.NodeCanvasFactory=d;class g extends a.BaseCMapReaderFactory{_fetchData(b,rt){return o(b).then(nt=>({cMapData:nt,compressionType:rt}))}}e.NodeCMapReaderFactory=g;class h extends a.BaseStandardFontDataFactory{_fetchData(b){return o(b)}}e.NodeStandardFontDataFactory=h},(s,e,i)=>{var At,Un,Kt,$n;Object.defineProperty(e,"__esModule",{value:!0}),e.CanvasGraphics=void 0;var a=i(1),o=i(6),c=i(12),d=i(13);const g=16,h=100,_=4096,b=15,rt=10,nt=1e3,it=16;function ot(Et,lt){if(Et._removeMirroring)throw new Error("Context is already forwarding operations.");Et.__originalSave=Et.save,Et.__originalRestore=Et.restore,Et.__originalRotate=Et.rotate,Et.__originalScale=Et.scale,Et.__originalTranslate=Et.translate,Et.__originalTransform=Et.transform,Et.__originalSetTransform=Et.setTransform,Et.__originalResetTransform=Et.resetTransform,Et.__originalClip=Et.clip,Et.__originalMoveTo=Et.moveTo,Et.__originalLineTo=Et.lineTo,Et.__originalBezierCurveTo=Et.bezierCurveTo,Et.__originalRect=Et.rect,Et.__originalClosePath=Et.closePath,Et.__originalBeginPath=Et.beginPath,Et._removeMirroring=()=>{Et.save=Et.__originalSave,Et.restore=Et.__originalRestore,Et.rotate=Et.__originalRotate,Et.scale=Et.__originalScale,Et.translate=Et.__originalTranslate,Et.transform=Et.__originalTransform,Et.setTransform=Et.__originalSetTransform,Et.resetTransform=Et.__originalResetTransform,Et.clip=Et.__originalClip,Et.moveTo=Et.__originalMoveTo,Et.lineTo=Et.__originalLineTo,Et.bezierCurveTo=Et.__originalBezierCurveTo,Et.rect=Et.__originalRect,Et.closePath=Et.__originalClosePath,Et.beginPath=Et.__originalBeginPath,delete Et._removeMirroring},Et.save=function(){lt.save(),this.__originalSave()},Et.restore=function(){lt.restore(),this.__originalRestore()},Et.translate=function(dt,gt){lt.translate(dt,gt),this.__originalTranslate(dt,gt)},Et.scale=function(dt,gt){lt.scale(dt,gt),this.__originalScale(dt,gt)},Et.transform=function(dt,gt,vt,St,kt,Rt){lt.transform(dt,gt,vt,St,kt,Rt),this.__originalTransform(dt,gt,vt,St,kt,Rt)},Et.setTransform=function(dt,gt,vt,St,kt,Rt){lt.setTransform(dt,gt,vt,St,kt,Rt),this.__originalSetTransform(dt,gt,vt,St,kt,Rt)},Et.resetTransform=function(){lt.resetTransform(),this.__originalResetTransform()},Et.rotate=function(dt){lt.rotate(dt),this.__originalRotate(dt)},Et.clip=function(dt){lt.clip(dt),this.__originalClip(dt)},Et.moveTo=function(ht,dt){lt.moveTo(ht,dt),this.__originalMoveTo(ht,dt)},Et.lineTo=function(ht,dt){lt.lineTo(ht,dt),this.__originalLineTo(ht,dt)},Et.bezierCurveTo=function(ht,dt,gt,vt,St,kt){lt.bezierCurveTo(ht,dt,gt,vt,St,kt),this.__originalBezierCurveTo(ht,dt,gt,vt,St,kt)},Et.rect=function(ht,dt,gt,vt){lt.rect(ht,dt,gt,vt),this.__originalRect(ht,dt,gt,vt)},Et.closePath=function(){lt.closePath(),this.__originalClosePath()},Et.beginPath=function(){lt.beginPath(),this.__originalBeginPath()}}class ct{constructor(lt){this.canvasFactory=lt,this.cache=Object.create(null)}getCanvas(lt,ht,dt){let gt;return this.cache[lt]!==void 0?(gt=this.cache[lt],this.canvasFactory.reset(gt,ht,dt)):(gt=this.canvasFactory.create(ht,dt),this.cache[lt]=gt),gt}delete(lt){delete this.cache[lt]}clear(){for(const lt in this.cache){const ht=this.cache[lt];this.canvasFactory.destroy(ht),delete this.cache[lt]}}}function tt(Et,lt,ht,dt,gt,vt,St,kt,Rt,Vt){const[Wt,Xt,Qt,lr,er,mr]=(0,o.getCurrentTransform)(Et);if(Xt===0&&Qt===0){const _r=St*Wt+er,tr=Math.round(_r),Bt=kt*lr+mr,zt=Math.round(Bt),Zt=(St+Rt)*Wt+er,dr=Math.abs(Math.round(Zt)-tr)||1,hr=(kt+Vt)*lr+mr,kr=Math.abs(Math.round(hr)-zt)||1;return Et.setTransform(Math.sign(Wt),0,0,Math.sign(lr),tr,zt),Et.drawImage(lt,ht,dt,gt,vt,0,0,dr,kr),Et.setTransform(Wt,Xt,Qt,lr,er,mr),[dr,kr]}if(Wt===0&&lr===0){const _r=kt*Qt+er,tr=Math.round(_r),Bt=St*Xt+mr,zt=Math.round(Bt),Zt=(kt+Vt)*Qt+er,dr=Math.abs(Math.round(Zt)-tr)||1,hr=(St+Rt)*Xt+mr,kr=Math.abs(Math.round(hr)-zt)||1;return Et.setTransform(0,Math.sign(Xt),Math.sign(Qt),0,tr,zt),Et.drawImage(lt,ht,dt,gt,vt,0,0,kr,dr),Et.setTransform(Wt,Xt,Qt,lr,er,mr),[kr,dr]}Et.drawImage(lt,ht,dt,gt,vt,St,kt,Rt,Vt);const xr=Math.hypot(Wt,Xt),ur=Math.hypot(Qt,lr);return[xr*Rt,ur*Vt]}function $(Et){const{width:lt,height:ht}=Et;if(lt>nt||ht>nt)return null;const dt=1e3,gt=new Uint8Array([0,2,4,0,1,0,5,4,8,10,0,8,0,2,1,0]),vt=lt+1;let St=new Uint8Array(vt*(ht+1)),kt,Rt,Vt;const Wt=lt+7&-8;let Xt=new Uint8Array(Wt*ht),Qt=0;for(const ur of Et.data){let _r=128;for(;_r>0;)Xt[Qt++]=ur&_r?0:255,_r>>=1}let lr=0;for(Qt=0,Xt[Qt]!==0&&(St[0]=1,++lr),Rt=1;Rt<lt;Rt++)Xt[Qt]!==Xt[Qt+1]&&(St[Rt]=Xt[Qt]?2:1,++lr),Qt++;for(Xt[Qt]!==0&&(St[Rt]=2,++lr),kt=1;kt<ht;kt++){Qt=kt*Wt,Vt=kt*vt,Xt[Qt-Wt]!==Xt[Qt]&&(St[Vt]=Xt[Qt]?1:8,++lr);let ur=(Xt[Qt]?4:0)+(Xt[Qt-Wt]?8:0);for(Rt=1;Rt<lt;Rt++)ur=(ur>>2)+(Xt[Qt+1]?4:0)+(Xt[Qt-Wt+1]?8:0),gt[ur]&&(St[Vt+Rt]=gt[ur],++lr),Qt++;if(Xt[Qt-Wt]!==Xt[Qt]&&(St[Vt+Rt]=Xt[Qt]?2:4,++lr),lr>dt)return null}for(Qt=Wt*(ht-1),Vt=kt*vt,Xt[Qt]!==0&&(St[Vt]=8,++lr),Rt=1;Rt<lt;Rt++)Xt[Qt]!==Xt[Qt+1]&&(St[Vt+Rt]=Xt[Qt]?4:8,++lr),Qt++;if(Xt[Qt]!==0&&(St[Vt+Rt]=4,++lr),lr>dt)return null;const er=new Int32Array([0,vt,-1,0,-vt,0,0,0,1]),mr=new Path2D;for(kt=0;lr&&kt<=ht;kt++){let ur=kt*vt;const _r=ur+lt;for(;ur<_r&&!St[ur];)ur++;if(ur===_r)continue;mr.moveTo(ur%vt,kt);const tr=ur;let Bt=St[ur];do{const zt=er[Bt];do ur+=zt;while(!St[ur]);const Zt=St[ur];Zt!==5&&Zt!==10?(Bt=Zt,St[ur]=0):(Bt=Zt&51*Bt>>4,St[ur]&=Bt>>2|Bt<<2),mr.lineTo(ur%vt,ur/vt|0),St[ur]||--lr}while(tr!==ur);--kt}return Xt=null,St=null,function(ur){ur.save(),ur.scale(1/lt,-1/ht),ur.translate(0,-ht),ur.fill(mr),ur.beginPath(),ur.restore()}}class j{constructor(lt,ht){this.alphaIsShape=!1,this.fontSize=0,this.fontSizeScale=1,this.textMatrix=a.IDENTITY_MATRIX,this.textMatrixScale=1,this.fontMatrix=a.FONT_IDENTITY_MATRIX,this.leading=0,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRenderingMode=a.TextRenderingMode.FILL,this.textRise=0,this.fillColor="#000000",this.strokeColor="#000000",this.patternFill=!1,this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.activeSMask=null,this.transferMaps="none",this.startNewPathAndClipBox([0,0,lt,ht])}clone(){const lt=Object.create(this);return lt.clipBox=this.clipBox.slice(),lt}setCurrentPoint(lt,ht){this.x=lt,this.y=ht}updatePathMinMax(lt,ht,dt){[ht,dt]=a.Util.applyTransform([ht,dt],lt),this.minX=Math.min(this.minX,ht),this.minY=Math.min(this.minY,dt),this.maxX=Math.max(this.maxX,ht),this.maxY=Math.max(this.maxY,dt)}updateRectMinMax(lt,ht){const dt=a.Util.applyTransform(ht,lt),gt=a.Util.applyTransform(ht.slice(2),lt);this.minX=Math.min(this.minX,dt[0],gt[0]),this.minY=Math.min(this.minY,dt[1],gt[1]),this.maxX=Math.max(this.maxX,dt[0],gt[0]),this.maxY=Math.max(this.maxY,dt[1],gt[1])}updateScalingPathMinMax(lt,ht){a.Util.scaleMinMax(lt,ht),this.minX=Math.min(this.minX,ht[0]),this.maxX=Math.max(this.maxX,ht[1]),this.minY=Math.min(this.minY,ht[2]),this.maxY=Math.max(this.maxY,ht[3])}updateCurvePathMinMax(lt,ht,dt,gt,vt,St,kt,Rt,Vt,Wt){const Xt=a.Util.bezierBoundingBox(ht,dt,gt,vt,St,kt,Rt,Vt);if(Wt){Wt[0]=Math.min(Wt[0],Xt[0],Xt[2]),Wt[1]=Math.max(Wt[1],Xt[0],Xt[2]),Wt[2]=Math.min(Wt[2],Xt[1],Xt[3]),Wt[3]=Math.max(Wt[3],Xt[1],Xt[3]);return}this.updateRectMinMax(lt,Xt)}getPathBoundingBox(lt=c.PathType.FILL,ht=null){const dt=[this.minX,this.minY,this.maxX,this.maxY];if(lt===c.PathType.STROKE){ht||(0,a.unreachable)("Stroke bounding box must include transform.");const gt=a.Util.singularValueDecompose2dScale(ht),vt=gt[0]*this.lineWidth/2,St=gt[1]*this.lineWidth/2;dt[0]-=vt,dt[1]-=St,dt[2]+=vt,dt[3]+=St}return dt}updateClipFromPath(){const lt=a.Util.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(lt||[0,0,0,0])}isEmptyClip(){return this.minX===1/0}startNewPathAndClipBox(lt){this.clipBox=lt,this.minX=1/0,this.minY=1/0,this.maxX=0,this.maxY=0}getClippedPathBoundingBox(lt=c.PathType.FILL,ht=null){return a.Util.intersect(this.clipBox,this.getPathBoundingBox(lt,ht))}}function et(Et,lt){if(typeof ImageData<"u"&&lt instanceof ImageData){Et.putImageData(lt,0,0);return}const ht=lt.height,dt=lt.width,gt=ht%it,vt=(ht-gt)/it,St=gt===0?vt:vt+1,kt=Et.createImageData(dt,it);let Rt=0,Vt;const Wt=lt.data,Xt=kt.data;let Qt,lr,er,mr;if(lt.kind===a.ImageKind.GRAYSCALE_1BPP){const xr=Wt.byteLength,ur=new Uint32Array(Xt.buffer,0,Xt.byteLength>>2),_r=ur.length,tr=dt+7>>3,Bt=4294967295,zt=a.FeatureTest.isLittleEndian?4278190080:255;for(Qt=0;Qt<St;Qt++){for(er=Qt<vt?it:gt,Vt=0,lr=0;lr<er;lr++){const Zt=xr-Rt;let dr=0;const hr=Zt>tr?dt:Zt*8-7,kr=hr&-8;let Pr=0,Tr=0;for(;dr<kr;dr+=8)Tr=Wt[Rt++],ur[Vt++]=Tr&128?Bt:zt,ur[Vt++]=Tr&64?Bt:zt,ur[Vt++]=Tr&32?Bt:zt,ur[Vt++]=Tr&16?Bt:zt,ur[Vt++]=Tr&8?Bt:zt,ur[Vt++]=Tr&4?Bt:zt,ur[Vt++]=Tr&2?Bt:zt,ur[Vt++]=Tr&1?Bt:zt;for(;dr<hr;dr++)Pr===0&&(Tr=Wt[Rt++],Pr=128),ur[Vt++]=Tr&Pr?Bt:zt,Pr>>=1}for(;Vt<_r;)ur[Vt++]=0;Et.putImageData(kt,0,Qt*it)}}else if(lt.kind===a.ImageKind.RGBA_32BPP){for(lr=0,mr=dt*it*4,Qt=0;Qt<vt;Qt++)Xt.set(Wt.subarray(Rt,Rt+mr)),Rt+=mr,Et.putImageData(kt,0,lr),lr+=it;Qt<St&&(mr=dt*gt*4,Xt.set(Wt.subarray(Rt,Rt+mr)),Et.putImageData(kt,0,lr))}else if(lt.kind===a.ImageKind.RGB_24BPP)for(er=it,mr=dt*er,Qt=0;Qt<St;Qt++){for(Qt>=vt&&(er=gt,mr=dt*er),Vt=0,lr=mr;lr--;)Xt[Vt++]=Wt[Rt++],Xt[Vt++]=Wt[Rt++],Xt[Vt++]=Wt[Rt++],Xt[Vt++]=255;Et.putImageData(kt,0,Qt*it)}else throw new Error(`bad image kind: ${lt.kind}`)}function ft(Et,lt){if(lt.bitmap){Et.drawImage(lt.bitmap,0,0);return}const ht=lt.height,dt=lt.width,gt=ht%it,vt=(ht-gt)/it,St=gt===0?vt:vt+1,kt=Et.createImageData(dt,it);let Rt=0;const Vt=lt.data,Wt=kt.data;for(let Xt=0;Xt<St;Xt++){const Qt=Xt<vt?it:gt;({srcPos:Rt}=(0,d.convertBlackAndWhiteToRGBA)({src:Vt,srcPos:Rt,dest:Wt,width:dt,height:Qt,nonBlackColor:0})),Et.putImageData(kt,0,Xt*it)}}function at(Et,lt){const ht=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(const dt of ht)Et[dt]!==void 0&&(lt[dt]=Et[dt]);Et.setLineDash!==void 0&&(lt.setLineDash(Et.getLineDash()),lt.lineDashOffset=Et.lineDashOffset)}function ut(Et){if(Et.strokeStyle=Et.fillStyle="#000000",Et.fillRule="nonzero",Et.globalAlpha=1,Et.lineWidth=1,Et.lineCap="butt",Et.lineJoin="miter",Et.miterLimit=10,Et.globalCompositeOperation="source-over",Et.font="10px sans-serif",Et.setLineDash!==void 0&&(Et.setLineDash([]),Et.lineDashOffset=0),!a.isNodeJS){const{filter:lt}=Et;lt!=="none"&&lt!==""&&(Et.filter="none")}}function yt(Et,lt,ht,dt){const gt=Et.length;for(let vt=3;vt<gt;vt+=4){const St=Et[vt];if(St===0)Et[vt-3]=lt,Et[vt-2]=ht,Et[vt-1]=dt;else if(St<255){const kt=255-St;Et[vt-3]=Et[vt-3]*St+lt*kt>>8,Et[vt-2]=Et[vt-2]*St+ht*kt>>8,Et[vt-1]=Et[vt-1]*St+dt*kt>>8}}}function mt(Et,lt,ht){const dt=Et.length,gt=1/255;for(let vt=3;vt<dt;vt+=4){const St=ht?ht[Et[vt]]:Et[vt];lt[vt]=lt[vt]*St*gt|0}}function pt(Et,lt,ht){const dt=Et.length;for(let gt=3;gt<dt;gt+=4){const vt=Et[gt-3]*77+Et[gt-2]*152+Et[gt-1]*28;lt[gt]=ht?lt[gt]*ht[vt>>8]>>8:lt[gt]*vt>>16}}function bt(Et,lt,ht,dt,gt,vt,St,kt,Rt,Vt,Wt){const Xt=!!vt,Qt=Xt?vt[0]:0,lr=Xt?vt[1]:0,er=Xt?vt[2]:0,mr=gt==="Luminosity"?pt:mt,ur=Math.min(dt,Math.ceil(1048576/ht));for(let _r=0;_r<dt;_r+=ur){const tr=Math.min(ur,dt-_r),Bt=Et.getImageData(kt-Vt,_r+(Rt-Wt),ht,tr),zt=lt.getImageData(kt,_r+Rt,ht,tr);Xt&&yt(Bt.data,Qt,lr,er),mr(Bt.data,zt.data,St),lt.putImageData(zt,kt,_r+Rt)}}function _t(Et,lt,ht,dt){const gt=dt[0],vt=dt[1],St=dt[2]-gt,kt=dt[3]-vt;St===0||kt===0||(bt(lt.context,ht,St,kt,lt.subtype,lt.backdrop,lt.transferMap,gt,vt,lt.offsetX,lt.offsetY),Et.save(),Et.globalAlpha=1,Et.globalCompositeOperation="source-over",Et.setTransform(1,0,0,1,0,0),Et.drawImage(ht.canvas,0,0),Et.restore())}function Nt(Et,lt){const ht=a.Util.singularValueDecompose2dScale(Et);ht[0]=Math.fround(ht[0]),ht[1]=Math.fround(ht[1]);const dt=Math.fround((globalThis.devicePixelRatio||1)*o.PixelsPerInch.PDF_TO_CSS_UNITS);return lt!==void 0?lt:ht[0]<=dt||ht[1]<=dt}const It=["butt","round","square"],xt=["miter","round","bevel"],Mt={},qt={},or=class or{constructor(lt,ht,dt,gt,vt,{optionalContentConfig:St,markedContentStack:kt=null},Rt,Vt){Pt(this,At);Pt(this,Kt);this.ctx=lt,this.current=new j(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=ht,this.objs=dt,this.canvasFactory=gt,this.filterFactory=vt,this.groupStack=[],this.processingType3=null,this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=kt||[],this.optionalContentConfig=St,this.cachedCanvases=new ct(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=Rt,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=Vt,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map}getObject(lt,ht=null){return typeof lt=="string"?lt.startsWith("g_")?this.commonObjs.get(lt):this.objs.get(lt):ht}beginDrawing({transform:lt,viewport:ht,transparency:dt=!1,background:gt=null}){const vt=this.ctx.canvas.width,St=this.ctx.canvas.height,kt=this.ctx.fillStyle;if(this.ctx.fillStyle=gt||"#ffffff",this.ctx.fillRect(0,0,vt,St),this.ctx.fillStyle=kt,dt){const Rt=this.cachedCanvases.getCanvas("transparent",vt,St);this.compositeCtx=this.ctx,this.transparentCanvas=Rt.canvas,this.ctx=Rt.context,this.ctx.save(),this.ctx.transform(...(0,o.getCurrentTransform)(this.compositeCtx))}this.ctx.save(),ut(this.ctx),lt&&(this.ctx.transform(...lt),this.outputScaleX=lt[0],this.outputScaleY=lt[0]),this.ctx.transform(...ht.transform),this.viewportScale=ht.scale,this.baseTransform=(0,o.getCurrentTransform)(this.ctx)}executeOperatorList(lt,ht,dt,gt){const vt=lt.argsArray,St=lt.fnArray;let kt=ht||0;const Rt=vt.length;if(Rt===kt)return kt;const Vt=Rt-kt>rt&&typeof dt=="function",Wt=Vt?Date.now()+b:0;let Xt=0;const Qt=this.commonObjs,lr=this.objs;let er;for(;;){if(gt!==void 0&&kt===gt.nextBreakPoint)return gt.breakIt(kt,dt),kt;if(er=St[kt],er!==a.OPS.dependency)this[er].apply(this,vt[kt]);else for(const mr of vt[kt]){const xr=mr.startsWith("g_")?Qt:lr;if(!xr.has(mr))return xr.get(mr,dt),kt}if(kt++,kt===Rt)return kt;if(Vt&&++Xt>rt){if(Date.now()>Wt)return dt(),kt;Xt=0}}}endDrawing(){jt(this,At,Un).call(this),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const lt of this._cachedBitmapsMap.values()){for(const ht of lt.values())typeof HTMLCanvasElement<"u"&&ht instanceof HTMLCanvasElement&&(ht.width=ht.height=0);lt.clear()}this._cachedBitmapsMap.clear(),jt(this,Kt,$n).call(this)}_scaleImage(lt,ht){const dt=lt.width,gt=lt.height;let vt=Math.max(Math.hypot(ht[0],ht[1]),1),St=Math.max(Math.hypot(ht[2],ht[3]),1),kt=dt,Rt=gt,Vt="prescale1",Wt,Xt;for(;vt>2&&kt>1||St>2&&Rt>1;){let Qt=kt,lr=Rt;vt>2&&kt>1&&(Qt=kt>=16384?Math.floor(kt/2)-1||1:Math.ceil(kt/2),vt/=kt/Qt),St>2&&Rt>1&&(lr=Rt>=16384?Math.floor(Rt/2)-1||1:Math.ceil(Rt)/2,St/=Rt/lr),Wt=this.cachedCanvases.getCanvas(Vt,Qt,lr),Xt=Wt.context,Xt.clearRect(0,0,Qt,lr),Xt.drawImage(lt,0,0,kt,Rt,0,0,Qt,lr),lt=Wt.canvas,kt=Qt,Rt=lr,Vt=Vt==="prescale1"?"prescale2":"prescale1"}return{img:lt,paintWidth:kt,paintHeight:Rt}}_createMaskCanvas(lt){const ht=this.ctx,{width:dt,height:gt}=lt,vt=this.current.fillColor,St=this.current.patternFill,kt=(0,o.getCurrentTransform)(ht);let Rt,Vt,Wt,Xt;if((lt.bitmap||lt.data)&&lt.count>1){const dr=lt.bitmap||lt.data.buffer;Vt=JSON.stringify(St?kt:[kt.slice(0,4),vt]),Rt=this._cachedBitmapsMap.get(dr),Rt||(Rt=new Map,this._cachedBitmapsMap.set(dr,Rt));const hr=Rt.get(Vt);if(hr&&!St){const kr=Math.round(Math.min(kt[0],kt[2])+kt[4]),Pr=Math.round(Math.min(kt[1],kt[3])+kt[5]);return{canvas:hr,offsetX:kr,offsetY:Pr}}Wt=hr}Wt||(Xt=this.cachedCanvases.getCanvas("maskCanvas",dt,gt),ft(Xt.context,lt));let Qt=a.Util.transform(kt,[1/dt,0,0,-1/gt,0,0]);Qt=a.Util.transform(Qt,[1,0,0,1,0,-gt]);const lr=a.Util.applyTransform([0,0],Qt),er=a.Util.applyTransform([dt,gt],Qt),mr=a.Util.normalizeRect([lr[0],lr[1],er[0],er[1]]),xr=Math.round(mr[2]-mr[0])||1,ur=Math.round(mr[3]-mr[1])||1,_r=this.cachedCanvases.getCanvas("fillCanvas",xr,ur),tr=_r.context,Bt=Math.min(lr[0],er[0]),zt=Math.min(lr[1],er[1]);tr.translate(-Bt,-zt),tr.transform(...Qt),Wt||(Wt=this._scaleImage(Xt.canvas,(0,o.getCurrentTransformInverse)(tr)),Wt=Wt.img,Rt&&St&&Rt.set(Vt,Wt)),tr.imageSmoothingEnabled=Nt((0,o.getCurrentTransform)(tr),lt.interpolate),tt(tr,Wt,0,0,Wt.width,Wt.height,0,0,dt,gt),tr.globalCompositeOperation="source-in";const Zt=a.Util.transform((0,o.getCurrentTransformInverse)(tr),[1,0,0,1,-Bt,-zt]);return tr.fillStyle=St?vt.getPattern(ht,this,Zt,c.PathType.FILL):vt,tr.fillRect(0,0,dt,gt),Rt&&!St&&(this.cachedCanvases.delete("fillCanvas"),Rt.set(Vt,_r.canvas)),{canvas:_r.canvas,offsetX:Math.round(Bt),offsetY:Math.round(zt)}}setLineWidth(lt){lt!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=lt,this.ctx.lineWidth=lt}setLineCap(lt){this.ctx.lineCap=It[lt]}setLineJoin(lt){this.ctx.lineJoin=xt[lt]}setMiterLimit(lt){this.ctx.miterLimit=lt}setDash(lt,ht){const dt=this.ctx;dt.setLineDash!==void 0&&(dt.setLineDash(lt),dt.lineDashOffset=ht)}setRenderingIntent(lt){}setFlatness(lt){}setGState(lt){for(const[ht,dt]of lt)switch(ht){case"LW":this.setLineWidth(dt);break;case"LC":this.setLineCap(dt);break;case"LJ":this.setLineJoin(dt);break;case"ML":this.setMiterLimit(dt);break;case"D":this.setDash(dt[0],dt[1]);break;case"RI":this.setRenderingIntent(dt);break;case"FL":this.setFlatness(dt);break;case"Font":this.setFont(dt[0],dt[1]);break;case"CA":this.current.strokeAlpha=dt;break;case"ca":this.current.fillAlpha=dt,this.ctx.globalAlpha=dt;break;case"BM":this.ctx.globalCompositeOperation=dt;break;case"SMask":this.current.activeSMask=dt?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(dt);break}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const lt=this.inSMaskMode;this.current.activeSMask&&!lt?this.beginSMaskMode():!this.current.activeSMask&&lt&&this.endSMaskMode()}beginSMaskMode(){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const lt=this.ctx.canvas.width,ht=this.ctx.canvas.height,dt="smaskGroupAt"+this.groupLevel,gt=this.cachedCanvases.getCanvas(dt,lt,ht);this.suspendedCtx=this.ctx,this.ctx=gt.context;const vt=this.ctx;vt.setTransform(...(0,o.getCurrentTransform)(this.suspendedCtx)),at(this.suspendedCtx,vt),ot(vt,this.suspendedCtx),this.setGState([["BM","source-over"],["ca",1],["CA",1]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),at(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(lt){if(!this.current.activeSMask)return;lt?(lt[0]=Math.floor(lt[0]),lt[1]=Math.floor(lt[1]),lt[2]=Math.ceil(lt[2]),lt[3]=Math.ceil(lt[3])):lt=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const ht=this.current.activeSMask,dt=this.suspendedCtx;_t(dt,ht,this.ctx,lt),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}save(){this.inSMaskMode?(at(this.ctx,this.suspendedCtx),this.suspendedCtx.save()):this.ctx.save();const lt=this.current;this.stateStack.push(lt),this.current=lt.clone()}restore(){this.stateStack.length===0&&this.inSMaskMode&&this.endSMaskMode(),this.stateStack.length!==0&&(this.current=this.stateStack.pop(),this.inSMaskMode?(this.suspendedCtx.restore(),at(this.suspendedCtx,this.ctx)):this.ctx.restore(),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null)}transform(lt,ht,dt,gt,vt,St){this.ctx.transform(lt,ht,dt,gt,vt,St),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}constructPath(lt,ht,dt){const gt=this.ctx,vt=this.current;let St=vt.x,kt=vt.y,Rt,Vt;const Wt=(0,o.getCurrentTransform)(gt),Xt=Wt[0]===0&&Wt[3]===0||Wt[1]===0&&Wt[2]===0,Qt=Xt?dt.slice(0):null;for(let lr=0,er=0,mr=lt.length;lr<mr;lr++)switch(lt[lr]|0){case a.OPS.rectangle:St=ht[er++],kt=ht[er++];const xr=ht[er++],ur=ht[er++],_r=St+xr,tr=kt+ur;gt.moveTo(St,kt),xr===0||ur===0?gt.lineTo(_r,tr):(gt.lineTo(_r,kt),gt.lineTo(_r,tr),gt.lineTo(St,tr)),Xt||vt.updateRectMinMax(Wt,[St,kt,_r,tr]),gt.closePath();break;case a.OPS.moveTo:St=ht[er++],kt=ht[er++],gt.moveTo(St,kt),Xt||vt.updatePathMinMax(Wt,St,kt);break;case a.OPS.lineTo:St=ht[er++],kt=ht[er++],gt.lineTo(St,kt),Xt||vt.updatePathMinMax(Wt,St,kt);break;case a.OPS.curveTo:Rt=St,Vt=kt,St=ht[er+4],kt=ht[er+5],gt.bezierCurveTo(ht[er],ht[er+1],ht[er+2],ht[er+3],St,kt),vt.updateCurvePathMinMax(Wt,Rt,Vt,ht[er],ht[er+1],ht[er+2],ht[er+3],St,kt,Qt),er+=6;break;case a.OPS.curveTo2:Rt=St,Vt=kt,gt.bezierCurveTo(St,kt,ht[er],ht[er+1],ht[er+2],ht[er+3]),vt.updateCurvePathMinMax(Wt,Rt,Vt,St,kt,ht[er],ht[er+1],ht[er+2],ht[er+3],Qt),St=ht[er+2],kt=ht[er+3],er+=4;break;case a.OPS.curveTo3:Rt=St,Vt=kt,St=ht[er+2],kt=ht[er+3],gt.bezierCurveTo(ht[er],ht[er+1],St,kt,St,kt),vt.updateCurvePathMinMax(Wt,Rt,Vt,ht[er],ht[er+1],St,kt,St,kt,Qt),er+=4;break;case a.OPS.closePath:gt.closePath();break}Xt&&vt.updateScalingPathMinMax(Wt,Qt),vt.setCurrentPoint(St,kt)}closePath(){this.ctx.closePath()}stroke(lt=!0){const ht=this.ctx,dt=this.current.strokeColor;ht.globalAlpha=this.current.strokeAlpha,this.contentVisible&&(typeof dt=="object"&&(dt!=null&&dt.getPattern)?(ht.save(),ht.strokeStyle=dt.getPattern(ht,this,(0,o.getCurrentTransformInverse)(ht),c.PathType.STROKE),this.rescaleAndStroke(!1),ht.restore()):this.rescaleAndStroke(!0)),lt&&this.consumePath(this.current.getClippedPathBoundingBox()),ht.globalAlpha=this.current.fillAlpha}closeStroke(){this.closePath(),this.stroke()}fill(lt=!0){const ht=this.ctx,dt=this.current.fillColor,gt=this.current.patternFill;let vt=!1;gt&&(ht.save(),ht.fillStyle=dt.getPattern(ht,this,(0,o.getCurrentTransformInverse)(ht),c.PathType.FILL),vt=!0);const St=this.current.getClippedPathBoundingBox();this.contentVisible&&St!==null&&(this.pendingEOFill?(ht.fill("evenodd"),this.pendingEOFill=!1):ht.fill()),vt&&ht.restore(),lt&&this.consumePath(St)}eoFill(){this.pendingEOFill=!0,this.fill()}fillStroke(){this.fill(!1),this.stroke(!1),this.consumePath()}eoFillStroke(){this.pendingEOFill=!0,this.fillStroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.pendingEOFill=!0,this.closePath(),this.fillStroke()}endPath(){this.consumePath()}clip(){this.pendingClip=Mt}eoClip(){this.pendingClip=qt}beginText(){this.current.textMatrix=a.IDENTITY_MATRIX,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}endText(){const lt=this.pendingTextPaths,ht=this.ctx;if(lt===void 0){ht.beginPath();return}ht.save(),ht.beginPath();for(const dt of lt)ht.setTransform(...dt.transform),ht.translate(dt.x,dt.y),dt.addToPath(ht,dt.fontSize);ht.restore(),ht.clip(),ht.beginPath(),delete this.pendingTextPaths}setCharSpacing(lt){this.current.charSpacing=lt}setWordSpacing(lt){this.current.wordSpacing=lt}setHScale(lt){this.current.textHScale=lt/100}setLeading(lt){this.current.leading=-lt}setFont(lt,ht){var Wt;const dt=this.commonObjs.get(lt),gt=this.current;if(!dt)throw new Error(`Can't find font for ${lt}`);if(gt.fontMatrix=dt.fontMatrix||a.FONT_IDENTITY_MATRIX,(gt.fontMatrix[0]===0||gt.fontMatrix[3]===0)&&(0,a.warn)("Invalid font matrix for font "+lt),ht<0?(ht=-ht,gt.fontDirection=-1):gt.fontDirection=1,this.current.font=dt,this.current.fontSize=ht,dt.isType3Font)return;const vt=dt.loadedName||"sans-serif",St=((Wt=dt.systemFontInfo)==null?void 0:Wt.css)||`"${vt}", ${dt.fallbackName}`;let kt="normal";dt.black?kt="900":dt.bold&&(kt="bold");const Rt=dt.italic?"italic":"normal";let Vt=ht;ht<g?Vt=g:ht>h&&(Vt=h),this.current.fontSizeScale=ht/Vt,this.ctx.font=`${Rt} ${kt} ${Vt}px ${St}`}setTextRenderingMode(lt){this.current.textRenderingMode=lt}setTextRise(lt){this.current.textRise=lt}moveText(lt,ht){this.current.x=this.current.lineX+=lt,this.current.y=this.current.lineY+=ht}setLeadingMoveText(lt,ht){this.setLeading(-ht),this.moveText(lt,ht)}setTextMatrix(lt,ht,dt,gt,vt,St){this.current.textMatrix=[lt,ht,dt,gt,vt,St],this.current.textMatrixScale=Math.hypot(lt,ht),this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}nextLine(){this.moveText(0,this.current.leading)}paintChar(lt,ht,dt,gt){const vt=this.ctx,St=this.current,kt=St.font,Rt=St.textRenderingMode,Vt=St.fontSize/St.fontSizeScale,Wt=Rt&a.TextRenderingMode.FILL_STROKE_MASK,Xt=!!(Rt&a.TextRenderingMode.ADD_TO_PATH_FLAG),Qt=St.patternFill&&!kt.missingFile;let lr;(kt.disableFontFace||Xt||Qt)&&(lr=kt.getPathGenerator(this.commonObjs,lt)),kt.disableFontFace||Qt?(vt.save(),vt.translate(ht,dt),vt.beginPath(),lr(vt,Vt),gt&&vt.setTransform(...gt),(Wt===a.TextRenderingMode.FILL||Wt===a.TextRenderingMode.FILL_STROKE)&&vt.fill(),(Wt===a.TextRenderingMode.STROKE||Wt===a.TextRenderingMode.FILL_STROKE)&&vt.stroke(),vt.restore()):((Wt===a.TextRenderingMode.FILL||Wt===a.TextRenderingMode.FILL_STROKE)&&vt.fillText(lt,ht,dt),(Wt===a.TextRenderingMode.STROKE||Wt===a.TextRenderingMode.FILL_STROKE)&&vt.strokeText(lt,ht,dt)),Xt&&(this.pendingTextPaths||(this.pendingTextPaths=[])).push({transform:(0,o.getCurrentTransform)(vt),x:ht,y:dt,fontSize:Vt,addToPath:lr})}get isFontSubpixelAAEnabled(){const{context:lt}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);lt.scale(1.5,1),lt.fillText("I",0,10);const ht=lt.getImageData(0,0,10,10).data;let dt=!1;for(let gt=3;gt<ht.length;gt+=4)if(ht[gt]>0&&ht[gt]<255){dt=!0;break}return(0,a.shadow)(this,"isFontSubpixelAAEnabled",dt)}showText(lt){const ht=this.current,dt=ht.font;if(dt.isType3Font)return this.showType3Text(lt);const gt=ht.fontSize;if(gt===0)return;const vt=this.ctx,St=ht.fontSizeScale,kt=ht.charSpacing,Rt=ht.wordSpacing,Vt=ht.fontDirection,Wt=ht.textHScale*Vt,Xt=lt.length,Qt=dt.vertical,lr=Qt?1:-1,er=dt.defaultVMetrics,mr=gt*ht.fontMatrix[0],xr=ht.textRenderingMode===a.TextRenderingMode.FILL&&!dt.disableFontFace&&!ht.patternFill;vt.save(),vt.transform(...ht.textMatrix),vt.translate(ht.x,ht.y+ht.textRise),Vt>0?vt.scale(Wt,-1):vt.scale(Wt,1);let ur;if(ht.patternFill){vt.save();const Zt=ht.fillColor.getPattern(vt,this,(0,o.getCurrentTransformInverse)(vt),c.PathType.FILL);ur=(0,o.getCurrentTransform)(vt),vt.restore(),vt.fillStyle=Zt}let _r=ht.lineWidth;const tr=ht.textMatrixScale;if(tr===0||_r===0){const Zt=ht.textRenderingMode&a.TextRenderingMode.FILL_STROKE_MASK;(Zt===a.TextRenderingMode.STROKE||Zt===a.TextRenderingMode.FILL_STROKE)&&(_r=this.getSinglePixelWidth())}else _r/=tr;if(St!==1&&(vt.scale(St,St),_r/=St),vt.lineWidth=_r,dt.isInvalidPDFjsFont){const Zt=[];let dr=0;for(const hr of lt)Zt.push(hr.unicode),dr+=hr.width;vt.fillText(Zt.join(""),0,0),ht.x+=dr*mr*Wt,vt.restore(),this.compose();return}let Bt=0,zt;for(zt=0;zt<Xt;++zt){const Zt=lt[zt];if(typeof Zt=="number"){Bt+=lr*Zt*gt/1e3;continue}let dr=!1;const hr=(Zt.isSpace?Rt:0)+kt,kr=Zt.fontChar,Pr=Zt.accent;let Tr,Nr,Or=Zt.width;if(Qt){const jr=Zt.vmetric||er,Jt=-(Zt.vmetric?jr[1]:Or*.5)*mr,Ut=jr[2]*mr;Or=jr?-jr[0]:Or,Tr=Jt/St,Nr=(Bt+Ut)/St}else Tr=Bt/St,Nr=0;if(dt.remeasure&&Or>0){const jr=vt.measureText(kr).width*1e3/gt*St;if(Or<jr&&this.isFontSubpixelAAEnabled){const Jt=Or/jr;dr=!0,vt.save(),vt.scale(Jt,1),Tr/=Jt}else Or!==jr&&(Tr+=(Or-jr)/2e3*gt/St)}if(this.contentVisible&&(Zt.isInFont||dt.missingFile)){if(xr&&!Pr)vt.fillText(kr,Tr,Nr);else if(this.paintChar(kr,Tr,Nr,ur),Pr){const jr=Tr+gt*Pr.offset.x/St,Jt=Nr-gt*Pr.offset.y/St;this.paintChar(Pr.fontChar,jr,Jt,ur)}}const Cr=Qt?Or*mr-hr*Vt:Or*mr+hr*Vt;Bt+=Cr,dr&&vt.restore()}Qt?ht.y-=Bt:ht.x+=Bt*Wt,vt.restore(),this.compose()}showType3Text(lt){const ht=this.ctx,dt=this.current,gt=dt.font,vt=dt.fontSize,St=dt.fontDirection,kt=gt.vertical?1:-1,Rt=dt.charSpacing,Vt=dt.wordSpacing,Wt=dt.textHScale*St,Xt=dt.fontMatrix||a.FONT_IDENTITY_MATRIX,Qt=lt.length,lr=dt.textRenderingMode===a.TextRenderingMode.INVISIBLE;let er,mr,xr,ur;if(!(lr||vt===0)){for(this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,ht.save(),ht.transform(...dt.textMatrix),ht.translate(dt.x,dt.y),ht.scale(Wt,St),er=0;er<Qt;++er){if(mr=lt[er],typeof mr=="number"){ur=kt*mr*vt/1e3,this.ctx.translate(ur,0),dt.x+=ur*Wt;continue}const _r=(mr.isSpace?Vt:0)+Rt,tr=gt.charProcOperatorList[mr.operatorListId];if(!tr){(0,a.warn)(`Type3 character "${mr.operatorListId}" is not available.`);continue}this.contentVisible&&(this.processingType3=mr,this.save(),ht.scale(vt,vt),ht.transform(...Xt),this.executeOperatorList(tr),this.restore()),xr=a.Util.applyTransform([mr.width,0],Xt)[0]*vt+_r,ht.translate(xr,0),dt.x+=xr*Wt}ht.restore(),this.processingType3=null}}setCharWidth(lt,ht){}setCharWidthAndBounds(lt,ht,dt,gt,vt,St){this.ctx.rect(dt,gt,vt-dt,St-gt),this.ctx.clip(),this.endPath()}getColorN_Pattern(lt){let ht;if(lt[0]==="TilingPattern"){const dt=lt[1],gt=this.baseTransform||(0,o.getCurrentTransform)(this.ctx),vt={createCanvasGraphics:St=>new or(St,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack})};ht=new c.TilingPattern(lt,dt,this.ctx,vt,gt)}else ht=this._getPattern(lt[1],lt[2]);return ht}setStrokeColorN(){this.current.strokeColor=this.getColorN_Pattern(arguments)}setFillColorN(){this.current.fillColor=this.getColorN_Pattern(arguments),this.current.patternFill=!0}setStrokeRGBColor(lt,ht,dt){const gt=a.Util.makeHexColor(lt,ht,dt);this.ctx.strokeStyle=gt,this.current.strokeColor=gt}setFillRGBColor(lt,ht,dt){const gt=a.Util.makeHexColor(lt,ht,dt);this.ctx.fillStyle=gt,this.current.fillColor=gt,this.current.patternFill=!1}_getPattern(lt,ht=null){let dt;return this.cachedPatterns.has(lt)?dt=this.cachedPatterns.get(lt):(dt=(0,c.getShadingPattern)(this.getObject(lt)),this.cachedPatterns.set(lt,dt)),ht&&(dt.matrix=ht),dt}shadingFill(lt){if(!this.contentVisible)return;const ht=this.ctx;this.save();const dt=this._getPattern(lt);ht.fillStyle=dt.getPattern(ht,this,(0,o.getCurrentTransformInverse)(ht),c.PathType.SHADING);const gt=(0,o.getCurrentTransformInverse)(ht);if(gt){const{width:vt,height:St}=ht.canvas,[kt,Rt,Vt,Wt]=a.Util.getAxialAlignedBoundingBox([0,0,vt,St],gt);this.ctx.fillRect(kt,Rt,Vt-kt,Wt-Rt)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.compose(this.current.getClippedPathBoundingBox()),this.restore()}beginInlineImage(){(0,a.unreachable)("Should not call beginInlineImage")}beginImageData(){(0,a.unreachable)("Should not call beginImageData")}paintFormXObjectBegin(lt,ht){if(this.contentVisible&&(this.save(),this.baseTransformStack.push(this.baseTransform),Array.isArray(lt)&&lt.length===6&&this.transform(...lt),this.baseTransform=(0,o.getCurrentTransform)(this.ctx),ht)){const dt=ht[2]-ht[0],gt=ht[3]-ht[1];this.ctx.rect(ht[0],ht[1],dt,gt),this.current.updateRectMinMax((0,o.getCurrentTransform)(this.ctx),ht),this.clip(),this.endPath()}}paintFormXObjectEnd(){this.contentVisible&&(this.restore(),this.baseTransform=this.baseTransformStack.pop())}beginGroup(lt){if(!this.contentVisible)return;this.save(),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const ht=this.ctx;lt.isolated||(0,a.info)("TODO: Support non-isolated groups."),lt.knockout&&(0,a.warn)("Knockout groups not supported.");const dt=(0,o.getCurrentTransform)(ht);if(lt.matrix&&ht.transform(...lt.matrix),!lt.bbox)throw new Error("Bounding box is required.");let gt=a.Util.getAxialAlignedBoundingBox(lt.bbox,(0,o.getCurrentTransform)(ht));const vt=[0,0,ht.canvas.width,ht.canvas.height];gt=a.Util.intersect(gt,vt)||[0,0,0,0];const St=Math.floor(gt[0]),kt=Math.floor(gt[1]);let Rt=Math.max(Math.ceil(gt[2])-St,1),Vt=Math.max(Math.ceil(gt[3])-kt,1),Wt=1,Xt=1;Rt>_&&(Wt=Rt/_,Rt=_),Vt>_&&(Xt=Vt/_,Vt=_),this.current.startNewPathAndClipBox([0,0,Rt,Vt]);let Qt="groupAt"+this.groupLevel;lt.smask&&(Qt+="_smask_"+this.smaskCounter++%2);const lr=this.cachedCanvases.getCanvas(Qt,Rt,Vt),er=lr.context;er.scale(1/Wt,1/Xt),er.translate(-St,-kt),er.transform(...dt),lt.smask?this.smaskStack.push({canvas:lr.canvas,context:er,offsetX:St,offsetY:kt,scaleX:Wt,scaleY:Xt,subtype:lt.smask.subtype,backdrop:lt.smask.backdrop,transferMap:lt.smask.transferMap||null,startTransformInverse:null}):(ht.setTransform(1,0,0,1,0,0),ht.translate(St,kt),ht.scale(Wt,Xt),ht.save()),at(ht,er),this.ctx=er,this.setGState([["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(ht),this.groupLevel++}endGroup(lt){if(!this.contentVisible)return;this.groupLevel--;const ht=this.ctx,dt=this.groupStack.pop();if(this.ctx=dt,this.ctx.imageSmoothingEnabled=!1,lt.smask)this.tempSMask=this.smaskStack.pop(),this.restore();else{this.ctx.restore();const gt=(0,o.getCurrentTransform)(this.ctx);this.restore(),this.ctx.save(),this.ctx.setTransform(...gt);const vt=a.Util.getAxialAlignedBoundingBox([0,0,ht.canvas.width,ht.canvas.height],gt);this.ctx.drawImage(ht.canvas,0,0),this.ctx.restore(),this.compose(vt)}}beginAnnotation(lt,ht,dt,gt,vt){if(jt(this,At,Un).call(this),ut(this.ctx),this.ctx.save(),this.save(),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),Array.isArray(ht)&&ht.length===4){const St=ht[2]-ht[0],kt=ht[3]-ht[1];if(vt&&this.annotationCanvasMap){dt=dt.slice(),dt[4]-=ht[0],dt[5]-=ht[1],ht=ht.slice(),ht[0]=ht[1]=0,ht[2]=St,ht[3]=kt;const[Rt,Vt]=a.Util.singularValueDecompose2dScale((0,o.getCurrentTransform)(this.ctx)),{viewportScale:Wt}=this,Xt=Math.ceil(St*this.outputScaleX*Wt),Qt=Math.ceil(kt*this.outputScaleY*Wt);this.annotationCanvas=this.canvasFactory.create(Xt,Qt);const{canvas:lr,context:er}=this.annotationCanvas;this.annotationCanvasMap.set(lt,lr),this.annotationCanvas.savedCtx=this.ctx,this.ctx=er,this.ctx.save(),this.ctx.setTransform(Rt,0,0,-Vt,0,kt*Vt),ut(this.ctx)}else ut(this.ctx),this.ctx.rect(ht[0],ht[1],St,kt),this.ctx.clip(),this.endPath()}this.current=new j(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(...dt),this.transform(...gt)}endAnnotation(){this.annotationCanvas&&(this.ctx.restore(),jt(this,Kt,$n).call(this),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(lt){if(!this.contentVisible)return;const ht=lt.count;lt=this.getObject(lt.data,lt),lt.count=ht;const dt=this.ctx,gt=this.processingType3;if(gt&&(gt.compiled===void 0&&(gt.compiled=$(lt)),gt.compiled)){gt.compiled(dt);return}const vt=this._createMaskCanvas(lt),St=vt.canvas;dt.save(),dt.setTransform(1,0,0,1,0,0),dt.drawImage(St,vt.offsetX,vt.offsetY),dt.restore(),this.compose()}paintImageMaskXObjectRepeat(lt,ht,dt=0,gt=0,vt,St){if(!this.contentVisible)return;lt=this.getObject(lt.data,lt);const kt=this.ctx;kt.save();const Rt=(0,o.getCurrentTransform)(kt);kt.transform(ht,dt,gt,vt,0,0);const Vt=this._createMaskCanvas(lt);kt.setTransform(1,0,0,1,Vt.offsetX-Rt[4],Vt.offsetY-Rt[5]);for(let Wt=0,Xt=St.length;Wt<Xt;Wt+=2){const Qt=a.Util.transform(Rt,[ht,dt,gt,vt,St[Wt],St[Wt+1]]),[lr,er]=a.Util.applyTransform([0,0],Qt);kt.drawImage(Vt.canvas,lr,er)}kt.restore(),this.compose()}paintImageMaskXObjectGroup(lt){if(!this.contentVisible)return;const ht=this.ctx,dt=this.current.fillColor,gt=this.current.patternFill;for(const vt of lt){const{data:St,width:kt,height:Rt,transform:Vt}=vt,Wt=this.cachedCanvases.getCanvas("maskCanvas",kt,Rt),Xt=Wt.context;Xt.save();const Qt=this.getObject(St,vt);ft(Xt,Qt),Xt.globalCompositeOperation="source-in",Xt.fillStyle=gt?dt.getPattern(Xt,this,(0,o.getCurrentTransformInverse)(ht),c.PathType.FILL):dt,Xt.fillRect(0,0,kt,Rt),Xt.restore(),ht.save(),ht.transform(...Vt),ht.scale(1,-1),tt(ht,Wt.canvas,0,0,kt,Rt,0,-1,1,1),ht.restore()}this.compose()}paintImageXObject(lt){if(!this.contentVisible)return;const ht=this.getObject(lt);if(!ht){(0,a.warn)("Dependent image isn't ready yet");return}this.paintInlineImageXObject(ht)}paintImageXObjectRepeat(lt,ht,dt,gt){if(!this.contentVisible)return;const vt=this.getObject(lt);if(!vt){(0,a.warn)("Dependent image isn't ready yet");return}const St=vt.width,kt=vt.height,Rt=[];for(let Vt=0,Wt=gt.length;Vt<Wt;Vt+=2)Rt.push({transform:[ht,0,0,dt,gt[Vt],gt[Vt+1]],x:0,y:0,w:St,h:kt});this.paintInlineImageXObjectGroup(vt,Rt)}applyTransferMapsToCanvas(lt){return this.current.transferMaps!=="none"&&(lt.filter=this.current.transferMaps,lt.drawImage(lt.canvas,0,0),lt.filter="none"),lt.canvas}applyTransferMapsToBitmap(lt){if(this.current.transferMaps==="none")return lt.bitmap;const{bitmap:ht,width:dt,height:gt}=lt,vt=this.cachedCanvases.getCanvas("inlineImage",dt,gt),St=vt.context;return St.filter=this.current.transferMaps,St.drawImage(ht,0,0),St.filter="none",vt.canvas}paintInlineImageXObject(lt){if(!this.contentVisible)return;const ht=lt.width,dt=lt.height,gt=this.ctx;if(this.save(),!a.isNodeJS){const{filter:kt}=gt;kt!=="none"&&kt!==""&&(gt.filter="none")}gt.scale(1/ht,-1/dt);let vt;if(lt.bitmap)vt=this.applyTransferMapsToBitmap(lt);else if(typeof HTMLElement=="function"&&lt instanceof HTMLElement||!lt.data)vt=lt;else{const Rt=this.cachedCanvases.getCanvas("inlineImage",ht,dt).context;et(Rt,lt),vt=this.applyTransferMapsToCanvas(Rt)}const St=this._scaleImage(vt,(0,o.getCurrentTransformInverse)(gt));gt.imageSmoothingEnabled=Nt((0,o.getCurrentTransform)(gt),lt.interpolate),tt(gt,St.img,0,0,St.paintWidth,St.paintHeight,0,-dt,ht,dt),this.compose(),this.restore()}paintInlineImageXObjectGroup(lt,ht){if(!this.contentVisible)return;const dt=this.ctx;let gt;if(lt.bitmap)gt=lt.bitmap;else{const vt=lt.width,St=lt.height,Rt=this.cachedCanvases.getCanvas("inlineImage",vt,St).context;et(Rt,lt),gt=this.applyTransferMapsToCanvas(Rt)}for(const vt of ht)dt.save(),dt.transform(...vt.transform),dt.scale(1,-1),tt(dt,gt,vt.x,vt.y,vt.w,vt.h,0,-1,1,1),dt.restore();this.compose()}paintSolidColorImageMask(){this.contentVisible&&(this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(lt){}markPointProps(lt,ht){}beginMarkedContent(lt){this.markedContentStack.push({visible:!0})}beginMarkedContentProps(lt,ht){lt==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(ht)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(){this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(){}endCompat(){}consumePath(lt){const ht=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(lt);const dt=this.ctx;this.pendingClip&&(ht||(this.pendingClip===qt?dt.clip("evenodd"):dt.clip()),this.pendingClip=null),this.current.startNewPathAndClipBox(this.current.clipBox),dt.beginPath()}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const lt=(0,o.getCurrentTransform)(this.ctx);if(lt[1]===0&&lt[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(lt[0]),Math.abs(lt[3]));else{const ht=Math.abs(lt[0]*lt[3]-lt[2]*lt[1]),dt=Math.hypot(lt[0],lt[2]),gt=Math.hypot(lt[1],lt[3]);this._cachedGetSinglePixelWidth=Math.max(dt,gt)/ht}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(this._cachedScaleForStroking[0]===-1){const{lineWidth:lt}=this.current,{a:ht,b:dt,c:gt,d:vt}=this.ctx.getTransform();let St,kt;if(dt===0&&gt===0){const Rt=Math.abs(ht),Vt=Math.abs(vt);if(Rt===Vt)if(lt===0)St=kt=1/Rt;else{const Wt=Rt*lt;St=kt=Wt<1?1/Wt:1}else if(lt===0)St=1/Rt,kt=1/Vt;else{const Wt=Rt*lt,Xt=Vt*lt;St=Wt<1?1/Wt:1,kt=Xt<1?1/Xt:1}}else{const Rt=Math.abs(ht*vt-dt*gt),Vt=Math.hypot(ht,dt),Wt=Math.hypot(gt,vt);if(lt===0)St=Wt/Rt,kt=Vt/Rt;else{const Xt=lt*Rt;St=Wt>Xt?Wt/Xt:1,kt=Vt>Xt?Vt/Xt:1}}this._cachedScaleForStroking[0]=St,this._cachedScaleForStroking[1]=kt}return this._cachedScaleForStroking}rescaleAndStroke(lt){const{ctx:ht}=this,{lineWidth:dt}=this.current,[gt,vt]=this.getScaleForStroking();if(ht.lineWidth=dt||1,gt===1&&vt===1){ht.stroke();return}const St=ht.getLineDash();if(lt&&ht.save(),ht.scale(gt,vt),St.length>0){const kt=Math.max(gt,vt);ht.setLineDash(St.map(Rt=>Rt/kt)),ht.lineDashOffset/=kt}ht.stroke(),lt&&ht.restore()}isContentVisible(){for(let lt=this.markedContentStack.length-1;lt>=0;lt--)if(!this.markedContentStack[lt].visible)return!1;return!0}};At=new WeakSet,Un=function(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)},Kt=new WeakSet,$n=function(){if(this.pageColors){const lt=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if(lt!=="none"){const ht=this.ctx.filter;this.ctx.filter=lt,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=ht}}};let Yt=or;e.CanvasGraphics=Yt;for(const Et in a.OPS)Yt.prototype[Et]!==void 0&&(Yt.prototype[a.OPS[Et]]=Yt.prototype[Et])},(s,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.TilingPattern=e.PathType=void 0,e.getShadingPattern=it;var a=i(1),o=i(6);const c={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};e.PathType=c;function d($,j){if(!j)return;const et=j[2]-j[0],ft=j[3]-j[1],at=new Path2D;at.rect(j[0],j[1],et,ft),$.clip(at)}class g{constructor(){this.constructor===g&&(0,a.unreachable)("Cannot initialize BaseShadingPattern.")}getPattern(){(0,a.unreachable)("Abstract method `getPattern` called.")}}class h extends g{constructor(j){super(),this._type=j[1],this._bbox=j[2],this._colorStops=j[3],this._p0=j[4],this._p1=j[5],this._r0=j[6],this._r1=j[7],this.matrix=null}_createGradient(j){let et;this._type==="axial"?et=j.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):this._type==="radial"&&(et=j.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const ft of this._colorStops)et.addColorStop(ft[0],ft[1]);return et}getPattern(j,et,ft,at){let ut;if(at===c.STROKE||at===c.FILL){const yt=et.current.getClippedPathBoundingBox(at,(0,o.getCurrentTransform)(j))||[0,0,0,0],mt=Math.ceil(yt[2]-yt[0])||1,pt=Math.ceil(yt[3]-yt[1])||1,bt=et.cachedCanvases.getCanvas("pattern",mt,pt,!0),_t=bt.context;_t.clearRect(0,0,_t.canvas.width,_t.canvas.height),_t.beginPath(),_t.rect(0,0,_t.canvas.width,_t.canvas.height),_t.translate(-yt[0],-yt[1]),ft=a.Util.transform(ft,[1,0,0,1,yt[0],yt[1]]),_t.transform(...et.baseTransform),this.matrix&&_t.transform(...this.matrix),d(_t,this._bbox),_t.fillStyle=this._createGradient(_t),_t.fill(),ut=j.createPattern(bt.canvas,"no-repeat");const Nt=new DOMMatrix(ft);ut.setTransform(Nt)}else d(j,this._bbox),ut=this._createGradient(j);return ut}}function _($,j,et,ft,at,ut,yt,mt){const pt=j.coords,bt=j.colors,_t=$.data,Nt=$.width*4;let It;pt[et+1]>pt[ft+1]&&(It=et,et=ft,ft=It,It=ut,ut=yt,yt=It),pt[ft+1]>pt[at+1]&&(It=ft,ft=at,at=It,It=yt,yt=mt,mt=It),pt[et+1]>pt[ft+1]&&(It=et,et=ft,ft=It,It=ut,ut=yt,yt=It);const xt=(pt[et]+j.offsetX)*j.scaleX,Mt=(pt[et+1]+j.offsetY)*j.scaleY,qt=(pt[ft]+j.offsetX)*j.scaleX,Yt=(pt[ft+1]+j.offsetY)*j.scaleY,At=(pt[at]+j.offsetX)*j.scaleX,$t=(pt[at+1]+j.offsetY)*j.scaleY;if(Mt>=$t)return;const Kt=bt[ut],nr=bt[ut+1],or=bt[ut+2],Et=bt[yt],lt=bt[yt+1],ht=bt[yt+2],dt=bt[mt],gt=bt[mt+1],vt=bt[mt+2],St=Math.round(Mt),kt=Math.round($t);let Rt,Vt,Wt,Xt,Qt,lr,er,mr;for(let xr=St;xr<=kt;xr++){if(xr<Yt){const zt=xr<Mt?0:(Mt-xr)/(Mt-Yt);Rt=xt-(xt-qt)*zt,Vt=Kt-(Kt-Et)*zt,Wt=nr-(nr-lt)*zt,Xt=or-(or-ht)*zt}else{let zt;xr>$t?zt=1:Yt===$t?zt=0:zt=(Yt-xr)/(Yt-$t),Rt=qt-(qt-At)*zt,Vt=Et-(Et-dt)*zt,Wt=lt-(lt-gt)*zt,Xt=ht-(ht-vt)*zt}let ur;xr<Mt?ur=0:xr>$t?ur=1:ur=(Mt-xr)/(Mt-$t),Qt=xt-(xt-At)*ur,lr=Kt-(Kt-dt)*ur,er=nr-(nr-gt)*ur,mr=or-(or-vt)*ur;const _r=Math.round(Math.min(Rt,Qt)),tr=Math.round(Math.max(Rt,Qt));let Bt=Nt*xr+_r*4;for(let zt=_r;zt<=tr;zt++)ur=(Rt-zt)/(Rt-Qt),ur<0?ur=0:ur>1&&(ur=1),_t[Bt++]=Vt-(Vt-lr)*ur|0,_t[Bt++]=Wt-(Wt-er)*ur|0,_t[Bt++]=Xt-(Xt-mr)*ur|0,_t[Bt++]=255}}function b($,j,et){const ft=j.coords,at=j.colors;let ut,yt;switch(j.type){case"lattice":const mt=j.verticesPerRow,pt=Math.floor(ft.length/mt)-1,bt=mt-1;for(ut=0;ut<pt;ut++){let _t=ut*mt;for(let Nt=0;Nt<bt;Nt++,_t++)_($,et,ft[_t],ft[_t+1],ft[_t+mt],at[_t],at[_t+1],at[_t+mt]),_($,et,ft[_t+mt+1],ft[_t+1],ft[_t+mt],at[_t+mt+1],at[_t+1],at[_t+mt])}break;case"triangles":for(ut=0,yt=ft.length;ut<yt;ut+=3)_($,et,ft[ut],ft[ut+1],ft[ut+2],at[ut],at[ut+1],at[ut+2]);break;default:throw new Error("illegal figure")}}class rt extends g{constructor(j){super(),this._coords=j[2],this._colors=j[3],this._figures=j[4],this._bounds=j[5],this._bbox=j[7],this._background=j[8],this.matrix=null}_createMeshCanvas(j,et,ft){const mt=Math.floor(this._bounds[0]),pt=Math.floor(this._bounds[1]),bt=Math.ceil(this._bounds[2])-mt,_t=Math.ceil(this._bounds[3])-pt,Nt=Math.min(Math.ceil(Math.abs(bt*j[0]*1.1)),3e3),It=Math.min(Math.ceil(Math.abs(_t*j[1]*1.1)),3e3),xt=bt/Nt,Mt=_t/It,qt={coords:this._coords,colors:this._colors,offsetX:-mt,offsetY:-pt,scaleX:1/xt,scaleY:1/Mt},Yt=Nt+2*2,At=It+2*2,$t=ft.getCanvas("mesh",Yt,At,!1),Kt=$t.context,nr=Kt.createImageData(Nt,It);if(et){const Et=nr.data;for(let lt=0,ht=Et.length;lt<ht;lt+=4)Et[lt]=et[0],Et[lt+1]=et[1],Et[lt+2]=et[2],Et[lt+3]=255}for(const Et of this._figures)b(nr,Et,qt);return Kt.putImageData(nr,2,2),{canvas:$t.canvas,offsetX:mt-2*xt,offsetY:pt-2*Mt,scaleX:xt,scaleY:Mt}}getPattern(j,et,ft,at){d(j,this._bbox);let ut;if(at===c.SHADING)ut=a.Util.singularValueDecompose2dScale((0,o.getCurrentTransform)(j));else if(ut=a.Util.singularValueDecompose2dScale(et.baseTransform),this.matrix){const mt=a.Util.singularValueDecompose2dScale(this.matrix);ut=[ut[0]*mt[0],ut[1]*mt[1]]}const yt=this._createMeshCanvas(ut,at===c.SHADING?null:this._background,et.cachedCanvases);return at!==c.SHADING&&(j.setTransform(...et.baseTransform),this.matrix&&j.transform(...this.matrix)),j.translate(yt.offsetX,yt.offsetY),j.scale(yt.scaleX,yt.scaleY),j.createPattern(yt.canvas,"no-repeat")}}class nt extends g{getPattern(){return"hotpink"}}function it($){switch($[0]){case"RadialAxial":return new h($);case"Mesh":return new rt($);case"Dummy":return new nt}throw new Error(`Unknown IR type: ${$[0]}`)}const ot={COLORED:1,UNCOLORED:2},tt=class tt{constructor(j,et,ft,at,ut){this.operatorList=j[2],this.matrix=j[3]||[1,0,0,1,0,0],this.bbox=j[4],this.xstep=j[5],this.ystep=j[6],this.paintType=j[7],this.tilingType=j[8],this.color=et,this.ctx=ft,this.canvasGraphicsFactory=at,this.baseTransform=ut}createPatternCanvas(j){const et=this.operatorList,ft=this.bbox,at=this.xstep,ut=this.ystep,yt=this.paintType,mt=this.tilingType,pt=this.color,bt=this.canvasGraphicsFactory;(0,a.info)("TilingType: "+mt);const _t=ft[0],Nt=ft[1],It=ft[2],xt=ft[3],Mt=a.Util.singularValueDecompose2dScale(this.matrix),qt=a.Util.singularValueDecompose2dScale(this.baseTransform),Yt=[Mt[0]*qt[0],Mt[1]*qt[1]],At=this.getSizeAndScale(at,this.ctx.canvas.width,Yt[0]),$t=this.getSizeAndScale(ut,this.ctx.canvas.height,Yt[1]),Kt=j.cachedCanvases.getCanvas("pattern",At.size,$t.size,!0),nr=Kt.context,or=bt.createCanvasGraphics(nr);or.groupLevel=j.groupLevel,this.setFillAndStrokeStyleToContext(or,yt,pt);let Et=_t,lt=Nt,ht=It,dt=xt;return _t<0&&(Et=0,ht+=Math.abs(_t)),Nt<0&&(lt=0,dt+=Math.abs(Nt)),nr.translate(-(At.scale*Et),-($t.scale*lt)),or.transform(At.scale,0,0,$t.scale,0,0),nr.save(),this.clipBbox(or,Et,lt,ht,dt),or.baseTransform=(0,o.getCurrentTransform)(or.ctx),or.executeOperatorList(et),or.endDrawing(),{canvas:Kt.canvas,scaleX:At.scale,scaleY:$t.scale,offsetX:Et,offsetY:lt}}getSizeAndScale(j,et,ft){j=Math.abs(j);const at=Math.max(tt.MAX_PATTERN_SIZE,et);let ut=Math.ceil(j*ft);return ut>=at?ut=at:ft=ut/j,{scale:ft,size:ut}}clipBbox(j,et,ft,at,ut){const yt=at-et,mt=ut-ft;j.ctx.rect(et,ft,yt,mt),j.current.updateRectMinMax((0,o.getCurrentTransform)(j.ctx),[et,ft,at,ut]),j.clip(),j.endPath()}setFillAndStrokeStyleToContext(j,et,ft){const at=j.ctx,ut=j.current;switch(et){case ot.COLORED:const yt=this.ctx;at.fillStyle=yt.fillStyle,at.strokeStyle=yt.strokeStyle,ut.fillColor=yt.fillStyle,ut.strokeColor=yt.strokeStyle;break;case ot.UNCOLORED:const mt=a.Util.makeHexColor(ft[0],ft[1],ft[2]);at.fillStyle=mt,at.strokeStyle=mt,ut.fillColor=mt,ut.strokeColor=mt;break;default:throw new a.FormatError(`Unsupported paint type: ${et}`)}}getPattern(j,et,ft,at){let ut=ft;at!==c.SHADING&&(ut=a.Util.transform(ut,et.baseTransform),this.matrix&&(ut=a.Util.transform(ut,this.matrix)));const yt=this.createPatternCanvas(et);let mt=new DOMMatrix(ut);mt=mt.translate(yt.offsetX,yt.offsetY),mt=mt.scale(1/yt.scaleX,1/yt.scaleY);const pt=j.createPattern(yt.canvas,"repeat");return pt.setTransform(mt),pt}};Br(tt,"MAX_PATTERN_SIZE",3e3);let ct=tt;e.TilingPattern=ct},(s,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.convertBlackAndWhiteToRGBA=c,e.convertToRGBA=o,e.grayToRGBA=g;var a=i(1);function o(h){switch(h.kind){case a.ImageKind.GRAYSCALE_1BPP:return c(h);case a.ImageKind.RGB_24BPP:return d(h)}return null}function c({src:h,srcPos:_=0,dest:b,width:rt,height:nt,nonBlackColor:it=4294967295,inverseDecode:ot=!1}){const ct=a.FeatureTest.isLittleEndian?4278190080:255,[tt,$]=ot?[it,ct]:[ct,it],j=rt>>3,et=rt&7,ft=h.length;b=new Uint32Array(b.buffer);let at=0;for(let ut=0;ut<nt;ut++){for(const mt=_+j;_<mt;_++){const pt=_<ft?h[_]:255;b[at++]=pt&128?$:tt,b[at++]=pt&64?$:tt,b[at++]=pt&32?$:tt,b[at++]=pt&16?$:tt,b[at++]=pt&8?$:tt,b[at++]=pt&4?$:tt,b[at++]=pt&2?$:tt,b[at++]=pt&1?$:tt}if(et===0)continue;const yt=_<ft?h[_++]:255;for(let mt=0;mt<et;mt++)b[at++]=yt&1<<7-mt?$:tt}return{srcPos:_,destPos:at}}function d({src:h,srcPos:_=0,dest:b,destPos:rt=0,width:nt,height:it}){let ot=0;const ct=h.length>>2,tt=new Uint32Array(h.buffer,_,ct);if(a.FeatureTest.isLittleEndian){for(;ot<ct-2;ot+=3,rt+=4){const $=tt[ot],j=tt[ot+1],et=tt[ot+2];b[rt]=$|4278190080,b[rt+1]=$>>>24|j<<8|4278190080,b[rt+2]=j>>>16|et<<16|4278190080,b[rt+3]=et>>>8|4278190080}for(let $=ot*4,j=h.length;$<j;$+=3)b[rt++]=h[$]|h[$+1]<<8|h[$+2]<<16|4278190080}else{for(;ot<ct-2;ot+=3,rt+=4){const $=tt[ot],j=tt[ot+1],et=tt[ot+2];b[rt]=$|255,b[rt+1]=$<<24|j>>>8|255,b[rt+2]=j<<16|et>>>16|255,b[rt+3]=et<<8|255}for(let $=ot*4,j=h.length;$<j;$+=3)b[rt++]=h[$]<<24|h[$+1]<<16|h[$+2]<<8|255}return{srcPos:_,destPos:rt}}function g(h,_){if(a.FeatureTest.isLittleEndian)for(let b=0,rt=h.length;b<rt;b++)_[b]=h[b]*65793|4278190080;else for(let b=0,rt=h.length;b<rt;b++)_[b]=h[b]*16843008|255}},(s,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.GlobalWorkerOptions=void 0;const i=Object.create(null);e.GlobalWorkerOptions=i,i.workerPort=null,i.workerSrc=""},(s,e,i)=>{var h,gs,b,ms,nt,gn;Object.defineProperty(e,"__esModule",{value:!0}),e.MessageHandler=void 0;var a=i(1);const o={UNKNOWN:0,DATA:1,ERROR:2},c={UNKNOWN:0,CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function d(ot){switch(ot instanceof Error||typeof ot=="object"&&ot!==null||(0,a.unreachable)('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),ot.name){case"AbortException":return new a.AbortException(ot.message);case"MissingPDFException":return new a.MissingPDFException(ot.message);case"PasswordException":return new a.PasswordException(ot.message,ot.code);case"UnexpectedResponseException":return new a.UnexpectedResponseException(ot.message,ot.status);case"UnknownErrorException":return new a.UnknownErrorException(ot.message,ot.details);default:return new a.UnknownErrorException(ot.message,ot.toString())}}class g{constructor(ct,tt,$){Pt(this,h);Pt(this,b);Pt(this,nt);this.sourceName=ct,this.targetName=tt,this.comObj=$,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),this._onComObjOnMessage=j=>{const et=j.data;if(et.targetName!==this.sourceName)return;if(et.stream){jt(this,b,ms).call(this,et);return}if(et.callback){const at=et.callbackId,ut=this.callbackCapabilities[at];if(!ut)throw new Error(`Cannot resolve callback ${at}`);if(delete this.callbackCapabilities[at],et.callback===o.DATA)ut.resolve(et.data);else if(et.callback===o.ERROR)ut.reject(d(et.reason));else throw new Error("Unexpected callback case");return}const ft=this.actionHandler[et.action];if(!ft)throw new Error(`Unknown action from worker: ${et.action}`);if(et.callbackId){const at=this.sourceName,ut=et.sourceName;new Promise(function(yt){yt(ft(et.data))}).then(function(yt){$.postMessage({sourceName:at,targetName:ut,callback:o.DATA,callbackId:et.callbackId,data:yt})},function(yt){$.postMessage({sourceName:at,targetName:ut,callback:o.ERROR,callbackId:et.callbackId,reason:d(yt)})});return}if(et.streamId){jt(this,h,gs).call(this,et);return}ft(et.data)},$.addEventListener("message",this._onComObjOnMessage)}on(ct,tt){const $=this.actionHandler;if($[ct])throw new Error(`There is already an actionName called "${ct}"`);$[ct]=tt}send(ct,tt,$){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:ct,data:tt},$)}sendWithPromise(ct,tt,$){const j=this.callbackId++,et=new a.PromiseCapability;this.callbackCapabilities[j]=et;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:ct,callbackId:j,data:tt},$)}catch(ft){et.reject(ft)}return et.promise}sendWithStream(ct,tt,$,j){const et=this.streamId++,ft=this.sourceName,at=this.targetName,ut=this.comObj;return new ReadableStream({start:yt=>{const mt=new a.PromiseCapability;return this.streamControllers[et]={controller:yt,startCall:mt,pullCall:null,cancelCall:null,isClosed:!1},ut.postMessage({sourceName:ft,targetName:at,action:ct,streamId:et,data:tt,desiredSize:yt.desiredSize},j),mt.promise},pull:yt=>{const mt=new a.PromiseCapability;return this.streamControllers[et].pullCall=mt,ut.postMessage({sourceName:ft,targetName:at,stream:c.PULL,streamId:et,desiredSize:yt.desiredSize}),mt.promise},cancel:yt=>{(0,a.assert)(yt instanceof Error,"cancel must have a valid reason");const mt=new a.PromiseCapability;return this.streamControllers[et].cancelCall=mt,this.streamControllers[et].isClosed=!0,ut.postMessage({sourceName:ft,targetName:at,stream:c.CANCEL,streamId:et,reason:d(yt)}),mt.promise}},$)}destroy(){this.comObj.removeEventListener("message",this._onComObjOnMessage)}}h=new WeakSet,gs=function(ct){const tt=ct.streamId,$=this.sourceName,j=ct.sourceName,et=this.comObj,ft=this,at=this.actionHandler[ct.action],ut={enqueue(yt,mt=1,pt){if(this.isCancelled)return;const bt=this.desiredSize;this.desiredSize-=mt,bt>0&&this.desiredSize<=0&&(this.sinkCapability=new a.PromiseCapability,this.ready=this.sinkCapability.promise),et.postMessage({sourceName:$,targetName:j,stream:c.ENQUEUE,streamId:tt,chunk:yt},pt)},close(){this.isCancelled||(this.isCancelled=!0,et.postMessage({sourceName:$,targetName:j,stream:c.CLOSE,streamId:tt}),delete ft.streamSinks[tt])},error(yt){(0,a.assert)(yt instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,et.postMessage({sourceName:$,targetName:j,stream:c.ERROR,streamId:tt,reason:d(yt)}))},sinkCapability:new a.PromiseCapability,onPull:null,onCancel:null,isCancelled:!1,desiredSize:ct.desiredSize,ready:null};ut.sinkCapability.resolve(),ut.ready=ut.sinkCapability.promise,this.streamSinks[tt]=ut,new Promise(function(yt){yt(at(ct.data,ut))}).then(function(){et.postMessage({sourceName:$,targetName:j,stream:c.START_COMPLETE,streamId:tt,success:!0})},function(yt){et.postMessage({sourceName:$,targetName:j,stream:c.START_COMPLETE,streamId:tt,reason:d(yt)})})},b=new WeakSet,ms=function(ct){const tt=ct.streamId,$=this.sourceName,j=ct.sourceName,et=this.comObj,ft=this.streamControllers[tt],at=this.streamSinks[tt];switch(ct.stream){case c.START_COMPLETE:ct.success?ft.startCall.resolve():ft.startCall.reject(d(ct.reason));break;case c.PULL_COMPLETE:ct.success?ft.pullCall.resolve():ft.pullCall.reject(d(ct.reason));break;case c.PULL:if(!at){et.postMessage({sourceName:$,targetName:j,stream:c.PULL_COMPLETE,streamId:tt,success:!0});break}at.desiredSize<=0&&ct.desiredSize>0&&at.sinkCapability.resolve(),at.desiredSize=ct.desiredSize,new Promise(function(ut){var yt;ut((yt=at.onPull)==null?void 0:yt.call(at))}).then(function(){et.postMessage({sourceName:$,targetName:j,stream:c.PULL_COMPLETE,streamId:tt,success:!0})},function(ut){et.postMessage({sourceName:$,targetName:j,stream:c.PULL_COMPLETE,streamId:tt,reason:d(ut)})});break;case c.ENQUEUE:if((0,a.assert)(ft,"enqueue should have stream controller"),ft.isClosed)break;ft.controller.enqueue(ct.chunk);break;case c.CLOSE:if((0,a.assert)(ft,"close should have stream controller"),ft.isClosed)break;ft.isClosed=!0,ft.controller.close(),jt(this,nt,gn).call(this,ft,tt);break;case c.ERROR:(0,a.assert)(ft,"error should have stream controller"),ft.controller.error(d(ct.reason)),jt(this,nt,gn).call(this,ft,tt);break;case c.CANCEL_COMPLETE:ct.success?ft.cancelCall.resolve():ft.cancelCall.reject(d(ct.reason)),jt(this,nt,gn).call(this,ft,tt);break;case c.CANCEL:if(!at)break;new Promise(function(ut){var yt;ut((yt=at.onCancel)==null?void 0:yt.call(at,d(ct.reason)))}).then(function(){et.postMessage({sourceName:$,targetName:j,stream:c.CANCEL_COMPLETE,streamId:tt,success:!0})},function(ut){et.postMessage({sourceName:$,targetName:j,stream:c.CANCEL_COMPLETE,streamId:tt,reason:d(ut)})}),at.sinkCapability.reject(d(ct.reason)),at.isCancelled=!0,delete this.streamSinks[tt];break;default:throw new Error("Unexpected stream case")}},nt=new WeakSet,gn=async function(ct,tt){var $,j,et;await Promise.allSettled([($=ct.startCall)==null?void 0:$.promise,(j=ct.pullCall)==null?void 0:j.promise,(et=ct.cancelCall)==null?void 0:et.promise]),delete this.streamControllers[tt]},e.MessageHandler=g},(s,e,i)=>{var c,d;Object.defineProperty(e,"__esModule",{value:!0}),e.Metadata=void 0;var a=i(1);class o{constructor({parsedData:h,rawData:_}){Pt(this,c,void 0);Pt(this,d,void 0);Ht(this,c,h),Ht(this,d,_)}getRaw(){return _e(this,d)}get(h){return _e(this,c).get(h)??null}getAll(){return(0,a.objectFromMap)(_e(this,c))}has(h){return _e(this,c).has(h)}}c=new WeakMap,d=new WeakMap,e.Metadata=o},(s,e,i)=>{var h,_,b,rt,nt,it,Bn;Object.defineProperty(e,"__esModule",{value:!0}),e.OptionalContentConfig=void 0;var a=i(1),o=i(8);const c=Symbol("INTERNAL");class d{constructor(tt,$){Pt(this,h,!0);this.name=tt,this.intent=$}get visible(){return _e(this,h)}_setVisible(tt,$){tt!==c&&(0,a.unreachable)("Internal method `_setVisible` called."),Ht(this,h,$)}}h=new WeakMap;class g{constructor(tt){Pt(this,it);Pt(this,_,null);Pt(this,b,new Map);Pt(this,rt,null);Pt(this,nt,null);if(this.name=null,this.creator=null,tt!==null){this.name=tt.name,this.creator=tt.creator,Ht(this,nt,tt.order);for(const $ of tt.groups)_e(this,b).set($.id,new d($.name,$.intent));if(tt.baseState==="OFF")for(const $ of _e(this,b).values())$._setVisible(c,!1);for(const $ of tt.on)_e(this,b).get($)._setVisible(c,!0);for(const $ of tt.off)_e(this,b).get($)._setVisible(c,!1);Ht(this,rt,this.getHash())}}isVisible(tt){if(_e(this,b).size===0)return!0;if(!tt)return(0,a.warn)("Optional content group not defined."),!0;if(tt.type==="OCG")return _e(this,b).has(tt.id)?_e(this,b).get(tt.id).visible:((0,a.warn)(`Optional content group not found: ${tt.id}`),!0);if(tt.type==="OCMD"){if(tt.expression)return jt(this,it,Bn).call(this,tt.expression);if(!tt.policy||tt.policy==="AnyOn"){for(const $ of tt.ids){if(!_e(this,b).has($))return(0,a.warn)(`Optional content group not found: ${$}`),!0;if(_e(this,b).get($).visible)return!0}return!1}else if(tt.policy==="AllOn"){for(const $ of tt.ids){if(!_e(this,b).has($))return(0,a.warn)(`Optional content group not found: ${$}`),!0;if(!_e(this,b).get($).visible)return!1}return!0}else if(tt.policy==="AnyOff"){for(const $ of tt.ids){if(!_e(this,b).has($))return(0,a.warn)(`Optional content group not found: ${$}`),!0;if(!_e(this,b).get($).visible)return!0}return!1}else if(tt.policy==="AllOff"){for(const $ of tt.ids){if(!_e(this,b).has($))return(0,a.warn)(`Optional content group not found: ${$}`),!0;if(_e(this,b).get($).visible)return!1}return!0}return(0,a.warn)(`Unknown optional content policy ${tt.policy}.`),!0}return(0,a.warn)(`Unknown group type ${tt.type}.`),!0}setVisibility(tt,$=!0){if(!_e(this,b).has(tt)){(0,a.warn)(`Optional content group not found: ${tt}`);return}_e(this,b).get(tt)._setVisible(c,!!$),Ht(this,_,null)}get hasInitialVisibility(){return _e(this,rt)===null||this.getHash()===_e(this,rt)}getOrder(){return _e(this,b).size?_e(this,nt)?_e(this,nt).slice():[..._e(this,b).keys()]:null}getGroups(){return _e(this,b).size>0?(0,a.objectFromMap)(_e(this,b)):null}getGroup(tt){return _e(this,b).get(tt)||null}getHash(){if(_e(this,_)!==null)return _e(this,_);const tt=new o.MurmurHash3_64;for(const[$,j]of _e(this,b))tt.update(`${$}:${j.visible}`);return Ht(this,_,tt.hexdigest())}}_=new WeakMap,b=new WeakMap,rt=new WeakMap,nt=new WeakMap,it=new WeakSet,Bn=function(tt){const $=tt.length;if($<2)return!0;const j=tt[0];for(let et=1;et<$;et++){const ft=tt[et];let at;if(Array.isArray(ft))at=jt(this,it,Bn).call(this,ft);else if(_e(this,b).has(ft))at=_e(this,b).get(ft).visible;else return(0,a.warn)(`Optional content group not found: ${ft}`),!0;switch(j){case"And":if(!at)return!1;break;case"Or":if(at)return!0;break;case"Not":return!at;default:return!0}}return j==="And"},e.OptionalContentConfig=g},(s,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.PDFDataTransportStream=void 0;var a=i(1),o=i(6);class c{constructor({length:_,initialData:b,progressiveDone:rt=!1,contentDispositionFilename:nt=null,disableRange:it=!1,disableStream:ot=!1},ct){if((0,a.assert)(ct,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.'),this._queuedChunks=[],this._progressiveDone=rt,this._contentDispositionFilename=nt,(b==null?void 0:b.length)>0){const tt=b instanceof Uint8Array&&b.byteLength===b.buffer.byteLength?b.buffer:new Uint8Array(b).buffer;this._queuedChunks.push(tt)}this._pdfDataRangeTransport=ct,this._isStreamingSupported=!ot,this._isRangeSupported=!it,this._contentLength=_,this._fullRequestReader=null,this._rangeReaders=[],this._pdfDataRangeTransport.addRangeListener((tt,$)=>{this._onReceiveData({begin:tt,chunk:$})}),this._pdfDataRangeTransport.addProgressListener((tt,$)=>{this._onProgress({loaded:tt,total:$})}),this._pdfDataRangeTransport.addProgressiveReadListener(tt=>{this._onReceiveData({chunk:tt})}),this._pdfDataRangeTransport.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),this._pdfDataRangeTransport.transportReady()}_onReceiveData({begin:_,chunk:b}){const rt=b instanceof Uint8Array&&b.byteLength===b.buffer.byteLength?b.buffer:new Uint8Array(b).buffer;if(_===void 0)this._fullRequestReader?this._fullRequestReader._enqueue(rt):this._queuedChunks.push(rt);else{const nt=this._rangeReaders.some(function(it){return it._begin!==_?!1:(it._enqueue(rt),!0)});(0,a.assert)(nt,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){var _;return((_=this._fullRequestReader)==null?void 0:_._loaded)??0}_onProgress(_){var b,rt,nt,it;_.total===void 0?(rt=(b=this._rangeReaders[0])==null?void 0:b.onProgress)==null||rt.call(b,{loaded:_.loaded}):(it=(nt=this._fullRequestReader)==null?void 0:nt.onProgress)==null||it.call(nt,{loaded:_.loaded,total:_.total})}_onProgressiveDone(){var _;(_=this._fullRequestReader)==null||_.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(_){const b=this._rangeReaders.indexOf(_);b>=0&&this._rangeReaders.splice(b,1)}getFullReader(){(0,a.assert)(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const _=this._queuedChunks;return this._queuedChunks=null,new d(this,_,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(_,b){if(b<=this._progressiveDataLength)return null;const rt=new g(this,_,b);return this._pdfDataRangeTransport.requestDataRange(_,b),this._rangeReaders.push(rt),rt}cancelAllRequests(_){var b;(b=this._fullRequestReader)==null||b.cancel(_);for(const rt of this._rangeReaders.slice(0))rt.cancel(_);this._pdfDataRangeTransport.abort()}}e.PDFDataTransportStream=c;class d{constructor(_,b,rt=!1,nt=null){this._stream=_,this._done=rt||!1,this._filename=(0,o.isPdfFile)(nt)?nt:null,this._queuedChunks=b||[],this._loaded=0;for(const it of this._queuedChunks)this._loaded+=it.byteLength;this._requests=[],this._headersReady=Promise.resolve(),_._fullRequestReader=this,this.onProgress=null}_enqueue(_){this._done||(this._requests.length>0?this._requests.shift().resolve({value:_,done:!1}):this._queuedChunks.push(_),this._loaded+=_.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const _=new a.PromiseCapability;return this._requests.push(_),_.promise}cancel(_){this._done=!0;for(const b of this._requests)b.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class g{constructor(_,b,rt){this._stream=_,this._begin=b,this._end=rt,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(_){if(!this._done){if(this._requests.length===0)this._queuedChunk=_;else{this._requests.shift().resolve({value:_,done:!1});for(const rt of this._requests)rt.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const b=this._queuedChunk;return this._queuedChunk=null,{value:b,done:!1}}if(this._done)return{value:void 0,done:!0};const _=new a.PromiseCapability;return this._requests.push(_),_.promise}cancel(_){this._done=!0;for(const b of this._requests)b.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}},(s,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.PDFFetchStream=void 0;var a=i(1),o=i(20);function c(rt,nt,it){return{method:"GET",headers:rt,signal:it.signal,mode:"cors",credentials:nt?"include":"same-origin",redirect:"follow"}}function d(rt){const nt=new Headers;for(const it in rt){const ot=rt[it];ot!==void 0&&nt.append(it,ot)}return nt}function g(rt){return rt instanceof Uint8Array?rt.buffer:rt instanceof ArrayBuffer?rt:((0,a.warn)(`getArrayBuffer - unexpected data format: ${rt}`),new Uint8Array(rt).buffer)}class h{constructor(nt){this.source=nt,this.isHttp=/^https?:/i.test(nt.url),this.httpHeaders=this.isHttp&&nt.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var nt;return((nt=this._fullRequestReader)==null?void 0:nt._loaded)??0}getFullReader(){return(0,a.assert)(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new _(this),this._fullRequestReader}getRangeReader(nt,it){if(it<=this._progressiveDataLength)return null;const ot=new b(this,nt,it);return this._rangeRequestReaders.push(ot),ot}cancelAllRequests(nt){var it;(it=this._fullRequestReader)==null||it.cancel(nt);for(const ot of this._rangeRequestReaders.slice(0))ot.cancel(nt)}}e.PDFFetchStream=h;class _{constructor(nt){this._stream=nt,this._reader=null,this._loaded=0,this._filename=null;const it=nt.source;this._withCredentials=it.withCredentials||!1,this._contentLength=it.length,this._headersCapability=new a.PromiseCapability,this._disableRange=it.disableRange||!1,this._rangeChunkSize=it.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!it.disableStream,this._isRangeSupported=!it.disableRange,this._headers=d(this._stream.httpHeaders);const ot=it.url;fetch(ot,c(this._headers,this._withCredentials,this._abortController)).then(ct=>{if(!(0,o.validateResponseStatus)(ct.status))throw(0,o.createResponseStatusError)(ct.status,ot);this._reader=ct.body.getReader(),this._headersCapability.resolve();const tt=et=>ct.headers.get(et),{allowRangeRequests:$,suggestedLength:j}=(0,o.validateRangeRequestCapabilities)({getResponseHeader:tt,isHttp:this._stream.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=$,this._contentLength=j||this._contentLength,this._filename=(0,o.extractFilenameFromHeader)(tt),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new a.AbortException("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var ot;await this._headersCapability.promise;const{value:nt,done:it}=await this._reader.read();return it?{value:nt,done:it}:(this._loaded+=nt.byteLength,(ot=this.onProgress)==null||ot.call(this,{loaded:this._loaded,total:this._contentLength}),{value:g(nt),done:!1})}cancel(nt){var it;(it=this._reader)==null||it.cancel(nt),this._abortController.abort()}}class b{constructor(nt,it,ot){this._stream=nt,this._reader=null,this._loaded=0;const ct=nt.source;this._withCredentials=ct.withCredentials||!1,this._readCapability=new a.PromiseCapability,this._isStreamingSupported=!ct.disableStream,this._abortController=new AbortController,this._headers=d(this._stream.httpHeaders),this._headers.append("Range",`bytes=${it}-${ot-1}`);const tt=ct.url;fetch(tt,c(this._headers,this._withCredentials,this._abortController)).then($=>{if(!(0,o.validateResponseStatus)($.status))throw(0,o.createResponseStatusError)($.status,tt);this._readCapability.resolve(),this._reader=$.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){var ot;await this._readCapability.promise;const{value:nt,done:it}=await this._reader.read();return it?{value:nt,done:it}:(this._loaded+=nt.byteLength,(ot=this.onProgress)==null||ot.call(this,{loaded:this._loaded}),{value:g(nt),done:!1})}cancel(nt){var it;(it=this._reader)==null||it.cancel(nt),this._abortController.abort()}}},(s,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.createResponseStatusError=h,e.extractFilenameFromHeader=g,e.validateRangeRequestCapabilities=d,e.validateResponseStatus=_;var a=i(1),o=i(21),c=i(6);function d({getResponseHeader:b,isHttp:rt,rangeChunkSize:nt,disableRange:it}){const ot={allowRangeRequests:!1,suggestedLength:void 0},ct=parseInt(b("Content-Length"),10);return!Number.isInteger(ct)||(ot.suggestedLength=ct,ct<=2*nt)||it||!rt||b("Accept-Ranges")!=="bytes"||(b("Content-Encoding")||"identity")!=="identity"||(ot.allowRangeRequests=!0),ot}function g(b){const rt=b("Content-Disposition");if(rt){let nt=(0,o.getFilenameFromContentDispositionHeader)(rt);if(nt.includes("%"))try{nt=decodeURIComponent(nt)}catch{}if((0,c.isPdfFile)(nt))return nt}return null}function h(b,rt){return b===404||b===0&&rt.startsWith("file:")?new a.MissingPDFException('Missing PDF "'+rt+'".'):new a.UnexpectedResponseException(`Unexpected server response (${b}) while retrieving PDF "${rt}".`,b)}function _(b){return b===200||b===206}},(s,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.getFilenameFromContentDispositionHeader=o;var a=i(1);function o(c){let d=!0,g=h("filename\\*","i").exec(c);if(g){g=g[1];let ct=nt(g);return ct=unescape(ct),ct=it(ct),ct=ot(ct),b(ct)}if(g=rt(c),g){const ct=ot(g);return b(ct)}if(g=h("filename","i").exec(c),g){g=g[1];let ct=nt(g);return ct=ot(ct),b(ct)}function h(ct,tt){return new RegExp("(?:^|;)\\s*"+ct+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',tt)}function _(ct,tt){if(ct){if(!/^[\x00-\xFF]+$/.test(tt))return tt;try{const $=new TextDecoder(ct,{fatal:!0}),j=(0,a.stringToBytes)(tt);tt=$.decode(j),d=!1}catch{}}return tt}function b(ct){return d&&/[\x80-\xff]/.test(ct)&&(ct=_("utf-8",ct),d&&(ct=_("iso-8859-1",ct))),ct}function rt(ct){const tt=[];let $;const j=h("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;($=j.exec(ct))!==null;){let[,ft,at,ut]=$;if(ft=parseInt(ft,10),ft in tt){if(ft===0)break;continue}tt[ft]=[at,ut]}const et=[];for(let ft=0;ft<tt.length&&ft in tt;++ft){let[at,ut]=tt[ft];ut=nt(ut),at&&(ut=unescape(ut),ft===0&&(ut=it(ut))),et.push(ut)}return et.join("")}function nt(ct){if(ct.startsWith('"')){const tt=ct.slice(1).split('\\"');for(let $=0;$<tt.length;++$){const j=tt[$].indexOf('"');j!==-1&&(tt[$]=tt[$].slice(0,j),tt.length=$+1),tt[$]=tt[$].replaceAll(/\\(.)/g,"$1")}ct=tt.join('"')}return ct}function it(ct){const tt=ct.indexOf("'");if(tt===-1)return ct;const $=ct.slice(0,tt),et=ct.slice(tt+1).replace(/^[^']*'/,"");return _($,et)}function ot(ct){return!ct.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(ct)?ct:ct.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(tt,$,j,et){if(j==="q"||j==="Q")return et=et.replaceAll("_"," "),et=et.replaceAll(/=([0-9a-fA-F]{2})/g,function(ft,at){return String.fromCharCode(parseInt(at,16))}),_($,et);try{et=atob(et)}catch{}return _($,et)})}return""}},(s,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.PDFNetworkStream=void 0;var a=i(1),o=i(20);const c=200,d=206;function g(nt){const it=nt.response;return typeof it!="string"?it:(0,a.stringToBytes)(it).buffer}class h{constructor(it,ot={}){this.url=it,this.isHttp=/^https?:/i.test(it),this.httpHeaders=this.isHttp&&ot.httpHeaders||Object.create(null),this.withCredentials=ot.withCredentials||!1,this.currXhrId=0,this.pendingRequests=Object.create(null)}requestRange(it,ot,ct){const tt={begin:it,end:ot};for(const $ in ct)tt[$]=ct[$];return this.request(tt)}requestFull(it){return this.request(it)}request(it){const ot=new XMLHttpRequest,ct=this.currXhrId++,tt=this.pendingRequests[ct]={xhr:ot};ot.open("GET",this.url),ot.withCredentials=this.withCredentials;for(const $ in this.httpHeaders){const j=this.httpHeaders[$];j!==void 0&&ot.setRequestHeader($,j)}return this.isHttp&&"begin"in it&&"end"in it?(ot.setRequestHeader("Range",`bytes=${it.begin}-${it.end-1}`),tt.expectedStatus=d):tt.expectedStatus=c,ot.responseType="arraybuffer",it.onError&&(ot.onerror=function($){it.onError(ot.status)}),ot.onreadystatechange=this.onStateChange.bind(this,ct),ot.onprogress=this.onProgress.bind(this,ct),tt.onHeadersReceived=it.onHeadersReceived,tt.onDone=it.onDone,tt.onError=it.onError,tt.onProgress=it.onProgress,ot.send(null),ct}onProgress(it,ot){var tt;const ct=this.pendingRequests[it];ct&&((tt=ct.onProgress)==null||tt.call(ct,ot))}onStateChange(it,ot){var ft,at,ut;const ct=this.pendingRequests[it];if(!ct)return;const tt=ct.xhr;if(tt.readyState>=2&&ct.onHeadersReceived&&(ct.onHeadersReceived(),delete ct.onHeadersReceived),tt.readyState!==4||!(it in this.pendingRequests))return;if(delete this.pendingRequests[it],tt.status===0&&this.isHttp){(ft=ct.onError)==null||ft.call(ct,tt.status);return}const $=tt.status||c;if(!($===c&&ct.expectedStatus===d)&&$!==ct.expectedStatus){(at=ct.onError)==null||at.call(ct,tt.status);return}const et=g(tt);if($===d){const yt=tt.getResponseHeader("Content-Range"),mt=/bytes (\d+)-(\d+)\/(\d+)/.exec(yt);ct.onDone({begin:parseInt(mt[1],10),chunk:et})}else et?ct.onDone({begin:0,chunk:et}):(ut=ct.onError)==null||ut.call(ct,tt.status)}getRequestXhr(it){return this.pendingRequests[it].xhr}isPendingRequest(it){return it in this.pendingRequests}abortRequest(it){const ot=this.pendingRequests[it].xhr;delete this.pendingRequests[it],ot.abort()}}class _{constructor(it){this._source=it,this._manager=new h(it.url,{httpHeaders:it.httpHeaders,withCredentials:it.withCredentials}),this._rangeChunkSize=it.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(it){const ot=this._rangeRequestReaders.indexOf(it);ot>=0&&this._rangeRequestReaders.splice(ot,1)}getFullReader(){return(0,a.assert)(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new b(this._manager,this._source),this._fullRequestReader}getRangeReader(it,ot){const ct=new rt(this._manager,it,ot);return ct.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(ct),ct}cancelAllRequests(it){var ot;(ot=this._fullRequestReader)==null||ot.cancel(it);for(const ct of this._rangeRequestReaders.slice(0))ct.cancel(it)}}e.PDFNetworkStream=_;class b{constructor(it,ot){this._manager=it;const ct={onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=ot.url,this._fullRequestId=it.requestFull(ct),this._headersReceivedCapability=new a.PromiseCapability,this._disableRange=ot.disableRange||!1,this._contentLength=ot.length,this._rangeChunkSize=ot.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const it=this._fullRequestId,ot=this._manager.getRequestXhr(it),ct=j=>ot.getResponseHeader(j),{allowRangeRequests:tt,suggestedLength:$}=(0,o.validateRangeRequestCapabilities)({getResponseHeader:ct,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});tt&&(this._isRangeSupported=!0),this._contentLength=$||this._contentLength,this._filename=(0,o.extractFilenameFromHeader)(ct),this._isRangeSupported&&this._manager.abortRequest(it),this._headersReceivedCapability.resolve()}_onDone(it){if(it&&(this._requests.length>0?this._requests.shift().resolve({value:it.chunk,done:!1}):this._cachedChunks.push(it.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const ot of this._requests)ot.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(it){this._storedError=(0,o.createResponseStatusError)(it,this._url),this._headersReceivedCapability.reject(this._storedError);for(const ot of this._requests)ot.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(it){var ot;(ot=this.onProgress)==null||ot.call(this,{loaded:it.loaded,total:it.lengthComputable?it.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersReceivedCapability.promise}async read(){if(this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const it=new a.PromiseCapability;return this._requests.push(it),it.promise}cancel(it){this._done=!0,this._headersReceivedCapability.reject(it);for(const ot of this._requests)ot.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class rt{constructor(it,ot,ct){this._manager=it;const tt={onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=it.url,this._requestId=it.requestRange(ot,ct,tt),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_close(){var it;(it=this.onClosed)==null||it.call(this,this)}_onDone(it){const ot=it.chunk;this._requests.length>0?this._requests.shift().resolve({value:ot,done:!1}):this._queuedChunk=ot,this._done=!0;for(const ct of this._requests)ct.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(it){this._storedError=(0,o.createResponseStatusError)(it,this._url);for(const ot of this._requests)ot.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(it){var ot;this.isStreamingSupported||(ot=this.onProgress)==null||ot.call(this,{loaded:it.loaded})}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){const ot=this._queuedChunk;return this._queuedChunk=null,{value:ot,done:!1}}if(this._done)return{value:void 0,done:!0};const it=new a.PromiseCapability;return this._requests.push(it),it.promise}cancel(it){this._done=!0;for(const ot of this._requests)ot.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}},(s,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.PDFNodeStream=void 0;var a=i(1),o=i(20);const c=/^file:\/\/\/[a-zA-Z]:\//;function d(ct){const tt=require$$5,$=tt.parse(ct);return $.protocol==="file:"||$.host?$:/^[a-z]:[/\\]/i.test(ct)?tt.parse(`file:///${ct}`):($.host||($.protocol="file:"),$)}class g{constructor(tt){this.source=tt,this.url=d(tt.url),this.isHttp=this.url.protocol==="http:"||this.url.protocol==="https:",this.isFsUrl=this.url.protocol==="file:",this.httpHeaders=this.isHttp&&tt.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var tt;return((tt=this._fullRequestReader)==null?void 0:tt._loaded)??0}getFullReader(){return(0,a.assert)(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=this.isFsUrl?new it(this):new rt(this),this._fullRequestReader}getRangeReader(tt,$){if($<=this._progressiveDataLength)return null;const j=this.isFsUrl?new ot(this,tt,$):new nt(this,tt,$);return this._rangeRequestReaders.push(j),j}cancelAllRequests(tt){var $;($=this._fullRequestReader)==null||$.cancel(tt);for(const j of this._rangeRequestReaders.slice(0))j.cancel(tt)}}e.PDFNodeStream=g;class h{constructor(tt){this._url=tt.url,this._done=!1,this._storedError=null,this.onProgress=null;const $=tt.source;this._contentLength=$.length,this._loaded=0,this._filename=null,this._disableRange=$.disableRange||!1,this._rangeChunkSize=$.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!$.disableStream,this._isRangeSupported=!$.disableRange,this._readableStream=null,this._readCapability=new a.PromiseCapability,this._headersCapability=new a.PromiseCapability}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var j;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const tt=this._readableStream.read();return tt===null?(this._readCapability=new a.PromiseCapability,this.read()):(this._loaded+=tt.length,(j=this.onProgress)==null||j.call(this,{loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(tt).buffer,done:!1})}cancel(tt){if(!this._readableStream){this._error(tt);return}this._readableStream.destroy(tt)}_error(tt){this._storedError=tt,this._readCapability.resolve()}_setReadableStream(tt){this._readableStream=tt,tt.on("readable",()=>{this._readCapability.resolve()}),tt.on("end",()=>{tt.destroy(),this._done=!0,this._readCapability.resolve()}),tt.on("error",$=>{this._error($)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new a.AbortException("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class _{constructor(tt){this._url=tt.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=new a.PromiseCapability;const $=tt.source;this._isStreamingSupported=!$.disableStream}get isStreamingSupported(){return this._isStreamingSupported}async read(){var j;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const tt=this._readableStream.read();return tt===null?(this._readCapability=new a.PromiseCapability,this.read()):(this._loaded+=tt.length,(j=this.onProgress)==null||j.call(this,{loaded:this._loaded}),{value:new Uint8Array(tt).buffer,done:!1})}cancel(tt){if(!this._readableStream){this._error(tt);return}this._readableStream.destroy(tt)}_error(tt){this._storedError=tt,this._readCapability.resolve()}_setReadableStream(tt){this._readableStream=tt,tt.on("readable",()=>{this._readCapability.resolve()}),tt.on("end",()=>{tt.destroy(),this._done=!0,this._readCapability.resolve()}),tt.on("error",$=>{this._error($)}),this._storedError&&this._readableStream.destroy(this._storedError)}}function b(ct,tt){return{protocol:ct.protocol,auth:ct.auth,host:ct.hostname,port:ct.port,path:ct.path,method:"GET",headers:tt}}class rt extends h{constructor(tt){super(tt);const $=j=>{if(j.statusCode===404){const ut=new a.MissingPDFException(`Missing PDF "${this._url}".`);this._storedError=ut,this._headersCapability.reject(ut);return}this._headersCapability.resolve(),this._setReadableStream(j);const et=ut=>this._readableStream.headers[ut.toLowerCase()],{allowRangeRequests:ft,suggestedLength:at}=(0,o.validateRangeRequestCapabilities)({getResponseHeader:et,isHttp:tt.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=ft,this._contentLength=at||this._contentLength,this._filename=(0,o.extractFilenameFromHeader)(et)};if(this._request=null,this._url.protocol==="http:"){const j=require$$5;this._request=j.request(b(this._url,tt.httpHeaders),$)}else{const j=require$$5;this._request=j.request(b(this._url,tt.httpHeaders),$)}this._request.on("error",j=>{this._storedError=j,this._headersCapability.reject(j)}),this._request.end()}}class nt extends _{constructor(tt,$,j){super(tt),this._httpHeaders={};for(const ft in tt.httpHeaders){const at=tt.httpHeaders[ft];at!==void 0&&(this._httpHeaders[ft]=at)}this._httpHeaders.Range=`bytes=${$}-${j-1}`;const et=ft=>{if(ft.statusCode===404){const at=new a.MissingPDFException(`Missing PDF "${this._url}".`);this._storedError=at;return}this._setReadableStream(ft)};if(this._request=null,this._url.protocol==="http:"){const ft=require$$5;this._request=ft.request(b(this._url,this._httpHeaders),et)}else{const ft=require$$5;this._request=ft.request(b(this._url,this._httpHeaders),et)}this._request.on("error",ft=>{this._storedError=ft}),this._request.end()}}class it extends h{constructor(tt){super(tt);let $=decodeURIComponent(this._url.path);c.test(this._url.href)&&($=$.replace(/^\//,""));const j=require$$5;j.lstat($,(et,ft)=>{if(et){et.code==="ENOENT"&&(et=new a.MissingPDFException(`Missing PDF "${$}".`)),this._storedError=et,this._headersCapability.reject(et);return}this._contentLength=ft.size,this._setReadableStream(j.createReadStream($)),this._headersCapability.resolve()})}}class ot extends _{constructor(tt,$,j){super(tt);let et=decodeURIComponent(this._url.path);c.test(this._url.href)&&(et=et.replace(/^\//,""));const ft=require$$5;this._setReadableStream(ft.createReadStream(et,{start:$,end:j-1}))}}},(s,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.SVGGraphics=void 0;var a=i(6),o=i(1);const c={fontStyle:"normal",fontWeight:"normal",fillColor:"#000000"},d="http://www.w3.org/XML/1998/namespace",g="http://www.w3.org/1999/xlink",h=["butt","round","square"],_=["miter","round","bevel"],b=function(ft,at="",ut=!1){if(URL.createObjectURL&&typeof Blob<"u"&&!ut)return URL.createObjectURL(new Blob([ft],{type:at}));const yt="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";let mt=`data:${at};base64,`;for(let pt=0,bt=ft.length;pt<bt;pt+=3){const _t=ft[pt]&255,Nt=ft[pt+1]&255,It=ft[pt+2]&255,xt=_t>>2,Mt=(_t&3)<<4|Nt>>4,qt=pt+1<bt?(Nt&15)<<2|It>>6:64,Yt=pt+2<bt?It&63:64;mt+=yt[xt]+yt[Mt]+yt[qt]+yt[Yt]}return mt},rt=function(){const ft=new Uint8Array([137,80,78,71,13,10,26,10]),at=12,ut=new Int32Array(256);for(let It=0;It<256;It++){let xt=It;for(let Mt=0;Mt<8;Mt++)xt=xt&1?3988292384^xt>>1&2147483647:xt>>1&2147483647;ut[It]=xt}function yt(It,xt,Mt){let qt=-1;for(let Yt=xt;Yt<Mt;Yt++){const At=(qt^It[Yt])&255,$t=ut[At];qt=qt>>>8^$t}return qt^-1}function mt(It,xt,Mt,qt){let Yt=qt;const At=xt.length;Mt[Yt]=At>>24&255,Mt[Yt+1]=At>>16&255,Mt[Yt+2]=At>>8&255,Mt[Yt+3]=At&255,Yt+=4,Mt[Yt]=It.charCodeAt(0)&255,Mt[Yt+1]=It.charCodeAt(1)&255,Mt[Yt+2]=It.charCodeAt(2)&255,Mt[Yt+3]=It.charCodeAt(3)&255,Yt+=4,Mt.set(xt,Yt),Yt+=xt.length;const $t=yt(Mt,qt+4,Yt);Mt[Yt]=$t>>24&255,Mt[Yt+1]=$t>>16&255,Mt[Yt+2]=$t>>8&255,Mt[Yt+3]=$t&255}function pt(It,xt,Mt){let qt=1,Yt=0;for(let At=xt;At<Mt;++At)qt=(qt+(It[At]&255))%65521,Yt=(Yt+qt)%65521;return Yt<<16|qt}function bt(It){if(!o.isNodeJS)return _t(It);try{const xt=parseInt(process.versions.node)>=8?It:Buffer.from(It),Mt=require$$5.deflateSync(xt,{level:9});return Mt instanceof Uint8Array?Mt:new Uint8Array(Mt)}catch(xt){(0,o.warn)("Not compressing PNG because zlib.deflateSync is unavailable: "+xt)}return _t(It)}function _t(It){let xt=It.length;const Mt=65535,qt=Math.ceil(xt/Mt),Yt=new Uint8Array(2+xt+qt*5+4);let At=0;Yt[At++]=120,Yt[At++]=156;let $t=0;for(;xt>Mt;)Yt[At++]=0,Yt[At++]=255,Yt[At++]=255,Yt[At++]=0,Yt[At++]=0,Yt.set(It.subarray($t,$t+Mt),At),At+=Mt,$t+=Mt,xt-=Mt;Yt[At++]=1,Yt[At++]=xt&255,Yt[At++]=xt>>8&255,Yt[At++]=~xt&65535&255,Yt[At++]=(~xt&65535)>>8&255,Yt.set(It.subarray($t),At),At+=It.length-$t;const Kt=pt(It,0,It.length);return Yt[At++]=Kt>>24&255,Yt[At++]=Kt>>16&255,Yt[At++]=Kt>>8&255,Yt[At++]=Kt&255,Yt}function Nt(It,xt,Mt,qt){const Yt=It.width,At=It.height;let $t,Kt,nr;const or=It.data;switch(xt){case o.ImageKind.GRAYSCALE_1BPP:Kt=0,$t=1,nr=Yt+7>>3;break;case o.ImageKind.RGB_24BPP:Kt=2,$t=8,nr=Yt*3;break;case o.ImageKind.RGBA_32BPP:Kt=6,$t=8,nr=Yt*4;break;default:throw new Error("invalid format")}const Et=new Uint8Array((1+nr)*At);let lt=0,ht=0;for(let Rt=0;Rt<At;++Rt)Et[lt++]=0,Et.set(or.subarray(ht,ht+nr),lt),ht+=nr,lt+=nr;if(xt===o.ImageKind.GRAYSCALE_1BPP&&qt){lt=0;for(let Rt=0;Rt<At;Rt++){lt++;for(let Vt=0;Vt<nr;Vt++)Et[lt++]^=255}}const dt=new Uint8Array([Yt>>24&255,Yt>>16&255,Yt>>8&255,Yt&255,At>>24&255,At>>16&255,At>>8&255,At&255,$t,Kt,0,0,0]),gt=bt(Et),vt=ft.length+at*3+dt.length+gt.length,St=new Uint8Array(vt);let kt=0;return St.set(ft,kt),kt+=ft.length,mt("IHDR",dt,St,kt),kt+=at+dt.length,mt("IDATA",gt,St,kt),kt+=at+gt.length,mt("IEND",new Uint8Array(0),St,kt),b(St,"image/png",Mt)}return function(xt,Mt,qt){const Yt=xt.kind===void 0?o.ImageKind.GRAYSCALE_1BPP:xt.kind;return Nt(xt,Yt,Mt,qt)}}();class nt{constructor(){this.fontSizeScale=1,this.fontWeight=c.fontWeight,this.fontSize=0,this.textMatrix=o.IDENTITY_MATRIX,this.fontMatrix=o.FONT_IDENTITY_MATRIX,this.leading=0,this.textRenderingMode=o.TextRenderingMode.FILL,this.textMatrixScale=1,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRise=0,this.fillColor=c.fillColor,this.strokeColor="#000000",this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.lineJoin="",this.lineCap="",this.miterLimit=0,this.dashArray=[],this.dashPhase=0,this.dependencies=[],this.activeClipUrl=null,this.clipGroup=null,this.maskId=""}clone(){return Object.create(this)}setCurrentPoint(at,ut){this.x=at,this.y=ut}}function it(ft){let at=[];const ut=[];for(const yt of ft){if(yt.fn==="save"){at.push({fnId:92,fn:"group",items:[]}),ut.push(at),at=at.at(-1).items;continue}yt.fn==="restore"?at=ut.pop():at.push(yt)}return at}function ot(ft){if(Number.isInteger(ft))return ft.toString();const at=ft.toFixed(10);let ut=at.length-1;if(at[ut]!=="0")return at;do ut--;while(at[ut]==="0");return at.substring(0,at[ut]==="."?ut:ut+1)}function ct(ft){if(ft[4]===0&&ft[5]===0){if(ft[1]===0&&ft[2]===0)return ft[0]===1&&ft[3]===1?"":`scale(${ot(ft[0])} ${ot(ft[3])})`;if(ft[0]===ft[3]&&ft[1]===-ft[2]){const at=Math.acos(ft[0])*180/Math.PI;return`rotate(${ot(at)})`}}else if(ft[0]===1&&ft[1]===0&&ft[2]===0&&ft[3]===1)return`translate(${ot(ft[4])} ${ot(ft[5])})`;return`matrix(${ot(ft[0])} ${ot(ft[1])} ${ot(ft[2])} ${ot(ft[3])} ${ot(ft[4])} ${ot(ft[5])})`}let tt=0,$=0,j=0;class et{constructor(at,ut,yt=!1){(0,a.deprecated)("The SVG back-end is no longer maintained and *may* be removed in the future."),this.svgFactory=new a.DOMSVGFactory,this.current=new nt,this.transformMatrix=o.IDENTITY_MATRIX,this.transformStack=[],this.extraStack=[],this.commonObjs=at,this.objs=ut,this.pendingClip=null,this.pendingEOFill=!1,this.embedFonts=!1,this.embeddedFonts=Object.create(null),this.cssStyle=null,this.forceDataSchema=!!yt,this._operatorIdMapping=[];for(const mt in o.OPS)this._operatorIdMapping[o.OPS[mt]]=mt}getObject(at,ut=null){return typeof at=="string"?at.startsWith("g_")?this.commonObjs.get(at):this.objs.get(at):ut}save(){this.transformStack.push(this.transformMatrix);const at=this.current;this.extraStack.push(at),this.current=at.clone()}restore(){this.transformMatrix=this.transformStack.pop(),this.current=this.extraStack.pop(),this.pendingClip=null,this.tgrp=null}group(at){this.save(),this.executeOpTree(at),this.restore()}loadDependencies(at){const ut=at.fnArray,yt=at.argsArray;for(let mt=0,pt=ut.length;mt<pt;mt++)if(ut[mt]===o.OPS.dependency)for(const bt of yt[mt]){const _t=bt.startsWith("g_")?this.commonObjs:this.objs,Nt=new Promise(It=>{_t.get(bt,It)});this.current.dependencies.push(Nt)}return Promise.all(this.current.dependencies)}transform(at,ut,yt,mt,pt,bt){const _t=[at,ut,yt,mt,pt,bt];this.transformMatrix=o.Util.transform(this.transformMatrix,_t),this.tgrp=null}getSVG(at,ut){this.viewport=ut;const yt=this._initialize(ut);return this.loadDependencies(at).then(()=>(this.transformMatrix=o.IDENTITY_MATRIX,this.executeOpTree(this.convertOpList(at)),yt))}convertOpList(at){const ut=this._operatorIdMapping,yt=at.argsArray,mt=at.fnArray,pt=[];for(let bt=0,_t=mt.length;bt<_t;bt++){const Nt=mt[bt];pt.push({fnId:Nt,fn:ut[Nt],args:yt[bt]})}return it(pt)}executeOpTree(at){for(const ut of at){const yt=ut.fn,mt=ut.fnId,pt=ut.args;switch(mt|0){case o.OPS.beginText:this.beginText();break;case o.OPS.dependency:break;case o.OPS.setLeading:this.setLeading(pt);break;case o.OPS.setLeadingMoveText:this.setLeadingMoveText(pt[0],pt[1]);break;case o.OPS.setFont:this.setFont(pt);break;case o.OPS.showText:this.showText(pt[0]);break;case o.OPS.showSpacedText:this.showText(pt[0]);break;case o.OPS.endText:this.endText();break;case o.OPS.moveText:this.moveText(pt[0],pt[1]);break;case o.OPS.setCharSpacing:this.setCharSpacing(pt[0]);break;case o.OPS.setWordSpacing:this.setWordSpacing(pt[0]);break;case o.OPS.setHScale:this.setHScale(pt[0]);break;case o.OPS.setTextMatrix:this.setTextMatrix(pt[0],pt[1],pt[2],pt[3],pt[4],pt[5]);break;case o.OPS.setTextRise:this.setTextRise(pt[0]);break;case o.OPS.setTextRenderingMode:this.setTextRenderingMode(pt[0]);break;case o.OPS.setLineWidth:this.setLineWidth(pt[0]);break;case o.OPS.setLineJoin:this.setLineJoin(pt[0]);break;case o.OPS.setLineCap:this.setLineCap(pt[0]);break;case o.OPS.setMiterLimit:this.setMiterLimit(pt[0]);break;case o.OPS.setFillRGBColor:this.setFillRGBColor(pt[0],pt[1],pt[2]);break;case o.OPS.setStrokeRGBColor:this.setStrokeRGBColor(pt[0],pt[1],pt[2]);break;case o.OPS.setStrokeColorN:this.setStrokeColorN(pt);break;case o.OPS.setFillColorN:this.setFillColorN(pt);break;case o.OPS.shadingFill:this.shadingFill(pt[0]);break;case o.OPS.setDash:this.setDash(pt[0],pt[1]);break;case o.OPS.setRenderingIntent:this.setRenderingIntent(pt[0]);break;case o.OPS.setFlatness:this.setFlatness(pt[0]);break;case o.OPS.setGState:this.setGState(pt[0]);break;case o.OPS.fill:this.fill();break;case o.OPS.eoFill:this.eoFill();break;case o.OPS.stroke:this.stroke();break;case o.OPS.fillStroke:this.fillStroke();break;case o.OPS.eoFillStroke:this.eoFillStroke();break;case o.OPS.clip:this.clip("nonzero");break;case o.OPS.eoClip:this.clip("evenodd");break;case o.OPS.paintSolidColorImageMask:this.paintSolidColorImageMask();break;case o.OPS.paintImageXObject:this.paintImageXObject(pt[0]);break;case o.OPS.paintInlineImageXObject:this.paintInlineImageXObject(pt[0]);break;case o.OPS.paintImageMaskXObject:this.paintImageMaskXObject(pt[0]);break;case o.OPS.paintFormXObjectBegin:this.paintFormXObjectBegin(pt[0],pt[1]);break;case o.OPS.paintFormXObjectEnd:this.paintFormXObjectEnd();break;case o.OPS.closePath:this.closePath();break;case o.OPS.closeStroke:this.closeStroke();break;case o.OPS.closeFillStroke:this.closeFillStroke();break;case o.OPS.closeEOFillStroke:this.closeEOFillStroke();break;case o.OPS.nextLine:this.nextLine();break;case o.OPS.transform:this.transform(pt[0],pt[1],pt[2],pt[3],pt[4],pt[5]);break;case o.OPS.constructPath:this.constructPath(pt[0],pt[1]);break;case o.OPS.endPath:this.endPath();break;case 92:this.group(ut.items);break;default:(0,o.warn)(`Unimplemented operator ${yt}`);break}}}setWordSpacing(at){this.current.wordSpacing=at}setCharSpacing(at){this.current.charSpacing=at}nextLine(){this.moveText(0,this.current.leading)}setTextMatrix(at,ut,yt,mt,pt,bt){const _t=this.current;_t.textMatrix=_t.lineMatrix=[at,ut,yt,mt,pt,bt],_t.textMatrixScale=Math.hypot(at,ut),_t.x=_t.lineX=0,_t.y=_t.lineY=0,_t.xcoords=[],_t.ycoords=[],_t.tspan=this.svgFactory.createElement("svg:tspan"),_t.tspan.setAttributeNS(null,"font-family",_t.fontFamily),_t.tspan.setAttributeNS(null,"font-size",`${ot(_t.fontSize)}px`),_t.tspan.setAttributeNS(null,"y",ot(-_t.y)),_t.txtElement=this.svgFactory.createElement("svg:text"),_t.txtElement.append(_t.tspan)}beginText(){const at=this.current;at.x=at.lineX=0,at.y=at.lineY=0,at.textMatrix=o.IDENTITY_MATRIX,at.lineMatrix=o.IDENTITY_MATRIX,at.textMatrixScale=1,at.tspan=this.svgFactory.createElement("svg:tspan"),at.txtElement=this.svgFactory.createElement("svg:text"),at.txtgrp=this.svgFactory.createElement("svg:g"),at.xcoords=[],at.ycoords=[]}moveText(at,ut){const yt=this.current;yt.x=yt.lineX+=at,yt.y=yt.lineY+=ut,yt.xcoords=[],yt.ycoords=[],yt.tspan=this.svgFactory.createElement("svg:tspan"),yt.tspan.setAttributeNS(null,"font-family",yt.fontFamily),yt.tspan.setAttributeNS(null,"font-size",`${ot(yt.fontSize)}px`),yt.tspan.setAttributeNS(null,"y",ot(-yt.y))}showText(at){const ut=this.current,yt=ut.font,mt=ut.fontSize;if(mt===0)return;const pt=ut.fontSizeScale,bt=ut.charSpacing,_t=ut.wordSpacing,Nt=ut.fontDirection,It=ut.textHScale*Nt,xt=yt.vertical,Mt=xt?1:-1,qt=yt.defaultVMetrics,Yt=mt*ut.fontMatrix[0];let At=0;for(const nr of at){if(nr===null){At+=Nt*_t;continue}else if(typeof nr=="number"){At+=Mt*nr*mt/1e3;continue}const or=(nr.isSpace?_t:0)+bt,Et=nr.fontChar;let lt,ht,dt=nr.width;if(xt){let vt;const St=nr.vmetric||qt;vt=nr.vmetric?St[1]:dt*.5,vt=-vt*Yt;const kt=St[2]*Yt;dt=St?-St[0]:dt,lt=vt/pt,ht=(At+kt)/pt}else lt=At/pt,ht=0;(nr.isInFont||yt.missingFile)&&(ut.xcoords.push(ut.x+lt),xt&&ut.ycoords.push(-ut.y+ht),ut.tspan.textContent+=Et);const gt=xt?dt*Yt-or*Nt:dt*Yt+or*Nt;At+=gt}ut.tspan.setAttributeNS(null,"x",ut.xcoords.map(ot).join(" ")),xt?ut.tspan.setAttributeNS(null,"y",ut.ycoords.map(ot).join(" ")):ut.tspan.setAttributeNS(null,"y",ot(-ut.y)),xt?ut.y-=At:ut.x+=At*It,ut.tspan.setAttributeNS(null,"font-family",ut.fontFamily),ut.tspan.setAttributeNS(null,"font-size",`${ot(ut.fontSize)}px`),ut.fontStyle!==c.fontStyle&&ut.tspan.setAttributeNS(null,"font-style",ut.fontStyle),ut.fontWeight!==c.fontWeight&&ut.tspan.setAttributeNS(null,"font-weight",ut.fontWeight);const $t=ut.textRenderingMode&o.TextRenderingMode.FILL_STROKE_MASK;if($t===o.TextRenderingMode.FILL||$t===o.TextRenderingMode.FILL_STROKE?(ut.fillColor!==c.fillColor&&ut.tspan.setAttributeNS(null,"fill",ut.fillColor),ut.fillAlpha<1&&ut.tspan.setAttributeNS(null,"fill-opacity",ut.fillAlpha)):ut.textRenderingMode===o.TextRenderingMode.ADD_TO_PATH?ut.tspan.setAttributeNS(null,"fill","transparent"):ut.tspan.setAttributeNS(null,"fill","none"),$t===o.TextRenderingMode.STROKE||$t===o.TextRenderingMode.FILL_STROKE){const nr=1/(ut.textMatrixScale||1);this._setStrokeAttributes(ut.tspan,nr)}let Kt=ut.textMatrix;ut.textRise!==0&&(Kt=Kt.slice(),Kt[5]+=ut.textRise),ut.txtElement.setAttributeNS(null,"transform",`${ct(Kt)} scale(${ot(It)}, -1)`),ut.txtElement.setAttributeNS(d,"xml:space","preserve"),ut.txtElement.append(ut.tspan),ut.txtgrp.append(ut.txtElement),this._ensureTransformGroup().append(ut.txtElement)}setLeadingMoveText(at,ut){this.setLeading(-ut),this.moveText(at,ut)}addFontStyle(at){if(!at.data)throw new Error('addFontStyle: No font data available, ensure that the "fontExtraProperties" API parameter is set.');this.cssStyle||(this.cssStyle=this.svgFactory.createElement("svg:style"),this.cssStyle.setAttributeNS(null,"type","text/css"),this.defs.append(this.cssStyle));const ut=b(at.data,at.mimetype,this.forceDataSchema);this.cssStyle.textContent+=`@font-face { font-family: "${at.loadedName}"; src: url(${ut}); }
`}setFont(at){const ut=this.current,yt=this.commonObjs.get(at[0]);let mt=at[1];ut.font=yt,this.embedFonts&&!yt.missingFile&&!this.embeddedFonts[yt.loadedName]&&(this.addFontStyle(yt),this.embeddedFonts[yt.loadedName]=yt),ut.fontMatrix=yt.fontMatrix||o.FONT_IDENTITY_MATRIX;let pt="normal";yt.black?pt="900":yt.bold&&(pt="bold");const bt=yt.italic?"italic":"normal";mt<0?(mt=-mt,ut.fontDirection=-1):ut.fontDirection=1,ut.fontSize=mt,ut.fontFamily=yt.loadedName,ut.fontWeight=pt,ut.fontStyle=bt,ut.tspan=this.svgFactory.createElement("svg:tspan"),ut.tspan.setAttributeNS(null,"y",ot(-ut.y)),ut.xcoords=[],ut.ycoords=[]}endText(){var ut;const at=this.current;at.textRenderingMode&o.TextRenderingMode.ADD_TO_PATH_FLAG&&((ut=at.txtElement)!=null&&ut.hasChildNodes())&&(at.element=at.txtElement,this.clip("nonzero"),this.endPath())}setLineWidth(at){at>0&&(this.current.lineWidth=at)}setLineCap(at){this.current.lineCap=h[at]}setLineJoin(at){this.current.lineJoin=_[at]}setMiterLimit(at){this.current.miterLimit=at}setStrokeAlpha(at){this.current.strokeAlpha=at}setStrokeRGBColor(at,ut,yt){this.current.strokeColor=o.Util.makeHexColor(at,ut,yt)}setFillAlpha(at){this.current.fillAlpha=at}setFillRGBColor(at,ut,yt){this.current.fillColor=o.Util.makeHexColor(at,ut,yt),this.current.tspan=this.svgFactory.createElement("svg:tspan"),this.current.xcoords=[],this.current.ycoords=[]}setStrokeColorN(at){this.current.strokeColor=this._makeColorN_Pattern(at)}setFillColorN(at){this.current.fillColor=this._makeColorN_Pattern(at)}shadingFill(at){const{width:ut,height:yt}=this.viewport,mt=o.Util.inverseTransform(this.transformMatrix),[pt,bt,_t,Nt]=o.Util.getAxialAlignedBoundingBox([0,0,ut,yt],mt),It=this.svgFactory.createElement("svg:rect");It.setAttributeNS(null,"x",pt),It.setAttributeNS(null,"y",bt),It.setAttributeNS(null,"width",_t-pt),It.setAttributeNS(null,"height",Nt-bt),It.setAttributeNS(null,"fill",this._makeShadingPattern(at)),this.current.fillAlpha<1&&It.setAttributeNS(null,"fill-opacity",this.current.fillAlpha),this._ensureTransformGroup().append(It)}_makeColorN_Pattern(at){return at[0]==="TilingPattern"?this._makeTilingPattern(at):this._makeShadingPattern(at)}_makeTilingPattern(at){const ut=at[1],yt=at[2],mt=at[3]||o.IDENTITY_MATRIX,[pt,bt,_t,Nt]=at[4],It=at[5],xt=at[6],Mt=at[7],qt=`shading${j++}`,[Yt,At,$t,Kt]=o.Util.normalizeRect([...o.Util.applyTransform([pt,bt],mt),...o.Util.applyTransform([_t,Nt],mt)]),[nr,or]=o.Util.singularValueDecompose2dScale(mt),Et=It*nr,lt=xt*or,ht=this.svgFactory.createElement("svg:pattern");ht.setAttributeNS(null,"id",qt),ht.setAttributeNS(null,"patternUnits","userSpaceOnUse"),ht.setAttributeNS(null,"width",Et),ht.setAttributeNS(null,"height",lt),ht.setAttributeNS(null,"x",`${Yt}`),ht.setAttributeNS(null,"y",`${At}`);const dt=this.svg,gt=this.transformMatrix,vt=this.current.fillColor,St=this.current.strokeColor,kt=this.svgFactory.create($t-Yt,Kt-At);if(this.svg=kt,this.transformMatrix=mt,Mt===2){const Rt=o.Util.makeHexColor(...ut);this.current.fillColor=Rt,this.current.strokeColor=Rt}return this.executeOpTree(this.convertOpList(yt)),this.svg=dt,this.transformMatrix=gt,this.current.fillColor=vt,this.current.strokeColor=St,ht.append(kt.childNodes[0]),this.defs.append(ht),`url(#${qt})`}_makeShadingPattern(at){switch(typeof at=="string"&&(at=this.objs.get(at)),at[0]){case"RadialAxial":const ut=`shading${j++}`,yt=at[3];let mt;switch(at[1]){case"axial":const pt=at[4],bt=at[5];mt=this.svgFactory.createElement("svg:linearGradient"),mt.setAttributeNS(null,"id",ut),mt.setAttributeNS(null,"gradientUnits","userSpaceOnUse"),mt.setAttributeNS(null,"x1",pt[0]),mt.setAttributeNS(null,"y1",pt[1]),mt.setAttributeNS(null,"x2",bt[0]),mt.setAttributeNS(null,"y2",bt[1]);break;case"radial":const _t=at[4],Nt=at[5],It=at[6],xt=at[7];mt=this.svgFactory.createElement("svg:radialGradient"),mt.setAttributeNS(null,"id",ut),mt.setAttributeNS(null,"gradientUnits","userSpaceOnUse"),mt.setAttributeNS(null,"cx",Nt[0]),mt.setAttributeNS(null,"cy",Nt[1]),mt.setAttributeNS(null,"r",xt),mt.setAttributeNS(null,"fx",_t[0]),mt.setAttributeNS(null,"fy",_t[1]),mt.setAttributeNS(null,"fr",It);break;default:throw new Error(`Unknown RadialAxial type: ${at[1]}`)}for(const pt of yt){const bt=this.svgFactory.createElement("svg:stop");bt.setAttributeNS(null,"offset",pt[0]),bt.setAttributeNS(null,"stop-color",pt[1]),mt.append(bt)}return this.defs.append(mt),`url(#${ut})`;case"Mesh":return(0,o.warn)("Unimplemented pattern Mesh"),null;case"Dummy":return"hotpink";default:throw new Error(`Unknown IR type: ${at[0]}`)}}setDash(at,ut){this.current.dashArray=at,this.current.dashPhase=ut}constructPath(at,ut){const yt=this.current;let mt=yt.x,pt=yt.y,bt=[],_t=0;for(const Nt of at)switch(Nt|0){case o.OPS.rectangle:mt=ut[_t++],pt=ut[_t++];const It=ut[_t++],xt=ut[_t++],Mt=mt+It,qt=pt+xt;bt.push("M",ot(mt),ot(pt),"L",ot(Mt),ot(pt),"L",ot(Mt),ot(qt),"L",ot(mt),ot(qt),"Z");break;case o.OPS.moveTo:mt=ut[_t++],pt=ut[_t++],bt.push("M",ot(mt),ot(pt));break;case o.OPS.lineTo:mt=ut[_t++],pt=ut[_t++],bt.push("L",ot(mt),ot(pt));break;case o.OPS.curveTo:mt=ut[_t+4],pt=ut[_t+5],bt.push("C",ot(ut[_t]),ot(ut[_t+1]),ot(ut[_t+2]),ot(ut[_t+3]),ot(mt),ot(pt)),_t+=6;break;case o.OPS.curveTo2:bt.push("C",ot(mt),ot(pt),ot(ut[_t]),ot(ut[_t+1]),ot(ut[_t+2]),ot(ut[_t+3])),mt=ut[_t+2],pt=ut[_t+3],_t+=4;break;case o.OPS.curveTo3:mt=ut[_t+2],pt=ut[_t+3],bt.push("C",ot(ut[_t]),ot(ut[_t+1]),ot(mt),ot(pt),ot(mt),ot(pt)),_t+=4;break;case o.OPS.closePath:bt.push("Z");break}bt=bt.join(" "),yt.path&&at.length>0&&at[0]!==o.OPS.rectangle&&at[0]!==o.OPS.moveTo?bt=yt.path.getAttributeNS(null,"d")+bt:(yt.path=this.svgFactory.createElement("svg:path"),this._ensureTransformGroup().append(yt.path)),yt.path.setAttributeNS(null,"d",bt),yt.path.setAttributeNS(null,"fill","none"),yt.element=yt.path,yt.setCurrentPoint(mt,pt)}endPath(){const at=this.current;if(at.path=null,!this.pendingClip)return;if(!at.element){this.pendingClip=null;return}const ut=`clippath${tt++}`,yt=this.svgFactory.createElement("svg:clipPath");yt.setAttributeNS(null,"id",ut),yt.setAttributeNS(null,"transform",ct(this.transformMatrix));const mt=at.element.cloneNode(!0);if(this.pendingClip==="evenodd"?mt.setAttributeNS(null,"clip-rule","evenodd"):mt.setAttributeNS(null,"clip-rule","nonzero"),this.pendingClip=null,yt.append(mt),this.defs.append(yt),at.activeClipUrl){at.clipGroup=null;for(const pt of this.extraStack)pt.clipGroup=null;yt.setAttributeNS(null,"clip-path",at.activeClipUrl)}at.activeClipUrl=`url(#${ut})`,this.tgrp=null}clip(at){this.pendingClip=at}closePath(){const at=this.current;if(at.path){const ut=`${at.path.getAttributeNS(null,"d")}Z`;at.path.setAttributeNS(null,"d",ut)}}setLeading(at){this.current.leading=-at}setTextRise(at){this.current.textRise=at}setTextRenderingMode(at){this.current.textRenderingMode=at}setHScale(at){this.current.textHScale=at/100}setRenderingIntent(at){}setFlatness(at){}setGState(at){for(const[ut,yt]of at)switch(ut){case"LW":this.setLineWidth(yt);break;case"LC":this.setLineCap(yt);break;case"LJ":this.setLineJoin(yt);break;case"ML":this.setMiterLimit(yt);break;case"D":this.setDash(yt[0],yt[1]);break;case"RI":this.setRenderingIntent(yt);break;case"FL":this.setFlatness(yt);break;case"Font":this.setFont(yt);break;case"CA":this.setStrokeAlpha(yt);break;case"ca":this.setFillAlpha(yt);break;default:(0,o.warn)(`Unimplemented graphic state operator ${ut}`);break}}fill(){const at=this.current;at.element&&(at.element.setAttributeNS(null,"fill",at.fillColor),at.element.setAttributeNS(null,"fill-opacity",at.fillAlpha),this.endPath())}stroke(){const at=this.current;at.element&&(this._setStrokeAttributes(at.element),at.element.setAttributeNS(null,"fill","none"),this.endPath())}_setStrokeAttributes(at,ut=1){const yt=this.current;let mt=yt.dashArray;ut!==1&&mt.length>0&&(mt=mt.map(function(pt){return ut*pt})),at.setAttributeNS(null,"stroke",yt.strokeColor),at.setAttributeNS(null,"stroke-opacity",yt.strokeAlpha),at.setAttributeNS(null,"stroke-miterlimit",ot(yt.miterLimit)),at.setAttributeNS(null,"stroke-linecap",yt.lineCap),at.setAttributeNS(null,"stroke-linejoin",yt.lineJoin),at.setAttributeNS(null,"stroke-width",ot(ut*yt.lineWidth)+"px"),at.setAttributeNS(null,"stroke-dasharray",mt.map(ot).join(" ")),at.setAttributeNS(null,"stroke-dashoffset",ot(ut*yt.dashPhase)+"px")}eoFill(){var at;(at=this.current.element)==null||at.setAttributeNS(null,"fill-rule","evenodd"),this.fill()}fillStroke(){this.stroke(),this.fill()}eoFillStroke(){var at;(at=this.current.element)==null||at.setAttributeNS(null,"fill-rule","evenodd"),this.fillStroke()}closeStroke(){this.closePath(),this.stroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.closePath(),this.eoFillStroke()}paintSolidColorImageMask(){const at=this.svgFactory.createElement("svg:rect");at.setAttributeNS(null,"x","0"),at.setAttributeNS(null,"y","0"),at.setAttributeNS(null,"width","1px"),at.setAttributeNS(null,"height","1px"),at.setAttributeNS(null,"fill",this.current.fillColor),this._ensureTransformGroup().append(at)}paintImageXObject(at){const ut=this.getObject(at);if(!ut){(0,o.warn)(`Dependent image with object ID ${at} is not ready yet`);return}this.paintInlineImageXObject(ut)}paintInlineImageXObject(at,ut){const yt=at.width,mt=at.height,pt=rt(at,this.forceDataSchema,!!ut),bt=this.svgFactory.createElement("svg:rect");bt.setAttributeNS(null,"x","0"),bt.setAttributeNS(null,"y","0"),bt.setAttributeNS(null,"width",ot(yt)),bt.setAttributeNS(null,"height",ot(mt)),this.current.element=bt,this.clip("nonzero");const _t=this.svgFactory.createElement("svg:image");_t.setAttributeNS(g,"xlink:href",pt),_t.setAttributeNS(null,"x","0"),_t.setAttributeNS(null,"y",ot(-mt)),_t.setAttributeNS(null,"width",ot(yt)+"px"),_t.setAttributeNS(null,"height",ot(mt)+"px"),_t.setAttributeNS(null,"transform",`scale(${ot(1/yt)} ${ot(-1/mt)})`),ut?ut.append(_t):this._ensureTransformGroup().append(_t)}paintImageMaskXObject(at){const ut=this.getObject(at.data,at);if(ut.bitmap){(0,o.warn)("paintImageMaskXObject: ImageBitmap support is not implemented, ensure that the `isOffscreenCanvasSupported` API parameter is disabled.");return}const yt=this.current,mt=ut.width,pt=ut.height,bt=yt.fillColor;yt.maskId=`mask${$++}`;const _t=this.svgFactory.createElement("svg:mask");_t.setAttributeNS(null,"id",yt.maskId);const Nt=this.svgFactory.createElement("svg:rect");Nt.setAttributeNS(null,"x","0"),Nt.setAttributeNS(null,"y","0"),Nt.setAttributeNS(null,"width",ot(mt)),Nt.setAttributeNS(null,"height",ot(pt)),Nt.setAttributeNS(null,"fill",bt),Nt.setAttributeNS(null,"mask",`url(#${yt.maskId})`),this.defs.append(_t),this._ensureTransformGroup().append(Nt),this.paintInlineImageXObject(ut,_t)}paintFormXObjectBegin(at,ut){if(Array.isArray(at)&&at.length===6&&this.transform(at[0],at[1],at[2],at[3],at[4],at[5]),ut){const yt=ut[2]-ut[0],mt=ut[3]-ut[1],pt=this.svgFactory.createElement("svg:rect");pt.setAttributeNS(null,"x",ut[0]),pt.setAttributeNS(null,"y",ut[1]),pt.setAttributeNS(null,"width",ot(yt)),pt.setAttributeNS(null,"height",ot(mt)),this.current.element=pt,this.clip("nonzero"),this.endPath()}}paintFormXObjectEnd(){}_initialize(at){const ut=this.svgFactory.create(at.width,at.height),yt=this.svgFactory.createElement("svg:defs");ut.append(yt),this.defs=yt;const mt=this.svgFactory.createElement("svg:g");return mt.setAttributeNS(null,"transform",ct(at.transform)),ut.append(mt),this.svg=mt,ut}_ensureClipGroup(){if(!this.current.clipGroup){const at=this.svgFactory.createElement("svg:g");at.setAttributeNS(null,"clip-path",this.current.activeClipUrl),this.svg.append(at),this.current.clipGroup=at}return this.current.clipGroup}_ensureTransformGroup(){return this.tgrp||(this.tgrp=this.svgFactory.createElement("svg:g"),this.tgrp.setAttributeNS(null,"transform",ct(this.transformMatrix)),this.current.activeClipUrl?this._ensureClipGroup().append(this.tgrp):this.svg.append(this.tgrp)),this.tgrp}}e.SVGGraphics=et},(s,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.XfaText=void 0;class i{static textContent(o){const c=[],d={items:c,styles:Object.create(null)};function g(h){var rt;if(!h)return;let _=null;const b=h.name;if(b==="#text")_=h.value;else if(i.shouldBuildText(b))(rt=h==null?void 0:h.attributes)!=null&&rt.textContent?_=h.attributes.textContent:h.value&&(_=h.value);else return;if(_!==null&&c.push({str:_}),!!h.children)for(const nt of h.children)g(nt)}return g(o),d}static shouldBuildText(o){return!(o==="textarea"||o==="input"||o==="option"||o==="select")}}e.XfaText=i},(s,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.TextLayerRenderTask=void 0,e.renderTextLayer=ct,e.updateTextLayer=tt;var a=i(1),o=i(6);const c=1e5,d=30,g=.8,h=new Map;function _($,j){let et;if(j&&a.FeatureTest.isOffscreenCanvasSupported)et=new OffscreenCanvas($,$).getContext("2d",{alpha:!1});else{const ft=document.createElement("canvas");ft.width=ft.height=$,et=ft.getContext("2d",{alpha:!1})}return et}function b($,j){const et=h.get($);if(et)return et;const ft=_(d,j);ft.font=`${d}px ${$}`;const at=ft.measureText("");let ut=at.fontBoundingBoxAscent,yt=Math.abs(at.fontBoundingBoxDescent);if(ut){const pt=ut/(ut+yt);return h.set($,pt),ft.canvas.width=ft.canvas.height=0,pt}ft.strokeStyle="red",ft.clearRect(0,0,d,d),ft.strokeText("g",0,0);let mt=ft.getImageData(0,0,d,d).data;yt=0;for(let pt=mt.length-1-3;pt>=0;pt-=4)if(mt[pt]>0){yt=Math.ceil(pt/4/d);break}ft.clearRect(0,0,d,d),ft.strokeText("A",0,d),mt=ft.getImageData(0,0,d,d).data,ut=0;for(let pt=0,bt=mt.length;pt<bt;pt+=4)if(mt[pt]>0){ut=d-Math.floor(pt/4/d);break}if(ft.canvas.width=ft.canvas.height=0,ut){const pt=ut/(ut+yt);return h.set($,pt),pt}return h.set($,g),g}function rt($,j,et){const ft=document.createElement("span"),at={angle:0,canvasWidth:0,hasText:j.str!=="",hasEOL:j.hasEOL,fontSize:0};$._textDivs.push(ft);const ut=a.Util.transform($._transform,j.transform);let yt=Math.atan2(ut[1],ut[0]);const mt=et[j.fontName];mt.vertical&&(yt+=Math.PI/2);const pt=Math.hypot(ut[2],ut[3]),bt=pt*b(mt.fontFamily,$._isOffscreenCanvasSupported);let _t,Nt;yt===0?(_t=ut[4],Nt=ut[5]-bt):(_t=ut[4]+bt*Math.sin(yt),Nt=ut[5]-bt*Math.cos(yt));const It="calc(var(--scale-factor)*",xt=ft.style;$._container===$._rootContainer?(xt.left=`${(100*_t/$._pageWidth).toFixed(2)}%`,xt.top=`${(100*Nt/$._pageHeight).toFixed(2)}%`):(xt.left=`${It}${_t.toFixed(2)}px)`,xt.top=`${It}${Nt.toFixed(2)}px)`),xt.fontSize=`${It}${pt.toFixed(2)}px)`,xt.fontFamily=mt.fontFamily,at.fontSize=pt,ft.setAttribute("role","presentation"),ft.textContent=j.str,ft.dir=j.dir,$._fontInspectorEnabled&&(ft.dataset.fontName=j.fontName),yt!==0&&(at.angle=yt*(180/Math.PI));let Mt=!1;if(j.str.length>1)Mt=!0;else if(j.str!==" "&&j.transform[0]!==j.transform[3]){const qt=Math.abs(j.transform[0]),Yt=Math.abs(j.transform[3]);qt!==Yt&&Math.max(qt,Yt)/Math.min(qt,Yt)>1.5&&(Mt=!0)}Mt&&(at.canvasWidth=mt.vertical?j.height:j.width),$._textDivProperties.set(ft,at),$._isReadableStream&&$._layoutText(ft)}function nt($){const{div:j,scale:et,properties:ft,ctx:at,prevFontSize:ut,prevFontFamily:yt}=$,{style:mt}=j;let pt="";if(ft.canvasWidth!==0&&ft.hasText){const{fontFamily:bt}=mt,{canvasWidth:_t,fontSize:Nt}=ft;(ut!==Nt||yt!==bt)&&(at.font=`${Nt*et}px ${bt}`,$.prevFontSize=Nt,$.prevFontFamily=bt);const{width:It}=at.measureText(j.textContent);It>0&&(pt=`scaleX(${_t*et/It})`)}ft.angle!==0&&(pt=`rotate(${ft.angle}deg) ${pt}`),pt.length>0&&(mt.transform=pt)}function it($){if($._canceled)return;const j=$._textDivs,et=$._capability;if(j.length>c){et.resolve();return}if(!$._isReadableStream)for(const at of j)$._layoutText(at);et.resolve()}class ot{constructor({textContentSource:j,container:et,viewport:ft,textDivs:at,textDivProperties:ut,textContentItemsStr:yt,isOffscreenCanvasSupported:mt}){var It;this._textContentSource=j,this._isReadableStream=j instanceof ReadableStream,this._container=this._rootContainer=et,this._textDivs=at||[],this._textContentItemsStr=yt||[],this._isOffscreenCanvasSupported=mt,this._fontInspectorEnabled=!!((It=globalThis.FontInspector)!=null&&It.enabled),this._reader=null,this._textDivProperties=ut||new WeakMap,this._canceled=!1,this._capability=new a.PromiseCapability,this._layoutTextParams={prevFontSize:null,prevFontFamily:null,div:null,scale:ft.scale*(globalThis.devicePixelRatio||1),properties:null,ctx:_(0,mt)};const{pageWidth:pt,pageHeight:bt,pageX:_t,pageY:Nt}=ft.rawDims;this._transform=[1,0,0,-1,-_t,Nt+bt],this._pageWidth=pt,this._pageHeight=bt,(0,o.setLayerDimensions)(et,ft),this._capability.promise.finally(()=>{this._layoutTextParams=null}).catch(()=>{})}get promise(){return this._capability.promise}cancel(){this._canceled=!0,this._reader&&(this._reader.cancel(new a.AbortException("TextLayer task cancelled.")).catch(()=>{}),this._reader=null),this._capability.reject(new a.AbortException("TextLayer task cancelled."))}_processItems(j,et){for(const ft of j){if(ft.str===void 0){if(ft.type==="beginMarkedContentProps"||ft.type==="beginMarkedContent"){const at=this._container;this._container=document.createElement("span"),this._container.classList.add("markedContent"),ft.id!==null&&this._container.setAttribute("id",`${ft.id}`),at.append(this._container)}else ft.type==="endMarkedContent"&&(this._container=this._container.parentNode);continue}this._textContentItemsStr.push(ft.str),rt(this,ft,et)}}_layoutText(j){const et=this._layoutTextParams.properties=this._textDivProperties.get(j);if(this._layoutTextParams.div=j,nt(this._layoutTextParams),et.hasText&&this._container.append(j),et.hasEOL){const ft=document.createElement("br");ft.setAttribute("role","presentation"),this._container.append(ft)}}_render(){const j=new a.PromiseCapability;let et=Object.create(null);if(this._isReadableStream){const ft=()=>{this._reader.read().then(({value:at,done:ut})=>{if(ut){j.resolve();return}Object.assign(et,at.styles),this._processItems(at.items,et),ft()},j.reject)};this._reader=this._textContentSource.getReader(),ft()}else if(this._textContentSource){const{items:ft,styles:at}=this._textContentSource;this._processItems(ft,at),j.resolve()}else throw new Error('No "textContentSource" parameter specified.');j.promise.then(()=>{et=null,it(this)},this._capability.reject)}}e.TextLayerRenderTask=ot;function ct($){!$.textContentSource&&($.textContent||$.textContentStream)&&((0,o.deprecated)("The TextLayerRender `textContent`/`textContentStream` parameters will be removed in the future, please use `textContentSource` instead."),$.textContentSource=$.textContent||$.textContentStream);const{container:j,viewport:et}=$,ft=getComputedStyle(j),at=ft.getPropertyValue("visibility"),ut=parseFloat(ft.getPropertyValue("--scale-factor"));at==="visible"&&(!ut||Math.abs(ut-et.scale)>1e-5)&&console.error("The `--scale-factor` CSS-variable must be set, to the same value as `viewport.scale`, either on the `container`-element itself or higher up in the DOM.");const yt=new ot($);return yt._render(),yt}function tt({container:$,viewport:j,textDivs:et,textDivProperties:ft,isOffscreenCanvasSupported:at,mustRotate:ut=!0,mustRescale:yt=!0}){if(ut&&(0,o.setLayerDimensions)($,{rotation:j.rotation}),yt){const mt=_(0,at),bt={prevFontSize:null,prevFontFamily:null,div:null,scale:j.scale*(globalThis.devicePixelRatio||1),properties:null,ctx:mt};for(const _t of et)bt.properties=ft.get(_t),bt.div=_t,nt(bt)}}},(s,e,i)=>{var b,rt,nt,it,ot,ct,tt,$,j,et,ft,zn,ut,mn,mt,Wn,bt,Hn;Object.defineProperty(e,"__esModule",{value:!0}),e.AnnotationEditorLayer=void 0;var a=i(1),o=i(4),c=i(28),d=i(33),g=i(6),h=i(34);const Nt=class Nt{constructor({uiManager:xt,pageIndex:Mt,div:qt,accessibilityManager:Yt,annotationLayer:At,viewport:$t,l10n:Kt}){Pt(this,ft);Pt(this,ut);Pt(this,mt);Pt(this,bt);Pt(this,b,void 0);Pt(this,rt,!1);Pt(this,nt,null);Pt(this,it,this.pointerup.bind(this));Pt(this,ot,this.pointerdown.bind(this));Pt(this,ct,new Map);Pt(this,tt,!1);Pt(this,$,!1);Pt(this,j,!1);Pt(this,et,void 0);const nr=[c.FreeTextEditor,d.InkEditor,h.StampEditor];if(!Nt._initialized){Nt._initialized=!0;for(const or of nr)or.initialize(Kt)}xt.registerEditorTypes(nr),Ht(this,et,xt),this.pageIndex=Mt,this.div=qt,Ht(this,b,Yt),Ht(this,nt,At),this.viewport=$t,_e(this,et).addLayer(this)}get isEmpty(){return _e(this,ct).size===0}updateToolbar(xt){_e(this,et).updateToolbar(xt)}updateMode(xt=_e(this,et).getMode()){jt(this,bt,Hn).call(this),xt===a.AnnotationEditorType.INK?(this.addInkEditorIfNeeded(!1),this.disableClick()):this.enableClick(),xt!==a.AnnotationEditorType.NONE&&(this.div.classList.toggle("freeTextEditing",xt===a.AnnotationEditorType.FREETEXT),this.div.classList.toggle("inkEditing",xt===a.AnnotationEditorType.INK),this.div.classList.toggle("stampEditing",xt===a.AnnotationEditorType.STAMP),this.div.hidden=!1)}addInkEditorIfNeeded(xt){if(!xt&&_e(this,et).getMode()!==a.AnnotationEditorType.INK)return;if(!xt){for(const qt of _e(this,ct).values())if(qt.isEmpty()){qt.setInBackground();return}}jt(this,ut,mn).call(this,{offsetX:0,offsetY:0},!1).setInBackground()}setEditingState(xt){_e(this,et).setEditingState(xt)}addCommands(xt){_e(this,et).addCommands(xt)}enable(){this.div.style.pointerEvents="auto";const xt=new Set;for(const qt of _e(this,ct).values())qt.enableEditing(),qt.annotationElementId&&xt.add(qt.annotationElementId);if(!_e(this,nt))return;const Mt=_e(this,nt).getEditableAnnotations();for(const qt of Mt){if(qt.hide(),_e(this,et).isDeletedAnnotationElement(qt.data.id)||xt.has(qt.data.id))continue;const Yt=this.deserialize(qt);Yt&&(this.addOrRebuild(Yt),Yt.enableEditing())}}disable(){var Mt;Ht(this,j,!0),this.div.style.pointerEvents="none";const xt=new Set;for(const qt of _e(this,ct).values()){if(qt.disableEditing(),!qt.annotationElementId||qt.serialize()!==null){xt.add(qt.annotationElementId);continue}(Mt=this.getEditableAnnotation(qt.annotationElementId))==null||Mt.show(),qt.remove()}if(_e(this,nt)){const qt=_e(this,nt).getEditableAnnotations();for(const Yt of qt){const{id:At}=Yt.data;xt.has(At)||_e(this,et).isDeletedAnnotationElement(At)||Yt.show()}}jt(this,bt,Hn).call(this),this.isEmpty&&(this.div.hidden=!0),Ht(this,j,!1)}getEditableAnnotation(xt){var Mt;return((Mt=_e(this,nt))==null?void 0:Mt.getEditableAnnotation(xt))||null}setActiveEditor(xt){_e(this,et).getActive()!==xt&&_e(this,et).setActiveEditor(xt)}enableClick(){this.div.addEventListener("pointerdown",_e(this,ot)),this.div.addEventListener("pointerup",_e(this,it))}disableClick(){this.div.removeEventListener("pointerdown",_e(this,ot)),this.div.removeEventListener("pointerup",_e(this,it))}attach(xt){_e(this,ct).set(xt.id,xt);const{annotationElementId:Mt}=xt;Mt&&_e(this,et).isDeletedAnnotationElement(Mt)&&_e(this,et).removeDeletedAnnotationElement(xt)}detach(xt){var Mt;_e(this,ct).delete(xt.id),(Mt=_e(this,b))==null||Mt.removePointerInTextLayer(xt.contentDiv),!_e(this,j)&&xt.annotationElementId&&_e(this,et).addDeletedAnnotationElement(xt)}remove(xt){this.detach(xt),_e(this,et).removeEditor(xt),xt.div.contains(document.activeElement)&&setTimeout(()=>{_e(this,et).focusMainContainer()},0),xt.div.remove(),xt.isAttachedToDOM=!1,_e(this,$)||this.addInkEditorIfNeeded(!1)}changeParent(xt){var Mt;xt.parent!==this&&(xt.annotationElementId&&(_e(this,et).addDeletedAnnotationElement(xt.annotationElementId),o.AnnotationEditor.deleteAnnotationElement(xt),xt.annotationElementId=null),this.attach(xt),(Mt=xt.parent)==null||Mt.detach(xt),xt.setParent(this),xt.div&&xt.isAttachedToDOM&&(xt.div.remove(),this.div.append(xt.div)))}add(xt){if(this.changeParent(xt),_e(this,et).addEditor(xt),this.attach(xt),!xt.isAttachedToDOM){const Mt=xt.render();this.div.append(Mt),xt.isAttachedToDOM=!0}xt.fixAndSetPosition(),xt.onceAdded(),_e(this,et).addToAnnotationStorage(xt)}moveEditorInDOM(xt){var qt;if(!xt.isAttachedToDOM)return;const{activeElement:Mt}=document;xt.div.contains(Mt)&&(xt._focusEventsAllowed=!1,setTimeout(()=>{xt.div.contains(document.activeElement)?xt._focusEventsAllowed=!0:(xt.div.addEventListener("focusin",()=>{xt._focusEventsAllowed=!0},{once:!0}),Mt.focus())},0)),xt._structTreeParentId=(qt=_e(this,b))==null?void 0:qt.moveElementInDOM(this.div,xt.div,xt.contentDiv,!0)}addOrRebuild(xt){xt.needsToBeRebuilt()?xt.rebuild():this.add(xt)}addUndoableEditor(xt){const Mt=()=>xt._uiManager.rebuild(xt),qt=()=>{xt.remove()};this.addCommands({cmd:Mt,undo:qt,mustExec:!1})}getNextId(){return _e(this,et).getId()}pasteEditor(xt,Mt){_e(this,et).updateToolbar(xt),_e(this,et).updateMode(xt);const{offsetX:qt,offsetY:Yt}=jt(this,mt,Wn).call(this),At=this.getNextId(),$t=jt(this,ft,zn).call(this,{parent:this,id:At,x:qt,y:Yt,uiManager:_e(this,et),isCentered:!0,...Mt});$t&&this.add($t)}deserialize(xt){switch(xt.annotationType??xt.annotationEditorType){case a.AnnotationEditorType.FREETEXT:return c.FreeTextEditor.deserialize(xt,this,_e(this,et));case a.AnnotationEditorType.INK:return d.InkEditor.deserialize(xt,this,_e(this,et));case a.AnnotationEditorType.STAMP:return h.StampEditor.deserialize(xt,this,_e(this,et))}return null}addNewEditor(){jt(this,ut,mn).call(this,jt(this,mt,Wn).call(this),!0)}setSelected(xt){_e(this,et).setSelected(xt)}toggleSelected(xt){_e(this,et).toggleSelected(xt)}isSelected(xt){return _e(this,et).isSelected(xt)}unselect(xt){_e(this,et).unselect(xt)}pointerup(xt){const{isMac:Mt}=a.FeatureTest.platform;if(!(xt.button!==0||xt.ctrlKey&&Mt)&&xt.target===this.div&&_e(this,tt)){if(Ht(this,tt,!1),!_e(this,rt)){Ht(this,rt,!0);return}if(_e(this,et).getMode()===a.AnnotationEditorType.STAMP){_e(this,et).unselectAll();return}jt(this,ut,mn).call(this,xt,!1)}}pointerdown(xt){if(_e(this,tt)){Ht(this,tt,!1);return}const{isMac:Mt}=a.FeatureTest.platform;if(xt.button!==0||xt.ctrlKey&&Mt||xt.target!==this.div)return;Ht(this,tt,!0);const qt=_e(this,et).getActive();Ht(this,rt,!qt||qt.isEmpty())}findNewParent(xt,Mt,qt){const Yt=_e(this,et).findParent(Mt,qt);return Yt===null||Yt===this?!1:(Yt.changeParent(xt),!0)}destroy(){var xt,Mt;((xt=_e(this,et).getActive())==null?void 0:xt.parent)===this&&(_e(this,et).commitOrRemove(),_e(this,et).setActiveEditor(null));for(const qt of _e(this,ct).values())(Mt=_e(this,b))==null||Mt.removePointerInTextLayer(qt.contentDiv),qt.setParent(null),qt.isAttachedToDOM=!1,qt.div.remove();this.div=null,_e(this,ct).clear(),_e(this,et).removeLayer(this)}render({viewport:xt}){this.viewport=xt,(0,g.setLayerDimensions)(this.div,xt);for(const Mt of _e(this,et).getEditors(this.pageIndex))this.add(Mt);this.updateMode()}update({viewport:xt}){_e(this,et).commitOrRemove(),this.viewport=xt,(0,g.setLayerDimensions)(this.div,{rotation:xt.rotation}),this.updateMode()}get pageDimensions(){const{pageWidth:xt,pageHeight:Mt}=this.viewport.rawDims;return[xt,Mt]}};b=new WeakMap,rt=new WeakMap,nt=new WeakMap,it=new WeakMap,ot=new WeakMap,ct=new WeakMap,tt=new WeakMap,$=new WeakMap,j=new WeakMap,et=new WeakMap,ft=new WeakSet,zn=function(xt){switch(_e(this,et).getMode()){case a.AnnotationEditorType.FREETEXT:return new c.FreeTextEditor(xt);case a.AnnotationEditorType.INK:return new d.InkEditor(xt);case a.AnnotationEditorType.STAMP:return new h.StampEditor(xt)}return null},ut=new WeakSet,mn=function(xt,Mt){const qt=this.getNextId(),Yt=jt(this,ft,zn).call(this,{parent:this,id:qt,x:xt.offsetX,y:xt.offsetY,uiManager:_e(this,et),isCentered:Mt});return Yt&&this.add(Yt),Yt},mt=new WeakSet,Wn=function(){const{x:xt,y:Mt,width:qt,height:Yt}=this.div.getBoundingClientRect(),At=Math.max(0,xt),$t=Math.max(0,Mt),Kt=Math.min(window.innerWidth,xt+qt),nr=Math.min(window.innerHeight,Mt+Yt),or=(At+Kt)/2-xt,Et=($t+nr)/2-Mt,[lt,ht]=this.viewport.rotation%180===0?[or,Et]:[Et,or];return{offsetX:lt,offsetY:ht}},bt=new WeakSet,Hn=function(){Ht(this,$,!0);for(const xt of _e(this,ct).values())xt.isEmpty()&&xt.remove();Ht(this,$,!1)},Br(Nt,"_initialized",!1);let _=Nt;e.AnnotationEditorLayer=_},(s,e,i)=>{var h,_,b,rt,nt,it,ot,ct,tt,$,vs,et,ys,at,_s,yt,on,pt,Vn,_t,ws,It,qn;Object.defineProperty(e,"__esModule",{value:!0}),e.FreeTextEditor=void 0;var a=i(1),o=i(5),c=i(4),d=i(29);const Mt=class Mt extends c.AnnotationEditor{constructor(At){super({...At,name:"freeTextEditor"});Pt(this,$);Pt(this,et);Pt(this,at);Pt(this,yt);Pt(this,pt);Pt(this,_t);Pt(this,It);Pt(this,h,this.editorDivBlur.bind(this));Pt(this,_,this.editorDivFocus.bind(this));Pt(this,b,this.editorDivInput.bind(this));Pt(this,rt,this.editorDivKeydown.bind(this));Pt(this,nt,void 0);Pt(this,it,"");Pt(this,ot,`${this.id}-editor`);Pt(this,ct,void 0);Pt(this,tt,null);Ht(this,nt,At.color||Mt._defaultColor||c.AnnotationEditor._defaultLineColor),Ht(this,ct,At.fontSize||Mt._defaultFontSize)}static get _keyboardManager(){const At=Mt.prototype,$t=or=>or.isEmpty(),Kt=o.AnnotationEditorUIManager.TRANSLATE_SMALL,nr=o.AnnotationEditorUIManager.TRANSLATE_BIG;return(0,a.shadow)(this,"_keyboardManager",new o.KeyboardManager([[["ctrl+s","mac+meta+s","ctrl+p","mac+meta+p"],At.commitOrRemove,{bubbles:!0}],[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],At.commitOrRemove],[["ArrowLeft","mac+ArrowLeft"],At._translateEmpty,{args:[-Kt,0],checker:$t}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],At._translateEmpty,{args:[-nr,0],checker:$t}],[["ArrowRight","mac+ArrowRight"],At._translateEmpty,{args:[Kt,0],checker:$t}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],At._translateEmpty,{args:[nr,0],checker:$t}],[["ArrowUp","mac+ArrowUp"],At._translateEmpty,{args:[0,-Kt],checker:$t}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],At._translateEmpty,{args:[0,-nr],checker:$t}],[["ArrowDown","mac+ArrowDown"],At._translateEmpty,{args:[0,Kt],checker:$t}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],At._translateEmpty,{args:[0,nr],checker:$t}]]))}static initialize(At){c.AnnotationEditor.initialize(At,{strings:["free_text2_default_content","editor_free_text2_aria_label"]});const $t=getComputedStyle(document.documentElement);this._internalPadding=parseFloat($t.getPropertyValue("--freetext-padding"))}static updateDefaultParams(At,$t){switch(At){case a.AnnotationEditorParamsType.FREETEXT_SIZE:Mt._defaultFontSize=$t;break;case a.AnnotationEditorParamsType.FREETEXT_COLOR:Mt._defaultColor=$t;break}}updateParams(At,$t){switch(At){case a.AnnotationEditorParamsType.FREETEXT_SIZE:jt(this,$,vs).call(this,$t);break;case a.AnnotationEditorParamsType.FREETEXT_COLOR:jt(this,et,ys).call(this,$t);break}}static get defaultPropertiesToUpdate(){return[[a.AnnotationEditorParamsType.FREETEXT_SIZE,Mt._defaultFontSize],[a.AnnotationEditorParamsType.FREETEXT_COLOR,Mt._defaultColor||c.AnnotationEditor._defaultLineColor]]}get propertiesToUpdate(){return[[a.AnnotationEditorParamsType.FREETEXT_SIZE,_e(this,ct)],[a.AnnotationEditorParamsType.FREETEXT_COLOR,_e(this,nt)]]}_translateEmpty(At,$t){this._uiManager.translateSelectedEditors(At,$t,!0)}getInitialTranslation(){const At=this.parentScale;return[-Mt._internalPadding*At,-(Mt._internalPadding+_e(this,ct))*At]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this)))}enableEditMode(){this.isInEditMode()||(this.parent.setEditingState(!1),this.parent.updateToolbar(a.AnnotationEditorType.FREETEXT),super.enableEditMode(),this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this._isDraggable=!1,this.div.removeAttribute("aria-activedescendant"),this.editorDiv.addEventListener("keydown",_e(this,rt)),this.editorDiv.addEventListener("focus",_e(this,_)),this.editorDiv.addEventListener("blur",_e(this,h)),this.editorDiv.addEventListener("input",_e(this,b)))}disableEditMode(){this.isInEditMode()&&(this.parent.setEditingState(!0),super.disableEditMode(),this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",_e(this,ot)),this._isDraggable=!0,this.editorDiv.removeEventListener("keydown",_e(this,rt)),this.editorDiv.removeEventListener("focus",_e(this,_)),this.editorDiv.removeEventListener("blur",_e(this,h)),this.editorDiv.removeEventListener("input",_e(this,b)),this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freeTextEditing"))}focusin(At){this._focusEventsAllowed&&(super.focusin(At),At.target!==this.editorDiv&&this.editorDiv.focus())}onceAdded(){var At;if(this.width){jt(this,It,qn).call(this);return}this.enableEditMode(),this.editorDiv.focus(),(At=this._initialOptions)!=null&&At.isCentered&&this.center(),this._initialOptions=null}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent&&(this.parent.setEditingState(!0),this.parent.div.classList.add("freeTextEditing")),super.remove()}commit(){if(!this.isInEditMode())return;super.commit(),this.disableEditMode();const At=_e(this,it),$t=Ht(this,it,jt(this,at,_s).call(this).trimEnd());if(At===$t)return;const Kt=nr=>{if(Ht(this,it,nr),!nr){this.remove();return}jt(this,pt,Vn).call(this),this._uiManager.rebuild(this),jt(this,yt,on).call(this)};this.addCommands({cmd:()=>{Kt($t)},undo:()=>{Kt(At)},mustExec:!1}),jt(this,yt,on).call(this)}shouldGetKeyboardEvents(){return this.isInEditMode()}enterInEditMode(){this.enableEditMode(),this.editorDiv.focus()}dblclick(At){this.enterInEditMode()}keydown(At){At.target===this.div&&At.key==="Enter"&&(this.enterInEditMode(),At.preventDefault())}editorDivKeydown(At){Mt._keyboardManager.exec(this,At)}editorDivFocus(At){this.isEditing=!0}editorDivBlur(At){this.isEditing=!1}editorDivInput(At){this.parent.div.classList.toggle("freeTextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}render(){if(this.div)return this.div;let At,$t;this.width&&(At=this.x,$t=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",_e(this,ot)),this.enableEditing(),c.AnnotationEditor._l10nPromise.get("editor_free_text2_aria_label").then(nr=>{var or;return(or=this.editorDiv)==null?void 0:or.setAttribute("aria-label",nr)}),c.AnnotationEditor._l10nPromise.get("free_text2_default_content").then(nr=>{var or;return(or=this.editorDiv)==null?void 0:or.setAttribute("default-content",nr)}),this.editorDiv.contentEditable=!0;const{style:Kt}=this.editorDiv;if(Kt.fontSize=`calc(${_e(this,ct)}px * var(--scale-factor))`,Kt.color=_e(this,nt),this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),(0,o.bindEvents)(this,this.div,["dblclick","keydown"]),this.width){const[nr,or]=this.parentDimensions;if(this.annotationElementId){const{position:Et}=_e(this,tt);let[lt,ht]=this.getInitialTranslation();[lt,ht]=this.pageTranslationToScreen(lt,ht);const[dt,gt]=this.pageDimensions,[vt,St]=this.pageTranslation;let kt,Rt;switch(this.rotation){case 0:kt=At+(Et[0]-vt)/dt,Rt=$t+this.height-(Et[1]-St)/gt;break;case 90:kt=At+(Et[0]-vt)/dt,Rt=$t-(Et[1]-St)/gt,[lt,ht]=[ht,-lt];break;case 180:kt=At-this.width+(Et[0]-vt)/dt,Rt=$t-(Et[1]-St)/gt,[lt,ht]=[-lt,-ht];break;case 270:kt=At+(Et[0]-vt-this.height*gt)/dt,Rt=$t+(Et[1]-St-this.width*dt)/gt,[lt,ht]=[-ht,lt];break}this.setAt(kt*nr,Rt*or,lt,ht)}else this.setAt(At*nr,$t*or,this.width*nr,this.height*or);jt(this,pt,Vn).call(this),this._isDraggable=!0,this.editorDiv.contentEditable=!1}else this._isDraggable=!1,this.editorDiv.contentEditable=!0;return this.div}get contentDiv(){return this.editorDiv}static deserialize(At,$t,Kt){let nr=null;if(At instanceof d.FreeTextAnnotationElement){const{data:{defaultAppearanceData:{fontSize:Et,fontColor:lt},rect:ht,rotation:dt,id:gt},textContent:vt,textPosition:St,parent:{page:{pageNumber:kt}}}=At;if(!vt||vt.length===0)return null;nr=At={annotationType:a.AnnotationEditorType.FREETEXT,color:Array.from(lt),fontSize:Et,value:vt.join(`
`),position:St,pageIndex:kt-1,rect:ht,rotation:dt,id:gt,deleted:!1}}const or=super.deserialize(At,$t,Kt);return Ht(or,ct,At.fontSize),Ht(or,nt,a.Util.makeHexColor(...At.color)),Ht(or,it,At.value),or.annotationElementId=At.id||null,Ht(or,tt,nr),or}serialize(At=!1){if(this.isEmpty())return null;if(this.deleted)return{pageIndex:this.pageIndex,id:this.annotationElementId,deleted:!0};const $t=Mt._internalPadding*this.parentScale,Kt=this.getRect($t,$t),nr=c.AnnotationEditor._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:_e(this,nt)),or={annotationType:a.AnnotationEditorType.FREETEXT,color:nr,fontSize:_e(this,ct),value:_e(this,it),pageIndex:this.pageIndex,rect:Kt,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return At?or:this.annotationElementId&&!jt(this,_t,ws).call(this,or)?null:(or.id=this.annotationElementId,or)}};h=new WeakMap,_=new WeakMap,b=new WeakMap,rt=new WeakMap,nt=new WeakMap,it=new WeakMap,ot=new WeakMap,ct=new WeakMap,tt=new WeakMap,$=new WeakSet,vs=function(At){const $t=nr=>{this.editorDiv.style.fontSize=`calc(${nr}px * var(--scale-factor))`,this.translate(0,-(nr-_e(this,ct))*this.parentScale),Ht(this,ct,nr),jt(this,yt,on).call(this)},Kt=_e(this,ct);this.addCommands({cmd:()=>{$t(At)},undo:()=>{$t(Kt)},mustExec:!0,type:a.AnnotationEditorParamsType.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})},et=new WeakSet,ys=function(At){const $t=_e(this,nt);this.addCommands({cmd:()=>{Ht(this,nt,this.editorDiv.style.color=At)},undo:()=>{Ht(this,nt,this.editorDiv.style.color=$t)},mustExec:!0,type:a.AnnotationEditorParamsType.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})},at=new WeakSet,_s=function(){const At=this.editorDiv.getElementsByTagName("div");if(At.length===0)return this.editorDiv.innerText;const $t=[];for(const Kt of At)$t.push(Kt.innerText.replace(/\r\n?|\n/,""));return $t.join(`
`)},yt=new WeakSet,on=function(){const[At,$t]=this.parentDimensions;let Kt;if(this.isAttachedToDOM)Kt=this.div.getBoundingClientRect();else{const{currentLayer:nr,div:or}=this,Et=or.style.display;or.style.display="hidden",nr.div.append(this.div),Kt=or.getBoundingClientRect(),or.remove(),or.style.display=Et}this.rotation%180===this.parentRotation%180?(this.width=Kt.width/At,this.height=Kt.height/$t):(this.width=Kt.height/At,this.height=Kt.width/$t),this.fixAndSetPosition()},pt=new WeakSet,Vn=function(){if(this.editorDiv.replaceChildren(),!!_e(this,it))for(const At of _e(this,it).split(`
`)){const $t=document.createElement("div");$t.append(At?document.createTextNode(At):document.createElement("br")),this.editorDiv.append($t)}},_t=new WeakSet,ws=function(At){const{value:$t,fontSize:Kt,color:nr,rect:or,pageIndex:Et}=_e(this,tt);return At.value!==$t||At.fontSize!==Kt||At.rect.some((lt,ht)=>Math.abs(lt-or[ht])>=1)||At.color.some((lt,ht)=>lt!==nr[ht])||At.pageIndex!==Et},It=new WeakSet,qn=function(At=!1){if(!this.annotationElementId)return;if(jt(this,yt,on).call(this),!At&&(this.width===0||this.height===0)){setTimeout(()=>jt(this,It,qn).call(this,!0),0);return}const $t=Mt._internalPadding*this.parentScale;_e(this,tt).rect=this.getRect($t,$t)},Br(Mt,"_freeTextDefaultContent",""),Br(Mt,"_internalPadding",0),Br(Mt,"_defaultColor",null),Br(Mt,"_defaultFontSize",10),Br(Mt,"_type","freetext");let g=Mt;e.FreeTextEditor=g},(s,e,i)=>{var ht,gt,Xr,St,bs,Rt,Vt,Wt,Xt,Qt,lr,er,mr,xr,ur,_r,tr,Bt,zt,Zt,dr,hr,kr,Ss,Tr,vn,Or,Gn,jr,Kn,Ut,Lt,sr,ar,$r,Ur,Ft,Xn,br,fr,Sr,Er,Es,ir,Yn;Object.defineProperty(e,"__esModule",{value:!0}),e.StampAnnotationElement=e.InkAnnotationElement=e.FreeTextAnnotationElement=e.AnnotationLayer=void 0;var a=i(1),o=i(6),c=i(3),d=i(30),g=i(31),h=i(32);const _=1e3,b=9,rt=new WeakSet;function nt(wr){return{width:wr[2]-wr[0],height:wr[3]-wr[1]}}class it{static create(Tt){switch(Tt.data.annotationType){case a.AnnotationType.LINK:return new ct(Tt);case a.AnnotationType.TEXT:return new tt(Tt);case a.AnnotationType.WIDGET:switch(Tt.data.fieldType){case"Tx":return new j(Tt);case"Btn":return Tt.data.radioButton?new at(Tt):Tt.data.checkBox?new ft(Tt):new ut(Tt);case"Ch":return new yt(Tt);case"Sig":return new et(Tt)}return new $(Tt);case a.AnnotationType.POPUP:return new mt(Tt);case a.AnnotationType.FREETEXT:return new bt(Tt);case a.AnnotationType.LINE:return new _t(Tt);case a.AnnotationType.SQUARE:return new Nt(Tt);case a.AnnotationType.CIRCLE:return new It(Tt);case a.AnnotationType.POLYLINE:return new xt(Tt);case a.AnnotationType.CARET:return new qt(Tt);case a.AnnotationType.INK:return new Yt(Tt);case a.AnnotationType.POLYGON:return new Mt(Tt);case a.AnnotationType.HIGHLIGHT:return new At(Tt);case a.AnnotationType.UNDERLINE:return new $t(Tt);case a.AnnotationType.SQUIGGLY:return new Kt(Tt);case a.AnnotationType.STRIKEOUT:return new nr(Tt);case a.AnnotationType.STAMP:return new or(Tt);case a.AnnotationType.FILEATTACHMENT:return new Et(Tt);default:return new ot(Tt)}}}const dt=class dt{constructor(Tt,{isRenderable:st=!1,ignoreBorder:wt=!1,createQuadrilaterals:Ct=!1}={}){Pt(this,ht,!1);this.isRenderable=st,this.data=Tt.data,this.layer=Tt.layer,this.linkService=Tt.linkService,this.downloadManager=Tt.downloadManager,this.imageResourcesPath=Tt.imageResourcesPath,this.renderForms=Tt.renderForms,this.svgFactory=Tt.svgFactory,this.annotationStorage=Tt.annotationStorage,this.enableScripting=Tt.enableScripting,this.hasJSActions=Tt.hasJSActions,this._fieldObjects=Tt.fieldObjects,this.parent=Tt.parent,st&&(this.container=this._createContainer(wt)),Ct&&this._createQuadrilaterals()}static _hasPopupData({titleObj:Tt,contentsObj:st,richText:wt}){return!!(Tt!=null&&Tt.str||st!=null&&st.str||wt!=null&&wt.str)}get hasPopupData(){return dt._hasPopupData(this.data)}_createContainer(Tt){const{data:st,parent:{page:wt,viewport:Ct}}=this,Ot=document.createElement("section");Ot.setAttribute("data-annotation-id",st.id),this instanceof $||(Ot.tabIndex=_),Ot.style.zIndex=this.parent.zIndex++,this.data.popupRef&&Ot.setAttribute("aria-haspopup","dialog"),st.noRotate&&Ot.classList.add("norotate");const{pageWidth:Dt,pageHeight:Gt,pageX:rr,pageY:gr}=Ct.rawDims;if(!st.rect||this instanceof mt){const{rotation:Ar}=st;return!st.hasOwnCanvas&&Ar!==0&&this.setRotation(Ar,Ot),Ot}const{width:pr,height:Rr}=nt(st.rect),vr=a.Util.normalizeRect([st.rect[0],wt.view[3]-st.rect[1]+wt.view[1],st.rect[2],wt.view[3]-st.rect[3]+wt.view[1]]);if(!Tt&&st.borderStyle.width>0){Ot.style.borderWidth=`${st.borderStyle.width}px`;const Ar=st.borderStyle.horizontalCornerRadius,Ir=st.borderStyle.verticalCornerRadius;if(Ar>0||Ir>0){const Fr=`calc(${Ar}px * var(--scale-factor)) / calc(${Ir}px * var(--scale-factor))`;Ot.style.borderRadius=Fr}else if(this instanceof at){const Fr=`calc(${pr}px * var(--scale-factor)) / calc(${Rr}px * var(--scale-factor))`;Ot.style.borderRadius=Fr}switch(st.borderStyle.style){case a.AnnotationBorderStyleType.SOLID:Ot.style.borderStyle="solid";break;case a.AnnotationBorderStyleType.DASHED:Ot.style.borderStyle="dashed";break;case a.AnnotationBorderStyleType.BEVELED:(0,a.warn)("Unimplemented border style: beveled");break;case a.AnnotationBorderStyleType.INSET:(0,a.warn)("Unimplemented border style: inset");break;case a.AnnotationBorderStyleType.UNDERLINE:Ot.style.borderBottomStyle="solid";break}const Mr=st.borderColor||null;Mr?(Ht(this,ht,!0),Ot.style.borderColor=a.Util.makeHexColor(Mr[0]|0,Mr[1]|0,Mr[2]|0)):Ot.style.borderWidth=0}Ot.style.left=`${100*(vr[0]-rr)/Dt}%`,Ot.style.top=`${100*(vr[1]-gr)/Gt}%`;const{rotation:yr}=st;return st.hasOwnCanvas||yr===0?(Ot.style.width=`${100*pr/Dt}%`,Ot.style.height=`${100*Rr/Gt}%`):this.setRotation(yr,Ot),Ot}setRotation(Tt,st=this.container){if(!this.data.rect)return;const{pageWidth:wt,pageHeight:Ct}=this.parent.viewport.rawDims,{width:Ot,height:Dt}=nt(this.data.rect);let Gt,rr;Tt%180===0?(Gt=100*Ot/wt,rr=100*Dt/Ct):(Gt=100*Dt/wt,rr=100*Ot/Ct),st.style.width=`${Gt}%`,st.style.height=`${rr}%`,st.setAttribute("data-main-rotation",(360-Tt)%360)}get _commonActions(){const Tt=(st,wt,Ct)=>{const Ot=Ct.detail[st],Dt=Ot[0],Gt=Ot.slice(1);Ct.target.style[wt]=d.ColorConverters[`${Dt}_HTML`](Gt),this.annotationStorage.setValue(this.data.id,{[wt]:d.ColorConverters[`${Dt}_rgb`](Gt)})};return(0,a.shadow)(this,"_commonActions",{display:st=>{const{display:wt}=st.detail,Ct=wt%2===1;this.container.style.visibility=Ct?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noView:Ct,noPrint:wt===1||wt===2})},print:st=>{this.annotationStorage.setValue(this.data.id,{noPrint:!st.detail.print})},hidden:st=>{const{hidden:wt}=st.detail;this.container.style.visibility=wt?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noPrint:wt,noView:wt})},focus:st=>{setTimeout(()=>st.target.focus({preventScroll:!1}),0)},userName:st=>{st.target.title=st.detail.userName},readonly:st=>{st.target.disabled=st.detail.readonly},required:st=>{this._setRequired(st.target,st.detail.required)},bgColor:st=>{Tt("bgColor","backgroundColor",st)},fillColor:st=>{Tt("fillColor","backgroundColor",st)},fgColor:st=>{Tt("fgColor","color",st)},textColor:st=>{Tt("textColor","color",st)},borderColor:st=>{Tt("borderColor","borderColor",st)},strokeColor:st=>{Tt("strokeColor","borderColor",st)},rotation:st=>{const wt=st.detail.rotation;this.setRotation(wt),this.annotationStorage.setValue(this.data.id,{rotation:wt})}})}_dispatchEventFromSandbox(Tt,st){const wt=this._commonActions;for(const Ct of Object.keys(st.detail)){const Ot=Tt[Ct]||wt[Ct];Ot==null||Ot(st)}}_setDefaultPropertiesFromJS(Tt){if(!this.enableScripting)return;const st=this.annotationStorage.getRawValue(this.data.id);if(!st)return;const wt=this._commonActions;for(const[Ct,Ot]of Object.entries(st)){const Dt=wt[Ct];if(Dt){const Gt={detail:{[Ct]:Ot},target:Tt};Dt(Gt),delete st[Ct]}}}_createQuadrilaterals(){if(!this.container)return;const{quadPoints:Tt}=this.data;if(!Tt)return;const[st,wt,Ct,Ot]=this.data.rect;if(Tt.length===1){const[,{x:Ir,y:Mr},{x:Fr,y:Wr}]=Tt[0];if(Ct===Ir&&Ot===Mr&&st===Fr&&wt===Wr)return}const{style:Dt}=this.container;let Gt;if(_e(this,ht)){const{borderColor:Ir,borderWidth:Mr}=Dt;Dt.borderWidth=0,Gt=["url('data:image/svg+xml;utf8,",'<svg xmlns="http://www.w3.org/2000/svg"',' preserveAspectRatio="none" viewBox="0 0 1 1">',`<g fill="transparent" stroke="${Ir}" stroke-width="${Mr}">`],this.container.classList.add("hasBorder")}const rr=Ct-st,gr=Ot-wt,{svgFactory:pr}=this,Rr=pr.createElement("svg");Rr.classList.add("quadrilateralsContainer"),Rr.setAttribute("width",0),Rr.setAttribute("height",0);const vr=pr.createElement("defs");Rr.append(vr);const yr=pr.createElement("clipPath"),Ar=`clippath_${this.data.id}`;yr.setAttribute("id",Ar),yr.setAttribute("clipPathUnits","objectBoundingBox"),vr.append(yr);for(const[,{x:Ir,y:Mr},{x:Fr,y:Wr}]of Tt){const zr=pr.createElement("rect"),Hr=(Fr-st)/rr,Gr=(Ot-Mr)/gr,Kr=(Ir-Fr)/rr,is=(Mr-Wr)/gr;zr.setAttribute("x",Hr),zr.setAttribute("y",Gr),zr.setAttribute("width",Kr),zr.setAttribute("height",is),yr.append(zr),Gt==null||Gt.push(`<rect vector-effect="non-scaling-stroke" x="${Hr}" y="${Gr}" width="${Kr}" height="${is}"/>`)}_e(this,ht)&&(Gt.push("</g></svg>')"),Dt.backgroundImage=Gt.join("")),this.container.append(Rr),this.container.style.clipPath=`url(#${Ar})`}_createPopup(){const{container:Tt,data:st}=this;Tt.setAttribute("aria-haspopup","dialog");const wt=new mt({data:{color:st.color,titleObj:st.titleObj,modificationDate:st.modificationDate,contentsObj:st.contentsObj,richText:st.richText,parentRect:st.rect,borderStyle:0,id:`popup_${st.id}`,rotation:st.rotation},parent:this.parent,elements:[this]});this.parent.div.append(wt.render())}render(){(0,a.unreachable)("Abstract method `AnnotationElement.render` called")}_getElementsByName(Tt,st=null){const wt=[];if(this._fieldObjects){const Ct=this._fieldObjects[Tt];if(Ct)for(const{page:Ot,id:Dt,exportValues:Gt}of Ct){if(Ot===-1||Dt===st)continue;const rr=typeof Gt=="string"?Gt:null,gr=document.querySelector(`[data-element-id="${Dt}"]`);if(gr&&!rt.has(gr)){(0,a.warn)(`_getElementsByName - element not allowed: ${Dt}`);continue}wt.push({id:Dt,exportValue:rr,domElement:gr})}return wt}for(const Ct of document.getElementsByName(Tt)){const{exportValue:Ot}=Ct,Dt=Ct.getAttribute("data-element-id");Dt!==st&&rt.has(Ct)&&wt.push({id:Dt,exportValue:Ot,domElement:Ct})}return wt}show(){var Tt;this.container&&(this.container.hidden=!1),(Tt=this.popup)==null||Tt.maybeShow()}hide(){var Tt;this.container&&(this.container.hidden=!0),(Tt=this.popup)==null||Tt.forceHide()}getElementsToTriggerPopup(){return this.container}addHighlightArea(){const Tt=this.getElementsToTriggerPopup();if(Array.isArray(Tt))for(const st of Tt)st.classList.add("highlightArea");else Tt.classList.add("highlightArea")}_editOnDoubleClick(){const{annotationEditorType:Tt,data:{id:st}}=this;this.container.addEventListener("dblclick",()=>{var wt;(wt=this.linkService.eventBus)==null||wt.dispatch("switchannotationeditormode",{source:this,mode:Tt,editId:st})})}};ht=new WeakMap;let ot=dt;class ct extends ot{constructor(st,wt=null){super(st,{isRenderable:!0,ignoreBorder:!!(wt!=null&&wt.ignoreBorder),createQuadrilaterals:!0});Pt(this,gt);Pt(this,St);this.isTooltipOnly=st.data.isTooltipOnly}render(){const{data:st,linkService:wt}=this,Ct=document.createElement("a");Ct.setAttribute("data-element-id",st.id);let Ot=!1;return st.url?(wt.addLinkAttributes(Ct,st.url,st.newWindow),Ot=!0):st.action?(this._bindNamedAction(Ct,st.action),Ot=!0):st.attachment?(this._bindAttachment(Ct,st.attachment),Ot=!0):st.setOCGState?(jt(this,St,bs).call(this,Ct,st.setOCGState),Ot=!0):st.dest?(this._bindLink(Ct,st.dest),Ot=!0):(st.actions&&(st.actions.Action||st.actions["Mouse Up"]||st.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(Ct,st),Ot=!0),st.resetForm?(this._bindResetFormAction(Ct,st.resetForm),Ot=!0):this.isTooltipOnly&&!Ot&&(this._bindLink(Ct,""),Ot=!0)),this.container.classList.add("linkAnnotation"),Ot&&this.container.append(Ct),this.container}_bindLink(st,wt){st.href=this.linkService.getDestinationHash(wt),st.onclick=()=>(wt&&this.linkService.goToDestination(wt),!1),(wt||wt==="")&&jt(this,gt,Xr).call(this)}_bindNamedAction(st,wt){st.href=this.linkService.getAnchorUrl(""),st.onclick=()=>(this.linkService.executeNamedAction(wt),!1),jt(this,gt,Xr).call(this)}_bindAttachment(st,wt){st.href=this.linkService.getAnchorUrl(""),st.onclick=()=>{var Ct;return(Ct=this.downloadManager)==null||Ct.openOrDownloadData(this.container,wt.content,wt.filename),!1},jt(this,gt,Xr).call(this)}_bindJSAction(st,wt){st.href=this.linkService.getAnchorUrl("");const Ct=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const Ot of Object.keys(wt.actions)){const Dt=Ct.get(Ot);Dt&&(st[Dt]=()=>{var Gt;return(Gt=this.linkService.eventBus)==null||Gt.dispatch("dispatcheventinsandbox",{source:this,detail:{id:wt.id,name:Ot}}),!1})}st.onclick||(st.onclick=()=>!1),jt(this,gt,Xr).call(this)}_bindResetFormAction(st,wt){const Ct=st.onclick;if(Ct||(st.href=this.linkService.getAnchorUrl("")),jt(this,gt,Xr).call(this),!this._fieldObjects){(0,a.warn)('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),Ct||(st.onclick=()=>!1);return}st.onclick=()=>{var Rr;Ct==null||Ct();const{fields:Ot,refs:Dt,include:Gt}=wt,rr=[];if(Ot.length!==0||Dt.length!==0){const vr=new Set(Dt);for(const yr of Ot){const Ar=this._fieldObjects[yr]||[];for(const{id:Ir}of Ar)vr.add(Ir)}for(const yr of Object.values(this._fieldObjects))for(const Ar of yr)vr.has(Ar.id)===Gt&&rr.push(Ar)}else for(const vr of Object.values(this._fieldObjects))rr.push(...vr);const gr=this.annotationStorage,pr=[];for(const vr of rr){const{id:yr}=vr;switch(pr.push(yr),vr.type){case"text":{const Ir=vr.defaultValue||"";gr.setValue(yr,{value:Ir});break}case"checkbox":case"radiobutton":{const Ir=vr.defaultValue===vr.exportValues;gr.setValue(yr,{value:Ir});break}case"combobox":case"listbox":{const Ir=vr.defaultValue||"";gr.setValue(yr,{value:Ir});break}default:continue}const Ar=document.querySelector(`[data-element-id="${yr}"]`);if(Ar){if(!rt.has(Ar)){(0,a.warn)(`_bindResetFormAction - element not allowed: ${yr}`);continue}}else continue;Ar.dispatchEvent(new Event("resetform"))}return this.enableScripting&&((Rr=this.linkService.eventBus)==null||Rr.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:pr,name:"ResetForm"}})),!1}}}gt=new WeakSet,Xr=function(){this.container.setAttribute("data-internal-link","")},St=new WeakSet,bs=function(st,wt){st.href=this.linkService.getAnchorUrl(""),st.onclick=()=>(this.linkService.executeSetOCGState(wt),!1),jt(this,gt,Xr).call(this)};class tt extends ot{constructor(Tt){super(Tt,{isRenderable:!0})}render(){this.container.classList.add("textAnnotation");const Tt=document.createElement("img");return Tt.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",Tt.alt="[{{type}} Annotation]",Tt.dataset.l10nId="text_annotation_type",Tt.dataset.l10nArgs=JSON.stringify({type:this.data.name}),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.append(Tt),this.container}}class $ extends ot{render(){return this.data.alternativeText&&(this.container.title=this.data.alternativeText),this.container}showElementAndHideCanvas(Tt){var st;this.data.hasOwnCanvas&&(((st=Tt.previousSibling)==null?void 0:st.nodeName)==="CANVAS"&&(Tt.previousSibling.hidden=!0),Tt.hidden=!1)}_getKeyModifier(Tt){const{isWin:st,isMac:wt}=a.FeatureTest.platform;return st&&Tt.ctrlKey||wt&&Tt.metaKey}_setEventListener(Tt,st,wt,Ct,Ot){wt.includes("mouse")?Tt.addEventListener(wt,Dt=>{var Gt;(Gt=this.linkService.eventBus)==null||Gt.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:Ct,value:Ot(Dt),shift:Dt.shiftKey,modifier:this._getKeyModifier(Dt)}})}):Tt.addEventListener(wt,Dt=>{var Gt;if(wt==="blur"){if(!st.focused||!Dt.relatedTarget)return;st.focused=!1}else if(wt==="focus"){if(st.focused)return;st.focused=!0}Ot&&((Gt=this.linkService.eventBus)==null||Gt.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:Ct,value:Ot(Dt)}}))})}_setEventListeners(Tt,st,wt,Ct){var Ot,Dt,Gt;for(const[rr,gr]of wt)(gr==="Action"||(Ot=this.data.actions)!=null&&Ot[gr])&&((gr==="Focus"||gr==="Blur")&&(st||(st={focused:!1})),this._setEventListener(Tt,st,rr,gr,Ct),gr==="Focus"&&!((Dt=this.data.actions)!=null&&Dt.Blur)?this._setEventListener(Tt,st,"blur","Blur",null):gr==="Blur"&&!((Gt=this.data.actions)!=null&&Gt.Focus)&&this._setEventListener(Tt,st,"focus","Focus",null))}_setBackgroundColor(Tt){const st=this.data.backgroundColor||null;Tt.style.backgroundColor=st===null?"transparent":a.Util.makeHexColor(st[0],st[1],st[2])}_setTextStyle(Tt){const st=["left","center","right"],{fontColor:wt}=this.data.defaultAppearanceData,Ct=this.data.defaultAppearanceData.fontSize||b,Ot=Tt.style;let Dt;const Gt=2,rr=gr=>Math.round(10*gr)/10;if(this.data.multiLine){const gr=Math.abs(this.data.rect[3]-this.data.rect[1]-Gt),pr=Math.round(gr/(a.LINE_FACTOR*Ct))||1,Rr=gr/pr;Dt=Math.min(Ct,rr(Rr/a.LINE_FACTOR))}else{const gr=Math.abs(this.data.rect[3]-this.data.rect[1]-Gt);Dt=Math.min(Ct,rr(gr/a.LINE_FACTOR))}Ot.fontSize=`calc(${Dt}px * var(--scale-factor))`,Ot.color=a.Util.makeHexColor(wt[0],wt[1],wt[2]),this.data.textAlignment!==null&&(Ot.textAlign=st[this.data.textAlignment])}_setRequired(Tt,st){st?Tt.setAttribute("required",!0):Tt.removeAttribute("required"),Tt.setAttribute("aria-required",st)}}class j extends ${constructor(Tt){const st=Tt.renderForms||!Tt.data.hasAppearance&&!!Tt.data.fieldValue;super(Tt,{isRenderable:st})}setPropertyOnSiblings(Tt,st,wt,Ct){const Ot=this.annotationStorage;for(const Dt of this._getElementsByName(Tt.name,Tt.id))Dt.domElement&&(Dt.domElement[st]=wt),Ot.setValue(Dt.id,{[Ct]:wt})}render(){var Ct,Ot;const Tt=this.annotationStorage,st=this.data.id;this.container.classList.add("textWidgetAnnotation");let wt=null;if(this.renderForms){const Dt=Tt.getValue(st,{value:this.data.fieldValue});let Gt=Dt.value||"";const rr=Tt.getValue(st,{charLimit:this.data.maxLen}).charLimit;rr&&Gt.length>rr&&(Gt=Gt.slice(0,rr));let gr=Dt.formattedValue||((Ct=this.data.textContent)==null?void 0:Ct.join(`
`))||null;gr&&this.data.comb&&(gr=gr.replaceAll(/\s+/g,""));const pr={userValue:Gt,formattedValue:gr,lastCommittedValue:null,commitKey:1,focused:!1};this.data.multiLine?(wt=document.createElement("textarea"),wt.textContent=gr??Gt,this.data.doNotScroll&&(wt.style.overflowY="hidden")):(wt=document.createElement("input"),wt.type="text",wt.setAttribute("value",gr??Gt),this.data.doNotScroll&&(wt.style.overflowX="hidden")),this.data.hasOwnCanvas&&(wt.hidden=!0),rt.add(wt),wt.setAttribute("data-element-id",st),wt.disabled=this.data.readOnly,wt.name=this.data.fieldName,wt.tabIndex=_,this._setRequired(wt,this.data.required),rr&&(wt.maxLength=rr),wt.addEventListener("input",vr=>{Tt.setValue(st,{value:vr.target.value}),this.setPropertyOnSiblings(wt,"value",vr.target.value,"value"),pr.formattedValue=null}),wt.addEventListener("resetform",vr=>{const yr=this.data.defaultFieldValue??"";wt.value=pr.userValue=yr,pr.formattedValue=null});let Rr=vr=>{const{formattedValue:yr}=pr;yr!=null&&(vr.target.value=yr),vr.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){wt.addEventListener("focus",yr=>{if(pr.focused)return;const{target:Ar}=yr;pr.userValue&&(Ar.value=pr.userValue),pr.lastCommittedValue=Ar.value,pr.commitKey=1,pr.focused=!0}),wt.addEventListener("updatefromsandbox",yr=>{this.showElementAndHideCanvas(yr.target);const Ar={value(Ir){pr.userValue=Ir.detail.value??"",Tt.setValue(st,{value:pr.userValue.toString()}),Ir.target.value=pr.userValue},formattedValue(Ir){const{formattedValue:Mr}=Ir.detail;pr.formattedValue=Mr,Mr!=null&&Ir.target!==document.activeElement&&(Ir.target.value=Mr),Tt.setValue(st,{formattedValue:Mr})},selRange(Ir){Ir.target.setSelectionRange(...Ir.detail.selRange)},charLimit:Ir=>{var zr;const{charLimit:Mr}=Ir.detail,{target:Fr}=Ir;if(Mr===0){Fr.removeAttribute("maxLength");return}Fr.setAttribute("maxLength",Mr);let Wr=pr.userValue;!Wr||Wr.length<=Mr||(Wr=Wr.slice(0,Mr),Fr.value=pr.userValue=Wr,Tt.setValue(st,{value:Wr}),(zr=this.linkService.eventBus)==null||zr.dispatch("dispatcheventinsandbox",{source:this,detail:{id:st,name:"Keystroke",value:Wr,willCommit:!0,commitKey:1,selStart:Fr.selectionStart,selEnd:Fr.selectionEnd}}))}};this._dispatchEventFromSandbox(Ar,yr)}),wt.addEventListener("keydown",yr=>{var Mr;pr.commitKey=1;let Ar=-1;if(yr.key==="Escape"?Ar=0:yr.key==="Enter"&&!this.data.multiLine?Ar=2:yr.key==="Tab"&&(pr.commitKey=3),Ar===-1)return;const{value:Ir}=yr.target;pr.lastCommittedValue!==Ir&&(pr.lastCommittedValue=Ir,pr.userValue=Ir,(Mr=this.linkService.eventBus)==null||Mr.dispatch("dispatcheventinsandbox",{source:this,detail:{id:st,name:"Keystroke",value:Ir,willCommit:!0,commitKey:Ar,selStart:yr.target.selectionStart,selEnd:yr.target.selectionEnd}}))});const vr=Rr;Rr=null,wt.addEventListener("blur",yr=>{var Ir;if(!pr.focused||!yr.relatedTarget)return;pr.focused=!1;const{value:Ar}=yr.target;pr.userValue=Ar,pr.lastCommittedValue!==Ar&&((Ir=this.linkService.eventBus)==null||Ir.dispatch("dispatcheventinsandbox",{source:this,detail:{id:st,name:"Keystroke",value:Ar,willCommit:!0,commitKey:pr.commitKey,selStart:yr.target.selectionStart,selEnd:yr.target.selectionEnd}})),vr(yr)}),(Ot=this.data.actions)!=null&&Ot.Keystroke&&wt.addEventListener("beforeinput",yr=>{var Gr;pr.lastCommittedValue=null;const{data:Ar,target:Ir}=yr,{value:Mr,selectionStart:Fr,selectionEnd:Wr}=Ir;let zr=Fr,Hr=Wr;switch(yr.inputType){case"deleteWordBackward":{const Kr=Mr.substring(0,Fr).match(/\w*[^\w]*$/);Kr&&(zr-=Kr[0].length);break}case"deleteWordForward":{const Kr=Mr.substring(Fr).match(/^[^\w]*\w*/);Kr&&(Hr+=Kr[0].length);break}case"deleteContentBackward":Fr===Wr&&(zr-=1);break;case"deleteContentForward":Fr===Wr&&(Hr+=1);break}yr.preventDefault(),(Gr=this.linkService.eventBus)==null||Gr.dispatch("dispatcheventinsandbox",{source:this,detail:{id:st,name:"Keystroke",value:Mr,change:Ar||"",willCommit:!1,selStart:zr,selEnd:Hr}})}),this._setEventListeners(wt,pr,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],yr=>yr.target.value)}if(Rr&&wt.addEventListener("blur",Rr),this.data.comb){const yr=(this.data.rect[2]-this.data.rect[0])/rr;wt.classList.add("comb"),wt.style.letterSpacing=`calc(${yr}px * var(--scale-factor) - 1ch)`}}else wt=document.createElement("div"),wt.textContent=this.data.fieldValue,wt.style.verticalAlign="middle",wt.style.display="table-cell";return this._setTextStyle(wt),this._setBackgroundColor(wt),this._setDefaultPropertiesFromJS(wt),this.container.append(wt),this.container}}class et extends ${constructor(Tt){super(Tt,{isRenderable:!!Tt.data.hasOwnCanvas})}}class ft extends ${constructor(Tt){super(Tt,{isRenderable:Tt.renderForms})}render(){const Tt=this.annotationStorage,st=this.data,wt=st.id;let Ct=Tt.getValue(wt,{value:st.exportValue===st.fieldValue}).value;typeof Ct=="string"&&(Ct=Ct!=="Off",Tt.setValue(wt,{value:Ct})),this.container.classList.add("buttonWidgetAnnotation","checkBox");const Ot=document.createElement("input");return rt.add(Ot),Ot.setAttribute("data-element-id",wt),Ot.disabled=st.readOnly,this._setRequired(Ot,this.data.required),Ot.type="checkbox",Ot.name=st.fieldName,Ct&&Ot.setAttribute("checked",!0),Ot.setAttribute("exportValue",st.exportValue),Ot.tabIndex=_,Ot.addEventListener("change",Dt=>{const{name:Gt,checked:rr}=Dt.target;for(const gr of this._getElementsByName(Gt,wt)){const pr=rr&&gr.exportValue===st.exportValue;gr.domElement&&(gr.domElement.checked=pr),Tt.setValue(gr.id,{value:pr})}Tt.setValue(wt,{value:rr})}),Ot.addEventListener("resetform",Dt=>{const Gt=st.defaultFieldValue||"Off";Dt.target.checked=Gt===st.exportValue}),this.enableScripting&&this.hasJSActions&&(Ot.addEventListener("updatefromsandbox",Dt=>{const Gt={value(rr){rr.target.checked=rr.detail.value!=="Off",Tt.setValue(wt,{value:rr.target.checked})}};this._dispatchEventFromSandbox(Gt,Dt)}),this._setEventListeners(Ot,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],Dt=>Dt.target.checked)),this._setBackgroundColor(Ot),this._setDefaultPropertiesFromJS(Ot),this.container.append(Ot),this.container}}class at extends ${constructor(Tt){super(Tt,{isRenderable:Tt.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");const Tt=this.annotationStorage,st=this.data,wt=st.id;let Ct=Tt.getValue(wt,{value:st.fieldValue===st.buttonValue}).value;typeof Ct=="string"&&(Ct=Ct!==st.buttonValue,Tt.setValue(wt,{value:Ct}));const Ot=document.createElement("input");if(rt.add(Ot),Ot.setAttribute("data-element-id",wt),Ot.disabled=st.readOnly,this._setRequired(Ot,this.data.required),Ot.type="radio",Ot.name=st.fieldName,Ct&&Ot.setAttribute("checked",!0),Ot.tabIndex=_,Ot.addEventListener("change",Dt=>{const{name:Gt,checked:rr}=Dt.target;for(const gr of this._getElementsByName(Gt,wt))Tt.setValue(gr.id,{value:!1});Tt.setValue(wt,{value:rr})}),Ot.addEventListener("resetform",Dt=>{const Gt=st.defaultFieldValue;Dt.target.checked=Gt!=null&&Gt===st.buttonValue}),this.enableScripting&&this.hasJSActions){const Dt=st.buttonValue;Ot.addEventListener("updatefromsandbox",Gt=>{const rr={value:gr=>{const pr=Dt===gr.detail.value;for(const Rr of this._getElementsByName(gr.target.name)){const vr=pr&&Rr.id===wt;Rr.domElement&&(Rr.domElement.checked=vr),Tt.setValue(Rr.id,{value:vr})}}};this._dispatchEventFromSandbox(rr,Gt)}),this._setEventListeners(Ot,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],Gt=>Gt.target.checked)}return this._setBackgroundColor(Ot),this._setDefaultPropertiesFromJS(Ot),this.container.append(Ot),this.container}}class ut extends ct{constructor(Tt){super(Tt,{ignoreBorder:Tt.data.hasAppearance})}render(){const Tt=super.render();Tt.classList.add("buttonWidgetAnnotation","pushButton"),this.data.alternativeText&&(Tt.title=this.data.alternativeText);const st=Tt.lastChild;return this.enableScripting&&this.hasJSActions&&st&&(this._setDefaultPropertiesFromJS(st),st.addEventListener("updatefromsandbox",wt=>{this._dispatchEventFromSandbox({},wt)})),Tt}}class yt extends ${constructor(Tt){super(Tt,{isRenderable:Tt.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");const Tt=this.annotationStorage,st=this.data.id,wt=Tt.getValue(st,{value:this.data.fieldValue}),Ct=document.createElement("select");rt.add(Ct),Ct.setAttribute("data-element-id",st),Ct.disabled=this.data.readOnly,this._setRequired(Ct,this.data.required),Ct.name=this.data.fieldName,Ct.tabIndex=_;let Ot=this.data.combo&&this.data.options.length>0;this.data.combo||(Ct.size=this.data.options.length,this.data.multiSelect&&(Ct.multiple=!0)),Ct.addEventListener("resetform",pr=>{const Rr=this.data.defaultFieldValue;for(const vr of Ct.options)vr.selected=vr.value===Rr});for(const pr of this.data.options){const Rr=document.createElement("option");Rr.textContent=pr.displayValue,Rr.value=pr.exportValue,wt.value.includes(pr.exportValue)&&(Rr.setAttribute("selected",!0),Ot=!1),Ct.append(Rr)}let Dt=null;if(Ot){const pr=document.createElement("option");pr.value=" ",pr.setAttribute("hidden",!0),pr.setAttribute("selected",!0),Ct.prepend(pr),Dt=()=>{pr.remove(),Ct.removeEventListener("input",Dt),Dt=null},Ct.addEventListener("input",Dt)}const Gt=pr=>{const Rr=pr?"value":"textContent",{options:vr,multiple:yr}=Ct;return yr?Array.prototype.filter.call(vr,Ar=>Ar.selected).map(Ar=>Ar[Rr]):vr.selectedIndex===-1?null:vr[vr.selectedIndex][Rr]};let rr=Gt(!1);const gr=pr=>{const Rr=pr.target.options;return Array.prototype.map.call(Rr,vr=>({displayValue:vr.textContent,exportValue:vr.value}))};return this.enableScripting&&this.hasJSActions?(Ct.addEventListener("updatefromsandbox",pr=>{const Rr={value(vr){Dt==null||Dt();const yr=vr.detail.value,Ar=new Set(Array.isArray(yr)?yr:[yr]);for(const Ir of Ct.options)Ir.selected=Ar.has(Ir.value);Tt.setValue(st,{value:Gt(!0)}),rr=Gt(!1)},multipleSelection(vr){Ct.multiple=!0},remove(vr){const yr=Ct.options,Ar=vr.detail.remove;yr[Ar].selected=!1,Ct.remove(Ar),yr.length>0&&Array.prototype.findIndex.call(yr,Mr=>Mr.selected)===-1&&(yr[0].selected=!0),Tt.setValue(st,{value:Gt(!0),items:gr(vr)}),rr=Gt(!1)},clear(vr){for(;Ct.length!==0;)Ct.remove(0);Tt.setValue(st,{value:null,items:[]}),rr=Gt(!1)},insert(vr){const{index:yr,displayValue:Ar,exportValue:Ir}=vr.detail.insert,Mr=Ct.children[yr],Fr=document.createElement("option");Fr.textContent=Ar,Fr.value=Ir,Mr?Mr.before(Fr):Ct.append(Fr),Tt.setValue(st,{value:Gt(!0),items:gr(vr)}),rr=Gt(!1)},items(vr){const{items:yr}=vr.detail;for(;Ct.length!==0;)Ct.remove(0);for(const Ar of yr){const{displayValue:Ir,exportValue:Mr}=Ar,Fr=document.createElement("option");Fr.textContent=Ir,Fr.value=Mr,Ct.append(Fr)}Ct.options.length>0&&(Ct.options[0].selected=!0),Tt.setValue(st,{value:Gt(!0),items:gr(vr)}),rr=Gt(!1)},indices(vr){const yr=new Set(vr.detail.indices);for(const Ar of vr.target.options)Ar.selected=yr.has(Ar.index);Tt.setValue(st,{value:Gt(!0)}),rr=Gt(!1)},editable(vr){vr.target.disabled=!vr.detail.editable}};this._dispatchEventFromSandbox(Rr,pr)}),Ct.addEventListener("input",pr=>{var vr;const Rr=Gt(!0);Tt.setValue(st,{value:Rr}),pr.preventDefault(),(vr=this.linkService.eventBus)==null||vr.dispatch("dispatcheventinsandbox",{source:this,detail:{id:st,name:"Keystroke",value:rr,changeEx:Rr,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(Ct,null,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],pr=>pr.target.value)):Ct.addEventListener("input",function(pr){Tt.setValue(st,{value:Gt(!0)})}),this.data.combo&&this._setTextStyle(Ct),this._setBackgroundColor(Ct),this._setDefaultPropertiesFromJS(Ct),this.container.append(Ct),this.container}}class mt extends ot{constructor(Tt){const{data:st,elements:wt}=Tt;super(Tt,{isRenderable:ot._hasPopupData(st)}),this.elements=wt}render(){this.container.classList.add("popupAnnotation");const Tt=new pt({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open}),st=[];for(const wt of this.elements)wt.popup=Tt,st.push(wt.data.id),wt.addHighlightArea();return this.container.setAttribute("aria-controls",st.map(wt=>`${a.AnnotationPrefix}${wt}`).join(",")),this.container}}class pt{constructor({container:Tt,color:st,elements:wt,titleObj:Ct,modificationDate:Ot,contentsObj:Dt,richText:Gt,parent:rr,rect:gr,parentRect:pr,open:Rr}){Pt(this,kr);Pt(this,Tr);Pt(this,Or);Pt(this,jr);Pt(this,Rt,null);Pt(this,Vt,jt(this,kr,Ss).bind(this));Pt(this,Wt,jt(this,jr,Kn).bind(this));Pt(this,Xt,jt(this,Or,Gn).bind(this));Pt(this,Qt,jt(this,Tr,vn).bind(this));Pt(this,lr,null);Pt(this,er,null);Pt(this,mr,null);Pt(this,xr,null);Pt(this,ur,null);Pt(this,_r,null);Pt(this,tr,!1);Pt(this,Bt,null);Pt(this,zt,null);Pt(this,Zt,null);Pt(this,dr,null);Pt(this,hr,!1);var yr;Ht(this,er,Tt),Ht(this,dr,Ct),Ht(this,mr,Dt),Ht(this,Zt,Gt),Ht(this,ur,rr),Ht(this,lr,st),Ht(this,zt,gr),Ht(this,_r,pr),Ht(this,xr,wt);const vr=o.PDFDateString.toDateObject(Ot);vr&&Ht(this,Rt,rr.l10n.get("annotation_date_string",{date:vr.toLocaleDateString(),time:vr.toLocaleTimeString()})),this.trigger=wt.flatMap(Ar=>Ar.getElementsToTriggerPopup());for(const Ar of this.trigger)Ar.addEventListener("click",_e(this,Qt)),Ar.addEventListener("mouseenter",_e(this,Xt)),Ar.addEventListener("mouseleave",_e(this,Wt)),Ar.classList.add("popupTriggerArea");for(const Ar of wt)(yr=Ar.container)==null||yr.addEventListener("keydown",_e(this,Vt));_e(this,er).hidden=!0,Rr&&jt(this,Tr,vn).call(this)}render(){if(_e(this,Bt))return;const{page:{view:Tt},viewport:{rawDims:{pageWidth:st,pageHeight:wt,pageX:Ct,pageY:Ot}}}=_e(this,ur),Dt=Ht(this,Bt,document.createElement("div"));if(Dt.className="popup",_e(this,lr)){const zr=Dt.style.outlineColor=a.Util.makeHexColor(..._e(this,lr));CSS.supports("background-color","color-mix(in srgb, red 30%, white)")?Dt.style.backgroundColor=`color-mix(in srgb, ${zr} 30%, white)`:Dt.style.backgroundColor=a.Util.makeHexColor(..._e(this,lr).map(Gr=>Math.floor(.7*(255-Gr)+Gr)))}const Gt=document.createElement("span");Gt.className="header";const rr=document.createElement("h1");if(Gt.append(rr),{dir:rr.dir,str:rr.textContent}=_e(this,dr),Dt.append(Gt),_e(this,Rt)){const zr=document.createElement("span");zr.classList.add("popupDate"),_e(this,Rt).then(Hr=>{zr.textContent=Hr}),Gt.append(zr)}const gr=_e(this,mr),pr=_e(this,Zt);if(pr!=null&&pr.str&&(!(gr!=null&&gr.str)||gr.str===pr.str))h.XfaLayer.render({xfaHtml:pr.html,intent:"richText",div:Dt}),Dt.lastChild.classList.add("richText","popupContent");else{const zr=this._formatContents(gr);Dt.append(zr)}let Rr=!!_e(this,_r),vr=Rr?_e(this,_r):_e(this,zt);for(const zr of _e(this,xr))if(!vr||a.Util.intersect(zr.data.rect,vr)!==null){vr=zr.data.rect,Rr=!0;break}const yr=a.Util.normalizeRect([vr[0],Tt[3]-vr[1]+Tt[1],vr[2],Tt[3]-vr[3]+Tt[1]]),Ar=5,Ir=Rr?vr[2]-vr[0]+Ar:0,Mr=yr[0]+Ir,Fr=yr[1],{style:Wr}=_e(this,er);Wr.left=`${100*(Mr-Ct)/st}%`,Wr.top=`${100*(Fr-Ot)/wt}%`,_e(this,er).append(Dt)}_formatContents({str:Tt,dir:st}){const wt=document.createElement("p");wt.classList.add("popupContent"),wt.dir=st;const Ct=Tt.split(/(?:\r\n?|\n)/);for(let Ot=0,Dt=Ct.length;Ot<Dt;++Ot){const Gt=Ct[Ot];wt.append(document.createTextNode(Gt)),Ot<Dt-1&&wt.append(document.createElement("br"))}return wt}forceHide(){Ht(this,hr,this.isVisible),_e(this,hr)&&(_e(this,er).hidden=!0)}maybeShow(){_e(this,hr)&&(Ht(this,hr,!1),_e(this,er).hidden=!1)}get isVisible(){return _e(this,er).hidden===!1}}Rt=new WeakMap,Vt=new WeakMap,Wt=new WeakMap,Xt=new WeakMap,Qt=new WeakMap,lr=new WeakMap,er=new WeakMap,mr=new WeakMap,xr=new WeakMap,ur=new WeakMap,_r=new WeakMap,tr=new WeakMap,Bt=new WeakMap,zt=new WeakMap,Zt=new WeakMap,dr=new WeakMap,hr=new WeakMap,kr=new WeakSet,Ss=function(Tt){Tt.altKey||Tt.shiftKey||Tt.ctrlKey||Tt.metaKey||(Tt.key==="Enter"||Tt.key==="Escape"&&_e(this,tr))&&jt(this,Tr,vn).call(this)},Tr=new WeakSet,vn=function(){Ht(this,tr,!_e(this,tr)),_e(this,tr)?(jt(this,Or,Gn).call(this),_e(this,er).addEventListener("click",_e(this,Qt)),_e(this,er).addEventListener("keydown",_e(this,Vt))):(jt(this,jr,Kn).call(this),_e(this,er).removeEventListener("click",_e(this,Qt)),_e(this,er).removeEventListener("keydown",_e(this,Vt)))},Or=new WeakSet,Gn=function(){_e(this,Bt)||this.render(),this.isVisible?_e(this,tr)&&_e(this,er).classList.add("focused"):(_e(this,er).hidden=!1,_e(this,er).style.zIndex=parseInt(_e(this,er).style.zIndex)+1e3)},jr=new WeakSet,Kn=function(){_e(this,er).classList.remove("focused"),!(_e(this,tr)||!this.isVisible)&&(_e(this,er).hidden=!0,_e(this,er).style.zIndex=parseInt(_e(this,er).style.zIndex)-1e3)};class bt extends ot{constructor(Tt){super(Tt,{isRenderable:!0,ignoreBorder:!0}),this.textContent=Tt.data.textContent,this.textPosition=Tt.data.textPosition,this.annotationEditorType=a.AnnotationEditorType.FREETEXT}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){const Tt=document.createElement("div");Tt.classList.add("annotationTextContent"),Tt.setAttribute("role","comment");for(const st of this.textContent){const wt=document.createElement("span");wt.textContent=st,Tt.append(wt)}this.container.append(Tt)}return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}e.FreeTextAnnotationElement=bt;class _t extends ot{constructor(st){super(st,{isRenderable:!0,ignoreBorder:!0});Pt(this,Ut,null)}render(){this.container.classList.add("lineAnnotation");const st=this.data,{width:wt,height:Ct}=nt(st.rect),Ot=this.svgFactory.create(wt,Ct,!0),Dt=Ht(this,Ut,this.svgFactory.createElement("svg:line"));return Dt.setAttribute("x1",st.rect[2]-st.lineCoordinates[0]),Dt.setAttribute("y1",st.rect[3]-st.lineCoordinates[1]),Dt.setAttribute("x2",st.rect[2]-st.lineCoordinates[2]),Dt.setAttribute("y2",st.rect[3]-st.lineCoordinates[3]),Dt.setAttribute("stroke-width",st.borderStyle.width||1),Dt.setAttribute("stroke","transparent"),Dt.setAttribute("fill","transparent"),Ot.append(Dt),this.container.append(Ot),!st.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return _e(this,Ut)}addHighlightArea(){this.container.classList.add("highlightArea")}}Ut=new WeakMap;class Nt extends ot{constructor(st){super(st,{isRenderable:!0,ignoreBorder:!0});Pt(this,Lt,null)}render(){this.container.classList.add("squareAnnotation");const st=this.data,{width:wt,height:Ct}=nt(st.rect),Ot=this.svgFactory.create(wt,Ct,!0),Dt=st.borderStyle.width,Gt=Ht(this,Lt,this.svgFactory.createElement("svg:rect"));return Gt.setAttribute("x",Dt/2),Gt.setAttribute("y",Dt/2),Gt.setAttribute("width",wt-Dt),Gt.setAttribute("height",Ct-Dt),Gt.setAttribute("stroke-width",Dt||1),Gt.setAttribute("stroke","transparent"),Gt.setAttribute("fill","transparent"),Ot.append(Gt),this.container.append(Ot),!st.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return _e(this,Lt)}addHighlightArea(){this.container.classList.add("highlightArea")}}Lt=new WeakMap;class It extends ot{constructor(st){super(st,{isRenderable:!0,ignoreBorder:!0});Pt(this,sr,null)}render(){this.container.classList.add("circleAnnotation");const st=this.data,{width:wt,height:Ct}=nt(st.rect),Ot=this.svgFactory.create(wt,Ct,!0),Dt=st.borderStyle.width,Gt=Ht(this,sr,this.svgFactory.createElement("svg:ellipse"));return Gt.setAttribute("cx",wt/2),Gt.setAttribute("cy",Ct/2),Gt.setAttribute("rx",wt/2-Dt/2),Gt.setAttribute("ry",Ct/2-Dt/2),Gt.setAttribute("stroke-width",Dt||1),Gt.setAttribute("stroke","transparent"),Gt.setAttribute("fill","transparent"),Ot.append(Gt),this.container.append(Ot),!st.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return _e(this,sr)}addHighlightArea(){this.container.classList.add("highlightArea")}}sr=new WeakMap;class xt extends ot{constructor(st){super(st,{isRenderable:!0,ignoreBorder:!0});Pt(this,ar,null);this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const st=this.data,{width:wt,height:Ct}=nt(st.rect),Ot=this.svgFactory.create(wt,Ct,!0);let Dt=[];for(const rr of st.vertices){const gr=rr.x-st.rect[0],pr=st.rect[3]-rr.y;Dt.push(gr+","+pr)}Dt=Dt.join(" ");const Gt=Ht(this,ar,this.svgFactory.createElement(this.svgElementName));return Gt.setAttribute("points",Dt),Gt.setAttribute("stroke-width",st.borderStyle.width||1),Gt.setAttribute("stroke","transparent"),Gt.setAttribute("fill","transparent"),Ot.append(Gt),this.container.append(Ot),!st.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return _e(this,ar)}addHighlightArea(){this.container.classList.add("highlightArea")}}ar=new WeakMap;class Mt extends xt{constructor(Tt){super(Tt),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class qt extends ot{constructor(Tt){super(Tt,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}class Yt extends ot{constructor(st){super(st,{isRenderable:!0,ignoreBorder:!0});Pt(this,$r,[]);this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline",this.annotationEditorType=a.AnnotationEditorType.INK}render(){this.container.classList.add(this.containerClassName);const st=this.data,{width:wt,height:Ct}=nt(st.rect),Ot=this.svgFactory.create(wt,Ct,!0);for(const Dt of st.inkLists){let Gt=[];for(const gr of Dt){const pr=gr.x-st.rect[0],Rr=st.rect[3]-gr.y;Gt.push(`${pr},${Rr}`)}Gt=Gt.join(" ");const rr=this.svgFactory.createElement(this.svgElementName);_e(this,$r).push(rr),rr.setAttribute("points",Gt),rr.setAttribute("stroke-width",st.borderStyle.width||1),rr.setAttribute("stroke","transparent"),rr.setAttribute("fill","transparent"),!st.popupRef&&this.hasPopupData&&this._createPopup(),Ot.append(rr)}return this.container.append(Ot),this.container}getElementsToTriggerPopup(){return _e(this,$r)}addHighlightArea(){this.container.classList.add("highlightArea")}}$r=new WeakMap,e.InkAnnotationElement=Yt;class At extends ot{constructor(Tt){super(Tt,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("highlightAnnotation"),this.container}}class $t extends ot{constructor(Tt){super(Tt,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("underlineAnnotation"),this.container}}class Kt extends ot{constructor(Tt){super(Tt,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("squigglyAnnotation"),this.container}}class nr extends ot{constructor(Tt){super(Tt,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("strikeoutAnnotation"),this.container}}class or extends ot{constructor(Tt){super(Tt,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("stampAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}e.StampAnnotationElement=or;class Et extends ot{constructor(st){var Ot;super(st,{isRenderable:!0});Pt(this,Ft);Pt(this,Ur,null);const{filename:wt,content:Ct}=this.data.file;this.filename=(0,o.getFilenameFromUrl)(wt,!0),this.content=Ct,(Ot=this.linkService.eventBus)==null||Ot.dispatch("fileattachmentannotation",{source:this,filename:wt,content:Ct})}render(){this.container.classList.add("fileAttachmentAnnotation");const{container:st,data:wt}=this;let Ct;wt.hasAppearance||wt.fillAlpha===0?Ct=document.createElement("div"):(Ct=document.createElement("img"),Ct.src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(wt.name)?"paperclip":"pushpin"}.svg`,wt.fillAlpha&&wt.fillAlpha<1&&(Ct.style=`filter: opacity(${Math.round(wt.fillAlpha*100)}%);`)),Ct.addEventListener("dblclick",jt(this,Ft,Xn).bind(this)),Ht(this,Ur,Ct);const{isMac:Ot}=a.FeatureTest.platform;return st.addEventListener("keydown",Dt=>{Dt.key==="Enter"&&(Ot?Dt.metaKey:Dt.ctrlKey)&&jt(this,Ft,Xn).call(this)}),!wt.popupRef&&this.hasPopupData?this._createPopup():Ct.classList.add("popupTriggerArea"),st.append(Ct),st}getElementsToTriggerPopup(){return _e(this,Ur)}addHighlightArea(){this.container.classList.add("highlightArea")}}Ur=new WeakMap,Ft=new WeakSet,Xn=function(){var st;(st=this.downloadManager)==null||st.openOrDownloadData(this.container,this.content,this.filename)};class lt{constructor({div:Tt,accessibilityManager:st,annotationCanvasMap:wt,l10n:Ct,page:Ot,viewport:Dt}){Pt(this,Er);Pt(this,ir);Pt(this,br,null);Pt(this,fr,null);Pt(this,Sr,new Map);this.div=Tt,Ht(this,br,st),Ht(this,fr,wt),this.l10n=Ct,this.page=Ot,this.viewport=Dt,this.zIndex=0,this.l10n||(this.l10n=g.NullL10n)}async render(Tt){const{annotations:st}=Tt,wt=this.div;(0,o.setLayerDimensions)(wt,this.viewport);const Ct=new Map,Ot={data:null,layer:wt,linkService:Tt.linkService,downloadManager:Tt.downloadManager,imageResourcesPath:Tt.imageResourcesPath||"",renderForms:Tt.renderForms!==!1,svgFactory:new o.DOMSVGFactory,annotationStorage:Tt.annotationStorage||new c.AnnotationStorage,enableScripting:Tt.enableScripting===!0,hasJSActions:Tt.hasJSActions,fieldObjects:Tt.fieldObjects,parent:this,elements:null};for(const Dt of st){if(Dt.noHTML)continue;const Gt=Dt.annotationType===a.AnnotationType.POPUP;if(Gt){const pr=Ct.get(Dt.id);if(!pr)continue;Ot.elements=pr}else{const{width:pr,height:Rr}=nt(Dt.rect);if(pr<=0||Rr<=0)continue}Ot.data=Dt;const rr=it.create(Ot);if(!rr.isRenderable)continue;if(!Gt&&Dt.popupRef){const pr=Ct.get(Dt.popupRef);pr?pr.push(rr):Ct.set(Dt.popupRef,[rr])}rr.annotationEditorType>0&&_e(this,Sr).set(rr.data.id,rr);const gr=rr.render();Dt.hidden&&(gr.style.visibility="hidden"),jt(this,Er,Es).call(this,gr,Dt.id)}jt(this,ir,Yn).call(this),await this.l10n.translate(wt)}update({viewport:Tt}){const st=this.div;this.viewport=Tt,(0,o.setLayerDimensions)(st,{rotation:Tt.rotation}),jt(this,ir,Yn).call(this),st.hidden=!1}getEditableAnnotations(){return Array.from(_e(this,Sr).values())}getEditableAnnotation(Tt){return _e(this,Sr).get(Tt)}}br=new WeakMap,fr=new WeakMap,Sr=new WeakMap,Er=new WeakSet,Es=function(Tt,st){var Ct;const wt=Tt.firstChild||Tt;wt.id=`${a.AnnotationPrefix}${st}`,this.div.append(Tt),(Ct=_e(this,br))==null||Ct.moveElementInDOM(this.div,Tt,wt,!1)},ir=new WeakSet,Yn=function(){if(!_e(this,fr))return;const Tt=this.div;for(const[st,wt]of _e(this,fr)){const Ct=Tt.querySelector(`[data-annotation-id="${st}"]`);if(!Ct)continue;const{firstChild:Ot}=Ct;Ot?Ot.nodeName==="CANVAS"?Ot.replaceWith(wt):Ot.before(wt):Ct.append(wt)}_e(this,fr).clear()},e.AnnotationLayer=lt},(s,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ColorConverters=void 0;function i(c){return Math.floor(Math.max(0,Math.min(1,c))*255).toString(16).padStart(2,"0")}function a(c){return Math.max(0,Math.min(255,255*c))}class o{static CMYK_G([d,g,h,_]){return["G",1-Math.min(1,.3*d+.59*h+.11*g+_)]}static G_CMYK([d]){return["CMYK",0,0,0,1-d]}static G_RGB([d]){return["RGB",d,d,d]}static G_rgb([d]){return d=a(d),[d,d,d]}static G_HTML([d]){const g=i(d);return`#${g}${g}${g}`}static RGB_G([d,g,h]){return["G",.3*d+.59*g+.11*h]}static RGB_rgb(d){return d.map(a)}static RGB_HTML(d){return`#${d.map(i).join("")}`}static T_HTML(){return"#00000000"}static T_rgb(){return[null]}static CMYK_RGB([d,g,h,_]){return["RGB",1-Math.min(1,d+_),1-Math.min(1,h+_),1-Math.min(1,g+_)]}static CMYK_rgb([d,g,h,_]){return[a(1-Math.min(1,d+_)),a(1-Math.min(1,h+_)),a(1-Math.min(1,g+_))]}static CMYK_HTML(d){const g=this.CMYK_RGB(d).slice(1);return this.RGB_HTML(g)}static RGB_CMYK([d,g,h]){const _=1-d,b=1-g,rt=1-h,nt=Math.min(_,b,rt);return["CMYK",_,b,rt,nt]}}e.ColorConverters=o},(s,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.NullL10n=void 0,e.getL10nFallback=a;const i={of_pages:"of {{pagesCount}}",page_of_pages:"({{pageNumber}} of {{pagesCount}})",document_properties_kb:"{{size_kb}} KB ({{size_b}} bytes)",document_properties_mb:"{{size_mb}} MB ({{size_b}} bytes)",document_properties_date_string:"{{date}}, {{time}}",document_properties_page_size_unit_inches:"in",document_properties_page_size_unit_millimeters:"mm",document_properties_page_size_orientation_portrait:"portrait",document_properties_page_size_orientation_landscape:"landscape",document_properties_page_size_name_a3:"A3",document_properties_page_size_name_a4:"A4",document_properties_page_size_name_letter:"Letter",document_properties_page_size_name_legal:"Legal",document_properties_page_size_dimension_string:"{{width}}  {{height}} {{unit}} ({{orientation}})",document_properties_page_size_dimension_name_string:"{{width}}  {{height}} {{unit}} ({{name}}, {{orientation}})",document_properties_linearized_yes:"Yes",document_properties_linearized_no:"No",additional_layers:"Additional Layers",page_landmark:"Page {{page}}",thumb_page_title:"Page {{page}}",thumb_page_canvas:"Thumbnail of Page {{page}}",find_reached_top:"Reached top of document, continued from bottom",find_reached_bottom:"Reached end of document, continued from top","find_match_count[one]":"{{current}} of {{total}} match","find_match_count[other]":"{{current}} of {{total}} matches","find_match_count_limit[one]":"More than {{limit}} match","find_match_count_limit[other]":"More than {{limit}} matches",find_not_found:"Phrase not found",page_scale_width:"Page Width",page_scale_fit:"Page Fit",page_scale_auto:"Automatic Zoom",page_scale_actual:"Actual Size",page_scale_percent:"{{scale}}%",loading_error:"An error occurred while loading the PDF.",invalid_file_error:"Invalid or corrupted PDF file.",missing_file_error:"Missing PDF file.",unexpected_response_error:"Unexpected server response.",rendering_error:"An error occurred while rendering the page.",annotation_date_string:"{{date}}, {{time}}",printing_not_supported:"Warning: Printing is not fully supported by this browser.",printing_not_ready:"Warning: The PDF is not fully loaded for printing.",web_fonts_disabled:"Web fonts are disabled: unable to use embedded PDF fonts.",free_text2_default_content:"Start typing",editor_free_text2_aria_label:"Text Editor",editor_ink2_aria_label:"Draw Editor",editor_ink_canvas_aria_label:"User-created image",editor_alt_text_button_label:"Alt text",editor_alt_text_edit_button_label:"Edit alt text",editor_alt_text_decorative_tooltip:"Marked as decorative"};i.print_progress_percent="{{progress}}%";function a(d,g){switch(d){case"find_match_count":d=`find_match_count[${g.total===1?"one":"other"}]`;break;case"find_match_count_limit":d=`find_match_count_limit[${g.limit===1?"one":"other"}]`;break}return i[d]||""}function o(d,g){return g?d.replaceAll(/\{\{\s*(\w+)\s*\}\}/g,(h,_)=>_ in g?g[_]:"{{"+_+"}}"):d}const c={async getLanguage(){return"en-us"},async getDirection(){return"ltr"},async get(d,g=null,h=a(d,g)){return o(h,g)},async translate(d){}};e.NullL10n=c},(s,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.XfaLayer=void 0;var a=i(25);class o{static setupStorage(d,g,h,_,b){const rt=_.getValue(g,{value:null});switch(h.name){case"textarea":if(rt.value!==null&&(d.textContent=rt.value),b==="print")break;d.addEventListener("input",nt=>{_.setValue(g,{value:nt.target.value})});break;case"input":if(h.attributes.type==="radio"||h.attributes.type==="checkbox"){if(rt.value===h.attributes.xfaOn?d.setAttribute("checked",!0):rt.value===h.attributes.xfaOff&&d.removeAttribute("checked"),b==="print")break;d.addEventListener("change",nt=>{_.setValue(g,{value:nt.target.checked?nt.target.getAttribute("xfaOn"):nt.target.getAttribute("xfaOff")})})}else{if(rt.value!==null&&d.setAttribute("value",rt.value),b==="print")break;d.addEventListener("input",nt=>{_.setValue(g,{value:nt.target.value})})}break;case"select":if(rt.value!==null){d.setAttribute("value",rt.value);for(const nt of h.children)nt.attributes.value===rt.value?nt.attributes.selected=!0:nt.attributes.hasOwnProperty("selected")&&delete nt.attributes.selected}d.addEventListener("input",nt=>{const it=nt.target.options,ot=it.selectedIndex===-1?"":it[it.selectedIndex].value;_.setValue(g,{value:ot})});break}}static setAttributes({html:d,element:g,storage:h=null,intent:_,linkService:b}){const{attributes:rt}=g,nt=d instanceof HTMLAnchorElement;rt.type==="radio"&&(rt.name=`${rt.name}-${_}`);for(const[it,ot]of Object.entries(rt))if(ot!=null)switch(it){case"class":ot.length&&d.setAttribute(it,ot.join(" "));break;case"dataId":break;case"id":d.setAttribute("data-element-id",ot);break;case"style":Object.assign(d.style,ot);break;case"textContent":d.textContent=ot;break;default:(!nt||it!=="href"&&it!=="newWindow")&&d.setAttribute(it,ot)}nt&&b.addLinkAttributes(d,rt.href,rt.newWindow),h&&rt.dataId&&this.setupStorage(d,rt.dataId,g,h)}static render(d){var ct;const g=d.annotationStorage,h=d.linkService,_=d.xfaHtml,b=d.intent||"display",rt=document.createElement(_.name);_.attributes&&this.setAttributes({html:rt,element:_,intent:b,linkService:h});const nt=[[_,-1,rt]],it=d.div;if(it.append(rt),d.viewport){const tt=`matrix(${d.viewport.transform.join(",")})`;it.style.transform=tt}b!=="richText"&&it.setAttribute("class","xfaLayer xfaFont");const ot=[];for(;nt.length>0;){const[tt,$,j]=nt.at(-1);if($+1===tt.children.length){nt.pop();continue}const et=tt.children[++nt.at(-1)[1]];if(et===null)continue;const{name:ft}=et;if(ft==="#text"){const ut=document.createTextNode(et.value);ot.push(ut),j.append(ut);continue}const at=(ct=et==null?void 0:et.attributes)!=null&&ct.xmlns?document.createElementNS(et.attributes.xmlns,ft):document.createElement(ft);if(j.append(at),et.attributes&&this.setAttributes({html:at,element:et,storage:g,intent:b,linkService:h}),et.children&&et.children.length>0)nt.push([et,-1,at]);else if(et.value){const ut=document.createTextNode(et.value);a.XfaText.shouldBuildText(ft)&&ot.push(ut),at.append(ut)}}for(const tt of it.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))tt.setAttribute("readOnly",!0);return{textDivs:ot}}static update(d){const g=`matrix(${d.viewport.transform.join(",")})`;d.div.style.transform=g,d.div.hidden=!1}}e.XfaLayer=o},(s,e,i)=>{var _,b,rt,nt,it,ot,ct,tt,$,j,et,ft,at,ut,yt,xs,pt,As,_t,ks,It,Ts,Mt,Jn,Yt,Cs,$t,Qn,nr,Ps,Et,Rs,ht,Ns,gt,Os,St,Is,Rt,qr,Wt,Zn,Qt,yn,er,_n,xr,Zr,_r,es,Bt,wn,Zt,js,hr,ts,Pr,Ls,Nr,Ms,Cr,rs,Jt,bn,Lt,en;Object.defineProperty(e,"__esModule",{value:!0}),e.InkEditor=void 0;var a=i(1),o=i(4),c=i(29),d=i(6),g=i(5);const ar=class ar extends o.AnnotationEditor{constructor(Ft){super({...Ft,name:"inkEditor"});Pt(this,yt);Pt(this,pt);Pt(this,_t);Pt(this,It);Pt(this,Mt);Pt(this,Yt);Pt(this,$t);Pt(this,nr);Pt(this,Et);Pt(this,ht);Pt(this,gt);Pt(this,St);Pt(this,Rt);Pt(this,Wt);Pt(this,Qt);Pt(this,er);Pt(this,xr);Pt(this,_r);Pt(this,Bt);Pt(this,Nr);Pt(this,Cr);Pt(this,Jt);Pt(this,Lt);Pt(this,_,0);Pt(this,b,0);Pt(this,rt,this.canvasPointermove.bind(this));Pt(this,nt,this.canvasPointerleave.bind(this));Pt(this,it,this.canvasPointerup.bind(this));Pt(this,ot,this.canvasPointerdown.bind(this));Pt(this,ct,new Path2D);Pt(this,tt,!1);Pt(this,$,!1);Pt(this,j,!1);Pt(this,et,null);Pt(this,ft,0);Pt(this,at,0);Pt(this,ut,null);this.color=Ft.color||null,this.thickness=Ft.thickness||null,this.opacity=Ft.opacity||null,this.paths=[],this.bezierPath2D=[],this.allRawPaths=[],this.currentPath=[],this.scaleFactor=1,this.translationX=this.translationY=0,this.x=0,this.y=0,this._willKeepAspectRatio=!0}static initialize(Ft){o.AnnotationEditor.initialize(Ft,{strings:["editor_ink_canvas_aria_label","editor_ink2_aria_label"]})}static updateDefaultParams(Ft,cr){switch(Ft){case a.AnnotationEditorParamsType.INK_THICKNESS:ar._defaultThickness=cr;break;case a.AnnotationEditorParamsType.INK_COLOR:ar._defaultColor=cr;break;case a.AnnotationEditorParamsType.INK_OPACITY:ar._defaultOpacity=cr/100;break}}updateParams(Ft,cr){switch(Ft){case a.AnnotationEditorParamsType.INK_THICKNESS:jt(this,yt,xs).call(this,cr);break;case a.AnnotationEditorParamsType.INK_COLOR:jt(this,pt,As).call(this,cr);break;case a.AnnotationEditorParamsType.INK_OPACITY:jt(this,_t,ks).call(this,cr);break}}static get defaultPropertiesToUpdate(){return[[a.AnnotationEditorParamsType.INK_THICKNESS,ar._defaultThickness],[a.AnnotationEditorParamsType.INK_COLOR,ar._defaultColor||o.AnnotationEditor._defaultLineColor],[a.AnnotationEditorParamsType.INK_OPACITY,Math.round(ar._defaultOpacity*100)]]}get propertiesToUpdate(){return[[a.AnnotationEditorParamsType.INK_THICKNESS,this.thickness||ar._defaultThickness],[a.AnnotationEditorParamsType.INK_COLOR,this.color||ar._defaultColor||o.AnnotationEditor._defaultLineColor],[a.AnnotationEditorParamsType.INK_OPACITY,Math.round(100*(this.opacity??ar._defaultOpacity))]]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.canvas||(jt(this,Qt,yn).call(this),jt(this,er,_n).call(this)),this.isAttachedToDOM||(this.parent.add(this),jt(this,xr,Zr).call(this)),jt(this,Lt,en).call(this)))}remove(){this.canvas!==null&&(this.isEmpty()||this.commit(),this.canvas.width=this.canvas.height=0,this.canvas.remove(),this.canvas=null,_e(this,et).disconnect(),Ht(this,et,null),super.remove())}setParent(Ft){!this.parent&&Ft?this._uiManager.removeShouldRescale(this):this.parent&&Ft===null&&this._uiManager.addShouldRescale(this),super.setParent(Ft)}onScaleChanging(){const[Ft,cr]=this.parentDimensions,br=this.width*Ft,fr=this.height*cr;this.setDimensions(br,fr)}enableEditMode(){_e(this,tt)||this.canvas===null||(super.enableEditMode(),this._isDraggable=!1,this.canvas.addEventListener("pointerdown",_e(this,ot)))}disableEditMode(){!this.isInEditMode()||this.canvas===null||(super.disableEditMode(),this._isDraggable=!this.isEmpty(),this.div.classList.remove("editing"),this.canvas.removeEventListener("pointerdown",_e(this,ot)))}onceAdded(){this._isDraggable=!this.isEmpty()}isEmpty(){return this.paths.length===0||this.paths.length===1&&this.paths[0].length===0}commit(){_e(this,tt)||(super.commit(),this.isEditing=!1,this.disableEditMode(),this.setInForeground(),Ht(this,tt,!0),this.div.classList.add("disabled"),jt(this,Lt,en).call(this,!0),this.makeResizable(),this.parent.addInkEditorIfNeeded(!0),this.moveInDOM(),this.div.focus({preventScroll:!0}))}focusin(Ft){this._focusEventsAllowed&&(super.focusin(Ft),this.enableEditMode())}canvasPointerdown(Ft){Ft.button!==0||!this.isInEditMode()||_e(this,tt)||(this.setInForeground(),Ft.preventDefault(),Ft.type!=="mouse"&&this.div.focus(),jt(this,Yt,Cs).call(this,Ft.offsetX,Ft.offsetY))}canvasPointermove(Ft){Ft.preventDefault(),jt(this,$t,Qn).call(this,Ft.offsetX,Ft.offsetY)}canvasPointerup(Ft){Ft.preventDefault(),jt(this,Wt,Zn).call(this,Ft)}canvasPointerleave(Ft){jt(this,Wt,Zn).call(this,Ft)}get isResizable(){return!this.isEmpty()&&_e(this,tt)}render(){if(this.div)return this.div;let Ft,cr;this.width&&(Ft=this.x,cr=this.y),super.render(),o.AnnotationEditor._l10nPromise.get("editor_ink2_aria_label").then(Dr=>{var ir;return(ir=this.div)==null?void 0:ir.setAttribute("aria-label",Dr)});const[br,fr,Sr,Er]=jt(this,It,Ts).call(this);if(this.setAt(br,fr,0,0),this.setDims(Sr,Er),jt(this,Qt,yn).call(this),this.width){const[Dr,ir]=this.parentDimensions;this.setAspectRatio(this.width*Dr,this.height*ir),this.setAt(Ft*Dr,cr*ir,this.width*Dr,this.height*ir),Ht(this,j,!0),jt(this,xr,Zr).call(this),this.setDims(this.width*Dr,this.height*ir),jt(this,Rt,qr).call(this),this.div.classList.add("disabled")}else this.div.classList.add("editing"),this.enableEditMode();return jt(this,er,_n).call(this),this.div}setDimensions(Ft,cr){const br=Math.round(Ft),fr=Math.round(cr);if(_e(this,ft)===br&&_e(this,at)===fr)return;Ht(this,ft,br),Ht(this,at,fr),this.canvas.style.visibility="hidden";const[Sr,Er]=this.parentDimensions;this.width=Ft/Sr,this.height=cr/Er,this.fixAndSetPosition(),_e(this,tt)&&jt(this,_r,es).call(this,Ft,cr),jt(this,xr,Zr).call(this),jt(this,Rt,qr).call(this),this.canvas.style.visibility="visible",this.fixDims()}static deserialize(Ft,cr,br){var Ot,Dt,Gt;if(Ft instanceof c.InkAnnotationElement)return null;const fr=super.deserialize(Ft,cr,br);fr.thickness=Ft.thickness,fr.color=a.Util.makeHexColor(...Ft.color),fr.opacity=Ft.opacity;const[Sr,Er]=fr.pageDimensions,Dr=fr.width*Sr,ir=fr.height*Er,Lr=fr.parentScale,wr=Ft.thickness/2;Ht(fr,tt,!0),Ht(fr,ft,Math.round(Dr)),Ht(fr,at,Math.round(ir));const{paths:Tt,rect:st,rotation:wt}=Ft;for(let{bezier:rr}of Tt){rr=jt(Ot=ar,Pr,Ls).call(Ot,rr,st,wt);const gr=[];fr.paths.push(gr);let pr=Lr*(rr[0]-wr),Rr=Lr*(rr[1]-wr);for(let yr=2,Ar=rr.length;yr<Ar;yr+=6){const Ir=Lr*(rr[yr]-wr),Mr=Lr*(rr[yr+1]-wr),Fr=Lr*(rr[yr+2]-wr),Wr=Lr*(rr[yr+3]-wr),zr=Lr*(rr[yr+4]-wr),Hr=Lr*(rr[yr+5]-wr);gr.push([[pr,Rr],[Ir,Mr],[Fr,Wr],[zr,Hr]]),pr=zr,Rr=Hr}const vr=jt(this,Zt,js).call(this,gr);fr.bezierPath2D.push(vr)}const Ct=jt(Dt=fr,Cr,rs).call(Dt);return Ht(fr,b,Math.max(o.AnnotationEditor.MIN_SIZE,Ct[2]-Ct[0])),Ht(fr,_,Math.max(o.AnnotationEditor.MIN_SIZE,Ct[3]-Ct[1])),jt(Gt=fr,_r,es).call(Gt,Dr,ir),fr}serialize(){if(this.isEmpty())return null;const Ft=this.getRect(0,0),cr=o.AnnotationEditor._colorManager.convert(this.ctx.strokeStyle);return{annotationType:a.AnnotationEditorType.INK,color:cr,thickness:this.thickness,opacity:this.opacity,paths:jt(this,Nr,Ms).call(this,this.scaleFactor/this.parentScale,this.translationX,this.translationY,Ft),pageIndex:this.pageIndex,rect:Ft,rotation:this.rotation,structTreeParentId:this._structTreeParentId}}};_=new WeakMap,b=new WeakMap,rt=new WeakMap,nt=new WeakMap,it=new WeakMap,ot=new WeakMap,ct=new WeakMap,tt=new WeakMap,$=new WeakMap,j=new WeakMap,et=new WeakMap,ft=new WeakMap,at=new WeakMap,ut=new WeakMap,yt=new WeakSet,xs=function(Ft){const cr=this.thickness;this.addCommands({cmd:()=>{this.thickness=Ft,jt(this,Lt,en).call(this)},undo:()=>{this.thickness=cr,jt(this,Lt,en).call(this)},mustExec:!0,type:a.AnnotationEditorParamsType.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0})},pt=new WeakSet,As=function(Ft){const cr=this.color;this.addCommands({cmd:()=>{this.color=Ft,jt(this,Rt,qr).call(this)},undo:()=>{this.color=cr,jt(this,Rt,qr).call(this)},mustExec:!0,type:a.AnnotationEditorParamsType.INK_COLOR,overwriteIfSameType:!0,keepUndo:!0})},_t=new WeakSet,ks=function(Ft){Ft/=100;const cr=this.opacity;this.addCommands({cmd:()=>{this.opacity=Ft,jt(this,Rt,qr).call(this)},undo:()=>{this.opacity=cr,jt(this,Rt,qr).call(this)},mustExec:!0,type:a.AnnotationEditorParamsType.INK_OPACITY,overwriteIfSameType:!0,keepUndo:!0})},It=new WeakSet,Ts=function(){const{parentRotation:Ft,parentDimensions:[cr,br]}=this;switch(Ft){case 90:return[0,br,br,cr];case 180:return[cr,br,cr,br];case 270:return[cr,0,br,cr];default:return[0,0,cr,br]}},Mt=new WeakSet,Jn=function(){const{ctx:Ft,color:cr,opacity:br,thickness:fr,parentScale:Sr,scaleFactor:Er}=this;Ft.lineWidth=fr*Sr/Er,Ft.lineCap="round",Ft.lineJoin="round",Ft.miterLimit=10,Ft.strokeStyle=`${cr}${(0,g.opacityToHex)(br)}`},Yt=new WeakSet,Cs=function(Ft,cr){this.canvas.addEventListener("contextmenu",d.noContextMenu),this.canvas.addEventListener("pointerleave",_e(this,nt)),this.canvas.addEventListener("pointermove",_e(this,rt)),this.canvas.addEventListener("pointerup",_e(this,it)),this.canvas.removeEventListener("pointerdown",_e(this,ot)),this.isEditing=!0,_e(this,j)||(Ht(this,j,!0),jt(this,xr,Zr).call(this),this.thickness||(this.thickness=ar._defaultThickness),this.color||(this.color=ar._defaultColor||o.AnnotationEditor._defaultLineColor),this.opacity??(this.opacity=ar._defaultOpacity)),this.currentPath.push([Ft,cr]),Ht(this,$,!1),jt(this,Mt,Jn).call(this),Ht(this,ut,()=>{jt(this,ht,Ns).call(this),_e(this,ut)&&window.requestAnimationFrame(_e(this,ut))}),window.requestAnimationFrame(_e(this,ut))},$t=new WeakSet,Qn=function(Ft,cr){const[br,fr]=this.currentPath.at(-1);if(this.currentPath.length>1&&Ft===br&&cr===fr)return;const Sr=this.currentPath;let Er=_e(this,ct);if(Sr.push([Ft,cr]),Ht(this,$,!0),Sr.length<=2){Er.moveTo(...Sr[0]),Er.lineTo(Ft,cr);return}Sr.length===3&&(Ht(this,ct,Er=new Path2D),Er.moveTo(...Sr[0])),jt(this,gt,Os).call(this,Er,...Sr.at(-3),...Sr.at(-2),Ft,cr)},nr=new WeakSet,Ps=function(){if(this.currentPath.length===0)return;const Ft=this.currentPath.at(-1);_e(this,ct).lineTo(...Ft)},Et=new WeakSet,Rs=function(Ft,cr){Ht(this,ut,null),Ft=Math.min(Math.max(Ft,0),this.canvas.width),cr=Math.min(Math.max(cr,0),this.canvas.height),jt(this,$t,Qn).call(this,Ft,cr),jt(this,nr,Ps).call(this);let br;if(this.currentPath.length!==1)br=jt(this,St,Is).call(this);else{const ir=[Ft,cr];br=[[ir,ir.slice(),ir.slice(),ir]]}const fr=_e(this,ct),Sr=this.currentPath;this.currentPath=[],Ht(this,ct,new Path2D);const Er=()=>{this.allRawPaths.push(Sr),this.paths.push(br),this.bezierPath2D.push(fr),this.rebuild()},Dr=()=>{this.allRawPaths.pop(),this.paths.pop(),this.bezierPath2D.pop(),this.paths.length===0?this.remove():(this.canvas||(jt(this,Qt,yn).call(this),jt(this,er,_n).call(this)),jt(this,Lt,en).call(this))};this.addCommands({cmd:Er,undo:Dr,mustExec:!0})},ht=new WeakSet,Ns=function(){if(!_e(this,$))return;Ht(this,$,!1);const Ft=Math.ceil(this.thickness*this.parentScale),cr=this.currentPath.slice(-3),br=cr.map(Er=>Er[0]),fr=cr.map(Er=>Er[1]);Math.min(...br)-Ft,Math.max(...br)+Ft,Math.min(...fr)-Ft,Math.max(...fr)+Ft;const{ctx:Sr}=this;Sr.save(),Sr.clearRect(0,0,this.canvas.width,this.canvas.height);for(const Er of this.bezierPath2D)Sr.stroke(Er);Sr.stroke(_e(this,ct)),Sr.restore()},gt=new WeakSet,Os=function(Ft,cr,br,fr,Sr,Er,Dr){const ir=(cr+fr)/2,Lr=(br+Sr)/2,wr=(fr+Er)/2,Tt=(Sr+Dr)/2;Ft.bezierCurveTo(ir+2*(fr-ir)/3,Lr+2*(Sr-Lr)/3,wr+2*(fr-wr)/3,Tt+2*(Sr-Tt)/3,wr,Tt)},St=new WeakSet,Is=function(){const Ft=this.currentPath;if(Ft.length<=2)return[[Ft[0],Ft[0],Ft.at(-1),Ft.at(-1)]];const cr=[];let br,[fr,Sr]=Ft[0];for(br=1;br<Ft.length-2;br++){const[st,wt]=Ft[br],[Ct,Ot]=Ft[br+1],Dt=(st+Ct)/2,Gt=(wt+Ot)/2,rr=[fr+2*(st-fr)/3,Sr+2*(wt-Sr)/3],gr=[Dt+2*(st-Dt)/3,Gt+2*(wt-Gt)/3];cr.push([[fr,Sr],rr,gr,[Dt,Gt]]),[fr,Sr]=[Dt,Gt]}const[Er,Dr]=Ft[br],[ir,Lr]=Ft[br+1],wr=[fr+2*(Er-fr)/3,Sr+2*(Dr-Sr)/3],Tt=[ir+2*(Er-ir)/3,Lr+2*(Dr-Lr)/3];return cr.push([[fr,Sr],wr,Tt,[ir,Lr]]),cr},Rt=new WeakSet,qr=function(){if(this.isEmpty()){jt(this,Bt,wn).call(this);return}jt(this,Mt,Jn).call(this);const{canvas:Ft,ctx:cr}=this;cr.setTransform(1,0,0,1,0,0),cr.clearRect(0,0,Ft.width,Ft.height),jt(this,Bt,wn).call(this);for(const br of this.bezierPath2D)cr.stroke(br)},Wt=new WeakSet,Zn=function(Ft){this.canvas.removeEventListener("pointerleave",_e(this,nt)),this.canvas.removeEventListener("pointermove",_e(this,rt)),this.canvas.removeEventListener("pointerup",_e(this,it)),this.canvas.addEventListener("pointerdown",_e(this,ot)),setTimeout(()=>{this.canvas.removeEventListener("contextmenu",d.noContextMenu)},10),jt(this,Et,Rs).call(this,Ft.offsetX,Ft.offsetY),this.addToAnnotationStorage(),this.setInBackground()},Qt=new WeakSet,yn=function(){this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=0,this.canvas.className="inkEditorCanvas",o.AnnotationEditor._l10nPromise.get("editor_ink_canvas_aria_label").then(Ft=>{var cr;return(cr=this.canvas)==null?void 0:cr.setAttribute("aria-label",Ft)}),this.div.append(this.canvas),this.ctx=this.canvas.getContext("2d")},er=new WeakSet,_n=function(){Ht(this,et,new ResizeObserver(Ft=>{const cr=Ft[0].contentRect;cr.width&&cr.height&&this.setDimensions(cr.width,cr.height)})),_e(this,et).observe(this.div)},xr=new WeakSet,Zr=function(){if(!_e(this,j))return;const[Ft,cr]=this.parentDimensions;this.canvas.width=Math.ceil(this.width*Ft),this.canvas.height=Math.ceil(this.height*cr),jt(this,Bt,wn).call(this)},_r=new WeakSet,es=function(Ft,cr){const br=jt(this,Jt,bn).call(this),fr=(Ft-br)/_e(this,b),Sr=(cr-br)/_e(this,_);this.scaleFactor=Math.min(fr,Sr)},Bt=new WeakSet,wn=function(){const Ft=jt(this,Jt,bn).call(this)/2;this.ctx.setTransform(this.scaleFactor,0,0,this.scaleFactor,this.translationX*this.scaleFactor+Ft,this.translationY*this.scaleFactor+Ft)},Zt=new WeakSet,js=function(Ft){const cr=new Path2D;for(let br=0,fr=Ft.length;br<fr;br++){const[Sr,Er,Dr,ir]=Ft[br];br===0&&cr.moveTo(...Sr),cr.bezierCurveTo(Er[0],Er[1],Dr[0],Dr[1],ir[0],ir[1])}return cr},hr=new WeakSet,ts=function(Ft,cr,br){const[fr,Sr,Er,Dr]=cr;switch(br){case 0:for(let ir=0,Lr=Ft.length;ir<Lr;ir+=2)Ft[ir]+=fr,Ft[ir+1]=Dr-Ft[ir+1];break;case 90:for(let ir=0,Lr=Ft.length;ir<Lr;ir+=2){const wr=Ft[ir];Ft[ir]=Ft[ir+1]+fr,Ft[ir+1]=wr+Sr}break;case 180:for(let ir=0,Lr=Ft.length;ir<Lr;ir+=2)Ft[ir]=Er-Ft[ir],Ft[ir+1]+=Sr;break;case 270:for(let ir=0,Lr=Ft.length;ir<Lr;ir+=2){const wr=Ft[ir];Ft[ir]=Er-Ft[ir+1],Ft[ir+1]=Dr-wr}break;default:throw new Error("Invalid rotation")}return Ft},Pr=new WeakSet,Ls=function(Ft,cr,br){const[fr,Sr,Er,Dr]=cr;switch(br){case 0:for(let ir=0,Lr=Ft.length;ir<Lr;ir+=2)Ft[ir]-=fr,Ft[ir+1]=Dr-Ft[ir+1];break;case 90:for(let ir=0,Lr=Ft.length;ir<Lr;ir+=2){const wr=Ft[ir];Ft[ir]=Ft[ir+1]-Sr,Ft[ir+1]=wr-fr}break;case 180:for(let ir=0,Lr=Ft.length;ir<Lr;ir+=2)Ft[ir]=Er-Ft[ir],Ft[ir+1]-=Sr;break;case 270:for(let ir=0,Lr=Ft.length;ir<Lr;ir+=2){const wr=Ft[ir];Ft[ir]=Dr-Ft[ir+1],Ft[ir+1]=Er-wr}break;default:throw new Error("Invalid rotation")}return Ft},Nr=new WeakSet,Ms=function(Ft,cr,br,fr){var Lr,wr;const Sr=[],Er=this.thickness/2,Dr=Ft*cr+Er,ir=Ft*br+Er;for(const Tt of this.paths){const st=[],wt=[];for(let Ct=0,Ot=Tt.length;Ct<Ot;Ct++){const[Dt,Gt,rr,gr]=Tt[Ct],pr=Ft*Dt[0]+Dr,Rr=Ft*Dt[1]+ir,vr=Ft*Gt[0]+Dr,yr=Ft*Gt[1]+ir,Ar=Ft*rr[0]+Dr,Ir=Ft*rr[1]+ir,Mr=Ft*gr[0]+Dr,Fr=Ft*gr[1]+ir;Ct===0&&(st.push(pr,Rr),wt.push(pr,Rr)),st.push(vr,yr,Ar,Ir,Mr,Fr),wt.push(vr,yr),Ct===Ot-1&&wt.push(Mr,Fr)}Sr.push({bezier:jt(Lr=ar,hr,ts).call(Lr,st,fr,this.rotation),points:jt(wr=ar,hr,ts).call(wr,wt,fr,this.rotation)})}return Sr},Cr=new WeakSet,rs=function(){let Ft=1/0,cr=-1/0,br=1/0,fr=-1/0;for(const Sr of this.paths)for(const[Er,Dr,ir,Lr]of Sr){const wr=a.Util.bezierBoundingBox(...Er,...Dr,...ir,...Lr);Ft=Math.min(Ft,wr[0]),br=Math.min(br,wr[1]),cr=Math.max(cr,wr[2]),fr=Math.max(fr,wr[3])}return[Ft,br,cr,fr]},Jt=new WeakSet,bn=function(){return _e(this,tt)?Math.ceil(this.thickness*this.parentScale):0},Lt=new WeakSet,en=function(Ft=!1){if(this.isEmpty())return;if(!_e(this,tt)){jt(this,Rt,qr).call(this);return}const cr=jt(this,Cr,rs).call(this),br=jt(this,Jt,bn).call(this);Ht(this,b,Math.max(o.AnnotationEditor.MIN_SIZE,cr[2]-cr[0])),Ht(this,_,Math.max(o.AnnotationEditor.MIN_SIZE,cr[3]-cr[1]));const fr=Math.ceil(br+_e(this,b)*this.scaleFactor),Sr=Math.ceil(br+_e(this,_)*this.scaleFactor),[Er,Dr]=this.parentDimensions;this.width=fr/Er,this.height=Sr/Dr,this.setAspectRatio(fr,Sr);const ir=this.translationX,Lr=this.translationY;this.translationX=-cr[0],this.translationY=-cr[1],jt(this,xr,Zr).call(this),jt(this,Rt,qr).call(this),Ht(this,ft,fr),Ht(this,at,Sr),this.setDims(fr,Sr);const wr=Ft?br/this.scaleFactor/2:0;this.translate(ir-this.translationX-wr,Lr-this.translationY-wr)},Pt(ar,Zt),Pt(ar,hr),Pt(ar,Pr),Br(ar,"_defaultColor",null),Br(ar,"_defaultOpacity",1),Br(ar,"_defaultThickness",1),Br(ar,"_type","ink");let h=ar;e.InkEditor=h},(s,e,i)=>{var h,_,b,rt,nt,it,ot,ct,tt,$,j,ln,ft,cn,ut,Sn,mt,ns,bt,Ds,Nt,Fs,xt,ss,qt,En,At,Us;Object.defineProperty(e,"__esModule",{value:!0}),e.StampEditor=void 0;var a=i(1),o=i(4),c=i(6),d=i(29);const Kt=class Kt extends o.AnnotationEditor{constructor(Et){super({...Et,name:"stampEditor"});Pt(this,j);Pt(this,ft);Pt(this,ut);Pt(this,mt);Pt(this,bt);Pt(this,Nt);Pt(this,xt);Pt(this,qt);Pt(this,At);Pt(this,h,null);Pt(this,_,null);Pt(this,b,null);Pt(this,rt,null);Pt(this,nt,null);Pt(this,it,null);Pt(this,ot,null);Pt(this,ct,null);Pt(this,tt,!1);Pt(this,$,!1);Ht(this,rt,Et.bitmapUrl),Ht(this,nt,Et.bitmapFile)}static initialize(Et){o.AnnotationEditor.initialize(Et)}static get supportedTypes(){const Et=["apng","avif","bmp","gif","jpeg","png","svg+xml","webp","x-icon"];return(0,a.shadow)(this,"supportedTypes",Et.map(lt=>`image/${lt}`))}static get supportedTypesStr(){return(0,a.shadow)(this,"supportedTypesStr",this.supportedTypes.join(","))}static isHandlingMimeForPasting(Et){return this.supportedTypes.includes(Et)}static paste(Et,lt){lt.pasteEditor(a.AnnotationEditorType.STAMP,{bitmapFile:Et.getAsFile()})}remove(){var Et,lt;_e(this,_)&&(Ht(this,h,null),this._uiManager.imageManager.deleteId(_e(this,_)),(Et=_e(this,it))==null||Et.remove(),Ht(this,it,null),(lt=_e(this,ot))==null||lt.disconnect(),Ht(this,ot,null)),super.remove()}rebuild(){if(!this.parent){_e(this,_)&&jt(this,ut,Sn).call(this);return}super.rebuild(),this.div!==null&&(_e(this,_)&&jt(this,ut,Sn).call(this),this.isAttachedToDOM||this.parent.add(this))}onceAdded(){this._isDraggable=!0,this.div.focus()}isEmpty(){return!(_e(this,b)||_e(this,h)||_e(this,rt)||_e(this,nt))}get isResizable(){return!0}render(){if(this.div)return this.div;let Et,lt;if(this.width&&(Et=this.x,lt=this.y),super.render(),this.div.hidden=!0,_e(this,h)?jt(this,mt,ns).call(this):jt(this,ut,Sn).call(this),this.width){const[ht,dt]=this.parentDimensions;this.setAt(Et*ht,lt*dt,this.width*ht,this.height*dt)}return this.div}static deserialize(Et,lt,ht){if(Et instanceof d.StampAnnotationElement)return null;const dt=super.deserialize(Et,lt,ht),{rect:gt,bitmapUrl:vt,bitmapId:St,isSvg:kt,accessibilityData:Rt}=Et;St&&ht.imageManager.isValidId(St)?Ht(dt,_,St):Ht(dt,rt,vt),Ht(dt,tt,kt);const[Vt,Wt]=dt.pageDimensions;return dt.width=(gt[2]-gt[0])/Vt,dt.height=(gt[3]-gt[1])/Wt,Rt&&(dt.altTextData=Rt),dt}serialize(Et=!1,lt=null){if(this.isEmpty())return null;const ht={annotationType:a.AnnotationEditorType.STAMP,bitmapId:_e(this,_),pageIndex:this.pageIndex,rect:this.getRect(0,0),rotation:this.rotation,isSvg:_e(this,tt),structTreeParentId:this._structTreeParentId};if(Et)return ht.bitmapUrl=jt(this,qt,En).call(this,!0),ht.accessibilityData=this.altTextData,ht;const{decorative:dt,altText:gt}=this.altTextData;if(!dt&&gt&&(ht.accessibilityData={type:"Figure",alt:gt}),lt===null)return ht;lt.stamps||(lt.stamps=new Map);const vt=_e(this,tt)?(ht.rect[2]-ht.rect[0])*(ht.rect[3]-ht.rect[1]):null;if(!lt.stamps.has(_e(this,_)))lt.stamps.set(_e(this,_),{area:vt,serialized:ht}),ht.bitmap=jt(this,qt,En).call(this,!1);else if(_e(this,tt)){const St=lt.stamps.get(_e(this,_));vt>St.area&&(St.area=vt,St.serialized.bitmap.close(),St.serialized.bitmap=jt(this,qt,En).call(this,!1))}return ht}};h=new WeakMap,_=new WeakMap,b=new WeakMap,rt=new WeakMap,nt=new WeakMap,it=new WeakMap,ot=new WeakMap,ct=new WeakMap,tt=new WeakMap,$=new WeakMap,j=new WeakSet,ln=function(Et,lt=!1){if(!Et){this.remove();return}Ht(this,h,Et.bitmap),lt||(Ht(this,_,Et.id),Ht(this,tt,Et.isSvg)),jt(this,mt,ns).call(this)},ft=new WeakSet,cn=function(){Ht(this,b,null),this._uiManager.enableWaiting(!1),_e(this,it)&&this.div.focus()},ut=new WeakSet,Sn=function(){if(_e(this,_)){this._uiManager.enableWaiting(!0),this._uiManager.imageManager.getFromId(_e(this,_)).then(lt=>jt(this,j,ln).call(this,lt,!0)).finally(()=>jt(this,ft,cn).call(this));return}if(_e(this,rt)){const lt=_e(this,rt);Ht(this,rt,null),this._uiManager.enableWaiting(!0),Ht(this,b,this._uiManager.imageManager.getFromUrl(lt).then(ht=>jt(this,j,ln).call(this,ht)).finally(()=>jt(this,ft,cn).call(this)));return}if(_e(this,nt)){const lt=_e(this,nt);Ht(this,nt,null),this._uiManager.enableWaiting(!0),Ht(this,b,this._uiManager.imageManager.getFromFile(lt).then(ht=>jt(this,j,ln).call(this,ht)).finally(()=>jt(this,ft,cn).call(this)));return}const Et=document.createElement("input");Et.type="file",Et.accept=Kt.supportedTypesStr,Ht(this,b,new Promise(lt=>{Et.addEventListener("change",async()=>{if(!Et.files||Et.files.length===0)this.remove();else{this._uiManager.enableWaiting(!0);const ht=await this._uiManager.imageManager.getFromFile(Et.files[0]);jt(this,j,ln).call(this,ht)}lt()}),Et.addEventListener("cancel",()=>{this.remove(),lt()})}).finally(()=>jt(this,ft,cn).call(this))),Et.click()},mt=new WeakSet,ns=function(){const{div:Et}=this;let{width:lt,height:ht}=_e(this,h);const[dt,gt]=this.pageDimensions,vt=.75;if(this.width)lt=this.width*dt,ht=this.height*gt;else if(lt>vt*dt||ht>vt*gt){const Vt=Math.min(vt*dt/lt,vt*gt/ht);lt*=Vt,ht*=Vt}const[St,kt]=this.parentDimensions;this.setDims(lt*St/dt,ht*kt/gt),this._uiManager.enableWaiting(!1);const Rt=Ht(this,it,document.createElement("canvas"));Et.append(Rt),Et.hidden=!1,jt(this,xt,ss).call(this,lt,ht),jt(this,At,Us).call(this),_e(this,$)||(this.parent.addUndoableEditor(this),Ht(this,$,!0)),this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",subtype:this.editorType,data:{action:"inserted_image"}}}),this.addAltTextButton()},bt=new WeakSet,Ds=function(Et,lt){var vt;const[ht,dt]=this.parentDimensions;this.width=Et/ht,this.height=lt/dt,this.setDims(Et,lt),(vt=this._initialOptions)!=null&&vt.isCentered?this.center():this.fixAndSetPosition(),this._initialOptions=null,_e(this,ct)!==null&&clearTimeout(_e(this,ct)),Ht(this,ct,setTimeout(()=>{Ht(this,ct,null),jt(this,xt,ss).call(this,Et,lt)},200))},Nt=new WeakSet,Fs=function(Et,lt){const{width:ht,height:dt}=_e(this,h);let gt=ht,vt=dt,St=_e(this,h);for(;gt>2*Et||vt>2*lt;){const kt=gt,Rt=vt;gt>2*Et&&(gt=gt>=16384?Math.floor(gt/2)-1:Math.ceil(gt/2)),vt>2*lt&&(vt=vt>=16384?Math.floor(vt/2)-1:Math.ceil(vt/2));const Vt=new OffscreenCanvas(gt,vt);Vt.getContext("2d").drawImage(St,0,0,kt,Rt,0,0,gt,vt),St=Vt.transferToImageBitmap()}return St},xt=new WeakSet,ss=function(Et,lt){Et=Math.ceil(Et),lt=Math.ceil(lt);const ht=_e(this,it);if(!ht||ht.width===Et&&ht.height===lt)return;ht.width=Et,ht.height=lt;const dt=_e(this,tt)?_e(this,h):jt(this,Nt,Fs).call(this,Et,lt),gt=ht.getContext("2d");gt.filter=this._uiManager.hcmFilter,gt.drawImage(dt,0,0,dt.width,dt.height,0,0,Et,lt)},qt=new WeakSet,En=function(Et){if(Et){if(_e(this,tt)){const dt=this._uiManager.imageManager.getSvgUrl(_e(this,_));if(dt)return dt}const lt=document.createElement("canvas");return{width:lt.width,height:lt.height}=_e(this,h),lt.getContext("2d").drawImage(_e(this,h),0,0),lt.toDataURL()}if(_e(this,tt)){const[lt,ht]=this.pageDimensions,dt=Math.round(this.width*lt*c.PixelsPerInch.PDF_TO_CSS_UNITS),gt=Math.round(this.height*ht*c.PixelsPerInch.PDF_TO_CSS_UNITS),vt=new OffscreenCanvas(dt,gt);return vt.getContext("2d").drawImage(_e(this,h),0,0,_e(this,h).width,_e(this,h).height,0,0,dt,gt),vt.transferToImageBitmap()}return structuredClone(_e(this,h))},At=new WeakSet,Us=function(){Ht(this,ot,new ResizeObserver(Et=>{const lt=Et[0].contentRect;lt.width&&lt.height&&jt(this,bt,Ds).call(this,lt.width,lt.height)})),_e(this,ot).observe(this.div)},Br(Kt,"_type","stamp");let g=Kt;e.StampEditor=g}],__webpack_module_cache__={};function __w_pdfjs_require__(s){var e=__webpack_module_cache__[s];if(e!==void 0)return e.exports;var i=__webpack_module_cache__[s]={exports:{}};return __webpack_modules__[s](i,i.exports,__w_pdfjs_require__),i.exports}var __webpack_exports__={};return(()=>{var s=__webpack_exports__;Object.defineProperty(s,"__esModule",{value:!0}),Object.defineProperty(s,"AbortException",{enumerable:!0,get:function(){return e.AbortException}}),Object.defineProperty(s,"AnnotationEditorLayer",{enumerable:!0,get:function(){return c.AnnotationEditorLayer}}),Object.defineProperty(s,"AnnotationEditorParamsType",{enumerable:!0,get:function(){return e.AnnotationEditorParamsType}}),Object.defineProperty(s,"AnnotationEditorType",{enumerable:!0,get:function(){return e.AnnotationEditorType}}),Object.defineProperty(s,"AnnotationEditorUIManager",{enumerable:!0,get:function(){return d.AnnotationEditorUIManager}}),Object.defineProperty(s,"AnnotationLayer",{enumerable:!0,get:function(){return g.AnnotationLayer}}),Object.defineProperty(s,"AnnotationMode",{enumerable:!0,get:function(){return e.AnnotationMode}}),Object.defineProperty(s,"CMapCompressionType",{enumerable:!0,get:function(){return e.CMapCompressionType}}),Object.defineProperty(s,"DOMSVGFactory",{enumerable:!0,get:function(){return a.DOMSVGFactory}}),Object.defineProperty(s,"FeatureTest",{enumerable:!0,get:function(){return e.FeatureTest}}),Object.defineProperty(s,"GlobalWorkerOptions",{enumerable:!0,get:function(){return h.GlobalWorkerOptions}}),Object.defineProperty(s,"ImageKind",{enumerable:!0,get:function(){return e.ImageKind}}),Object.defineProperty(s,"InvalidPDFException",{enumerable:!0,get:function(){return e.InvalidPDFException}}),Object.defineProperty(s,"MissingPDFException",{enumerable:!0,get:function(){return e.MissingPDFException}}),Object.defineProperty(s,"OPS",{enumerable:!0,get:function(){return e.OPS}}),Object.defineProperty(s,"PDFDataRangeTransport",{enumerable:!0,get:function(){return i.PDFDataRangeTransport}}),Object.defineProperty(s,"PDFDateString",{enumerable:!0,get:function(){return a.PDFDateString}}),Object.defineProperty(s,"PDFWorker",{enumerable:!0,get:function(){return i.PDFWorker}}),Object.defineProperty(s,"PasswordResponses",{enumerable:!0,get:function(){return e.PasswordResponses}}),Object.defineProperty(s,"PermissionFlag",{enumerable:!0,get:function(){return e.PermissionFlag}}),Object.defineProperty(s,"PixelsPerInch",{enumerable:!0,get:function(){return a.PixelsPerInch}}),Object.defineProperty(s,"PromiseCapability",{enumerable:!0,get:function(){return e.PromiseCapability}}),Object.defineProperty(s,"RenderingCancelledException",{enumerable:!0,get:function(){return a.RenderingCancelledException}}),Object.defineProperty(s,"SVGGraphics",{enumerable:!0,get:function(){return i.SVGGraphics}}),Object.defineProperty(s,"UnexpectedResponseException",{enumerable:!0,get:function(){return e.UnexpectedResponseException}}),Object.defineProperty(s,"Util",{enumerable:!0,get:function(){return e.Util}}),Object.defineProperty(s,"VerbosityLevel",{enumerable:!0,get:function(){return e.VerbosityLevel}}),Object.defineProperty(s,"XfaLayer",{enumerable:!0,get:function(){return _.XfaLayer}}),Object.defineProperty(s,"build",{enumerable:!0,get:function(){return i.build}}),Object.defineProperty(s,"createValidAbsoluteUrl",{enumerable:!0,get:function(){return e.createValidAbsoluteUrl}}),Object.defineProperty(s,"getDocument",{enumerable:!0,get:function(){return i.getDocument}}),Object.defineProperty(s,"getFilenameFromUrl",{enumerable:!0,get:function(){return a.getFilenameFromUrl}}),Object.defineProperty(s,"getPdfFilenameFromUrl",{enumerable:!0,get:function(){return a.getPdfFilenameFromUrl}}),Object.defineProperty(s,"getXfaPageViewport",{enumerable:!0,get:function(){return a.getXfaPageViewport}}),Object.defineProperty(s,"isDataScheme",{enumerable:!0,get:function(){return a.isDataScheme}}),Object.defineProperty(s,"isPdfFile",{enumerable:!0,get:function(){return a.isPdfFile}}),Object.defineProperty(s,"loadScript",{enumerable:!0,get:function(){return a.loadScript}}),Object.defineProperty(s,"noContextMenu",{enumerable:!0,get:function(){return a.noContextMenu}}),Object.defineProperty(s,"normalizeUnicode",{enumerable:!0,get:function(){return e.normalizeUnicode}}),Object.defineProperty(s,"renderTextLayer",{enumerable:!0,get:function(){return o.renderTextLayer}}),Object.defineProperty(s,"setLayerDimensions",{enumerable:!0,get:function(){return a.setLayerDimensions}}),Object.defineProperty(s,"shadow",{enumerable:!0,get:function(){return e.shadow}}),Object.defineProperty(s,"updateTextLayer",{enumerable:!0,get:function(){return o.updateTextLayer}}),Object.defineProperty(s,"version",{enumerable:!0,get:function(){return i.version}});var e=__w_pdfjs_require__(1),i=__w_pdfjs_require__(2),a=__w_pdfjs_require__(6),o=__w_pdfjs_require__(26),c=__w_pdfjs_require__(27),d=__w_pdfjs_require__(5),g=__w_pdfjs_require__(29),h=__w_pdfjs_require__(14),_=__w_pdfjs_require__(32)})(),__webpack_exports__})())})(pdf);var pdfExports=pdf.exports;try{pdfExports.GlobalWorkerOptions.workerSrc="//cdnjs.cloudflare.com/ajax/libs/pdf.js/3.11.174/pdf.worker.min.js"}catch(s){console.error("PDF.js worker setup error:",s)}const checkStorageSpace=()=>{try{const s="storage-test";localStorage.setItem(s,s),localStorage.removeItem(s);let e=0;for(let o in localStorage)localStorage.hasOwnProperty(o)&&(e+=localStorage[o].length);const i=(e/(1024*1024)).toFixed(2),a=(5-i).toFixed(2);return{available:a>.5,usedMB:i,availableMB:a,needsCleanup:i>4}}catch{return{available:!1,usedMB:"0",availableMB:"0",needsCleanup:!0}}},convertAllPDFPagesToImages=async s=>{try{const e=await s.arrayBuffer(),i=await pdfExports.getDocument(e).promise,a=i.numPages,o=[],c=Math.min(a,8);for(let d=1;d<=c;d++){const g=await i.getPage(d),h=1,_=g.getViewport({scale:h}),b=document.createElement("canvas"),rt=b.getContext("2d");b.height=_.height,b.width=_.width;const nt={canvasContext:rt,viewport:_};await g.render(nt).promise,o.push({pageNumber:d,imageUrl:b.toDataURL("image/jpeg",.4),width:_.width,height:_.height})}return{pages:o,totalPages:c,actualPages:a,previewImage:o[0].imageUrl,width:o[0].width,height:o[0].height}}catch(e){throw console.error("Error converting PDF pages to images:",e),e}},savePDFFile=s=>new Promise((e,i)=>{const a=new FileReader;a.onload=o=>{e(o.target.result)},a.onerror=i,a.readAsDataURL(s)}),estimateStorageSize=s=>{try{const e=JSON.stringify(s),i=new Blob([e]).size,a=(i/(1024*1024)).toFixed(2);return{bytes:i,mb:a}}catch(e){return console.error("Error estimating size:",e),{bytes:0,mb:"0.00"}}},cleanupOldNewspapers=()=>{try{const s=JSON.parse(localStorage.getItem("newspapers_v2")||"[]");if(s.length>3){const i=s.sort((a,o)=>new Date(o.date)-new Date(a.date)).slice(0,3);return localStorage.setItem("newspapers_v2",JSON.stringify(i)),s.length-i.length}return 0}catch(s){return console.error("Error cleaning up:",s),0}},AdminUploadPDF=({onUploadSuccess:s})=>{const[e,i]=reactExports.useState(!1),[a,o]=reactExports.useState(!1),[c,d]=reactExports.useState(null),[g,h]=reactExports.useState(0),[_,b]=reactExports.useState(""),rt=async j=>{if(!j||j.type!=="application/pdf"){alert("  PDF    ");return}i(!0);try{const[et,ft]=await Promise.all([convertAllPDFPagesToImages(j),savePDFFile(j)]),at={id:Date.now().toString(),name:j.name,date:new Date().toISOString(),pdfData:ft,pages:et.pages,totalPages:et.totalPages,actualPages:et.actualPages,previewImage:et.previewImage,width:et.width,height:et.height,areas:[]},ut=estimateStorageSize(at);console.log(`Newspaper size estimate: ${ut.mb} MB`),d(at),h(0);let yt="PDF   !";et.actualPages>et.totalPages&&(yt+=`
: ${et.actualPages}  ${et.totalPages}   .`),alert(yt)}catch(et){console.error("Upload error:",et),alert("PDF    ")}finally{i(!1)}},nt=async()=>{var j;if(c){i(!0);try{if(!checkStorageSpace().available){const yt=cleanupOldNewspapers();if(yt>0){alert(`${yt}   .  .`),i(!1);return}alert("  !   ."),i(!1);return}const ft=document.getElementById("pdf-upload"),at=(j=ft==null?void 0:ft.files)==null?void 0:j[0],ut=await saveNewspaper(c,at);if(ut){s({...c,id:ut}),d(null),h(0),b("");const yt=await getStorageStatus();alert(`  ! (${yt.storageType})`)}else throw new Error("Failed to save newspaper")}catch(et){if(console.error("Save error:",et),et.name==="QuotaExceededError"){const ft=cleanupOldNewspapers();alert(` ! ${ft}   .  .`)}else alert("   !")}finally{i(!1)}}},it=()=>{g<c.totalPages-1&&h(g+1)},ot=()=>{g>0&&h(g-1)};return jsxs("div",{className:"bg-white rounded-lg shadow-md p-4 sm:p-6",children:[jsx("h2",{className:"text-lg sm:text-xl font-semibold text-newspaper-blue mb-3 sm:mb-4",children:"PDF  "}),c?jsxs("div",{children:[jsxs("div",{className:"mb-3 sm:mb-4",children:[jsxs("div",{className:"flex flex-col sm:flex-row sm:justify-between sm:items-center gap-2 mb-2",children:[jsx("h3",{className:"text-base sm:text-lg font-medium text-gray-900 truncate",children:c.name}),jsxs("div",{className:"text-xs sm:text-sm text-gray-600",children:[" ",g+1," / ",c.totalPages,c.actualPages>c.totalPages&&jsxs("span",{className:"text-orange-600 ml-2",children:["(: ",c.actualPages,")"]})]})]}),jsxs("div",{className:"text-xs text-gray-500",children:[" : ",estimateStorageSize(c).mb," MB",parseFloat(estimateStorageSize(c).mb)>2&&jsx("span",{className:"text-orange-600 ml-2",children:"  "})]})]}),jsx("div",{className:"border rounded-lg p-2 sm:p-4 mb-3 sm:mb-4",children:jsx("img",{src:c.pages[g].imageUrl,alt:`Page ${g+1}`,className:"w-full h-auto mx-auto",style:{maxHeight:"400px"}})}),jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-center gap-3",children:[jsx("button",{onClick:ot,disabled:g===0,className:"w-full sm:w-auto bg-gray-500 text-white px-3 sm:px-4 py-2 rounded-lg hover:bg-gray-600 disabled:opacity-50 disabled:cursor-not-allowed text-sm sm:text-base",children:"  "}),jsxs("div",{className:"flex flex-col sm:flex-row gap-2 w-full sm:w-auto",children:[jsx("button",{onClick:()=>{d(null),h(0),b("")},className:"bg-gray-500 text-white px-3 sm:px-4 py-2 rounded-lg hover:bg-gray-600 text-sm sm:text-base",children:""}),jsx("button",{onClick:nt,disabled:e,className:"bg-green-600 text-white px-3 sm:px-4 py-2 rounded-lg hover:bg-green-700 disabled:opacity-50 disabled:cursor-not-allowed text-sm sm:text-base",children:e?"...":""})]}),jsx("button",{onClick:it,disabled:g===c.totalPages-1,className:"w-full sm:w-auto bg-gray-500 text-white px-3 sm:px-4 py-2 rounded-lg hover:bg-gray-600 disabled:opacity-50 disabled:cursor-not-allowed text-sm sm:text-base",children:"  "})]})]}):jsx("div",{className:`border-2 border-dashed rounded-lg p-4 sm:p-8 text-center transition-colors cursor-pointer ${a?"border-newspaper-blue bg-blue-50":"border-gray-300 hover:border-newspaper-blue active:border-newspaper-blue"}`,onDrop:j=>{j.preventDefault(),o(!1);const et=j.dataTransfer.files[0];rt(et)},onDragOver:j=>{j.preventDefault(),o(!0)},onDragLeave:()=>o(!1),onClick:()=>{document.getElementById("pdf-upload").click()},onTouchStart:()=>o(!0),onTouchEnd:()=>o(!1),children:e?jsxs("div",{className:"flex flex-col items-center",children:[jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-newspaper-blue mb-4"}),jsx("p",{className:"text-gray-600",children:"PDF ..."})]}):jsxs("div",{children:[jsx("div",{className:"mb-4",children:jsx("svg",{className:"mx-auto h-12 w-12 text-gray-400",stroke:"currentColor",fill:"none",viewBox:"0 0 48 48",children:jsx("path",{d:"M28 8H12a4 4 0 00-4 4v20m32-12v8m0 0v8a4 4 0 01-4 4H12a4 4 0 01-4-4v-4m32-4l-3.172-3.172a4 4 0 00-5.656 0L28 28M8 32l9.172-9.172a4 4 0 015.656 0L28 28m0 0l4 4m4-24h8m-4-4v8m-12 4h.02",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})}),jsx("p",{className:"text-base sm:text-lg text-gray-600 mb-2",children:"PDF     "}),jsx("p",{className:"text-sm text-gray-500 mb-4",children:"   "}),jsx("input",{type:"file",accept:"application/pdf,.pdf",onChange:j=>{const et=j.target.files[0];rt(et)},className:"hidden",id:"pdf-upload"}),jsx("div",{className:"bg-newspaper-blue text-white px-4 sm:px-6 py-2 sm:py-3 rounded-lg cursor-pointer hover:bg-blue-700 active:bg-blue-800 transition-colors inline-block text-sm sm:text-base",children:"  "})]})})]})},PDFMapper=({newspaper:s,onNavigateToManage:e,onAreasSaved:i})=>{const[a,o]=reactExports.useState([]),[c,d]=reactExports.useState(!1),[g,h]=reactExports.useState(null),[_,b]=reactExports.useState(0),[rt,nt]=reactExports.useState(null),[it,ot]=reactExports.useState(!1),ct=reactExports.useRef(null);reactExports.useEffect(()=>{(async()=>{if(s)try{const yt=await getClickableAreas(s.id);o(yt)}catch(yt){console.error("Error loading areas:",yt),o([])}})()},[s]);const tt=ut=>{const yt=ct.current.getBoundingClientRect(),mt=ut.clientX-yt.left,pt=ut.clientY-yt.top;d(!0),h({x:mt,y:pt,width:0,height:0})},$=ut=>{if(!c)return;const yt=ct.current.getBoundingClientRect(),mt=ut.clientX-yt.left,pt=ut.clientY-yt.top;h(bt=>({...bt,width:mt-bt.x,height:pt-bt.y}))},j=()=>{if(!(!c||!g)){if(Math.abs(g.width)>20&&Math.abs(g.height)>20){const ut={id:Date.now().toString(),...g,title:` ${a.length+1}`,content:"    .",imageUrl:"",pageNumber:_+1};o(yt=>[...yt,ut])}h(null),d(!1)}},et=ut=>{const yt=a.filter(mt=>mt.id!==ut);o(yt)},ft=ut=>{nt(ut)},at=async()=>{ot(!0),console.log("Saving areas for newspaper:",s.id,"Areas count:",a.length);try{await saveClickableAreas(s.id,a)?(alert("   !"),i&&i()):alert("   !")}catch(ut){console.error("Error saving areas:",ut),alert("   !")}finally{ot(!1)}};return jsxs("div",{className:"bg-white rounded-lg shadow-md p-4 sm:p-6",children:[jsx("h2",{className:"text-lg sm:text-xl font-semibold text-newspaper-blue mb-3 sm:mb-4",children:"    "}),jsxs("div",{className:"relative inline-block w-full",children:[jsx("img",{ref:ct,src:s.pages?s.pages[_].imageUrl:s.previewImage,alt:`Newspaper page ${_+1}`,className:"w-full h-auto border border-gray-300 cursor-crosshair",onMouseDown:tt,onMouseMove:$,onMouseUp:j,draggable:!1}),a.filter(ut=>ut.pageNumber===_+1).map(ut=>jsxs("div",{className:`clickable-area group cursor-pointer ${rt&&rt.id===ut.id?"ring-2 ring-blue-500":""}`,style:{left:ut.x,top:ut.y,width:Math.abs(ut.width),height:Math.abs(ut.height)},onClick:()=>ft(ut),children:[jsx("button",{onClick:yt=>{yt.stopPropagation(),et(ut.id)},className:"absolute -top-2 -right-2 bg-newspaper-red text-white rounded-full w-6 h-6 text-xs opacity-0 group-hover:opacity-100 transition-opacity z-10",children:""}),ut.title&&jsx("div",{className:"absolute -bottom-6 left-0 bg-black bg-opacity-75 text-white text-xs px-2 py-1 rounded opacity-0 group-hover:opacity-100 transition-opacity max-w-40 truncate",children:ut.title})]},ut.id)),g&&jsx("div",{className:"drawing-area",style:{left:g.x,top:g.y,width:Math.abs(g.width),height:Math.abs(g.height)}})]}),s.pages&&s.totalPages>1&&jsxs("div",{className:"mt-3 sm:mt-4 flex flex-col sm:flex-row justify-between items-center gap-3",children:[jsx("button",{onClick:()=>b(Math.max(0,_-1)),disabled:_===0,className:"w-full sm:w-auto bg-gray-500 text-white px-3 sm:px-4 py-2 rounded-lg hover:bg-gray-600 disabled:opacity-50 disabled:cursor-not-allowed text-sm sm:text-base",children:"  "}),jsxs("div",{className:"text-xs sm:text-sm text-gray-600",children:[" ",_+1," / ",s.totalPages]}),jsx("button",{onClick:()=>b(Math.min(s.totalPages-1,_+1)),disabled:_===s.totalPages-1,className:"w-full sm:w-auto bg-gray-500 text-white px-3 sm:px-4 py-2 rounded-lg hover:bg-gray-600 disabled:opacity-50 disabled:cursor-not-allowed text-sm sm:text-base",children:"  "})]}),jsxs("div",{className:"mt-3 sm:mt-4",children:[a.length>0&&jsxs("div",{className:"mb-4 p-4 bg-blue-50 border border-blue-200 rounded-lg",children:[jsx("h3",{className:"text-lg font-medium text-blue-900 mb-3",children:"  "}),jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[jsx("button",{onClick:at,disabled:it,className:"bg-green-600 text-white px-6 py-3 rounded-lg hover:bg-green-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors font-medium flex items-center justify-center gap-2",children:it?jsxs(Fragment,{children:[jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-2 border-white border-t-transparent"}),"..."]}):jsxs(Fragment,{children:[jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M5 13l4 4L19 7"})}),"  (",a.length,")"]})}),jsxs("button",{onClick:()=>e&&e(),className:"bg-newspaper-blue text-white px-6 py-3 rounded-lg hover:bg-blue-700 transition-colors font-medium flex items-center justify-center gap-2",children:[jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 19l9 2-9-18-9 18 9-2zm0 0v-8"})})," "]})]}),jsx("p",{className:"text-sm text-blue-700 mt-2",children:"  ,   "})]}),jsx("div",{className:"mb-3 sm:mb-4 flex flex-col sm:flex-row gap-2",children:jsxs("div",{className:"text-xs sm:text-sm text-gray-600 flex items-center",children:[" : ",a.filter(ut=>ut.pageNumber===_+1).length," "]})}),jsxs("div",{className:"text-xs sm:text-sm text-gray-600 space-y-1",children:[jsx("p",{children:"      "}),jsx("p",{children:"     "}),jsx("p",{children:"       "}),jsx("p",{children:"     "})]})]})]})},AdminLogin=({onLogin:s})=>{const[e,i]=reactExports.useState({username:"",password:""}),[a,o]=reactExports.useState("");return jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center px-4",children:jsx("div",{className:"max-w-md w-full",children:jsxs("div",{className:"bg-white rounded-lg shadow-md p-6 sm:p-8",children:[jsxs("div",{className:"text-center mb-6 sm:mb-8",children:[jsx("img",{src:"/logo.jpg",alt:"  Logo",className:"w-12 h-12 sm:w-16 sm:h-16 rounded-full object-cover mx-auto mb-3 sm:mb-4"}),jsx("h2",{className:"text-xl sm:text-2xl font-bold text-newspaper-blue",children:" "}),jsx("p",{className:"text-sm sm:text-base text-gray-600 mt-1 sm:mt-2",children:" "})]}),jsxs("form",{onSubmit:d=>{d.preventDefault(),e.username==="admin"&&e.password==="admin123"?(s(),o("")):o("    ")},children:[jsxs("div",{className:"mb-4",children:[jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:" "}),jsx("input",{type:"text",value:e.username,onChange:d=>i({...e,username:d.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-newspaper-blue",required:!0})]}),jsxs("div",{className:"mb-6",children:[jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:""}),jsx("input",{type:"password",value:e.password,onChange:d=>i({...e,password:d.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-newspaper-blue",required:!0})]}),a&&jsx("div",{className:"mb-4 p-3 bg-red-50 border border-red-200 rounded-md",children:jsx("p",{className:"text-red-700 text-sm",children:a})}),jsx("button",{type:"submit",className:"w-full bg-newspaper-blue text-white py-2 px-4 rounded-md hover:bg-blue-700 transition-colors font-medium",children:" "})]}),jsx("div",{className:"mt-6 p-3 bg-gray-50 rounded-md",children:jsx("p",{className:"text-xs text-gray-600 text-center",children:" : admin / admin123"})})]})})})},LocalStorageStatus=()=>{const[s,e]=reactExports.useState({available:!1,newspapers:0,storageUsed:"0.00"}),i=()=>{try{const a=getStorageInfo(),o=getNewspapers$1();e({available:a.available,newspapers:o.length,storageUsed:a.usedMB}),console.log("LocalStorage Status:",{available:a.available,newspapers:o.length,storageUsed:a.usedMB,newspaperData:o})}catch(a){console.error("Error checking localStorage status:",a),e({available:!1,newspapers:0,storageUsed:"0.00"})}};return reactExports.useEffect(()=>{i();const a=setInterval(i,5e3);return()=>clearInterval(a)},[]),jsxs("div",{className:"fixed bottom-4 right-4 bg-white border border-gray-300 rounded-lg p-3 shadow-lg text-xs z-50",children:[jsx("div",{className:"font-semibold text-gray-700 mb-1",children:"Storage Status"}),jsxs("div",{className:`text-${s.available?"green":"red"}-600`,children:[s.available?"":""," localStorage: ",s.available?"Available":"Not Available"]}),jsxs("div",{className:"text-gray-600",children:["Newspapers: ",s.newspapers]}),jsxs("div",{className:"text-gray-600",children:["Used: ",s.storageUsed," MB"]}),jsx("button",{onClick:i,className:"mt-1 text-blue-600 hover:text-blue-800 underline",children:"Refresh"})]})},FirebaseSetup=()=>{const[s,e]=reactExports.useState(!1),i=getStorageStatus();return jsxs("div",{className:"bg-white rounded-lg shadow-md p-6 mb-6",children:[jsxs("div",{className:"flex items-center justify-between mb-4",children:[jsxs("div",{children:[jsx("h3",{className:"text-lg font-semibold text-gray-900",children:" "}),jsxs("p",{className:"text-sm text-gray-600",children:[" : ",jsx("span",{className:"font-medium",children:i.storageType})]})]}),jsx("div",{className:`px-3 py-1 rounded-full text-sm font-medium ${i.usingFirebase?"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800"}`,children:i.usingFirebase?" ":" "})]}),!i.usingFirebase&&jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4 mb-4",children:jsxs("div",{className:"flex items-start",children:[jsx("div",{className:"flex-shrink-0",children:jsx("svg",{className:"h-5 w-5 text-yellow-400",viewBox:"0 0 20 20",fill:"currentColor",children:jsx("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})})}),jsxs("div",{className:"ml-3",children:[jsx("h4",{className:"text-sm font-medium text-yellow-800",children:"  "}),jsx("p",{className:"text-sm text-yellow-700 mt-1",children:"      .    Firebase  ."})]})]})}),i.usingFirebase&&jsx("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4 mb-4",children:jsxs("div",{className:"flex items-start",children:[jsx("div",{className:"flex-shrink-0",children:jsx("svg",{className:"h-5 w-5 text-green-400",viewBox:"0 0 20 20",fill:"currentColor",children:jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})})}),jsxs("div",{className:"ml-3",children:[jsx("h4",{className:"text-sm font-medium text-green-800",children:"Firebase "}),jsx("p",{className:"text-sm text-green-700 mt-1",children:"       ."})]})]})}),jsx("button",{onClick:()=>e(!s),className:"text-newspaper-blue hover:text-blue-700 text-sm font-medium",children:s?" ":"Firebase  "}),s&&jsxs("div",{className:"mt-4 p-4 bg-gray-50 rounded-lg",children:[jsx("h4",{className:"font-medium text-gray-900 mb-3",children:"Firebase   :"}),jsxs("ol",{className:"list-decimal list-inside space-y-2 text-sm text-gray-700",children:[jsxs("li",{children:[jsx("a",{href:"https://console.firebase.google.com",target:"_blank",rel:"noopener noreferrer",className:"text-newspaper-blue hover:underline",children:"Firebase Console"}),"      "]}),jsx("li",{children:"Authentication, Firestore Database,  Storage "}),jsx("li",{children:"Web    configuration "}),jsxs("li",{children:[jsx("code",{className:"bg-gray-200 px-2 py-1 rounded text-xs",children:"src/utils/firebase.js"}),"   Firebase config  "]}),jsx("li",{children:"Firestore    (/ )"}),jsx("li",{children:"Storage    (  )"})]}),jsxs("div",{className:"mt-4 p-3 bg-blue-50 rounded border border-blue-200",children:[jsx("h5",{className:"font-medium text-blue-900 mb-2",children:" Firestore :"}),jsx("pre",{className:"text-xs text-blue-800 overflow-x-auto",children:`rules_version = '2';
service cloud.firestore {
  match /databases/{database}/documents {
    match /{document=**} {
      allow read, write: if true;
    }
  }
}`})]}),jsxs("div",{className:"mt-4 p-3 bg-orange-50 rounded border border-orange-200",children:[jsx("h5",{className:"font-medium text-orange-900 mb-2",children:" Storage :"}),jsx("pre",{className:"text-xs text-orange-800 overflow-x-auto",children:`rules_version = '2';
service firebase.storage {
  match /b/{bucket}/o {
    match /{allPaths=**} {
      allow read, write: if true;
    }
  }
}`})]}),jsxs("div",{className:"mt-4 text-xs text-gray-600",children:[jsx("strong",{children:":"}),"    .     ."]})]})]})},AdminDashboard=()=>{const[s,e]=reactExports.useState(!1),[i,a]=reactExports.useState(null),[o,c]=reactExports.useState([]),[d,g]=reactExports.useState("upload"),[h,_]=reactExports.useState(null),b=async()=>{try{const tt=await getNewspapers();c(tt);const $=await getTodaysNewspaper();_($),tt.length>0&&!i&&a(tt[tt.length-1])}catch(tt){console.error("Error loading newspapers:",tt)}};reactExports.useEffect(()=>{b()},[]);const rt=async tt=>{console.log("Upload success callback called with:",tt),a(tt);try{const $=await getNewspapers();console.log("Refreshed newspapers from storage:",$.length),c($)}catch($){console.error("Error refreshing newspapers:",$)}g("mapper")},nt=tt=>{a(tt),g("mapper")},it=()=>{e(!0)},ot=()=>{e(!1)},ct=async tt=>{console.log("Publishing newspaper:",tt),console.log("Available newspapers:",o);try{const $=await publishToday(tt);if(console.log("Publish success:",$),$){_(o.find(et=>et.id===tt));const j=await getStorageStatus();alert(`  ! (${j.storageType})`)}else alert("  !")}catch($){console.error("Error publishing:",$),alert("  !")}};return s?jsxs("div",{className:"min-h-screen bg-gray-50",children:[jsx(LocalStorageStatus,{}),jsxs("div",{className:"max-w-7xl mx-auto px-4 py-6 sm:py-8",children:[jsx(FirebaseSetup,{}),jsxs("div",{className:"mb-6 sm:mb-8 flex flex-col sm:flex-row sm:justify-between sm:items-center gap-4",children:[jsxs("div",{children:[jsx("h1",{className:"text-2xl sm:text-3xl font-bold text-newspaper-blue mb-1 sm:mb-2",children:" "}),jsx("p",{className:"text-sm sm:text-base text-gray-600",children:"       "})]}),jsx("button",{onClick:ot,className:"bg-newspaper-red text-white px-3 sm:px-4 py-2 rounded-lg hover:bg-red-700 transition-colors text-sm sm:text-base self-start sm:self-auto",children:" "})]}),jsx("div",{className:"mb-4 sm:mb-6",children:jsx("div",{className:"border-b border-gray-200",children:jsxs("nav",{className:"-mb-px flex flex-wrap gap-2 sm:gap-0 sm:space-x-8",children:[jsx("button",{onClick:()=>g("upload"),className:`py-2 px-1 border-b-2 font-medium text-xs sm:text-sm whitespace-nowrap ${d==="upload"?"border-newspaper-blue text-newspaper-blue":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:"PDF "}),jsx("button",{onClick:()=>g("mapper"),className:`py-2 px-1 border-b-2 font-medium text-xs sm:text-sm whitespace-nowrap ${d==="mapper"?"border-newspaper-blue text-newspaper-blue":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,disabled:!i,children:" "}),jsx("button",{onClick:()=>g("manage"),className:`py-2 px-1 border-b-2 font-medium text-xs sm:text-sm whitespace-nowrap ${d==="manage"?"border-newspaper-blue text-newspaper-blue":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:" "}),jsx("button",{onClick:()=>g("data"),className:`py-2 px-1 border-b-2 font-medium text-xs sm:text-sm whitespace-nowrap ${d==="data"?"border-newspaper-blue text-newspaper-blue":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:" "})]})})}),jsxs("div",{className:"space-y-6",children:[d==="upload"&&jsx(AdminUploadPDF,{onUploadSuccess:rt}),d==="mapper"&&jsx("div",{children:i?jsx(PDFMapper,{newspaper:i,onNavigateToManage:()=>{b(),g("manage")},onAreasSaved:b}):jsxs("div",{className:"bg-white rounded-lg shadow-md p-8 text-center",children:[jsx("div",{className:"text-gray-400 mb-4",children:jsx("svg",{className:"mx-auto h-16 w-16",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})}),jsx("h3",{className:"text-xl font-semibold text-gray-700 mb-2",children:"  "}),jsx("p",{className:"text-gray-600",children:" PDF       "})]})}),d==="manage"&&jsx(ManageNewspapers,{newspapers:o,currentNewspaper:i,todaysNewspaper:h,onNewspaperSelect:nt,onPublishToday:ct,onEditNewspaper:tt=>{nt(tt),g("mapper")},onDeleteNewspaper:async tt=>{window.confirm("   ?")&&(await deleteNewspaper(tt),await b(),(i==null?void 0:i.id)===tt&&a(null),(h==null?void 0:h.id)===tt&&_(null))}}),d==="data"&&jsx(DataManagement,{})]})]})]}):jsx(AdminLogin,{onLogin:it})},ManageNewspapers=({newspapers:s,currentNewspaper:e,todaysNewspaper:i,onNewspaperSelect:a,onPublishToday:o,onEditNewspaper:c,onDeleteNewspaper:d})=>jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[jsx("h2",{className:"text-xl font-semibold text-newspaper-blue mb-4",children:" "}),s.length===0?jsxs("div",{className:"text-center py-8",children:[jsx("div",{className:"text-gray-400 mb-4",children:jsx("svg",{className:"mx-auto h-16 w-16",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19 20H5a2 2 0 01-2-2V6a2 2 0 012-2h10a2 2 0 012 2v1m2 13a2 2 0 01-2-2V7m2 13a2 2 0 002-2V9a2 2 0 00-2-2h-2m-4-3H9M7 16h6M7 8h6v4H7V8z"})})}),jsx("p",{className:"text-gray-600",children:"    "})]}):jsx("div",{className:"grid gap-4",children:s.map(g=>jsx("div",{className:`border rounded-lg p-4 cursor-pointer transition-colors ${(e==null?void 0:e.id)===g.id?"border-newspaper-blue bg-blue-50":"border-gray-200 hover:border-gray-300"}`,onClick:()=>a(g),children:jsxs("div",{className:"flex items-center space-x-4",children:[jsx("img",{src:g.previewImage,alt:g.name,className:"w-16 h-20 object-cover rounded border"}),jsxs("div",{className:"flex-1",children:[jsx("h3",{className:"font-semibold text-gray-900",children:g.name}),jsx("p",{className:"text-sm text-gray-600",children:new Date(g.date).toLocaleDateString("kn-IN")}),jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[": ",g.width,"  ",g.height]})]}),jsxs("div",{className:"flex items-center space-x-2",children:[(i==null?void 0:i.id)===g.id&&jsx("span",{className:"bg-green-600 text-white text-xs px-2 py-1 rounded",children:" "}),(e==null?void 0:e.id)===g.id&&jsx("span",{className:"bg-newspaper-blue text-white text-xs px-2 py-1 rounded",children:""}),jsx("button",{onClick:h=>{h.stopPropagation(),o(g.id)},className:"bg-green-600 text-white text-xs px-2 py-1 rounded hover:bg-green-700",children:""}),jsx("button",{onClick:h=>{h.stopPropagation(),c(g)},className:"text-newspaper-blue hover:text-blue-700 text-sm",children:""}),jsx("button",{onClick:h=>{h.stopPropagation(),d(g.id)},className:"text-red-600 hover:text-red-700 text-sm",children:""})]})]})},g.id))})]}),DataManagement=()=>{const[s,e]=reactExports.useState([]),[i,a]=reactExports.useState(!1);reactExports.useEffect(()=>{o()},[]);const o=async()=>{try{const g=await getNewspapers();e(g)}catch(g){console.error("Error loading newspapers:",g)}},c=async()=>{a(!0);try{const g=createBackup();alert(g?"   !":"   ")}catch{alert("   ")}finally{a(!1)}},d=async g=>{const h=g.target.files[0];if(h){a(!0);try{await restoreFromBackup(h),alert("   !   ."),window.location.reload()}catch{alert("   ")}finally{a(!1)}g.target.value=""}};return jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[jsx("h2",{className:"text-xl font-semibold text-newspaper-blue mb-6",children:" "}),jsxs("div",{className:"mb-6 p-4 bg-gray-50 rounded-lg",children:[jsx("h3",{className:"text-lg font-medium text-gray-900 mb-3",children:" "}),jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-3",children:[jsxs("div",{children:[jsxs("p",{className:"text-sm text-gray-600",children:[" : ",jsx("span",{className:"font-medium text-green-600",children:"Supabase Cloud Storage"})]}),jsxs("p",{className:"text-sm text-gray-600",children:[": ",jsx("span",{className:"font-medium",children:s.length})]})]}),jsxs("div",{children:[jsxs("p",{className:"text-sm text-gray-600",children:[" : ",jsx("span",{className:"font-medium",children:s.reduce((g,h)=>{var _;return g+(((_=h.areas)==null?void 0:_.length)||0)},0)})]}),jsxs("p",{className:"text-sm text-gray-600",children:[": ",jsx("span",{className:"font-medium text-green-600",children:""})]})]})]}),jsx("button",{onClick:o,className:"text-sm text-newspaper-blue hover:text-blue-700",children:" "})]}),jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6",children:[jsxs("div",{className:"p-4 border border-gray-200 rounded-lg",children:[jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:""}),jsx("p",{className:"text-sm text-gray-600 mb-4",children:"    "}),jsx("button",{onClick:c,disabled:i,className:"w-full bg-green-600 text-white py-2 px-4 rounded-lg hover:bg-green-700 disabled:opacity-50 transition-colors",children:i?"...":"  "})]}),jsxs("div",{className:"p-4 border border-gray-200 rounded-lg",children:[jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:""}),jsx("p",{className:"text-sm text-gray-600 mb-4",children:"    "}),jsx("input",{type:"file",accept:".json",onChange:d,disabled:i,className:"w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-lg file:border-0 file:text-sm file:font-medium file:bg-newspaper-blue file:text-white hover:file:bg-blue-700 disabled:opacity-50"})]})]}),jsxs("div",{className:"mb-6 p-4 border border-orange-200 rounded-lg bg-orange-50",children:[jsx("h3",{className:"text-lg font-medium text-orange-900 mb-2",children:" "}),jsx("p",{className:"text-sm text-orange-700 mb-4",children:"     "}),jsx("button",{onClick:()=>{if(window.confirm("10     ?")){const g=getNewspapers();if(g.length>10){const _=g.sort((b,rt)=>new Date(rt.date)-new Date(b.date)).slice(10);_.forEach(b=>deleteNewspaper(b.id)),alert(`${_.length}   `),o()}else alert("  ")}},disabled:i||dataStats.newspaperCount<=10,className:"bg-orange-600 text-white py-2 px-4 rounded-lg hover:bg-orange-700 disabled:opacity-50 transition-colors mr-3",children:"  "}),jsxs("span",{className:"text-sm text-gray-600",children:["(",Math.max(0,dataStats.newspaperCount-10)," )"]})]}),jsxs("div",{className:"mb-6 p-4 border border-blue-200 rounded-lg bg-blue-50",children:[jsx("h3",{className:"text-lg font-medium text-blue-900 mb-2",children:" "}),jsx("p",{className:"text-sm text-blue-700 mb-4",children:"localStorage  "}),jsxs("div",{className:"grid grid-cols-2 gap-2",children:[jsx("button",{onClick:()=>{const g=testLocalStorage();alert(g?"localStorage  !  .":"localStorage !")},className:"bg-blue-600 text-white py-2 px-3 rounded-lg hover:bg-blue-700 transition-colors text-sm",children:" "}),jsx("button",{onClick:()=>{const g=forceSaveTest();alert(g?"  !":" !"),o()},className:"bg-purple-600 text-white py-2 px-3 rounded-lg hover:bg-purple-700 transition-colors text-sm",children:" "}),jsx("button",{onClick:()=>{diagnoseLocalStorage(),alert(" !  .")},className:"bg-orange-600 text-white py-2 px-3 rounded-lg hover:bg-orange-700 transition-colors text-sm",children:""}),jsx("button",{onClick:()=>{if(window.confirm("   localStorage   ?")){const g=emergencyReset();alert(g?" !":" !"),o(),window.location.reload()}},className:"bg-red-600 text-white py-2 px-3 rounded-lg hover:bg-red-700 transition-colors text-sm",children:" "})]})]}),jsxs("div",{className:"p-4 border border-red-200 rounded-lg bg-red-50",children:[jsx("h3",{className:"text-lg font-medium text-red-900 mb-2",children:" "}),jsx("p",{className:"text-sm text-red-700 mb-4",children:"    .    ."}),jsx("button",{onClick:async()=>{if(window.confirm("   ?")){a(!0);try{for(const g of s)await deleteNewspaper(g.id);alert("  !"),await o()}catch{alert("   ")}finally{a(!1)}}},disabled:i,className:"bg-red-600 text-white py-2 px-4 rounded-lg hover:bg-red-700 disabled:opacity-50 transition-colors",children:i?"...":"  "})]})]})},NewsTab=()=>{const{newspaperId:s,areaId:e}=useParams(),i=useNavigate(),[a,o]=reactExports.useState(null),[c,d]=reactExports.useState(null),[g,h]=reactExports.useState(!0);reactExports.useEffect(()=>{(()=>{try{const nt=getNewspapers$1().find(ct=>ct.id===s);if(!nt){h(!1);return}const ot=getClickableAreas$1(s).find(ct=>ct.id===e);if(!ot){h(!1);return}o(nt),d(ot),h(!1)}catch(rt){console.error("Error loading news content:",rt),h(!1)}})()},[s,e]);const _=()=>{i("/today")};return g?jsx("div",{className:"min-h-screen bg-white flex items-center justify-center",children:jsxs("div",{className:"text-center",children:[jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-newspaper-blue mx-auto mb-4"}),jsx("p",{className:"text-gray-600",children:" ..."})]})}):!c||!a?jsx("div",{className:"min-h-screen bg-white flex items-center justify-center",children:jsxs("div",{className:"text-center",children:[jsx("h2",{className:"text-xl font-semibold text-gray-700 mb-2",children:" "}),jsx("button",{onClick:_,className:"bg-newspaper-blue text-white px-6 py-2 rounded-lg hover:bg-blue-700 transition-colors",children:" "})]})}):jsxs("div",{className:"min-h-screen bg-white",children:[jsx("div",{className:"bg-white shadow-sm border-b",children:jsx("div",{className:"max-w-4xl mx-auto px-4 py-4",children:jsxs("div",{className:"flex items-center justify-between",children:[jsxs("button",{onClick:_,className:"flex items-center text-newspaper-blue hover:text-blue-700 transition-colors",children:[jsx("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M15 19l-7-7 7-7"})})," "]}),jsx("div",{className:"text-sm text-gray-600",children:new Date(a.date).toLocaleDateString("kn-IN")})]})})}),jsxs("div",{className:"max-w-4xl mx-auto px-4 py-8",children:[jsx("div",{className:"bg-white rounded-lg shadow-md overflow-hidden",children:jsxs("div",{className:"p-6 md:p-8",children:[jsx("div",{className:"border-l-4 border-newspaper-red pl-4 mb-6",children:jsx("h1",{className:"text-2xl md:text-3xl font-bold text-gray-900 leading-tight",children:c.title||""})}),jsx("div",{className:"flex items-center text-sm text-gray-600 mb-6 pb-4 border-b border-gray-200",children:jsx("span",{children:" "})}),c.imageUrl&&jsx("div",{className:"mb-6",children:jsx("img",{src:c.imageUrl,alt:c.title,className:"w-full h-auto rounded-lg shadow-sm",onError:b=>{b.target.style.display="none"}})}),jsx("div",{className:"text-gray-800 leading-relaxed whitespace-pre-wrap text-lg",children:c.content||"   ."})]})}),jsx("div",{className:"mt-8 text-center",children:jsx("button",{onClick:_,className:"bg-newspaper-blue text-white px-8 py-3 rounded-lg hover:bg-blue-700 transition-colors font-medium",children:" "})})]})]})};function App(){return reactExports.useEffect(()=>{if(typeof Storage>"u"||!window.localStorage)console.error("localStorage is not available!"),alert(":   .   .");else{console.log(" localStorage is available");try{localStorage.setItem("test","working");const s=localStorage.getItem("test");localStorage.removeItem("test"),console.log(" localStorage test passed:",s==="working")}catch(s){console.error("localStorage test failed:",s)}}},[]),jsx(BrowserRouter,{children:jsx("div",{className:"App font-kannada",children:jsxs(Routes,{children:[jsx(Route,{path:"/news/:newspaperId/:areaId",element:jsx(NewsTab,{})}),jsx(Route,{path:"/*",element:jsxs(Fragment,{children:[jsx(Navbar,{}),jsxs(Routes,{children:[jsx(Route,{path:"/",element:jsx(Home,{})}),jsx(Route,{path:"/today",element:jsx(NewsPage,{})}),jsx(Route,{path:"/archive",element:jsx(Archive,{})}),jsx(Route,{path:"/admin",element:jsx(AdminDashboard,{})}),jsx(Route,{path:"/newspaper/:newspaperId",element:jsx(NewsPage,{})})]}),jsx(Footer,{})]})})]})})})}const index="";client.createRoot(document.getElementById("root")).render(jsx(React.StrictMode,{children:jsx(App,{})}));
